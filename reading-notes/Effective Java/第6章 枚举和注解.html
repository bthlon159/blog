<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.48" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://www.cxlsn.cn/reading-notes/Effective%20Java/%E7%AC%AC6%E7%AB%A0%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%B3%A8%E8%A7%A3.html"><meta property="og:site_name" content="MyBlog"><meta property="og:title" content="ç¬¬ 6 ç«  æšä¸¾å’Œæ³¨è§£"><meta property="og:type" content="article"><meta property="og:updated_time" content="2022-08-06T09:11:40.000Z"><meta property="og:locale" content="zh-CN"><meta property="article:modified_time" content="2022-08-06T09:11:40.000Z"><title>ç¬¬ 6 ç«  æšä¸¾å’Œæ³¨è§£ | MyBlog</title><meta name="description" content="MyBlog">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.09a441ee.css">
    <link rel="modulepreload" href="/assets/app.0d56c066.js"><link rel="modulepreload" href="/assets/ç¬¬6ç«  æšä¸¾å’Œæ³¨è§£.html.b0c192a2.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/ç¬¬6ç«  æšä¸¾å’Œæ³¨è§£.html.cb21ea0d.js"><link rel="prefetch" href="/assets/index.html.18f6ed2e.js"><link rel="prefetch" href="/assets/home.html.32fca429.js"><link rel="prefetch" href="/assets/slide.html.a293c482.js"><link rel="prefetch" href="/assets/index.html.bcf51f43.js"><link rel="prefetch" href="/assets/index.html.3768ee5f.js"><link rel="prefetch" href="/assets/index.html.b7a9ea16.js"><link rel="prefetch" href="/assets/ç¬¬10ç«  å¼‚å¸¸.html.33f3792f.js"><link rel="prefetch" href="/assets/ç¬¬11ç«  å¹¶å‘.html.41f89aa7.js"><link rel="prefetch" href="/assets/ç¬¬12ç«  åºåˆ—åŒ–.html.08c4c0cc.js"><link rel="prefetch" href="/assets/ç¬¬2ç«  åˆ›å»ºå’Œé”€æ¯å¯¹è±¡.html.1b6f55e3.js"><link rel="prefetch" href="/assets/ç¬¬3ç«  å¯¹äºæ‰€æœ‰å¯¹è±¡éƒ½é€šç”¨çš„æ–¹æ³•.html.e81922f0.js"><link rel="prefetch" href="/assets/ç¬¬4ç«  ç±»å’Œæ¥å£.html.bbf64366.js"><link rel="prefetch" href="/assets/ç¬¬5ç«  æ³›å‹.html.053306ed.js"><link rel="prefetch" href="/assets/ç¬¬7ç«  Lambdaå’ŒStream.html.664c81b8.js"><link rel="prefetch" href="/assets/ç¬¬8ç«  æ–¹æ³•.html.bfc52ab1.js"><link rel="prefetch" href="/assets/ç¬¬9ç«  é€šç”¨ç¼–ç¨‹.html.6a1d88a2.js"><link rel="prefetch" href="/assets/index.html.153be5a1.js"><link rel="prefetch" href="/assets/index.html.4b079bc8.js"><link rel="prefetch" href="/assets/ç¬¬1ç« Javaå¤šçº¿ç¨‹æŠ€èƒ½.html.f4c43a60.js"><link rel="prefetch" href="/assets/ç¬¬2ç« å¯¹è±¡åŠå˜é‡çš„å¹¶å‘è®¿é—®.html.24971a2d.js"><link rel="prefetch" href="/assets/ç¬¬3ç« çº¿ç¨‹é—´é€šä¿¡.html.e9963ba8.js"><link rel="prefetch" href="/assets/ç¬¬4ç« é”çš„ä½¿ç”¨.html.bc309d92.js"><link rel="prefetch" href="/assets/ç¬¬5ç« å®šæ—¶å™¨.html.aaf2b6ee.js"><link rel="prefetch" href="/assets/ç¬¬6ç« å•ä¾‹æ¨¡å¼ä¸å¤šçº¿ç¨‹.html.a87eb20f.js"><link rel="prefetch" href="/assets/ç¬¬7ç« æ‹¾é—å¢è¡¥.html.2cbb6898.js"><link rel="prefetch" href="/assets/ç¬¬8ç« å¹¶å‘é›†åˆæ¡†æ¶.html.1739cc6b.js"><link rel="prefetch" href="/assets/ç¬¬9ç« çº¿ç¨‹æ± ThreadPoolExecutorçš„ä½¿ç”¨.html.186199c8.js"><link rel="prefetch" href="/assets/index.html.62274579.js"><link rel="prefetch" href="/assets/ç¬¬1ç« å¤šçº¿ç¨‹åŸºç¡€.html.afd475cd.js"><link rel="prefetch" href="/assets/ç¬¬2ç« Atomicç±».html.06be1f5d.js"><link rel="prefetch" href="/assets/ç¬¬3ç« Lockä¸Condition.html.ab9d71ca.js"><link rel="prefetch" href="/assets/ç¬¬4ç« åŒæ­¥å·¥å…·ç±».html.c3382339.js"><link rel="prefetch" href="/assets/ç¬¬5ç« å¹¶å‘å®¹å™¨.html.ef80cb1d.js"><link rel="prefetch" href="/assets/ç¬¬6ç« çº¿ç¨‹æ± ä¸Future.html.e4a6ecca.js"><link rel="prefetch" href="/assets/ç¬¬7ç« ForkJoinPool.html.98e49c17.js"><link rel="prefetch" href="/assets/ç¬¬8ç« CompletableFuture.html.f7a413b4.js"><link rel="prefetch" href="/assets/index.html.12f0ee52.js"><link rel="prefetch" href="/assets/ç¬¬10ç« Javaå¹¶å‘åŒ…ä¸­çº¿ç¨‹åŒæ­¥å™¨åŸç†å‰–æ.html.b977fee1.js"><link rel="prefetch" href="/assets/ç¬¬11ç« å¹¶å‘ç¼–ç¨‹å®è·µ.html.623c5cbb.js"><link rel="prefetch" href="/assets/ç¬¬1ç« å¹¶å‘ç¼–ç¨‹çº¿ç¨‹åŸºç¡€.html.3967f815.js"><link rel="prefetch" href="/assets/ç¬¬2ç« å¹¶å‘ç¼–ç¨‹çš„å…¶ä»–åŸºç¡€çŸ¥è¯†.html.1c7f7072.js"><link rel="prefetch" href="/assets/ç¬¬3ç« Javaå¹¶å‘åŒ…ä¸­ThreadLocalRandomç±»åŸç†å‰–æ.html.8f28f52d.js"><link rel="prefetch" href="/assets/ç¬¬4ç« Javaå¹¶å‘åŒ…ä¸­åŸå­æ“ä½œç±»åŸç†å‰–æ.html.2e32d2f3.js"><link rel="prefetch" href="/assets/ç¬¬5ç« Javaå¹¶å‘åŒ…ä¸­å¹¶å‘Listæºç å‰–æ.html.4b8c96f3.js"><link rel="prefetch" href="/assets/ç¬¬6ç« Javaå¹¶å‘åŒ…ä¸­é”åŸç†å‰–æ.html.57b14c73.js"><link rel="prefetch" href="/assets/ç¬¬7ç« Javaå¹¶å‘åŒ…ä¸­å¹¶å‘é˜Ÿåˆ—åŸç†å‰–æ.html.21d8c694.js"><link rel="prefetch" href="/assets/ç¬¬8ç« Javaå¹¶å‘åŒ…ä¸­çº¿ç¨‹æ± ThreadPoolExecutoråŸç†æ¢ç©¶.html.44cbbd21.js"><link rel="prefetch" href="/assets/ç¬¬9ç« Javaå¹¶å‘åŒ…ä¸­ScheduledThreadPoolExecutoråŸç†æ¢ç©¶.html.b4fa44fb.js"><link rel="prefetch" href="/assets/index.html.e5d1d6c3.js"><link rel="prefetch" href="/assets/ç¬¬10ç«  Mapå’ŒSet.html.a55e5985.js"><link rel="prefetch" href="/assets/ç¬¬11ç«  å †ä¸ä¼˜å…ˆçº§åˆ—è¡¨.html.e280a8e4.js"><link rel="prefetch" href="/assets/ç¬¬12ç«  é€šç”¨å®¹å™¨å’Œæ€»ç»“.html.7f8f71e8.js"><link rel="prefetch" href="/assets/ç¬¬13ç«  æ–‡ä»¶åŸºæœ¬æŠ€æœ¯.html.5f4b89df.js"><link rel="prefetch" href="/assets/ç¬¬14ç«  æ–‡ä»¶é«˜çº§æŠ€æœ¯.html.8c6479e2.js"><link rel="prefetch" href="/assets/ç¬¬15ç«  å¹¶å‘åŸºç¡€çŸ¥è¯†.html.5cb53a4c.js"><link rel="prefetch" href="/assets/ç¬¬16ç«  å¹¶å‘åŒ…çš„åŸºçŸ³.html.142bea88.js"><link rel="prefetch" href="/assets/ç¬¬17ç«  å¹¶å‘å®¹å™¨.html.3acbf1e5.js"><link rel="prefetch" href="/assets/ç¬¬18ç«  å¼‚æ­¥ä»»åŠ¡æ‰§è¡ŒæœåŠ¡.html.1b161f70.js"><link rel="prefetch" href="/assets/ç¬¬19ç«  åŒæ­¥å’Œåä½œå·¥å…·ç±».html.addf5980.js"><link rel="prefetch" href="/assets/ç¬¬1ç«  ç¼–ç¨‹åŸºç¡€.html.baf9d7d3.js"><link rel="prefetch" href="/assets/ç¬¬20ç«  å¹¶å‘æ€»ç»“.html.0b3bb480.js"><link rel="prefetch" href="/assets/ç¬¬21ç«  åå°„.html.af2446cd.js"><link rel="prefetch" href="/assets/ç¬¬22ç«  æ³¨è§£.html.d1e27bc4.js"><link rel="prefetch" href="/assets/ç¬¬23ç«  åŠ¨æ€ä»£ç†.html.7995d8c2.js"><link rel="prefetch" href="/assets/ç¬¬24ç«  ç±»åŠ è½½æœºåˆ¶.html.b0642f1c.js"><link rel="prefetch" href="/assets/ç¬¬25ç«  æ­£åˆ™è¡¨è¾¾å¼.html.8b5d5322.js"><link rel="prefetch" href="/assets/ç¬¬26ç«  å‡½æ•°å¼ç¼–ç¨‹.html.7b517aff.js"><link rel="prefetch" href="/assets/ç¬¬2ç«  ç†è§£æ•°æ®èƒŒåçš„äºŒè¿›åˆ¶.html.94e4cb31.js"><link rel="prefetch" href="/assets/ç¬¬3ç«  ç±»çš„åŸºç¡€.html.5639d229.js"><link rel="prefetch" href="/assets/ç¬¬4ç«  ç±»çš„ç»§æ‰¿.html.2f958e91.js"><link rel="prefetch" href="/assets/ç¬¬5ç«  ç±»çš„ç»§æ‰¿.html.7d7e56a6.js"><link rel="prefetch" href="/assets/ç¬¬6ç«  å¼‚å¸¸.html.adb3eef3.js"><link rel="prefetch" href="/assets/ç¬¬7ç«  å¸¸ç”¨åŸºç¡€ç±».html.17e1b88d.js"><link rel="prefetch" href="/assets/ç¬¬8ç«  æ³›å‹.html.9d1aa562.js"><link rel="prefetch" href="/assets/ç¬¬9ç«  åˆ—è¡¨å’Œé˜Ÿåˆ—.html.1b223279.js"><link rel="prefetch" href="/assets/index.html.213dbe07.js"><link rel="prefetch" href="/assets/ç¬¬10ç« Executoræ¡†æ¶.html.2d819cce.js"><link rel="prefetch" href="/assets/ç¬¬11ç« Javaå¹¶å‘ç¼–ç¨‹å®è·µ.html.e045243d.js"><link rel="prefetch" href="/assets/ç¬¬1ç« å¹¶å‘ç¼–ç¨‹çš„æŒ‘æˆ˜.html.f2cf1cf0.js"><link rel="prefetch" href="/assets/ç¬¬2ç« Javaå¹¶å‘æœºåˆ¶çš„åº•å±‚å®ç°åŸç†.html.84620d72.js"><link rel="prefetch" href="/assets/ç¬¬3ç« Javaå†…å­˜æ¨¡å‹.html.57e9f10a.js"><link rel="prefetch" href="/assets/ç¬¬4ç« Javaå¹¶å‘ç¼–ç¨‹åŸºç¡€.html.e1837d6e.js"><link rel="prefetch" href="/assets/ç¬¬5ç« Javaä¸­çš„é”.html.509db6c5.js"><link rel="prefetch" href="/assets/ç¬¬6ç« Javaå¹¶å‘å®¹å™¨å’Œæ¡†æ¶.html.fab16b37.js"><link rel="prefetch" href="/assets/ç¬¬7ç« Javaä¸­çš„13ä¸ªåŸå­æ“ä½œç±».html.8a2e8902.js"><link rel="prefetch" href="/assets/ç¬¬8ç« Javaä¸­çš„å¹¶å‘å·¥å…·ç±».html.ede4146b.js"><link rel="prefetch" href="/assets/ç¬¬9ç« Javaä¸­çš„çº¿ç¨‹æ± .html.e7e64f52.js"><link rel="prefetch" href="/assets/index.html.ccabe8d8.js"><link rel="prefetch" href="/assets/ç¬¬10ç« é¿å…æ´»è·ƒæ€§å±é™©.html.288ef3a6.js"><link rel="prefetch" href="/assets/ç¬¬11ç« æ€§èƒ½ä¸å¯ä¼¸ç¼©æ€§.html.66974eb6.js"><link rel="prefetch" href="/assets/ç¬¬12ç« å¹¶å‘ç¨‹åºçš„æµ‹è¯•.html.064eea71.js"><link rel="prefetch" href="/assets/ç¬¬13ç« æ˜¾å¼é”.html.bf44c451.js"><link rel="prefetch" href="/assets/ç¬¬14ç« æ„å»ºè‡ªå®šä¹‰çš„åŒæ­¥å·¥å…·.html.23a2e0be.js"><link rel="prefetch" href="/assets/ç¬¬15ç« åŸå­å˜é‡ä¸éé˜»å¡åŒæ­¥æœºåˆ¶.html.06dd6e43.js"><link rel="prefetch" href="/assets/ç¬¬16ç« Javaå†…å­˜æ¨¡å‹ç®€ä»‹.html.977d59cd.js"><link rel="prefetch" href="/assets/ç¬¬1ç« ç®€ä»‹.html.90b5e48c.js"><link rel="prefetch" href="/assets/ç¬¬2ç« çº¿ç¨‹å®‰å…¨.html.2501a94b.js"><link rel="prefetch" href="/assets/ç¬¬3ç« å¯¹è±¡çš„å…±äº«.html.faeb65aa.js"><link rel="prefetch" href="/assets/ç¬¬4ç« å¯¹è±¡çš„ç»„åˆ.html.1fe1b50c.js"><link rel="prefetch" href="/assets/ç¬¬5ç« åŸºç¡€æ„å»ºæ¨¡å—.html.1fe6799b.js"><link rel="prefetch" href="/assets/ç¬¬6ç« ä»»åŠ¡æ‰§è¡Œ.html.70613e72.js"><link rel="prefetch" href="/assets/ç¬¬7ç« å–æ¶ˆä¸å…³é—­.html.1e1c2d49.js"><link rel="prefetch" href="/assets/ç¬¬8ç« çº¿ç¨‹æ± çš„ä½¿ç”¨.html.72ef0a90.js"><link rel="prefetch" href="/assets/ç¬¬9ç« å›¾å½¢ç”¨æˆ·ç•Œé¢åº”ç”¨ç¨‹åº.html.11c377b5.js"><link rel="prefetch" href="/assets/001-two-sum.html.a3f3595a.js"><link rel="prefetch" href="/assets/002-add-two-numbers.html.e7703c4f.js"><link rel="prefetch" href="/assets/003-longest-substring-without-repeating-characters.html.0c6329c6.js"><link rel="prefetch" href="/assets/index.html.d8ad8d07.js"><link rel="prefetch" href="/assets/index.html.5a513471.js"><link rel="prefetch" href="/assets/ç¬¬10ç« å‰ç«¯ç¼–è¯‘ä¸ä¼˜åŒ–.html.2a6b1789.js"><link rel="prefetch" href="/assets/ç¬¬11ç« åç«¯ç¼–è¯‘ä¸ä¼˜åŒ–.html.59704c7c.js"><link rel="prefetch" href="/assets/ç¬¬12ç« Javaå†…å­˜æ¨¡å‹ä¸çº¿ç¨‹.html.deaa5ea6.js"><link rel="prefetch" href="/assets/ç¬¬13ç« çº¿ç¨‹å®‰å…¨ä¸é”ä¼˜åŒ–.html.fd873e3a.js"><link rel="prefetch" href="/assets/ç¬¬1ç« èµ°è¿‘Java.html.0897d78c.js"><link rel="prefetch" href="/assets/ç¬¬2ç« Javaå†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸.html.0978cdd4.js"><link rel="prefetch" href="/assets/ç¬¬3ç« åƒåœ¾æ”¶é›†å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥.html.a47791fa.js"><link rel="prefetch" href="/assets/ç¬¬4ç« è™šæ‹Ÿæœºæ€§èƒ½ç›‘æ§ã€æ•…éšœå¤„ç†å·¥å…·.html.61f80277.js"><link rel="prefetch" href="/assets/ç¬¬5ç« è°ƒä¼˜æ¡ˆä¾‹åˆ†æä¸å®æˆ˜.html.7a5b7c4c.js"><link rel="prefetch" href="/assets/ç¬¬6ç« ç±»æ–‡ä»¶ç»“æ„.html.3e8cd2c6.js"><link rel="prefetch" href="/assets/ç¬¬7ç« è™šæ‹Ÿæœºç±»åŠ è½½æœºåˆ¶.html.3af5a31c.js"><link rel="prefetch" href="/assets/ç¬¬8ç« è™šæ‹Ÿæœºå­—èŠ‚ç æ‰§è¡Œå¼•æ“.html.dc5c593e.js"><link rel="prefetch" href="/assets/ç¬¬9ç« ç±»åŠ è½½åŠæ‰§è¡Œå­ç³»ç»Ÿçš„æ¡ˆä¾‹ä¸å®æˆ˜.html.c3e2fd28.js"><link rel="prefetch" href="/assets/index.html.c2e9c36e.js"><link rel="prefetch" href="/assets/ç¬¬1ç« èµ°å…¥å¹¶è¡Œä¸–ç•Œ.html.bf2758d5.js"><link rel="prefetch" href="/assets/ç¬¬2ç« Javaå¹¶è¡Œç¨‹åºåŸºç¡€.html.8a27b9a6.js"><link rel="prefetch" href="/assets/ç¬¬3ç« JDKå¹¶å‘åŒ….html.55a5bb57.js"><link rel="prefetch" href="/assets/ç¬¬4ç« é”çš„ä¼˜åŒ–åŠæ³¨æ„äº‹é¡¹.html.0ac6ac12.js"><link rel="prefetch" href="/assets/ç¬¬5ç« å¹¶è¡Œæ¨¡å¼ä¸ç®—æ³•.html.6e857f15.js"><link rel="prefetch" href="/assets/ç¬¬6ç« Java8910ä¸å¹¶å‘.html.61173fb4.js"><link rel="prefetch" href="/assets/ç¬¬7ç« ä½¿ç”¨Akkaæ„å»ºé«˜å¹¶å‘ç¨‹åº.html.610f0e53.js"><link rel="prefetch" href="/assets/ç¬¬8ç« å¹¶è¡Œç¨‹åºè°ƒè¯•.html.dcf9af72.js"><link rel="prefetch" href="/assets/ç¬¬9ç« å¤šçº¿ç¨‹ä¼˜åŒ–ç¤ºä¾‹â€”Jettyæ ¸å¿ƒä»£ç åˆ†æ.html.1b25b9bb.js"><link rel="prefetch" href="/assets/index.html.8c841845.js"><link rel="prefetch" href="/assets/ç¬¬10ç« Classè£…è½½ç³»ç»Ÿ.html.800b1d8e.js"><link rel="prefetch" href="/assets/ç¬¬11ç« å­—èŠ‚ç æ‰§è¡Œ.html.fd59242f.js"><link rel="prefetch" href="/assets/ç¬¬1ç« åˆæ¢Javaè™šæ‹Ÿæœº.html.80ec8c68.js"><link rel="prefetch" href="/assets/ç¬¬2ç« è®¤è¯†Javaè™šæ‹Ÿæœºçš„åŸºæœ¬ç»“æ„.html.bbf499e1.js"><link rel="prefetch" href="/assets/ç¬¬3ç« å¸¸ç”¨Javaè™šæ‹Ÿæœºå‚æ•°.html.10cb1042.js"><link rel="prefetch" href="/assets/ç¬¬4ç« åƒåœ¾å›æ”¶çš„æ¦‚å¿µä¸ç®—æ³•.html.90d52151.js"><link rel="prefetch" href="/assets/ç¬¬5ç« åƒåœ¾æ”¶é›†å™¨å’Œå†…å­˜åˆ†é….html.98dc8566.js"><link rel="prefetch" href="/assets/ç¬¬6ç« æ€§èƒ½ç›‘æ§å·¥å…·.html.d9178ab7.js"><link rel="prefetch" href="/assets/ç¬¬7ç« åˆ†æJavaå †.html.76f053df.js"><link rel="prefetch" href="/assets/ç¬¬8ç« é”ä¸å¹¶å‘.html.c6edc3b8.js"><link rel="prefetch" href="/assets/ç¬¬9ç« Classæ–‡ä»¶ç»“æ„.html.ce3b9ffe.js"><link rel="prefetch" href="/assets/404.html.a61819a1.js"><link rel="prefetch" href="/assets/index.html.196bf7d0.js"><link rel="prefetch" href="/assets/index.html.6474b04a.js"><link rel="prefetch" href="/assets/index.html.12d9ea9f.js"><link rel="prefetch" href="/assets/index.html.8cf1d97b.js"><link rel="prefetch" href="/assets/index.html.b1d72dff.js"><link rel="prefetch" href="/assets/index.html.6a433ed8.js"><link rel="prefetch" href="/assets/index.html.292db8d2.js"><link rel="prefetch" href="/assets/index.html.db46c28d.js"><link rel="prefetch" href="/assets/home.html.b3222fa8.js"><link rel="prefetch" href="/assets/slide.html.3b4fa46d.js"><link rel="prefetch" href="/assets/index.html.eab01647.js"><link rel="prefetch" href="/assets/index.html.f6997ce1.js"><link rel="prefetch" href="/assets/index.html.4f492e58.js"><link rel="prefetch" href="/assets/ç¬¬10ç«  å¼‚å¸¸.html.b369a82a.js"><link rel="prefetch" href="/assets/ç¬¬11ç«  å¹¶å‘.html.1e83a7e7.js"><link rel="prefetch" href="/assets/ç¬¬12ç«  åºåˆ—åŒ–.html.934b2280.js"><link rel="prefetch" href="/assets/ç¬¬2ç«  åˆ›å»ºå’Œé”€æ¯å¯¹è±¡.html.bf39597f.js"><link rel="prefetch" href="/assets/ç¬¬3ç«  å¯¹äºæ‰€æœ‰å¯¹è±¡éƒ½é€šç”¨çš„æ–¹æ³•.html.c2f582c1.js"><link rel="prefetch" href="/assets/ç¬¬4ç«  ç±»å’Œæ¥å£.html.d616fa92.js"><link rel="prefetch" href="/assets/ç¬¬5ç«  æ³›å‹.html.fe9bf71e.js"><link rel="prefetch" href="/assets/ç¬¬7ç«  Lambdaå’ŒStream.html.11e132a3.js"><link rel="prefetch" href="/assets/ç¬¬8ç«  æ–¹æ³•.html.0f5952cd.js"><link rel="prefetch" href="/assets/ç¬¬9ç«  é€šç”¨ç¼–ç¨‹.html.a9158c44.js"><link rel="prefetch" href="/assets/index.html.66d9275e.js"><link rel="prefetch" href="/assets/index.html.e1e195ac.js"><link rel="prefetch" href="/assets/ç¬¬1ç« Javaå¤šçº¿ç¨‹æŠ€èƒ½.html.d201a503.js"><link rel="prefetch" href="/assets/ç¬¬2ç« å¯¹è±¡åŠå˜é‡çš„å¹¶å‘è®¿é—®.html.8eff37f9.js"><link rel="prefetch" href="/assets/ç¬¬3ç« çº¿ç¨‹é—´é€šä¿¡.html.96ad7aa4.js"><link rel="prefetch" href="/assets/ç¬¬4ç« é”çš„ä½¿ç”¨.html.0b108a46.js"><link rel="prefetch" href="/assets/ç¬¬5ç« å®šæ—¶å™¨.html.079d1655.js"><link rel="prefetch" href="/assets/ç¬¬6ç« å•ä¾‹æ¨¡å¼ä¸å¤šçº¿ç¨‹.html.dd40cab9.js"><link rel="prefetch" href="/assets/ç¬¬7ç« æ‹¾é—å¢è¡¥.html.c98b6afc.js"><link rel="prefetch" href="/assets/ç¬¬8ç« å¹¶å‘é›†åˆæ¡†æ¶.html.c47636a0.js"><link rel="prefetch" href="/assets/ç¬¬9ç« çº¿ç¨‹æ± ThreadPoolExecutorçš„ä½¿ç”¨.html.fdd06e63.js"><link rel="prefetch" href="/assets/index.html.970ebb57.js"><link rel="prefetch" href="/assets/ç¬¬1ç« å¤šçº¿ç¨‹åŸºç¡€.html.f6e06884.js"><link rel="prefetch" href="/assets/ç¬¬2ç« Atomicç±».html.5c9a96af.js"><link rel="prefetch" href="/assets/ç¬¬3ç« Lockä¸Condition.html.dd94c834.js"><link rel="prefetch" href="/assets/ç¬¬4ç« åŒæ­¥å·¥å…·ç±».html.f32cb37a.js"><link rel="prefetch" href="/assets/ç¬¬5ç« å¹¶å‘å®¹å™¨.html.11ef3b3d.js"><link rel="prefetch" href="/assets/ç¬¬6ç« çº¿ç¨‹æ± ä¸Future.html.f2664d19.js"><link rel="prefetch" href="/assets/ç¬¬7ç« ForkJoinPool.html.5b09c440.js"><link rel="prefetch" href="/assets/ç¬¬8ç« CompletableFuture.html.00ddc982.js"><link rel="prefetch" href="/assets/index.html.05f6dacd.js"><link rel="prefetch" href="/assets/ç¬¬10ç« Javaå¹¶å‘åŒ…ä¸­çº¿ç¨‹åŒæ­¥å™¨åŸç†å‰–æ.html.22c349a1.js"><link rel="prefetch" href="/assets/ç¬¬11ç« å¹¶å‘ç¼–ç¨‹å®è·µ.html.5db30ba4.js"><link rel="prefetch" href="/assets/ç¬¬1ç« å¹¶å‘ç¼–ç¨‹çº¿ç¨‹åŸºç¡€.html.59828def.js"><link rel="prefetch" href="/assets/ç¬¬2ç« å¹¶å‘ç¼–ç¨‹çš„å…¶ä»–åŸºç¡€çŸ¥è¯†.html.95634460.js"><link rel="prefetch" href="/assets/ç¬¬3ç« Javaå¹¶å‘åŒ…ä¸­ThreadLocalRandomç±»åŸç†å‰–æ.html.5e3f88be.js"><link rel="prefetch" href="/assets/ç¬¬4ç« Javaå¹¶å‘åŒ…ä¸­åŸå­æ“ä½œç±»åŸç†å‰–æ.html.aa40f522.js"><link rel="prefetch" href="/assets/ç¬¬5ç« Javaå¹¶å‘åŒ…ä¸­å¹¶å‘Listæºç å‰–æ.html.19da87be.js"><link rel="prefetch" href="/assets/ç¬¬6ç« Javaå¹¶å‘åŒ…ä¸­é”åŸç†å‰–æ.html.e64d1f1d.js"><link rel="prefetch" href="/assets/ç¬¬7ç« Javaå¹¶å‘åŒ…ä¸­å¹¶å‘é˜Ÿåˆ—åŸç†å‰–æ.html.05c55f53.js"><link rel="prefetch" href="/assets/ç¬¬8ç« Javaå¹¶å‘åŒ…ä¸­çº¿ç¨‹æ± ThreadPoolExecutoråŸç†æ¢ç©¶.html.355c02bf.js"><link rel="prefetch" href="/assets/ç¬¬9ç« Javaå¹¶å‘åŒ…ä¸­ScheduledThreadPoolExecutoråŸç†æ¢ç©¶.html.bc89022d.js"><link rel="prefetch" href="/assets/index.html.0812d30d.js"><link rel="prefetch" href="/assets/ç¬¬10ç«  Mapå’ŒSet.html.d15ebc0a.js"><link rel="prefetch" href="/assets/ç¬¬11ç«  å †ä¸ä¼˜å…ˆçº§åˆ—è¡¨.html.22879ed0.js"><link rel="prefetch" href="/assets/ç¬¬12ç«  é€šç”¨å®¹å™¨å’Œæ€»ç»“.html.af4e25e8.js"><link rel="prefetch" href="/assets/ç¬¬13ç«  æ–‡ä»¶åŸºæœ¬æŠ€æœ¯.html.e9de4ab6.js"><link rel="prefetch" href="/assets/ç¬¬14ç«  æ–‡ä»¶é«˜çº§æŠ€æœ¯.html.6944682e.js"><link rel="prefetch" href="/assets/ç¬¬15ç«  å¹¶å‘åŸºç¡€çŸ¥è¯†.html.fbf03dc9.js"><link rel="prefetch" href="/assets/ç¬¬16ç«  å¹¶å‘åŒ…çš„åŸºçŸ³.html.f5fbd049.js"><link rel="prefetch" href="/assets/ç¬¬17ç«  å¹¶å‘å®¹å™¨.html.d522da1e.js"><link rel="prefetch" href="/assets/ç¬¬18ç«  å¼‚æ­¥ä»»åŠ¡æ‰§è¡ŒæœåŠ¡.html.76e9a36e.js"><link rel="prefetch" href="/assets/ç¬¬19ç«  åŒæ­¥å’Œåä½œå·¥å…·ç±».html.669856bd.js"><link rel="prefetch" href="/assets/ç¬¬1ç«  ç¼–ç¨‹åŸºç¡€.html.3f747685.js"><link rel="prefetch" href="/assets/ç¬¬20ç«  å¹¶å‘æ€»ç»“.html.1e326470.js"><link rel="prefetch" href="/assets/ç¬¬21ç«  åå°„.html.25579869.js"><link rel="prefetch" href="/assets/ç¬¬22ç«  æ³¨è§£.html.10b1af26.js"><link rel="prefetch" href="/assets/ç¬¬23ç«  åŠ¨æ€ä»£ç†.html.76b2167b.js"><link rel="prefetch" href="/assets/ç¬¬24ç«  ç±»åŠ è½½æœºåˆ¶.html.2dc4cd09.js"><link rel="prefetch" href="/assets/ç¬¬25ç«  æ­£åˆ™è¡¨è¾¾å¼.html.d3486e09.js"><link rel="prefetch" href="/assets/ç¬¬26ç«  å‡½æ•°å¼ç¼–ç¨‹.html.dd3f8bd7.js"><link rel="prefetch" href="/assets/ç¬¬2ç«  ç†è§£æ•°æ®èƒŒåçš„äºŒè¿›åˆ¶.html.3d5eaefa.js"><link rel="prefetch" href="/assets/ç¬¬3ç«  ç±»çš„åŸºç¡€.html.c86161b4.js"><link rel="prefetch" href="/assets/ç¬¬4ç«  ç±»çš„ç»§æ‰¿.html.2bce738f.js"><link rel="prefetch" href="/assets/ç¬¬5ç«  ç±»çš„ç»§æ‰¿.html.ad950d91.js"><link rel="prefetch" href="/assets/ç¬¬6ç«  å¼‚å¸¸.html.09ddca79.js"><link rel="prefetch" href="/assets/ç¬¬7ç«  å¸¸ç”¨åŸºç¡€ç±».html.12c88740.js"><link rel="prefetch" href="/assets/ç¬¬8ç«  æ³›å‹.html.81d0949a.js"><link rel="prefetch" href="/assets/ç¬¬9ç«  åˆ—è¡¨å’Œé˜Ÿåˆ—.html.38c68a48.js"><link rel="prefetch" href="/assets/index.html.bf5d33db.js"><link rel="prefetch" href="/assets/ç¬¬10ç« Executoræ¡†æ¶.html.a7e672e0.js"><link rel="prefetch" href="/assets/ç¬¬11ç« Javaå¹¶å‘ç¼–ç¨‹å®è·µ.html.debb41c7.js"><link rel="prefetch" href="/assets/ç¬¬1ç« å¹¶å‘ç¼–ç¨‹çš„æŒ‘æˆ˜.html.1b00855d.js"><link rel="prefetch" href="/assets/ç¬¬2ç« Javaå¹¶å‘æœºåˆ¶çš„åº•å±‚å®ç°åŸç†.html.f005f932.js"><link rel="prefetch" href="/assets/ç¬¬3ç« Javaå†…å­˜æ¨¡å‹.html.6ec525fb.js"><link rel="prefetch" href="/assets/ç¬¬4ç« Javaå¹¶å‘ç¼–ç¨‹åŸºç¡€.html.bd275d3c.js"><link rel="prefetch" href="/assets/ç¬¬5ç« Javaä¸­çš„é”.html.83cc4dba.js"><link rel="prefetch" href="/assets/ç¬¬6ç« Javaå¹¶å‘å®¹å™¨å’Œæ¡†æ¶.html.8a83a2ef.js"><link rel="prefetch" href="/assets/ç¬¬7ç« Javaä¸­çš„13ä¸ªåŸå­æ“ä½œç±».html.2c3c8029.js"><link rel="prefetch" href="/assets/ç¬¬8ç« Javaä¸­çš„å¹¶å‘å·¥å…·ç±».html.61794c87.js"><link rel="prefetch" href="/assets/ç¬¬9ç« Javaä¸­çš„çº¿ç¨‹æ± .html.9434f936.js"><link rel="prefetch" href="/assets/index.html.93c2aee6.js"><link rel="prefetch" href="/assets/ç¬¬10ç« é¿å…æ´»è·ƒæ€§å±é™©.html.e7ea1e3a.js"><link rel="prefetch" href="/assets/ç¬¬11ç« æ€§èƒ½ä¸å¯ä¼¸ç¼©æ€§.html.42d4a3a1.js"><link rel="prefetch" href="/assets/ç¬¬12ç« å¹¶å‘ç¨‹åºçš„æµ‹è¯•.html.690d2aba.js"><link rel="prefetch" href="/assets/ç¬¬13ç« æ˜¾å¼é”.html.1171f97b.js"><link rel="prefetch" href="/assets/ç¬¬14ç« æ„å»ºè‡ªå®šä¹‰çš„åŒæ­¥å·¥å…·.html.6c72f888.js"><link rel="prefetch" href="/assets/ç¬¬15ç« åŸå­å˜é‡ä¸éé˜»å¡åŒæ­¥æœºåˆ¶.html.9de6dd1b.js"><link rel="prefetch" href="/assets/ç¬¬16ç« Javaå†…å­˜æ¨¡å‹ç®€ä»‹.html.847d1584.js"><link rel="prefetch" href="/assets/ç¬¬1ç« ç®€ä»‹.html.5ff3b256.js"><link rel="prefetch" href="/assets/ç¬¬2ç« çº¿ç¨‹å®‰å…¨.html.34a72eca.js"><link rel="prefetch" href="/assets/ç¬¬3ç« å¯¹è±¡çš„å…±äº«.html.088b59e3.js"><link rel="prefetch" href="/assets/ç¬¬4ç« å¯¹è±¡çš„ç»„åˆ.html.420592f2.js"><link rel="prefetch" href="/assets/ç¬¬5ç« åŸºç¡€æ„å»ºæ¨¡å—.html.b697dc08.js"><link rel="prefetch" href="/assets/ç¬¬6ç« ä»»åŠ¡æ‰§è¡Œ.html.d2692cee.js"><link rel="prefetch" href="/assets/ç¬¬7ç« å–æ¶ˆä¸å…³é—­.html.1033df86.js"><link rel="prefetch" href="/assets/ç¬¬8ç« çº¿ç¨‹æ± çš„ä½¿ç”¨.html.5655d9dd.js"><link rel="prefetch" href="/assets/ç¬¬9ç« å›¾å½¢ç”¨æˆ·ç•Œé¢åº”ç”¨ç¨‹åº.html.2c9a92f0.js"><link rel="prefetch" href="/assets/001-two-sum.html.bd5b42b8.js"><link rel="prefetch" href="/assets/002-add-two-numbers.html.1cd12f58.js"><link rel="prefetch" href="/assets/003-longest-substring-without-repeating-characters.html.3f87474a.js"><link rel="prefetch" href="/assets/index.html.346ee126.js"><link rel="prefetch" href="/assets/index.html.bddb9164.js"><link rel="prefetch" href="/assets/ç¬¬10ç« å‰ç«¯ç¼–è¯‘ä¸ä¼˜åŒ–.html.27f33bd6.js"><link rel="prefetch" href="/assets/ç¬¬11ç« åç«¯ç¼–è¯‘ä¸ä¼˜åŒ–.html.2d98e937.js"><link rel="prefetch" href="/assets/ç¬¬12ç« Javaå†…å­˜æ¨¡å‹ä¸çº¿ç¨‹.html.e5d51c84.js"><link rel="prefetch" href="/assets/ç¬¬13ç« çº¿ç¨‹å®‰å…¨ä¸é”ä¼˜åŒ–.html.2e377ef2.js"><link rel="prefetch" href="/assets/ç¬¬1ç« èµ°è¿‘Java.html.7c41e7a9.js"><link rel="prefetch" href="/assets/ç¬¬2ç« Javaå†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸.html.82365a5f.js"><link rel="prefetch" href="/assets/ç¬¬3ç« åƒåœ¾æ”¶é›†å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥.html.1360e884.js"><link rel="prefetch" href="/assets/ç¬¬4ç« è™šæ‹Ÿæœºæ€§èƒ½ç›‘æ§ã€æ•…éšœå¤„ç†å·¥å…·.html.0a90211f.js"><link rel="prefetch" href="/assets/ç¬¬5ç« è°ƒä¼˜æ¡ˆä¾‹åˆ†æä¸å®æˆ˜.html.e7e286da.js"><link rel="prefetch" href="/assets/ç¬¬6ç« ç±»æ–‡ä»¶ç»“æ„.html.9f84d086.js"><link rel="prefetch" href="/assets/ç¬¬7ç« è™šæ‹Ÿæœºç±»åŠ è½½æœºåˆ¶.html.31c0a6a3.js"><link rel="prefetch" href="/assets/ç¬¬8ç« è™šæ‹Ÿæœºå­—èŠ‚ç æ‰§è¡Œå¼•æ“.html.6f40ca25.js"><link rel="prefetch" href="/assets/ç¬¬9ç« ç±»åŠ è½½åŠæ‰§è¡Œå­ç³»ç»Ÿçš„æ¡ˆä¾‹ä¸å®æˆ˜.html.5bf71bd8.js"><link rel="prefetch" href="/assets/index.html.18e34f59.js"><link rel="prefetch" href="/assets/ç¬¬1ç« èµ°å…¥å¹¶è¡Œä¸–ç•Œ.html.d4a7a8b1.js"><link rel="prefetch" href="/assets/ç¬¬2ç« Javaå¹¶è¡Œç¨‹åºåŸºç¡€.html.79f6e18f.js"><link rel="prefetch" href="/assets/ç¬¬3ç« JDKå¹¶å‘åŒ….html.df0acd9f.js"><link rel="prefetch" href="/assets/ç¬¬4ç« é”çš„ä¼˜åŒ–åŠæ³¨æ„äº‹é¡¹.html.5a2b559c.js"><link rel="prefetch" href="/assets/ç¬¬5ç« å¹¶è¡Œæ¨¡å¼ä¸ç®—æ³•.html.c0ec6141.js"><link rel="prefetch" href="/assets/ç¬¬6ç« Java8910ä¸å¹¶å‘.html.9a2cc047.js"><link rel="prefetch" href="/assets/ç¬¬7ç« ä½¿ç”¨Akkaæ„å»ºé«˜å¹¶å‘ç¨‹åº.html.e1442a98.js"><link rel="prefetch" href="/assets/ç¬¬8ç« å¹¶è¡Œç¨‹åºè°ƒè¯•.html.ddf890de.js"><link rel="prefetch" href="/assets/ç¬¬9ç« å¤šçº¿ç¨‹ä¼˜åŒ–ç¤ºä¾‹â€”Jettyæ ¸å¿ƒä»£ç åˆ†æ.html.0ab5a261.js"><link rel="prefetch" href="/assets/index.html.9735d51d.js"><link rel="prefetch" href="/assets/ç¬¬10ç« Classè£…è½½ç³»ç»Ÿ.html.50bb638d.js"><link rel="prefetch" href="/assets/ç¬¬11ç« å­—èŠ‚ç æ‰§è¡Œ.html.f0a2e1fd.js"><link rel="prefetch" href="/assets/ç¬¬1ç« åˆæ¢Javaè™šæ‹Ÿæœº.html.0a668344.js"><link rel="prefetch" href="/assets/ç¬¬2ç« è®¤è¯†Javaè™šæ‹Ÿæœºçš„åŸºæœ¬ç»“æ„.html.1777df39.js"><link rel="prefetch" href="/assets/ç¬¬3ç« å¸¸ç”¨Javaè™šæ‹Ÿæœºå‚æ•°.html.65784af7.js"><link rel="prefetch" href="/assets/ç¬¬4ç« åƒåœ¾å›æ”¶çš„æ¦‚å¿µä¸ç®—æ³•.html.d6231456.js"><link rel="prefetch" href="/assets/ç¬¬5ç« åƒåœ¾æ”¶é›†å™¨å’Œå†…å­˜åˆ†é….html.6446a277.js"><link rel="prefetch" href="/assets/ç¬¬6ç« æ€§èƒ½ç›‘æ§å·¥å…·.html.e9ce7787.js"><link rel="prefetch" href="/assets/ç¬¬7ç« åˆ†æJavaå †.html.ee273e82.js"><link rel="prefetch" href="/assets/ç¬¬8ç« é”ä¸å¹¶å‘.html.7624390a.js"><link rel="prefetch" href="/assets/ç¬¬9ç« Classæ–‡ä»¶ç»“æ„.html.f4c2ac9f.js"><link rel="prefetch" href="/assets/404.html.36540b0d.js"><link rel="prefetch" href="/assets/index.html.583c479d.js"><link rel="prefetch" href="/assets/index.html.c407fe6a.js"><link rel="prefetch" href="/assets/index.html.99a8f87f.js"><link rel="prefetch" href="/assets/index.html.7587b161.js"><link rel="prefetch" href="/assets/index.html.f6866d7d.js"><link rel="prefetch" href="/assets/index.html.a985c72b.js"><link rel="prefetch" href="/assets/index.html.4c96ae2e.js"><link rel="prefetch" href="/assets/404.629f43ab.js"><link rel="prefetch" href="/assets/Layout.26a2a4c9.js"><link rel="prefetch" href="/assets/Slide.b01858c1.js"><link rel="prefetch" href="/assets/Blog.ac038c81.js"><link rel="prefetch" href="/assets/auto.esm.52abc6cc.js"><link rel="prefetch" href="/assets/index.147398ee.js"><link rel="prefetch" href="/assets/index.e1c5a3de.js"><link rel="prefetch" href="/assets/mermaid.esm.min.e741c6cd.js"><link rel="prefetch" href="/assets/highlight.esm.9b852bc5.js"><link rel="prefetch" href="/assets/markdown.esm.77e8db25.js"><link rel="prefetch" href="/assets/math.esm.cb9d4be3.js"><link rel="prefetch" href="/assets/notes.esm.62c5f19d.js"><link rel="prefetch" href="/assets/reveal.esm.41ec5d7f.js"><link rel="prefetch" href="/assets/search.esm.04894411.js"><link rel="prefetch" href="/assets/zoom.esm.78977eba.js"><link rel="prefetch" href="/assets/photoswipe.esm.2debdee5.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/" class="brand"><img class="logo" src="/logo.svg" alt="MyBlog"><!----><span class="site-name hide-in-pad">MyBlog</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="è¯»ä¹¦ç¬”è®°"><span class="title"><span class="icon iconfont icon-note" style=""></span>è¯»ä¹¦ç¬”è®°</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/reading-notes/Effective%20Java" class="nav-link active" aria-label="Effective Java"><!---->Effective Java<!----></a></li><li class="dropdown-item"><a href="/reading-notes/Java%E7%BC%96%E7%A8%8B%E7%9A%84%E9%80%BB%E8%BE%91" class="nav-link" aria-label="Java ç¼–ç¨‹çš„é€»è¾‘"><!---->Java ç¼–ç¨‹çš„é€»è¾‘<!----></a></li><li class="dropdown-item"><a href="/reading-notes/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%AE%9E%E6%88%98" class="nav-link" aria-label="Java å¹¶å‘ç¼–ç¨‹å®æˆ˜"><!---->Java å¹¶å‘ç¼–ç¨‹å®æˆ˜<!----></a></li><li class="dropdown-item"><a href="/reading-notes/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF" class="nav-link" aria-label="Java å¤šçº¿ç¨‹ç¼–ç¨‹æ ¸å¿ƒæŠ€æœ¯"><!---->Java å¤šçº¿ç¨‹ç¼–ç¨‹æ ¸å¿ƒæŠ€æœ¯<!----></a></li><li class="dropdown-item"><a href="/reading-notes/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B9%8B%E7%BE%8E" class="nav-link" aria-label="Java å¹¶å‘ç¼–ç¨‹ä¹‹ç¾"><!---->Java å¹¶å‘ç¼–ç¨‹ä¹‹ç¾<!----></a></li><li class="dropdown-item"><a href="/reading-notes/Java%E5%B9%B6%E5%8F%91%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%EF%BC%9AJDK%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90" class="nav-link" aria-label="Java å¹¶å‘å®ç°åŸç†ï¼šJDK æºç å‰–æ"><!---->Java å¹¶å‘å®ç°åŸç†ï¼šJDK æºç å‰–æ<!----></a></li><li class="dropdown-item"><a href="/reading-notes/%E5%AE%9E%E6%88%98Java%E9%AB%98%E5%B9%B6%E5%8F%91%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1" class="nav-link" aria-label="å®æˆ˜ Java é«˜å¹¶å‘ç¨‹åºè®¾è®¡"><!---->å®æˆ˜ Java é«˜å¹¶å‘ç¨‹åºè®¾è®¡<!----></a></li><li class="dropdown-item"><a href="/reading-notes/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%9A%84%E8%89%BA%E6%9C%AF" class="nav-link" aria-label="Java å¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯"><!---->Java å¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯<!----></a></li><li class="dropdown-item"><a href="/reading-notes/%E5%AE%9E%E6%88%98Java%E8%99%9A%E6%8B%9F%E6%9C%BA%EF%BC%9AJVM%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD%E4%B8%8E%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96" class="nav-link" aria-label="å®æˆ˜ Java è™šæ‹Ÿæœºï¼šJVM æ•…éšœè¯Šæ–­ä¸æ€§èƒ½ä¼˜åŒ–"><!---->å®æˆ˜ Java è™šæ‹Ÿæœºï¼šJVM æ•…éšœè¯Šæ–­ä¸æ€§èƒ½ä¼˜åŒ–<!----></a></li><li class="dropdown-item"><a href="/reading-notes/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA%EF%BC%9AJVM%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5" class="nav-link" aria-label="æ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºï¼šJVM é«˜çº§ç‰¹æ€§ä¸æœ€ä½³å®è·µ"><!---->æ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºï¼šJVM é«˜çº§ç‰¹æ€§ä¸æœ€ä½³å®è·µ<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="leetcode"><span class="title"><span class="icon iconfont icon-note" style=""></span>leetcode</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/leetcode/Top100" class="nav-link" aria-label="Top 100"><!---->Top 100<!----></a></li></ul></button></div></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://gitee.com/anansneaker/vuepress-theme-hope" target="_blank" rel="noopener noreferrer" aria-label="Gitee"><svg xmlns="http://www.w3.org/2000/svg" class="icon gitee-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="gitee icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm242.97-533.34H482.39a23.7 23.7 0 0 0-23.7 23.7l-.03 59.28c0 13.08 10.59 23.7 23.7 23.7h165.96a23.7 23.7 0 0 1 23.7 23.7v11.85a71.1 71.1 0 0 1-71.1 71.1H375.71a23.7 23.7 0 0 1-23.7-23.7V423.11a71.1 71.1 0 0 1 71.1-71.1h331.8a23.7 23.7 0 0 0 23.7-23.7l.06-59.25a23.73 23.73 0 0 0-23.7-23.73H423.11a177.78 177.78 0 0 0-177.78 177.75v331.83c0 13.08 10.62 23.7 23.7 23.7h349.62a159.99 159.99 0 0 0 159.99-159.99V482.33a23.7 23.7 0 0 0-23.7-23.7z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" placeholder="æœç´¢" autocomplete="off" spellcheck="false" value><!----></form><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><p class="sidebar-heading active"><span class="icon iconfont icon-note" style=""></span><span class="title">è¯»ä¹¦ç¬”è®°</span><!----></p><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">Effective Java</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/reading-notes/Effective%20Java/%E7%AC%AC2%E7%AB%A0%20%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html" class="nav-link sidebar-link sidebar-page" aria-label="ç¬¬ 2 ç«  åˆ›å»ºå’Œé”€æ¯å¯¹è±¡"><!---->ç¬¬ 2 ç«  åˆ›å»ºå’Œé”€æ¯å¯¹è±¡<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/reading-notes/Effective%20Java/%E7%AC%AC3%E7%AB%A0%20%E5%AF%B9%E4%BA%8E%E6%89%80%E6%9C%89%E5%AF%B9%E8%B1%A1%E9%83%BD%E9%80%9A%E7%94%A8%E7%9A%84%E6%96%B9%E6%B3%95.html" class="nav-link sidebar-link sidebar-page" aria-label="ç¬¬ 3 ç«  å¯¹äºæ‰€æœ‰å¯¹è±¡éƒ½é€šç”¨çš„æ–¹æ³•"><!---->ç¬¬ 3 ç«  å¯¹äºæ‰€æœ‰å¯¹è±¡éƒ½é€šç”¨çš„æ–¹æ³•<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/reading-notes/Effective%20Java/%E7%AC%AC4%E7%AB%A0%20%E7%B1%BB%E5%92%8C%E6%8E%A5%E5%8F%A3.html" class="nav-link sidebar-link sidebar-page" aria-label="ç¬¬ 4 ç«  ç±»å’Œæ¥å£"><!---->ç¬¬ 4 ç«  ç±»å’Œæ¥å£<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/reading-notes/Effective%20Java/%E7%AC%AC5%E7%AB%A0%20%E6%B3%9B%E5%9E%8B.html" class="nav-link sidebar-link sidebar-page" aria-label="ç¬¬ 5 ç«  æ³›å‹"><!---->ç¬¬ 5 ç«  æ³›å‹<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC6%E7%AB%A0%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%B3%A8%E8%A7%A3.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="ç¬¬ 6 ç«  æšä¸¾å’Œæ³¨è§£"><!---->ç¬¬ 6 ç«  æšä¸¾å’Œæ³¨è§£<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC6%E7%AB%A0%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%B3%A8%E8%A7%A3.html#ç¬¬-34-æ¡-ç”¨-enum-ä»£æ›¿-int-å¸¸é‡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¬¬ 34 æ¡ï¼šç”¨ enum ä»£æ›¿ int å¸¸é‡"><!---->ç¬¬ 34 æ¡ï¼šç”¨ enum ä»£æ›¿ int å¸¸é‡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC6%E7%AB%A0%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%B3%A8%E8%A7%A3.html#ç¬¬-35-æ¡-ç”¨å®ä¾‹åŸŸä»£æ›¿åºæ•°" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¬¬ 35 æ¡ï¼šç”¨å®ä¾‹åŸŸä»£æ›¿åºæ•°"><!---->ç¬¬ 35 æ¡ï¼šç”¨å®ä¾‹åŸŸä»£æ›¿åºæ•°<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC6%E7%AB%A0%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%B3%A8%E8%A7%A3.html#ç¬¬-36-æ¡-ç”¨-enumset-ä»£æ›¿ä½åŸŸ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¬¬ 36 æ¡ï¼šç”¨ EnumSet ä»£æ›¿ä½åŸŸ"><!---->ç¬¬ 36 æ¡ï¼šç”¨ EnumSet ä»£æ›¿ä½åŸŸ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC6%E7%AB%A0%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%B3%A8%E8%A7%A3.html#ç¬¬-37-æ¡-ç”¨-enummap-ä»£æ›¿åºæ•°ç´¢å¼•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¬¬ 37 æ¡ï¼šç”¨ EnumMap ä»£æ›¿åºæ•°ç´¢å¼•"><!---->ç¬¬ 37 æ¡ï¼šç”¨ EnumMap ä»£æ›¿åºæ•°ç´¢å¼•<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC6%E7%AB%A0%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%B3%A8%E8%A7%A3.html#ç¬¬-38-æ¡-ç”¨æ¥å£æ¨¡æ‹Ÿå¯æ‰©å±•çš„æšä¸¾" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¬¬ 38 æ¡ï¼šç”¨æ¥å£æ¨¡æ‹Ÿå¯æ‰©å±•çš„æšä¸¾"><!---->ç¬¬ 38 æ¡ï¼šç”¨æ¥å£æ¨¡æ‹Ÿå¯æ‰©å±•çš„æšä¸¾<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC6%E7%AB%A0%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%B3%A8%E8%A7%A3.html#ç¬¬-39-æ¡-æ³¨è§£ä¼˜å…ˆäºå‘½åæ¨¡å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¬¬ 39 æ¡ï¼šæ³¨è§£ä¼˜å…ˆäºå‘½åæ¨¡å¼"><!---->ç¬¬ 39 æ¡ï¼šæ³¨è§£ä¼˜å…ˆäºå‘½åæ¨¡å¼<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC6%E7%AB%A0%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%B3%A8%E8%A7%A3.html#ç¬¬-40-æ¡-åšæŒä½¿ç”¨-override-æ³¨è§£" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¬¬ 40 æ¡ï¼šåšæŒä½¿ç”¨ Override æ³¨è§£"><!---->ç¬¬ 40 æ¡ï¼šåšæŒä½¿ç”¨ Override æ³¨è§£<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC6%E7%AB%A0%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%B3%A8%E8%A7%A3.html#ç¬¬-41-æ¡-ç”¨æ ‡è®°æ¥å£å®šä¹‰ç±»å‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¬¬ 41 æ¡ï¼šç”¨æ ‡è®°æ¥å£å®šä¹‰ç±»å‹"><!---->ç¬¬ 41 æ¡ï¼šç”¨æ ‡è®°æ¥å£å®šä¹‰ç±»å‹<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/reading-notes/Effective%20Java/%E7%AC%AC7%E7%AB%A0%20Lambda%E5%92%8CStream.html" class="nav-link sidebar-link sidebar-page" aria-label="ç¬¬ 7 ç«  Lambda å’Œ Stream"><!---->ç¬¬ 7 ç«  Lambda å’Œ Stream<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/reading-notes/Effective%20Java/%E7%AC%AC8%E7%AB%A0%20%E6%96%B9%E6%B3%95.html" class="nav-link sidebar-link sidebar-page" aria-label="ç¬¬ 8 ç« æ–¹æ³•"><!---->ç¬¬ 8 ç« æ–¹æ³•<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/reading-notes/Effective%20Java/%E7%AC%AC9%E7%AB%A0%20%E9%80%9A%E7%94%A8%E7%BC%96%E7%A8%8B.html" class="nav-link sidebar-link sidebar-page" aria-label="ç¬¬ 9 ç« é€šç”¨ç¼–ç¨‹"><!---->ç¬¬ 9 ç« é€šç”¨ç¼–ç¨‹<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/reading-notes/Effective%20Java/%E7%AC%AC10%E7%AB%A0%20%E5%BC%82%E5%B8%B8.html" class="nav-link sidebar-link sidebar-page" aria-label="ç¬¬ 10 ç« å¼‚å¸¸"><!---->ç¬¬ 10 ç« å¼‚å¸¸<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/reading-notes/Effective%20Java/%E7%AC%AC11%E7%AB%A0%20%E5%B9%B6%E5%8F%91.html" class="nav-link sidebar-link sidebar-page" aria-label="ç¬¬ 11 ç« å¹¶å‘"><!---->ç¬¬ 11 ç« å¹¶å‘<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/reading-notes/Effective%20Java/%E7%AC%AC12%E7%AB%A0%20%E5%BA%8F%E5%88%97%E5%8C%96.html" class="nav-link sidebar-link sidebar-page" aria-label="ç¬¬ 12 ç« åºåˆ—åŒ–"><!---->ç¬¬ 12 ç« åºåˆ—åŒ–<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Java ç¼–ç¨‹çš„é€»è¾‘</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Java å¹¶å‘ç¼–ç¨‹å®æˆ˜</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Javaå¤šçº¿ç¨‹ç¼–ç¨‹æ ¸å¿ƒæŠ€æœ¯</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Java å¹¶å‘ç¼–ç¨‹ä¹‹ç¾</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Java å¹¶å‘å®ç°åŸç†ï¼šJDK æºç å‰–æ</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">å®æˆ˜ Java é«˜å¹¶å‘ç¨‹åºè®¾è®¡</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Java å¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">å®æˆ˜ Java è™šæ‹Ÿæœºï¼šJVM æ•…éšœè¯Šæ–­ä¸æ€§èƒ½ä¼˜åŒ–</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">æ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºï¼šJVM é«˜çº§ç‰¹æ€§ä¸æœ€ä½³å®è·µ</span><span class="arrow right"></span></button><!----></section><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-note" style=""></span><span class="title">leetcode</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/leetcode/Top100/" class="nav-link sidebar-link sidebar-page" aria-label="Top 100"><!---->Top 100<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->ç¬¬ 6 ç«  æšä¸¾å’Œæ³¨è§£</h1><div class="page-info"><span class="author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down" localizeddate="2022å¹´6æœˆ16æ—¥" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://www.cxlsn.cn/" target="_blank" rel="noopener noreferrer">é˜¿æ¥ sneaker</a></span><span property="author" content="é˜¿æ¥ sneaker"></span></span><!----><span class="date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022å¹´6æœˆ16æ—¥</span><meta property="datePublished" content="2022-06-16T01:04:26.000Z"></span><!----><!----><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down" localizeddate="2022å¹´6æœˆ16æ—¥" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 56 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT56M"></span><span class="words-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="down" localizeddate="2022å¹´6æœˆ16æ—¥" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 16885 å­—</span><meta property="wordCount" content="16885"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC6%E7%AB%A0%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%B3%A8%E8%A7%A3.html#ç¬¬-34-æ¡-ç”¨-enum-ä»£æ›¿-int-å¸¸é‡" class="router-link-active router-link-exact-active toc-link level2">ç¬¬ 34 æ¡ï¼šç”¨ enum ä»£æ›¿ int å¸¸é‡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC6%E7%AB%A0%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%B3%A8%E8%A7%A3.html#ç¬¬-35-æ¡-ç”¨å®ä¾‹åŸŸä»£æ›¿åºæ•°" class="router-link-active router-link-exact-active toc-link level2">ç¬¬ 35 æ¡ï¼šç”¨å®ä¾‹åŸŸä»£æ›¿åºæ•°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC6%E7%AB%A0%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%B3%A8%E8%A7%A3.html#ç¬¬-36-æ¡-ç”¨-enumset-ä»£æ›¿ä½åŸŸ" class="router-link-active router-link-exact-active toc-link level2">ç¬¬ 36 æ¡ï¼šç”¨ EnumSet ä»£æ›¿ä½åŸŸ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC6%E7%AB%A0%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%B3%A8%E8%A7%A3.html#ç¬¬-37-æ¡-ç”¨-enummap-ä»£æ›¿åºæ•°ç´¢å¼•" class="router-link-active router-link-exact-active toc-link level2">ç¬¬ 37 æ¡ï¼šç”¨ EnumMap ä»£æ›¿åºæ•°ç´¢å¼•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC6%E7%AB%A0%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%B3%A8%E8%A7%A3.html#ç¬¬-38-æ¡-ç”¨æ¥å£æ¨¡æ‹Ÿå¯æ‰©å±•çš„æšä¸¾" class="router-link-active router-link-exact-active toc-link level2">ç¬¬ 38 æ¡ï¼šç”¨æ¥å£æ¨¡æ‹Ÿå¯æ‰©å±•çš„æšä¸¾</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC6%E7%AB%A0%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%B3%A8%E8%A7%A3.html#ç¬¬-39-æ¡-æ³¨è§£ä¼˜å…ˆäºå‘½åæ¨¡å¼" class="router-link-active router-link-exact-active toc-link level2">ç¬¬ 39 æ¡ï¼šæ³¨è§£ä¼˜å…ˆäºå‘½åæ¨¡å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC6%E7%AB%A0%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%B3%A8%E8%A7%A3.html#ç¬¬-40-æ¡-åšæŒä½¿ç”¨-override-æ³¨è§£" class="router-link-active router-link-exact-active toc-link level2">ç¬¬ 40 æ¡ï¼šåšæŒä½¿ç”¨ Override æ³¨è§£</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC6%E7%AB%A0%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%B3%A8%E8%A7%A3.html#ç¬¬-41-æ¡-ç”¨æ ‡è®°æ¥å£å®šä¹‰ç±»å‹" class="router-link-active router-link-exact-active toc-link level2">ç¬¬ 41 æ¡ï¼šç”¨æ ‡è®°æ¥å£å®šä¹‰ç±»å‹</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="ç¬¬-6-ç« -æšä¸¾å’Œæ³¨è§£" tabindex="-1"><a class="header-anchor" href="#ç¬¬-6-ç« -æšä¸¾å’Œæ³¨è§£" aria-hidden="true">#</a> ç¬¬ 6 ç«  æšä¸¾å’Œæ³¨è§£</h1><p>Java æ”¯æŒä¸¤ç§ç‰¹æ®Šç”¨é€”çš„å¼•ç”¨ç±»å‹ï¼šä¸€ç§æ˜¯ç±»ï¼Œç§°ä½œæšä¸¾ç±»å‹ï¼›ä¸€ç§æ˜¯æ¥å£ï¼Œç§°ä½œæ³¨è§£ç±»å‹ã€‚æœ¬ç« å°†è®¨è®ºè¿™ä¸¤ä¸ªæ–°ç±»å‹çš„æœ€ä½³ä½¿ç”¨å®è·µã€‚</p><h2 id="ç¬¬-34-æ¡-ç”¨-enum-ä»£æ›¿-int-å¸¸é‡" tabindex="-1"><a class="header-anchor" href="#ç¬¬-34-æ¡-ç”¨-enum-ä»£æ›¿-int-å¸¸é‡" aria-hidden="true">#</a> ç¬¬ 34 æ¡ï¼šç”¨ enum ä»£æ›¿ int å¸¸é‡</h2><p>æšä¸¾ç±»å‹æ˜¯æŒ‡ç”±ä¸€ç»„å›ºå®šçš„å¸¸é‡ç»„æˆåˆæ³•å€¼çš„ç±»å‹ï¼Œä¾‹å¦‚ä¸€å¹´ä¸­çš„å­£èŠ‚ã€å¤ªé˜³ç³»ä¸­çš„è¡Œæ˜Ÿæˆ–è€…ä¸€å‰¯ç‰Œä¸­çš„èŠ±è‰²ã€‚åœ¨ Java ç¼–ç¨‹è¯­è¨€å¼•å…¥æšä¸¾ç±»å‹ä¹‹å‰ï¼Œé€šå¸¸æ˜¯ç”¨ä¸€ç»„ int å¸¸é‡æ¥è¡¨ç¤ºæšä¸¾ç±»å‹ï¼Œå…¶ä¸­æ¯ä¸€ä¸ª int å¸¸é‡è¡¨ç¤ºæšä¸¾ç±»å‹çš„ä¸€ä¸ªæˆå‘˜ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// The int enum pattern - severely deficient!</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> APPLE_FUJI <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> APPLE_PIPPIN <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> APPLE_GRANNY_SMITH <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> ORANGE_NAVEL <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> ORANGE_TEMPLE <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> ORANGE_BLOOD <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ç§æ–¹æ³•ç§°ä½œ int æšä¸¾æ¨¡å¼ï¼Œå®ƒå­˜åœ¨ç€å¾ˆå¤šä¸è¶³ã€‚int æšä¸¾æ¨¡å¼ä¸å…·æœ‰ç±»å‹å®‰å…¨æ€§ï¼Œä¹Ÿå‡ ä¹æ²¡æœ‰æè¿°æ€§å¯è¨€ã€‚ä¾‹å¦‚ä½ å°† apple ä¼ åˆ°æƒ³è¦ orange çš„æ–¹æ³•ä¸­ï¼Œç¼–è¯‘å™¨ä¹Ÿä¸ä¼šå‘å‡ºè­¦å‘Šï¼Œè¿˜ä¼šç”¨ == æ“ä½œç¬¦å¯¹ apple ä¸ orange è¿›è¡Œæ¯”è¾ƒï¼Œç”šè‡³æ›´ç³Ÿç³•ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Tasty citrus flavored applesauce!</span>
<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token punctuation">(</span>APPLE_FUJI <span class="token operator">-</span> ORANGE_TEMPLE<span class="token punctuation">)</span> <span class="token operator">/</span> APPLE_PIPPIN<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„æ¯ä¸ª apple å¸¸é‡çš„åç§°éƒ½ä»¥ APPLE_ ä½œä¸ºå‰ç¼€ï¼Œæ¯ä¸ª orange å¸¸é‡çš„åç§°åˆ™éƒ½ä»¥ ORANGE_ ä½œä¸ºå‰ç¼€ã€‚è¿™æ˜¯å› ä¸º Java æ²¡æœ‰ä¸º int æšä¸¾ç»„æä¾›å‘½åç©ºé—´ã€‚å½“ä¸¤ä¸ª int æšä¸¾ç»„å…·æœ‰ç›¸åŒçš„å‘½åå¸¸é‡æ—¶ï¼Œå‰ç¼€å¯ä»¥é˜²æ­¢åç§°å‘ç”Ÿå†²çªï¼Œå¦‚ä½¿ç”¨ ELEMENT_MERCURY å’Œ PLANET_MERCURY é¿å…åç§°å†²çªã€‚</p><p>é‡†ç”¨ int æšä¸¾æ¨¡å¼çš„ç¨‹åºæ˜¯ååˆ†è„†å¼±çš„ã€‚å› ä¸º int æšä¸¾æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œå®ƒä»¬çš„ int å€¼ä¼šè¢«ç¼–è¯‘åˆ°ä½¿ç”¨å®ƒä»¬çš„å®¢æˆ·ç«¯ä¸­ã€‚å¦‚æœä¸ int æšä¸¾å¸¸é‡å…³è”çš„å€¼å‘ç”Ÿäº†å˜åŒ–ï¼Œå®¢æˆ·ç«¯å¿…é¡»é‡æ–°ç¼–è¯‘ã€‚å¦‚æœæ²¡æœ‰é‡æ–°ç¼–è¯‘ï¼Œå®¢æˆ·ç«¯ç¨‹åºè¿˜æ˜¯å¯ä»¥è¿è¡Œï¼Œä¸è¿‡å…¶è¡Œä¸ºå·²ç»ä¸å†å‡†ç¡®ã€‚</p><p>å¾ˆéš¾å°† int æšä¸¾å¸¸é‡è½¬æ¢æˆå¯æ‰“å°çš„å­—ç¬¦ä¸²ã€‚å°±ç®—å°†è¿™ç§å¸¸é‡æ‰“å°å‡ºæ¥ï¼Œæˆ–è€…ä»è°ƒè¯•å™¨ä¸­å°†å®ƒæ˜¾ç¤ºå‡ºæ¥ï¼Œä½ æ‰€è§åˆ°çš„ä¹Ÿåªæ˜¯ä¸€ä¸ªæ•°å­—ï¼Œè¿™å‡ ä¹æ²¡æœ‰ä»€ä¹ˆç”¨å¤„ã€‚å½“éœ€è¦éå†ä¸€ä¸ª int æšä¸¾æ¨¡å¼ä¸­çš„æ‰€æœ‰å¸¸é‡ï¼Œä»¥åŠè·å¾— int æšä¸¾æ•°ç»„çš„å¤§å°æ—¶ï¼Œåœ¨ int æšä¸¾æ¨¡å¼ä¸­ï¼Œå‡ ä¹ä¸å­˜åœ¨å¯é çš„æ–¹å¼ã€‚</p><p>è¿™ç§æ¨¡å¼è¿˜æœ‰ä¸€ç§å˜ä½“ï¼Œå®ƒä½¿ç”¨çš„æ˜¯ String å¸¸é‡ï¼Œè€Œä¸æ˜¯ int å¸¸é‡ã€‚è¿™æ ·çš„å˜ä½“è¢«ç§°ä½œ String æšä¸¾æ¨¡å¼ï¼ŒåŒæ ·ä¹Ÿä¸æ˜¯æˆ‘ä»¬æœŸæœ›çš„ã€‚å®ƒè™½ç„¶ä¸ºè¿™äº›å¸¸é‡æä¾›äº†å¯æ‰“å°çš„å­—ç¬¦ä¸²ï¼Œä½†æ˜¯ä¼šå¯¼è‡´åˆçº§ç”¨æˆ·ç›´æ¥æŠŠå­—ç¬¦ä¸²å¸¸é‡ç¡¬ç¼–ç åˆ°å®¢æˆ·ç«¯ä»£ç ä¸­ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å¯¹åº”çš„å¸¸é‡å­—æ®µåã€‚ä¸€æ—¦è¿™æ ·çš„ç¡¬ç¼–ç å­—ç¬¦ä¸²å¸¸é‡ä¸­åŒ…å«ä¹¦å†™é”™è¯¯ï¼Œåœ¨ç¼–è¯‘æ—¶ä¸ä¼šè¢«æ£€æµ‹åˆ°ï¼Œä½†æ˜¯åœ¨è¿è¡Œçš„æ—¶å€™å´ä¼šæŠ¥é”™ã€‚è€Œä¸”å®ƒä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œå› ä¸ºå®ƒä¾èµ–äºå­—ç¬¦ä¸²çš„æ¯”è¾ƒæ“ä½œã€‚</p><p>å¹¸è¿çš„æ˜¯ï¼ŒJava æä¾›äº†å¦ä¸€ç§æ›¿ä»£çš„è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥é¿å… int å’Œ String æšä¸¾æ¨¡å¼çš„ç¼ºç‚¹ï¼Œå¹¶æä¾›æ›´å¤šçš„å¥½å¤„ã€‚è¿™å°±æ˜¯æšä¸¾ç±»å‹ã€‚ä¸‹é¢ä»¥æœ€ç®€å•çš„å½¢å¼æ¼”ç¤ºäº†è¿™ç§æ¨¡å¼ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Apple</span> <span class="token punctuation">{</span>
    FUJI<span class="token punctuation">,</span> PIPPIN<span class="token punctuation">,</span> CRANNY_SMITH
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Orange</span> <span class="token punctuation">{</span>
    NAVEL<span class="token punctuation">,</span> TEMPLE<span class="token punctuation">,</span> BLOOD
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¡¨é¢ä¸Šçœ‹æ¥ï¼Œè¿™äº›æšä¸¾ç±»å‹ä¸å…¶ä»–è¯­è¨€ä¸­çš„æ²¡æœ‰ä»€ä¹ˆä¸¤æ ·ï¼Œä¾‹å¦‚ Cã€C++ å’Œ C#ï¼Œä½†æ˜¯å®é™…ä¸Šå¹¶éå¦‚æ­¤ã€‚Java çš„æšä¸¾ç±»å‹æ˜¯åŠŸèƒ½ååˆ†é½å…¨çš„ç±»ï¼Œå…¶åŠŸèƒ½æ¯”å…¶ä»–è¯­è¨€ä¸­çš„å¯¹åº”ç±»å¼ºå¤§å¾—å¤šï¼ŒJava çš„æšä¸¾æœ¬è´¨ä¸Šæ˜¯ int å€¼ã€‚</p><p>Java æšä¸¾ç±»å‹çš„åŸºæœ¬æƒ³æ³•éå¸¸ç®€å•ï¼šè¿™äº›ç±»é€šè¿‡å…¬æœ‰çš„é™æ€ final åŸŸä¸ºæ¯ä¸ªæšä¸¾å¸¸é‡å¯¼å‡ºä¸€ä¸ªå®ä¾‹ã€‚æšä¸¾ç±»å‹æ²¡æœ‰å¯ä»¥è®¿é—®çš„æ„é€ å™¨ï¼Œæ‰€ä»¥å®ƒæ˜¯çœŸæ­£çš„ final ç±»ã€‚å®¢æˆ·ç«¯ä¸èƒ½åˆ›å»ºæšä¸¾ç±»å‹çš„å®ä¾‹ï¼Œä¹Ÿä¸èƒ½å¯¹å®ƒè¿›è¡Œæ‰©å±•ï¼Œå› æ­¤ä¸å­˜åœ¨å®ä¾‹ï¼Œè€Œåªå­˜åœ¨å£°æ˜è¿‡çš„æšä¸¾å¸¸é‡ã€‚æ¢å¥è¯è¯´ï¼Œæšä¸¾ç±»å‹æ˜¯å®ä¾‹å—æ§çš„ã€‚å®ƒä»¬æ˜¯å•ä¾‹çš„æ³›å‹åŒ–ï¼Œæœ¬è´¨ä¸Šæ˜¯å•å…ƒç´ çš„æšä¸¾ã€‚</p><p>æšä¸¾ç±»å‹ä¿è¯äº†ç¼–è¯‘æ—¶çš„ç±»å‹å®‰å…¨ã€‚ä¾‹å¦‚å£°æ˜å‚æ•°çš„ç±»å‹ä¸º Appleï¼Œå®ƒå°±èƒ½ä¿è¯ä¼ åˆ°è¯¥å‚æ•°ä¸Šçš„ä»»ä½•éç©ºçš„å¯¹è±¡å¼•ç”¨ä¸€å®šå±äºä¸‰ä¸ªæœ‰æ•ˆçš„ Apple å€¼ä¹‹ä¸€ï¼Œè€Œå…¶ä»–ä»»ä½•è¯•å›¾ä¼ é€’ç±»å‹é”™è¯¯çš„å€¼éƒ½ä¼šå¯¼è‡´ç¼–è¯‘æ—¶é”™è¯¯ï¼Œå°±åƒè¯•å›¾å°†æŸç§æšä¸¾ç±»å‹çš„è¡¨è¾¾å¼èµ‹ç»™å¦ä¸€ç§æšä¸¾ç±»å‹çš„å˜é‡ï¼Œæˆ–è€…è¯•å›¾åˆ©ç”¨ == æ“ä½œç¬¦æ¯”è¾ƒä¸åŒæšä¸¾ç±»å‹çš„å€¼éƒ½ä¼šå¯¼è‡´ç¼–è¯‘æ—¶é”™è¯¯ã€‚</p><p>åŒ…å«åŒåå¸¸é‡çš„å¤šä¸ªæšä¸¾ç±»å‹å¯ä»¥åœ¨ä¸€ä¸ªç³»ç»Ÿä¸­å’Œå¹³å…±å¤„ï¼Œå› ä¸ºæ¯ä¸ªç±»å‹éƒ½æœ‰è‡ªå·±çš„å‘½åç©ºé—´ã€‚ä½ å¯ä»¥å¢åŠ æˆ–è€…é‡æ–°æ’åˆ—æšä¸¾ç±»å‹ä¸­çš„å¸¸é‡ï¼Œè€Œæ— é¡»é‡æ–°ç¼–è¯‘å®ƒçš„å®¢æˆ·ç«¯ä»£ç ï¼Œå› ä¸ºå¯¼å‡ºå¸¸é‡çš„åŸŸåœ¨æšä¸¾ç±»å‹å’Œå®ƒçš„å®¢æˆ·ç«¯ä¹‹é—´æä¾›äº†ä¸€ä¸ªéš”ç¦»å±‚ï¼šå¸¸é‡å€¼å¹¶æ²¡æœ‰è¢«ç¼–è¯‘åˆ°å®¢æˆ·ç«¯ä»£ç ä¸­ï¼Œè€Œæ˜¯åœ¨ int æšä¸¾æ¨¡å¼ä¹‹ä¸­ã€‚æœ€ç»ˆï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨ toString æ–¹æ³•ï¼Œå°†æšä¸¾è½¬æ¢æˆå¯æ‰“å°çš„å­—ç¬¦ä¸²ã€‚</p><p>é™¤äº†å®Œå–„ int æšä¸¾æ¨¡å¼çš„ä¸è¶³ä¹‹å¤–ï¼Œæšä¸¾ç±»å‹è¿˜å…è®¸æ·»åŠ ä»»æ„çš„æ–¹æ³•å’ŒåŸŸï¼Œå¹¶å®ç°ä»»æ„çš„æ¥å£ã€‚å®ƒä»¬æä¾›äº†æ‰€æœ‰ Object æ–¹æ³•çš„é«˜çº§å®ç°ï¼Œå®ç°äº† Comparable å’Œ Serializable æ¥å£ï¼Œå¹¶é’ˆå¯¹æšä¸¾ç±»å‹çš„å¯ä»»æ„æ”¹å˜æ€§è®¾è®¡äº†åºåˆ—åŒ–æ–¹å¼ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å‘æšä¸¾ç±»å‹ä¸­æ·»åŠ æ–¹æ³•æˆ–è€…åŸŸå‘¢ï¼Ÿé¦–å…ˆï¼Œå¯èƒ½æ˜¯æƒ³å°†æ•°æ®ä¸å®ƒçš„å¸¸é‡å…³è”èµ·æ¥ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªèƒ½å¤Ÿè¿”å›æ°´æœé¢œè‰²æˆ–è€…è¿”å›æ°´æœå›¾ç‰‡çš„æ–¹æ³•ï¼Œå¯¹äºæˆ‘ä»¬çš„ Apple å’Œ Orange ç±»å‹å°±å¾ˆæœ‰å¿…è¦ã€‚ä½ å¯ä»¥åˆ©ç”¨ä»»ä½•é€‚å½“çš„æ–¹æ³•æ¥å¢å¼ºæšä¸¾ç±»å‹ã€‚æšä¸¾ç±»å‹å¯ä»¥å…ˆä½œä¸ºæšä¸¾å¸¸é‡çš„ä¸€ä¸ªç®€å•é›†åˆï¼Œéšç€æ—¶é—´çš„æ¨ç§»å†æ¼”å˜æˆä¸ºå…¨åŠŸèƒ½çš„æŠ½è±¡ã€‚</p><p>ä¸¾ä¸ªæœ‰å…³æšä¸¾ç±»å‹çš„ä¾‹å­ï¼Œæ¯”å¦‚å¤ªé˜³ç³»ä¸­çš„ 8 é¢—è¡Œæ˜Ÿã€‚æ¯é¢—è¡Œæ˜Ÿéƒ½æœ‰è´¨é‡å’ŒåŠå¾„ï¼Œé€šè¿‡è¿™ä¸¤ä¸ªå±æ€§å¯ä»¥è®¡ç®—å‡ºå®ƒçš„è¡¨é¢é‡åŠ›ã€‚ä»è€Œç»™å®šç‰©ä½“çš„è´¨é‡ï¼Œè¿›è€Œè®¡ç®—å‡ºä¸€ä¸ªç‰©ä½“åœ¨è¡Œæ˜Ÿè¡¨é¢ä¸Šçš„é‡é‡ã€‚ä¸‹é¢å°±æ˜¯è¿™ä¸ªæšä¸¾ã€‚æ¯ä¸ªæšä¸¾å¸¸é‡åé¢æ‹¬å·ä¸­çš„æ•°å€¼å°±æ˜¯ä¼ é€’ç»™æ„é€ å™¨çš„å‚æ•°ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå®ƒä»¬å°±æ˜¯è¡Œæ˜Ÿçš„è´¨é‡å’ŒåŠå¾„ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Enum type with data and behavior</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Planet</span> <span class="token punctuation">{</span>
    <span class="token function">MERCURY</span><span class="token punctuation">(</span><span class="token number">3.302e+23</span><span class="token punctuation">,</span> <span class="token number">2.439e6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">VENUS</span><span class="token punctuation">(</span><span class="token number">4.869e+24</span><span class="token punctuation">,</span> <span class="token number">6.052e6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">EARTH</span><span class="token punctuation">(</span><span class="token number">5.975e+24</span><span class="token punctuation">,</span> <span class="token number">6.378e6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">MARS</span><span class="token punctuation">(</span><span class="token number">6.419e+23</span><span class="token punctuation">,</span> <span class="token number">3.393e6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">JUPITER</span><span class="token punctuation">(</span><span class="token number">1.899e+27</span><span class="token punctuation">,</span> <span class="token number">7.149e7</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">SATURN</span><span class="token punctuation">(</span><span class="token number">5.685e+26</span><span class="token punctuation">,</span> <span class="token number">6.027e7</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">URANUS</span><span class="token punctuation">(</span><span class="token number">8.683e+25</span><span class="token punctuation">,</span> <span class="token number">2.556e7</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">NEPTUNE</span><span class="token punctuation">(</span><span class="token number">1.024e+26</span><span class="token punctuation">,</span> <span class="token number">2.477e7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// In kilograms</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">double</span> mass<span class="token punctuation">;</span>
    <span class="token comment">// In meters</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">double</span> radius<span class="token punctuation">;</span>
    <span class="token comment">// In m / s^2</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">double</span> surfaceGravity<span class="token punctuation">;</span>
    <span class="token comment">// Universal gravitational constant in m^3 / kg s^2</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">double</span> <span class="token class-name">G</span> <span class="token operator">=</span> <span class="token number">6.67300E-11</span><span class="token punctuation">;</span>

    <span class="token comment">// Constructor</span>
    <span class="token class-name">Planet</span><span class="token punctuation">(</span><span class="token keyword">double</span> mass<span class="token punctuation">,</span> <span class="token keyword">double</span> radius<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mass <span class="token operator">=</span> mass<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>radius <span class="token operator">=</span> radius<span class="token punctuation">;</span>
        surfaceGravity <span class="token operator">=</span> <span class="token class-name">G</span> <span class="token operator">*</span> mass <span class="token operator">/</span> <span class="token punctuation">(</span>radius <span class="token operator">*</span> radius<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">mass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mass<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">radius</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> radius<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">surfaceGravity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> surfaceGravity<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">surfaceWeight</span><span class="token punctuation">(</span><span class="token keyword">double</span> mass<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// F = ma</span>
        <span class="token keyword">return</span> mass <span class="token operator">*</span> surfaceGravity<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¼–å†™ä¸€ä¸ªåƒ Planet è¿™æ ·çš„æšä¸¾ç±»å‹å¹¶ä¸éš¾ã€‚ä¸ºäº†å°†æ•°æ®ä¸æšä¸¾å¸¸é‡å…³è”èµ·æ¥ï¼Œå¾—å£°æ˜å®ä¾‹åŸŸï¼Œå¹¶ç¼–å†™ä¸€ä¸ªå¸¦æœ‰æ•°æ®å¹¶å°†æ•°æ®ä¿å­˜åœ¨åŸŸä¸­çš„æ„é€ å™¨ã€‚æšä¸¾å¤©ç”Ÿå°±æ˜¯ä¸å¯å˜çš„ï¼Œå› æ­¤æ‰€æœ‰çš„åŸŸéƒ½åº”è¯¥ä¸º final çš„ã€‚å®ƒä»¬å¯ä»¥æ˜¯å…¬æœ‰çš„ï¼Œä½†æœ€å¥½å°†å®ƒä»¬åšæˆç§æœ‰çš„ï¼Œå¹¶æä¾›å…¬æœ‰çš„è®¿é—®æ–¹æ³•ã€‚åœ¨ Planet è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæ„é€ å™¨è¿˜è®¡ç®—å’Œä¿å­˜è¡¨é¢é‡åŠ›ï¼Œä½†è¿™æ­£æ˜¯ä¸€ç§ä¼˜åŒ–ã€‚æ¯å½“ surfaceWeight æ–¹æ³•ç”¨åˆ°é‡åŠ›æ—¶ï¼Œéƒ½ä¼šæ ¹æ®è´¨é‡å’ŒåŠå¾„é‡æ–°è®¡ç®—ï¼Œå¹¶è¿”å›å®ƒåœ¨è¯¥å¸¸é‡æ‰€è¡¨ç¤ºçš„è¡Œæ˜Ÿä¸Šçš„é‡é‡ã€‚</p><p>è™½ç„¶ Planet æšä¸¾å¾ˆç®€å•ï¼Œä½†å®ƒçš„åŠŸèƒ½å¼ºå¤§å¾—å‡ºå¥‡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€çŸ­çš„ç¨‹åºï¼Œæ ¹æ®æŸä¸ªç‰©ä½“åœ¨åœ°çƒä¸Šçš„é‡é‡ï¼ˆä»¥ä»»ä½•å•ä½ï¼‰ï¼Œæ‰“å°å‡ºä¸€å¼ å¾ˆæ£’çš„è¡¨æ ¼ï¼Œæ˜¾ç¤ºå‡ºè¯¥ç‰©ä½“åœ¨æ‰€æœ‰ 8 é¢—è¡Œæ˜Ÿä¸Šçš„é‡é‡ï¼ˆç”¨ç›¸åŒçš„å•ä½ï¼‰ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WeightTable</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">double</span> earthWeight <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">parseDouble</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> mass <span class="token operator">=</span> earthWeight <span class="token operator">/</span> <span class="token class-name">Planet</span><span class="token punctuation">.</span>EARTH<span class="token punctuation">.</span><span class="token function">surfaceGravity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Planet</span> p <span class="token operator">:</span> <span class="token class-name">Planet</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Weight on %s is %f%n&quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">,</span> p<span class="token punctuation">.</span><span class="token function">surfaceWeight</span><span class="token punctuation">(</span>mass<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„å°±åƒæ‰€æœ‰çš„æšä¸¾ä¸€æ ·ï¼ŒPlanet æœ‰ä¸€ä¸ªé™æ€çš„ values æ–¹æ³•ï¼ŒæŒ‰ç…§å£°æ˜é¡ºåºè¿”å›å®ƒçš„å€¼æ•°ç»„ã€‚toString æ–¹æ³•è¿”å›æ¯ä¸ªæšä¸¾å€¼çš„å£°æ˜åç§°ï¼Œä½¿å¾— println å’Œ printf çš„æ‰“å°å˜å¾—æ›´åŠ å®¹æ˜“ã€‚å¦‚æœä½ ä¸æ»¡æ„è¿™ç§å­—ç¬¦ä¸²è¡¨ä¸æ³•ï¼Œå¯ä»¥é€šè¿‡è¦†ç›– toString æ–¹æ³•å¯¹å®ƒè¿›è¡Œä¿®æ”¹ã€‚ä¸‹é¢å°±æ˜¯å¸¦å‘½ä»¤è¡Œå‚æ•°ä¸º 185 æ¥è¿è¡Œè¿™ä¸ªå°å°çš„ WeightTable ç¨‹åºï¼ˆæ²¡æœ‰è¦†ç›– toString æ–¹æ³•ï¼‰æ—¶çš„ç»“æœï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Weight</span> on MERCURY is <span class="token number">69.912739</span>
<span class="token class-name">Weight</span> on VENUS is <span class="token number">167.434436</span>
<span class="token class-name">Weight</span> on EARTH is <span class="token number">185.000000</span>
<span class="token class-name">Weight</span> on MARS is <span class="token number">70.226739</span>
<span class="token class-name">Weight</span> on JUPITER is <span class="token number">467.990696</span>
<span class="token class-name">Weight</span> on SATURN is <span class="token number">197.120111</span>
<span class="token class-name">Weight</span> on URANUS is <span class="token number">167.398264</span>
<span class="token class-name">Weight</span> on NEPTUNE is <span class="token number">210.208751</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç›´åˆ° 2006 å¹´ï¼Œå³ Java ä¸­å¢åŠ äº†æšä¸¾çš„ä¸¤å¹´ä¹‹åï¼Œå½“æ—¶å†¥ç‹æ˜Ÿ Pluto è¿˜å±äºè¡Œæ˜Ÿã€‚è¿™å¼•å‘å‡ºä¸€ä¸ªé—®é¢˜ï¼šå½“æŠŠä¸€ä¸ªå…ƒç´ ä»ä¸€ä¸ªæšä¸¾ç±»å‹ä¸­ç§»é™¤æ—¶ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼šæ²¡æœ‰å¼•ç”¨è¯¥å…ƒç´ çš„ä»»ä½•å®¢æˆ·ç«¯ç¨‹åºéƒ½ä¼šç»§ç»­æ­£å¸¸å·¥ä½œã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„ WeightTable ç¨‹åºåªä¼šæ‰“å°å‡ºä¸€ä¸ªå°‘äº†ä¸€è¡Œçš„è¡¨æ ¼è€Œå·²ã€‚å¯¹äºå¼•ç”¨äº†è¢«åˆ é™¤å…ƒç´ ï¼ˆå¦‚æœ¬ä¾‹ä¸­æ˜¯æŒ‡ Planet.Plutoï¼‰çš„å®¢æˆ·ç«¯ç¨‹åºåˆå¦‚ä½•å‘¢ï¼Ÿå¦‚æœé‡æ–°ç¼–è¯‘å®¢æˆ·ç«¯ç¨‹åºï¼Œå°±ä¼šå¤±è´¥ï¼Œå¹¶åœ¨å¼•ç”¨è¢«åˆ é™¤è¡Œæ˜Ÿçš„é‚£ä¸€æ¡å‡ºç°ä¸€æ¡é”™è¯¯æ¶ˆæ¯ï¼›å¦‚æœæ²¡æœ‰é‡æ–°ç¼–è¯‘å®¢æˆ·ç«¯ä»£ç ï¼Œåœ¨è¿è¡Œæ—¶å°±ä¼šåœ¨è¿™ä¸€è¡ŒæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚è¿™æ˜¯ä½ èƒ½æœŸå¾…çš„æœ€ä½³è¡Œä¸ºäº†ï¼Œè¿œæ¯”ä½¿ç”¨ int æšä¸¾æ¨¡å¼æ—¶è¦å¥½å¾—å¤šã€‚</p><p>æœ‰äº›ä¸æšä¸¾å¸¸é‡ç›¸å…³çš„è¡Œä¸ºï¼Œå¯èƒ½åªä¼šç”¨åœ¨æšä¸¾ç±»å‹çš„å®šä¹‰ç±»æˆ–è€…æ‰€åœ¨çš„åŒ…ä¸­ï¼Œé‚£ä¹ˆè¿™äº›æ–¹æ³•æœ€å¥½è¢«å®ç°æˆç§æœ‰çš„æˆ–è€…åŒ…çº§ç§æœ‰çš„ã€‚äºæ˜¯æ¯ä¸ªæšä¸¾å¸¸é‡éƒ½å¸¦æœ‰ä¸€ç»„éšè—çš„è¡Œä¸ºï¼Œè¿™ä½¿å¾—æšä¸¾ç±»å‹çš„ç±»æˆ–è€…æ‰€åœ¨çš„åŒ…èƒ½å¤Ÿè¿ä½œå¾—å¾ˆå¥½ï¼Œåƒå…¶ä»–çš„ç±»ä¸€æ ·ï¼Œé™¤éè¦å°†æšä¸¾æ–¹æ³•å¯¼å‡ºè‡³å®ƒçš„å®¢æˆ·ç«¯ï¼Œå¦åˆ™éƒ½åº”è¯¥å£°æ˜ä¸ºç§æœ‰çš„ï¼Œæˆ–è€…å£°æ˜ä¸ºåŒ…çº§ç§æœ‰çš„ã€‚</p><p>å¦‚æœä¸€ä¸ªæšä¸¾å…·æœ‰æ™®éé€‚ç”¨æ€§ï¼Œå®ƒå°±åº”è¯¥æˆä¸ºä¸€ä¸ªé¡¶å±‚ç±»ï¼›å¦‚æœå®ƒåªæ˜¯è¢«ç”¨åœ¨ä¸€ä¸ªç‰¹å®šçš„é¡¶å±‚ç±»ä¸­ï¼Œå®ƒå°±åº”è¯¥æˆä¸ºè¯¥é¡¶å±‚ç±»çš„ä¸€ä¸ªæˆå‘˜ç±»ã€‚ä¾‹å¦‚ï¼Œjava.math.RoundingMode æšä¸¾è¡¨ç¤ºåè¿›åˆ¶å°æ•°çš„èˆå…¥æ¨¡å¼ã€‚è¿™äº›èˆå…¥æ¨¡å¼è¢«ç”¨äº BigDecimal ç±»ï¼Œä½†æ˜¯å®ƒä»¬å´ä¸å±äº BigDecimal ç±»çš„ä¸€ä¸ªæŠ½è±¡ã€‚é€šè¿‡ä½¿ RoundingMode å˜æˆä¸€ä¸ªé¡¶å±‚ç±»ï¼Œåº“çš„è®¾è®¡è€…é¼“åŠ±ä»»ä½•éœ€è¦èˆå…¥æ¨¡å¼çš„ç¨‹åºå‘˜é‡ç”¨è¿™ä¸ªæšä¸¾ï¼Œä»è€Œå¢å¼º API ä¹‹é—´çš„ä¸€è‡´æ€§ã€‚</p><p>Planet ç¤ºä¾‹ä¸­æ‰€ç¤ºçš„æ–¹æ³•å¯¹äºå¤§å¤šæ•°æšä¸¾ç±»å‹æ¥è¯´å°±è¶³å¤Ÿäº†ï¼Œä½†æœ‰æ—¶å€™æˆ‘ä»¬ä¼šéœ€è¦æ›´å¤šçš„æ–¹æ³•ã€‚æ¯ä¸ª Planet å¸¸é‡å…³è”äº†ä¸åŒçš„æ•°æ®ï¼Œä½†ä½ æœ‰æ—¶éœ€è¦å°†ä¸åŒçš„è¡Œä¸ºä¸æ¯ä¸ªå¸¸é‡å…³è”èµ·æ¥ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ åœ¨ç¼–å†™ä¸€ä¸ªæšä¸¾ç±»å‹ï¼Œæ¥è¡¨ç¤ºè®¡ç®—å™¨çš„å››å¤§åŸºæœ¬æ“ä½œï¼ˆå³åŠ å‡ä¹˜é™¤ï¼‰ï¼Œä½ æƒ³è¦æä¾›ä¸€ä¸ªæ–¹æ³•æ¥æ‰§è¡Œæ¯ä¸ªå¸¸é‡æ‰€è¡¨ç¤ºçš„ç®—æœ¯è¿ç®—ã€‚æœ‰ä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡å¯ç”¨æšä¸¾çš„å€¼æ¥å®ç°ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Enum type that switches on its own value - questionable</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Operation</span> <span class="token punctuation">{</span>
    PLUS<span class="token punctuation">,</span> MINUS<span class="token punctuation">,</span> TIMES<span class="token punctuation">,</span> DIVIDE<span class="token punctuation">;</span>

    <span class="token comment">// Do the arithmetic operation represented by this constant</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> PLUS<span class="token operator">:</span>
                <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
            <span class="token keyword">case</span> MINUS<span class="token operator">:</span>
                <span class="token keyword">return</span> x <span class="token operator">-</span> y<span class="token punctuation">;</span>
            <span class="token keyword">case</span> TIMES<span class="token operator">:</span>
                <span class="token keyword">return</span> x <span class="token operator">*</span> y<span class="token punctuation">;</span>
            <span class="token keyword">case</span> DIVIDE<span class="token operator">:</span>
                <span class="token keyword">return</span> x <span class="token operator">/</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">AssertionError</span><span class="token punctuation">(</span><span class="token string">&quot;Unknown op:&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µä»£ç èƒ½ç”¨ï¼Œä½†æ˜¯ä¸å¤ªå¥½çœ‹ã€‚å¦‚æœæ²¡æœ‰ throw è¯­å¥ï¼Œå®ƒå°±ä¸èƒ½è¿›è¡Œç¼–è¯‘ï¼Œè™½ç„¶ä»æŠ€æœ¯è§’åº¦æ¥çœ‹ä»£ç çš„ç»“æŸéƒ¨åˆ†æ˜¯å¯ä»¥æ‰§è¡Œåˆ°çš„ï¼Œä½†æ˜¯å®é™…ä¸Šæ˜¯ä¸å¯èƒ½æ‰§è¡Œåˆ°è¿™è¡Œä»£ç çš„ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œè¿™æ®µä»£ç å¾ˆè„†å¼±ã€‚å¦‚æœä½ æ·»åŠ äº†æ–°çš„æšä¸¾å¸¸é‡ï¼Œå´å¿˜è®°ç»™ switch æ·»åŠ ç›¸åº”çš„æ¡ä»¶ï¼Œæšä¸¾ä»ç„¶å¯ä»¥ç¼–è¯‘ï¼Œä½†æ˜¯å½“ä½ è¯•å›¾è¿ç”¨æ–°çš„è¿ç®—æ—¶ï¼Œå°±ä¼šè¿è¡Œå¤±è´¥ã€‚</p><p>å¹¸è¿çš„æ˜¯ï¼Œæœ‰ä¸€ç§æ›´å¥½çš„æ–¹æ³•å¯ä»¥å°†ä¸åŒçš„è¡Œä¸ºä¸æ¯ä¸ªæšä¸¾å¸¸é‡å…³è”èµ·æ¥ï¼šåœ¨æšä¸¾ç±»å‹ä¸­å£°æ˜ä¸€ä¸ªæŠ½è±¡çš„ apply æ–¹æ³•ï¼Œå¹¶åœ¨ç‰¹å®šäºå¸¸é‡çš„ç±»ä¸»ä½“ä¸­ï¼Œç”¨å…·ä½“çš„æ–¹æ³•è¦†ç›–æ¯ä¸ªå¸¸é‡çš„æŠ½è±¡ apply æ–¹æ³•ã€‚è¿™ç§æ–¹æ³•è¢«ç§°ä½œç‰¹å®šäºå¸¸é‡çš„æ–¹æ³•å®ç°ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Enum type with constant-specific method implementations</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Operation</span> <span class="token punctuation">{</span>
    PLUS <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    MINUS <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> x <span class="token operator">-</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    TIMES <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> x <span class="token operator">*</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    DIVIDE <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> x <span class="token operator">/</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœç»™ Operation çš„ç¬¬äºŒç§ç‰ˆæœ¬æ·»åŠ æ–°çš„å¸¸é‡ï¼Œä½ å°±ä¸å¯èƒ½ä¼šå¿˜è®°æä¾› apply æ–¹æ³•ï¼Œå› ä¸ºè¯¥æ–¹æ³•ç´§è·Ÿåœ¨æ¯ä¸ªå¸¸é‡å£°æ˜ä¹‹åã€‚å³ä½¿ä½ çœŸçš„å¿˜è®°äº†ï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šæé†’ä½ ï¼Œå› ä¸ºæšä¸¾ç±»å‹ä¸­çš„æŠ½è±¡æ–¹æ³•å¿…é¡»è¢«å®ƒçš„æ‰€æœ‰å¸¸é‡ä¸­çš„å…·ä½“æ–¹æ³•æ‰€è¦†ç›–ã€‚</p><p>ç‰¹å®šäºå¸¸é‡çš„æ–¹æ³•å®ç°å¯ä»¥ä¸ç‰¹å®šäºå¸¸é‡çš„æ•°æ®ç»“åˆèµ·æ¥ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ Operation è¦†ç›–äº† toString æ–¹æ³•ä»¥è¿”å›é€šå¸¸ä¸è¯¥æ“ä½œå…³è”çš„ç¬¦å·ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Enum type with constant-specific class bodies and data</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Operation</span> <span class="token punctuation">{</span>
    <span class="token function">PLUS</span><span class="token punctuation">(</span><span class="token string">&quot;+&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">MINUS</span><span class="token punctuation">(</span><span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> x <span class="token operator">-</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">TIMES</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> x <span class="token operator">*</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">DIVIDE</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> x <span class="token operator">/</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> symbol<span class="token punctuation">;</span>

    <span class="token class-name">Operation</span><span class="token punctuation">(</span><span class="token class-name">String</span> symbol<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>symbol <span class="token operator">=</span> symbol<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> symbol<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¿°çš„ toString å®ç°ä½¿å¾—æ‰“å°ç®—æœ¯è¡¨è¾¾å¼å˜å¾—éå¸¸å®¹æ˜“ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">double</span> x <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">parseDouble</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">double</span> y <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">parseDouble</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Operation</span> op <span class="token operator">:</span> <span class="token class-name">Operation</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%f %s %f = %f%n&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> op<span class="token punctuation">,</span> y<span class="token punctuation">,</span> op<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”¨ 2 å’Œ 4 ä½œä¸ºå‘½ä»¤è¡Œå‚æ•°æ¥è¿è¡Œè¿™æ®µç¨‹åºã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token number">2.000000</span> <span class="token operator">+</span> <span class="token number">4.000000</span> <span class="token operator">=</span> <span class="token number">6.000000</span>
<span class="token number">2.000000</span> <span class="token operator">-</span> <span class="token number">4.000000</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">2.000000</span>
<span class="token number">2.000000</span> <span class="token operator">*</span> <span class="token number">4.000000</span> <span class="token operator">=</span> <span class="token number">8.000000</span>
<span class="token number">2.000000</span> <span class="token operator">/</span> <span class="token number">4.000000</span> <span class="token operator">=</span> <span class="token number">0.500000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æšä¸¾ç±»å‹æœ‰ä¸€ä¸ªè‡ªåŠ¨äº§ç”Ÿçš„ valueOf(String) æ–¹æ³•ï¼Œå®ƒå°†å¸¸é‡çš„åå­—è½¬æˆå¸¸é‡æœ¬èº«ã€‚å¦‚æœåœ¨æšä¸¾ç±»å‹ä¸­è¦†ç›– toStringï¼Œè¦è€ƒè™‘ç¼–å†™ä¸€ä¸ª fromString æ–¹æ³•ï¼Œå°†å®šåˆ¶çš„å­—ç¬¦ä¸²è¡¨ç¤ºæ³•å˜å›ç›¸åº”çš„æšä¸¾ã€‚ä¸‹åˆ—ä»£ç ï¼ˆé€‚å½“åœ°æ”¹å˜äº†ç±»å‹åç§°ï¼‰å¯ä»¥ä¸ºä»»ä½•æšä¸¾å®Œæˆè¿™ä¸€æŠ€å·§ï¼Œåªè¦æ¯ä¸ªå¸¸é‡éƒ½æœ‰ä¸€ä¸ªç‹¬ç‰¹çš„å­—ç¬¦ä¸²è¡¨ç¤ºæ³•ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Implementing a fromString method on an enum type</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Operation</span><span class="token punctuation">&gt;</span></span> stringToEnum <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token function">toMap</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token operator">::</span><span class="token function">toString</span><span class="token punctuation">,</span> e <span class="token operator">-&gt;</span> e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Returns Operation for String, if any</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Operation</span><span class="token punctuation">&gt;</span></span> <span class="token function">fromString</span><span class="token punctuation">(</span><span class="token class-name">String</span> symbol<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span>stringToEnum<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>symbol<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼Œåœ¨æšä¸¾å¸¸é‡è¢«åˆ›å»ºä¹‹åï¼ŒOperation å¸¸é‡ä»é™æ€ä»£ç å—ä¸­è¢«æ”¾å…¥åˆ°äº† StringToEnum çš„æ˜ å°„ä¸­ã€‚å‰é¢çš„ä»£ç åœ¨ values() æ–¹æ³•è¿”å›çš„æ•°ç»„ä¸Šä½¿ç”¨æµï¼›åœ¨ Java 8 ä¹‹å‰ï¼Œæˆ‘ä¹ˆå°†åˆ›å»ºä¸€ä¸ªç©ºçš„æ•£åˆ—æ˜ å°„å¹¶éå† values æ•°ç»„ï¼Œå°†å­—ç¬¦ä¸²åˆ°æšä¸¾çš„æ˜ å°„æ’å…¥åˆ°æ˜ å°„ä¸­ã€‚ä½†æ˜¯ï¼Œè¯•å›¾ä½¿æ¯ä¸ªå¸¸é‡éƒ½ä»è‡ªèº«çš„æ„é€ å™¨æ”¾å…¥è‡ªèº«çš„æ˜ å°„ä¸­æ˜¯ä¸èµ·ä½œç”¨çš„ã€‚å®ƒä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼Œå› ä¸ºå¦‚æœè¿™æ˜¯åˆæ³•çš„ï¼Œå¯èƒ½ä¼šå¼•å‘ NullPointerException å¼‚å¸¸ã€‚é™¤äº†ç¼–è¯‘æ—¶å¸¸é‡åŸŸä¹‹å¤–ï¼Œæšä¸¾æ„é€ å™¨ä¸å¯ä»¥è®¿é—®æšä¸¾çš„é™æ€åŸŸã€‚è¿™ä¸€é™åˆ¶æ—¶æœ‰å¿…è¦çš„ï¼Œå› ä¸ºæ„é€ å™¨è¿è¡Œçš„æ—¶å€™ï¼Œè¿™äº›é™æ€åŸŸè¿˜æ²¡æœ‰è¢«åˆå§‹åŒ–ã€‚è¿™æ¡é™åˆ¶æœ‰ä¸€ä¸ªç‰¹ä¾‹ï¼šæšä¸¾å¸¸é‡æ— æ³•é€šè¿‡å…¶æ„é€ å™¨è®¿é—®å¦ä¸€ä¸ªæ„é€ å™¨ã€‚</p><p>è¿˜è¦æ³¨æ„è¿”å›çš„ Optional&lt;Operation&gt; çš„ fromString æ–¹æ³•ã€‚å®ƒç”¨è¯¥æ–¹æ³•è¡¨æ˜ï¼šä¼ å…¥çš„å­—ç¬¦ä¸²å¹¶ä¸ä»£è¡¨ä¸€é¡¹æœ‰æ•ˆçš„æ“ä½œï¼Œå¹¶å¼ºåˆ¶å®¢æˆ·ç«¯é¢å¯¹è¿™ç§å¯èƒ½æ€§ã€‚</p><p>ç‰¹å®šäºå¸¸é‡çš„æ–¹æ³•å®ç°æœ‰ä¸€ä¸ªç¾ä¸­ä¸è¶³çš„åœ°æ–¹ï¼Œå®ƒä»¬ä½¿å¾—åœ¨æšä¸¾å¸¸é‡ä¸­å…±äº«ä»£ç å˜å¾—æ›´åŠ å›°éš¾äº†ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ç”¨ä¸€ä¸ªæšä¸¾è¡¨ç¤ºè–ªèµ„åŒ…ä¸­çš„å·¥ä½œå¤©æ•°ã€‚è¿™ä¸ªæšä¸¾æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œæ ¹æ®ç»™å®šçš„æŸå·¥äººçš„åŸºæœ¬å·¥èµ„ï¼ˆæŒ‰å°æ—¶ï¼‰ä»¥åŠå½“å¤©çš„å·¥ä½œæ—¶é—´ï¼Œæ¥è®¡ç®—ä»–å½“å¤©çš„æŠ¥é…¬ã€‚åœ¨äº”ä¸ªå·¥ä½œæ—¥ä¸­ï¼Œè¶…è¿‡æ­£å¸¸å…«å°æ—¶çš„å·¥ä½œæ—¶é—´éƒ½ä¼šäº§ç”ŸåŠ ç­å·¥èµ„ï¼›åœ¨èŠ‚å‡æ—¥ä¸­ï¼Œæ‰€æœ‰å·¥ä½œéƒ½äº§ç”ŸåŠ ç­å·¥èµ„ã€‚åˆ©ç”¨ switch è¯­å¥ï¼Œå¾ˆå®¹æ˜“é€šè¿‡å°†å¤šä¸ª case æ ‡ç­¾åˆ†åˆ«åº”ç”¨åˆ°ä¸¤ä¸ªä»£ç ç‰‡æ®µä¸­ï¼Œæ¥å®Œæˆè¿™ä¸€è®¡ç®—ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Enum that switches on its value to share code - questionable</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">PayrollDay</span> <span class="token punctuation">{</span>
    MONDAY<span class="token punctuation">,</span> TUESDAY<span class="token punctuation">,</span> WEDNESDAY<span class="token punctuation">,</span> THURSDAY<span class="token punctuation">,</span> FRIDAY<span class="token punctuation">,</span> SATURDAY<span class="token punctuation">,</span> SUNDAY<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> MINS_PER_SHIFT <span class="token operator">=</span> <span class="token number">8</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> <span class="token function">pay</span><span class="token punctuation">(</span><span class="token keyword">int</span> minutesWorked<span class="token punctuation">,</span> <span class="token keyword">int</span> payRate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> basePay <span class="token operator">=</span> minutesWorked <span class="token operator">*</span> payRate<span class="token punctuation">;</span>
        <span class="token keyword">int</span> overtimePay<span class="token punctuation">;</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Weekend</span>
            <span class="token keyword">case</span> SATURDAY<span class="token operator">:</span>
            <span class="token keyword">case</span> SUNDAY<span class="token operator">:</span>
                overtimePay <span class="token operator">=</span> basePay <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token comment">// Weekday</span>
            <span class="token keyword">default</span><span class="token operator">:</span>
                overtimePay <span class="token operator">=</span> minutesWorked <span class="token operator">&lt;=</span> MINS_PER_SHIFT <span class="token operator">?</span>
                        <span class="token number">0</span> <span class="token operator">:</span> <span class="token punctuation">(</span>minutesWorked <span class="token operator">-</span> MINS_PER_SHIFT<span class="token punctuation">)</span> <span class="token operator">*</span> payRate <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> basePay <span class="token operator">+</span> overtimePay<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸å¯å¦è®¤ï¼Œè¿™æ®µä»£ç ååˆ†ç®€æ´ï¼Œä½†æ˜¯ä»ç»´æŠ¤çš„è§’åº¦æ¥çœ‹ï¼Œå®ƒéå¸¸å±é™©ã€‚å‡è®¾å°†ä¸€ä¸ªå…ƒç´ æ·»åŠ åˆ°è¯¥æšä¸¾ä¸­ï¼Œæˆ–è®¸æ˜¯ä¸€ä¸ªè¡¨ç¤ºå‡æœŸå¤©æ•°çš„ç‰¹æ®Šå€¼ï¼Œä½†æ˜¯å¿˜è®°ç»™ switch è¯­å¥æ·»åŠ ç›¸åº”çš„ caseã€‚ç¨‹åºä¾ç„¶å¯ä»¥ç¼–è¯‘ï¼Œä½† pay æ–¹æ³•ä¼šæ‚„æ‚„åœ°å°†èŠ‚å‡æ—¥çš„å·¥èµ„è®¡ç®—æˆæ­£å¸¸å·¥ä½œæ—¥çš„å·¥èµ„ã€‚</p><p>ä¸ºäº†åˆ©ç”¨ç‰¹å®šäºå¸¸é‡çš„æ–¹æ³•å®ç°å®‰å…¨åœ°æ‰§è¡Œå·¥èµ„è®¡ç®—ï¼Œä½ å¯èƒ½å¿…é¡»é‡å¤è®¡ç®—æ¯ä¸ªå¸¸é‡çš„åŠ ç­å·¥èµ„ï¼Œæˆ–è€…å°†è®¡ç®—ç§»åˆ°ä¸¤ä¸ªè¾…åŠ©æ–¹æ³•ä¸­ï¼ˆä¸€ä¸ªç”¨æ¥è®¡ç®—å·¥ä½œæ—¥ï¼Œä¸€ä¸ªç”¨æ¥è®¡ç®—èŠ‚å‡æ—¥ï¼‰ï¼Œå¹¶ä»æ¯ä¸ªå¸¸é‡è°ƒç”¨ç›¸åº”çš„è¾…åŠ©æ–¹æ³•ã€‚ä»»ä½•ä¸€ç§æ–¹æ³•éƒ½ä¼šäº§ç”Ÿç›¸å½“æ•°é‡çš„æ ·æ¿ä»£ç ï¼Œè¿™ä¼šé™ä½å¯è¯»æ€§ï¼Œå¹¶å¢åŠ äº†å‡ºé”™çš„æ¦‚ç‡ã€‚</p><p>é€šè¿‡ç”¨è®¡ç®—å·¥ä½œæ—¥åŠ ç­å·¥èµ„çš„å…·ä½“æ–¹æ³•æ¥ä»£æ›¿ PayrollDay ä¸­æŠ½è±¡çš„ overtimePay æ–¹æ³•ï¼Œå¯ä»¥å‡å°‘æ ·æ¿ä»£ç ã€‚è¿™æ ·ï¼Œå°±åªæœ‰èŠ‚å‡æ—¥å¿…é¡»è¦†ç›–è¯¥æ–¹æ³•äº†ã€‚ä½†æ˜¯è¿™æ ·ä¹Ÿæœ‰ç€ä¸ switch è¯­å¥ä¸€æ ·çš„ä¸è¶³ï¼šå¦‚æœåˆå¢åŠ äº†ä¸€å¤©è€Œæ²¡æœ‰è¦†ç›–ã€‚overtimePay æ–¹æ³•ï¼Œå°±ä¼šæ‚„æ‚„åœ°å»¶ç»­å·¥ä½œæ—¥çš„è®¡ç®—ã€‚</p><p>æˆ‘ä»¬çœŸæ­£æƒ³è¦çš„å°±æ˜¯æ¯å½“æ·»åŠ ä¸€ä¸ªæšä¸¾å¸¸é‡æ—¶ï¼Œå°±å¼ºåˆ¶é€‰æ‹©ä¸€ç§åŠ ç­æŠ¥é…¬ç­–ç•¥ã€‚å¹¸è¿çš„æ˜¯ï¼Œæœ‰ä¸€ç§å¾ˆå¥½çš„æ–¹æ³•å¯ä»¥å®ç°è¿™ä¸€ç‚¹ã€‚è¿™ç§æƒ³æ³•å°±æ˜¯å°†åŠ ç­å·¥èµ„è®¡ç®—ç§»åˆ°ä¸€ä¸ªç§æœ‰çš„åµŒå¥—æšä¸¾ä¸­ï¼Œå°†è¿™ä¸ªç­–ç•¥æšä¸¾çš„å®ä¾‹ä¼ åˆ° PayrollDay æšä¸¾çš„æ„é€ å™¨ä¸­ã€‚ä¹‹å PayrollDay æšä¸¾å°†åŠ ç­å·¥èµ„è®¡ç®—å§”æ‰˜ç»™ç­–ç•¥æšä¸¾ï¼ŒPayrollDay ä¸­å°±ä¸éœ€è¦ switch è¯­å¥æˆ–è€…ç‰¹å®šäºå¸¸é‡çš„æ–¹æ³•å®ç°äº†ã€‚è™½ç„¶è¿™ç§æ¨¡å¼æ²¡æœ‰ switch è¯­å¥é‚£ä¹ˆç®€æ´ï¼Œä½†æ›´åŠ å®‰å…¨ï¼Œä¹Ÿæ›´åŠ çµæ´»ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// The strategy enum pattern</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">PayrollDay2</span> <span class="token punctuation">{</span>
    MONDAY<span class="token punctuation">,</span> TUESDAY<span class="token punctuation">,</span> WEDNESDAY<span class="token punctuation">,</span> THURSDAY<span class="token punctuation">,</span> FRIDAY<span class="token punctuation">,</span> <span class="token function">SATURDAY</span><span class="token punctuation">(</span><span class="token class-name">PayType</span><span class="token punctuation">.</span>WEEKEND<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">SUNDAY</span><span class="token punctuation">(</span><span class="token class-name">PayType</span><span class="token punctuation">.</span>WEEKEND<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">PayType</span> payTape<span class="token punctuation">;</span>

    <span class="token class-name">PayrollDay2</span><span class="token punctuation">(</span><span class="token class-name">PayType</span> payTape<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>payTape <span class="token operator">=</span> payTape<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Default</span>
    <span class="token class-name">PayrollDay2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token class-name">PayType</span><span class="token punctuation">.</span>WEEKEND<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">int</span> <span class="token function">pay</span><span class="token punctuation">(</span><span class="token keyword">int</span> minutesWorked<span class="token punctuation">,</span> <span class="token keyword">int</span> payRate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> payTape<span class="token punctuation">.</span><span class="token function">pay</span><span class="token punctuation">(</span>minutesWorked<span class="token punctuation">,</span> payRate<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// The strategy enum type</span>
    <span class="token keyword">private</span> <span class="token keyword">enum</span> <span class="token class-name">PayType</span> <span class="token punctuation">{</span>
        WEEKDAY <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">int</span> <span class="token function">overtimePay</span><span class="token punctuation">(</span><span class="token keyword">int</span> minsWorked<span class="token punctuation">,</span> <span class="token keyword">int</span> payRate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> minsWorked <span class="token operator">&lt;=</span> MINS_PER_SHIFT <span class="token operator">?</span>
                        <span class="token number">0</span> <span class="token operator">:</span> <span class="token punctuation">(</span>minsWorked <span class="token operator">-</span> MINS_PER_SHIFT<span class="token punctuation">)</span> <span class="token operator">*</span> payRate <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        WEEKEND <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">int</span> <span class="token function">overtimePay</span><span class="token punctuation">(</span><span class="token keyword">int</span> minsWorked<span class="token punctuation">,</span> <span class="token keyword">int</span> payRate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> minsWorked <span class="token operator">*</span> payRate <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">abstract</span> <span class="token keyword">int</span> <span class="token function">overtimePay</span><span class="token punctuation">(</span><span class="token keyword">int</span> mins<span class="token punctuation">,</span> <span class="token keyword">int</span> payRate<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> MINS_PER_SHIFT <span class="token operator">=</span> <span class="token number">8</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">;</span>

        <span class="token keyword">int</span> <span class="token function">pay</span><span class="token punctuation">(</span><span class="token keyword">int</span> minutesWorked<span class="token punctuation">,</span> <span class="token keyword">int</span> payRate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> basePay <span class="token operator">=</span> minutesWorked <span class="token operator">*</span> payRate<span class="token punctuation">;</span>
            <span class="token keyword">return</span> basePay <span class="token operator">+</span> <span class="token function">overtimePay</span><span class="token punctuation">(</span>minutesWorked<span class="token punctuation">,</span> payRate<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæšä¸¾ä¸­çš„ switch è¯­å¥ä¸æ˜¯åœ¨æšä¸¾ä¸­å®ç°ç‰¹å®šäºå¸¸é‡çš„è¡Œä¸ºçš„ä¸€ç§å¾ˆå¥½çš„é€‰æ‹©ï¼Œé‚£ä¹ˆå®ƒä»¬è¿˜æœ‰ä»€ä¹ˆç”¨å¤„å‘¢ï¼Ÿæšä¸¾ä¸­çš„ switch è¯­å¥é€‚åˆäºç»™å¤–éƒ¨çš„æšä¸¾ç±»å‹å¢åŠ ç‰¹å®šäºå¸¸é‡çš„è¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œå‡è®¾ Operation æšä¸¾ä¸å—ä½ çš„æ§åˆ¶ï¼Œä½ å¸Œæœ›å®ƒæœ‰ä¸€ä¸ªå®ä¾‹æ–¹æ³•æ¥è¿”å›æ¯ä¸ªè¿ç®—çš„åè¿ç®—ã€‚ä½ å¯ä»¥ç”¨ä¸‹åˆ—é™æ€æ–¹æ³•æ¨¡æ‹Ÿè¿™ç§æ•ˆæœï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Switch on an enum to simulate a missing method</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Operation</span> <span class="token function">inverse</span><span class="token punctuation">(</span><span class="token class-name">Operation</span> op<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span><span class="token punctuation">(</span>op<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> PLUS<span class="token operator">:</span> 
      <span class="token keyword">return</span> <span class="token class-name">Operation</span><span class="token punctuation">.</span>MINUS<span class="token punctuation">;</span>
    <span class="token keyword">case</span> MINUS<span class="token operator">:</span> 
      <span class="token keyword">return</span> <span class="token class-name">Operation</span><span class="token punctuation">.</span>PLUS<span class="token punctuation">;</span>
    <span class="token keyword">case</span> TIMES<span class="token operator">:</span> 
      <span class="token keyword">return</span> <span class="token class-name">Operation</span><span class="token punctuation">.</span>DIVIDE<span class="token punctuation">;</span>
    <span class="token keyword">case</span> DIVIDE<span class="token operator">:</span> 
      <span class="token keyword">return</span> <span class="token class-name">Operation</span><span class="token punctuation">.</span>TIMES<span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">AssertionError</span><span class="token punctuation">(</span><span class="token string">&quot;Unknown op: &quot;</span> <span class="token operator">+</span> op<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä¸€ä¸ªæ–¹æ³•ä¸å±äºæšä¸¾ç±»å‹ï¼Œä¹Ÿåº”è¯¥åœ¨ä½ æ‰€èƒ½æ§åˆ¶çš„æšä¸¾ç±»å‹ä¸Šä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚è¿™ç§æ–¹æ³•æœ‰ç‚¹ç”¨å¤„ï¼Œä½†æ˜¯é€šå¸¸è¿˜ä¸å€¼å¾—å°†å®ƒåŒ…å«åˆ°æšä¸¾ç±»å‹ä¸­å»ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œæšä¸¾é€šå¸¸åœ¨æ€§èƒ½ä¸Šä¸ int å¸¸é‡ç›¸å½“ã€‚ä¸ int å¸¸é‡ç›¸æ¯”ï¼Œæšä¸¾æœ‰ä¸ªå°å°çš„æ€§èƒ½ç¼ºç‚¹ï¼Œå³è£…è½½å’Œåˆå§‹åŒ–æšä¸¾æ—¶ä¼šéœ€è¦ç©ºé—´å’Œæ—¶é—´çš„æˆæœ¬ï¼Œä½†åœ¨å®è·µä¸­å‡ ä¹æ³¨æ„ä¸åˆ°è¿™ä¸ªé—®é¢˜ã€‚</p><p>é‚£ä¹ˆä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨æšä¸¾å‘¢ï¼Ÿæ¯å½“éœ€è¦ä¸€ç»„å›ºå®šå¸¸é‡ï¼Œå¹¶ä¸”åœ¨ç¼–è¯‘æ—¶å°±çŸ¥é“å…¶æˆå‘˜çš„æ—¶å€™ï¼Œå°±åº”è¯¥ä½¿ç”¨æšä¸¾ã€‚å½“ç„¶ï¼Œè¿™åŒ…æ‹¬â€œå¤©ç„¶çš„æšä¸¾ç±»å‹â€ï¼Œä¾‹å¦‚è¡Œæ˜Ÿã€ä¸€å‘¨çš„å¤©æ•°ä»¥åŠæ£‹å­çš„æ•°ç›®ç­‰ã€‚ä½†å®ƒä¹ŸåŒ…æ‹¬ä½ åœ¨ç¼–è¯‘æ—¶å°±çŸ¥é“å…¶æ‰€æœ‰å¯èƒ½å€¼çš„å…¶ä»–é›†åˆï¼Œä¾‹å¦‚èœå•çš„é€‰é¡¹ã€æ“ä½œä»£ç ä»¥åŠå‘½ä»¤è¡Œæ ‡è®°ç­‰ã€‚æšä¸¾ç±»å‹ä¸­çš„å¸¸é‡é›†å¹¶ä¸ä¸€å®šè¦å§‹ç»ˆä¿æŒä¸å˜ã€‚ä¸“é—¨è®¾è®¡æšä¸¾ç‰¹æ€§æ˜¯è€ƒè™‘åˆ°æšä¸¾ç±»å‹çš„äºŒè¿›åˆ¶å…¼å®¹æ¼”å˜ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼Œä¸ int å¸¸é‡ç›¸æ¯”ï¼Œæšä¸¾ç±»å‹çš„ä¼˜åŠ¿æ˜¯ä¸è¨€è€Œå–»çš„ã€‚æšä¸¾çš„å¯è¯»æ€§æ›´å¥½ï¼Œä¹Ÿæ›´åŠ å®‰å…¨ï¼ŒåŠŸèƒ½æ›´åŠ å¼ºå¤§ã€‚è®¸å¤šæšä¸¾éƒ½ä¸éœ€è¦æ˜¾å¼çš„æ„é€ å™¨æˆ–è€…æˆå‘˜ï¼Œä½†è®¸å¤šå…¶ä»–æšä¸¾åˆ™å—ç›Šäºå±æ€§ä¸æ¯ä¸ªå¸¸é‡çš„å…³è”ä»¥åŠå…¶è¡Œä¸ºå—è¯¥å±æ€§å½±å“çš„æ–¹æ³•ã€‚åªæœ‰æå°‘æ•°çš„æšä¸¾å—ç›Šäºå°†å¤šç§è¡Œä¸ºä¸å•ä¸ªæ–¹æ³•å…³è”ã€‚åœ¨è¿™ç§ç›¸å¯¹å°‘è§çš„æƒ…å†µä¸‹ï¼Œç‰¹å®šäºå¸¸é‡çš„æ–¹æ³•è¦ä¼˜å…ˆäºå¯ç”¨è‡ªæœ‰å€¼çš„æšä¸¾ã€‚å¦‚æœå¤šä¸ªï¼ˆä½†éæ‰€æœ‰ï¼‰æšä¸¾å¸¸é‡åŒæ—¶å…±äº«ç›¸åŒçš„è¡Œä¸ºï¼Œåˆ™è¦è€ƒè™‘ç­–ç•¥æšä¸¾ã€‚</p><h2 id="ç¬¬-35-æ¡-ç”¨å®ä¾‹åŸŸä»£æ›¿åºæ•°" tabindex="-1"><a class="header-anchor" href="#ç¬¬-35-æ¡-ç”¨å®ä¾‹åŸŸä»£æ›¿åºæ•°" aria-hidden="true">#</a> ç¬¬ 35 æ¡ï¼šç”¨å®ä¾‹åŸŸä»£æ›¿åºæ•°</h2><p>è®¸å¤šæšä¸¾å¤©ç”Ÿå°±ä¸ä¸€ä¸ªå•ç‹¬çš„ int å€¼ç›¸å…³è”ã€‚æ‰€æœ‰çš„æšä¸¾éƒ½æœ‰ä¸€ä¸ª ordinal æ–¹æ³•ï¼Œå®ƒè¿”å›æ¯ä¸ªæšä¸¾å¸¸é‡åœ¨ç±»å‹ä¸­çš„æ•°å­—ä½ç½®ã€‚ä½ å¯ä»¥è¯•ç€ä»åºæ•°ä¸­å¾—åˆ°å…³è”çš„ int å€¼ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Abuse of ordinal to derive an associated value - DON&#39;T DO THIS</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Ensemble</span> <span class="token punctuation">{</span>
    SOLO<span class="token punctuation">,</span> DUET<span class="token punctuation">,</span> TRIO<span class="token punctuation">,</span> QUARTET<span class="token punctuation">,</span> QUINTET<span class="token punctuation">,</span>
    SEXTET<span class="token punctuation">,</span> SEPTET<span class="token punctuation">,</span> OCTET<span class="token punctuation">,</span> NONET<span class="token punctuation">,</span> DECTET<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">numberOfMusicians</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">ordinal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è™½ç„¶è¿™ä¸ªæšä¸¾å·¥ä½œå¾—ä¸é”™ï¼Œä½†æ˜¯ç»´æŠ¤èµ·æ¥å°±åƒä¸€åœºå™©æ¢¦ã€‚å¦‚æœå¸¸é‡è¿›è¡Œé‡æ–°æ’åºï¼ŒnumberOfMusicians æ–¹æ³•å°±ä¼šé­åˆ°ç ´åã€‚å¦‚æœè¦å†æ·»åŠ ä¸€ä¸ªä¸å·²ç»ç”¨è¿‡çš„ int å€¼å…³è”çš„æšä¸¾å¸¸é‡ï¼Œå°±æ²¡é‚£ä¹ˆèµ°è¿äº†ã€‚ä¾‹å¦‚ï¼Œç»™åŒå››é‡å¥æ·»åŠ ä¸€ä¸ªå¸¸é‡ï¼Œå®ƒå°±åƒä¸ªå…«é‡å¥ä¸€æ ·ï¼Œæ˜¯ç”± 8 ä½æ¼”å¥å®¶ç»„æˆï¼Œä½†æ˜¯æ²¡æœ‰åŠæ³•åšåˆ°ã€‚</p><p>è€Œä¸”ï¼Œè¦æ˜¯æ²¡æœ‰ç»™æ‰€æœ‰è¿™äº› int å€¼æ·»åŠ å¸¸é‡ï¼Œä¹Ÿæ— æ³•ç»™æŸä¸ªæ¯”ä¸ƒå€¼æ·»åŠ å¸¸é‡ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æƒ³è¦æ·»åŠ ä¸€ä¸ªå¸¸é‡è¡¨ç¤ºä¸‰å››é‡å¥ï¼Œå®ƒç”± 12 ä½æ¼”å¥å®¶ç»„æˆã€‚å¯¹äºç”± 11 ä½æ¼”å¥å®¶ç»„æˆçš„åˆå¥æ›²å¹¶æ²¡æœ‰æ ‡å‡†çš„æœ¯è¯­ï¼Œå› æ­¤åªå¥½ç»™æ²¡æœ‰ç”¨è¿‡çš„ int å€¼æ·»åŠ ä¸€ä¸ªè™šæ‹Ÿå¸¸é‡ã€‚è¿™ä¹ˆåšé¡¶å¤šå°±æ˜¯ä¸å¤ªå¥½çœ‹ã€‚å¦‚æœæœ‰è®¸å¤š int å€¼éƒ½æ˜¯ä»æœªç”¨è¿‡çš„ï¼Œå¯å°±ä¸åˆ‡å®é™…äº†ã€‚</p><p>å¹¸è¿çš„æ˜¯ï¼Œæœ‰ä¸€ç§å¾ˆç®€å•çš„æ–¹æ³•å¯ä»¥è§£å†³è¿™äº›é—®é¢˜ã€‚æ°¸è¿œä¸è¦æ ¹æ®æšä¸¾çš„åºæ•°å¯¼å‡ºä¸å®ƒå…³è”çš„å€¼ï¼Œè€Œæ˜¯è¦å°†å®ƒä¿å­˜åœ¨ä¸€ä¸ªå®ä¾‹åŸŸä¸­ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Ensemble</span> <span class="token punctuation">{</span>
    <span class="token function">SOLO</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">DUET</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">TRIO</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">QUARTET</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">QUINTET</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">SEXTET</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">SEPTET</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">OCTET</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">DOUBLE_QUARTET</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">NONET</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">DECTET</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">TRIPLE_QUARTET</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> numberOfMusicians<span class="token punctuation">;</span>

    <span class="token class-name">Ensemble2</span><span class="token punctuation">(</span><span class="token keyword">int</span> numberOfMusicians<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numberOfMusicians <span class="token operator">=</span> numberOfMusicians<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">numberOfMusicians</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> numberOfMusicians<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Enum è§„èŒƒä¸­è°ˆåŠ ordinal æ–¹æ³•æ—¶å†™é“ï¼šâ€œå¤§å¤šæ•°ç¨‹åºå‘˜éƒ½ä¸éœ€è¦è¿™ä¸ªæ–¹æ³•ã€‚å®ƒæ˜¯è®¾è®¡ç”¨äºåƒ EnumSet å’Œ EnumMap è¿™ç§åŸºäºæšä¸¾çš„é€šç”¨æ•°æ®ç»“æ„çš„ã€‚â€é™¤éä½ åœ¨ç¼–å†™çš„æ˜¯è¿™ç§æ•°æ®ç»“æ„ï¼Œå¦åˆ™æœ€å¥½å®Œå…¨é¿å…ä½¿ç”¨ ordinal æ–¹æ³•ã€‚</p><h2 id="ç¬¬-36-æ¡-ç”¨-enumset-ä»£æ›¿ä½åŸŸ" tabindex="-1"><a class="header-anchor" href="#ç¬¬-36-æ¡-ç”¨-enumset-ä»£æ›¿ä½åŸŸ" aria-hidden="true">#</a> ç¬¬ 36 æ¡ï¼šç”¨ EnumSet ä»£æ›¿ä½åŸŸ</h2><p>å¦‚æœä¸€ä¸ªæšä¸¾ç±»å‹çš„å…ƒç´ ä¸»è¦ç”¨åœ¨é›†åˆä¸­ï¼Œä¸€èˆ¬å°±ä½¿ç”¨ int æšä¸¾æ¨¡å¼ï¼Œæ¯”å¦‚å°† 2 çš„ä¸åŒå€æ•°èµ‹äºˆæ¯ä¸ªå¸¸é‡ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Bit field enumeration constants - OBSOLETE!</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Text</span> <span class="token punctuation">{</span>
  <span class="token comment">// 1</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> STYLE_BOLD <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token comment">// 2</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> STYLE_ITALIC <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token comment">// 4</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> STYLE_UNDERLINE <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token comment">// 8</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> STYLE_STRIKETHROUGH <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span>
  
  <span class="token comment">// Parameter is bitwise OR of zero or more STYLE_constants</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">applyStyles</span><span class="token punctuation">(</span><span class="token keyword">int</span> styles<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ç§è¡¨ç¤ºæ³•è®©ä½ ç”¨ OR ä½è¿ç®—å°†å‡ ä¸ªå¸¸é‡åˆå¹¶åˆ°ä¸€ä¸ªé›†åˆä¸­ï¼Œç§°ä½œä½åŸŸï¼š</p><p><code>text.applyStyles(STYLE_BOLD | STYLE_ITALIC);</code></p><p>ä½åŸŸè¡¨ç¤ºæ³•ä¹Ÿå…è®¸åˆ©ç”¨ä½æ“ä½œï¼Œæœ‰æ•ˆåœ°æ‰§è¡Œåƒ union å’Œ intersection è¿™æ ·çš„é›†åˆæ“ä½œã€‚ä½†ä½åŸŸå…·æœ‰ int æšä¸¾å¸¸é‡çš„æ‰€æœ‰ç¼ºç‚¹ï¼Œç”šè‡³æ›´å¤šã€‚å½“ä½åŸŸä»¥æ•°å­—å½¢å¼æ‰“å°æ—¶ï¼Œç¿»è¯‘ä½åŸŸæ¯”ç¿»è¯‘ç®€å•çš„ int æšä¸¾å¸¸é‡è¦å›°éš¾å¾—å¤šã€‚è¦éå†ä½åŸŸè¡¨ç¤ºçš„æ‰€æœ‰å…ƒç´ ä¹Ÿæ²¡æœ‰å¾ˆå®¹æ˜“çš„æ–¹æ³•ã€‚æœ€åä¸€ç‚¹ï¼Œåœ¨ç¼–å†™ API çš„æ—¶å€™ï¼Œå°±å¿…é¡»å…ˆé¢„æµ‹æœ€å¤šéœ€è¦å¤šå°‘ä½ï¼ŒåŒæ—¶è¿˜è¦ç»™ä½åŸŸé€‰æ‹©å¯¹åº”çš„ç±»å‹ï¼ˆä¸€èˆ¬æ˜¯ int æˆ–è€… longï¼‰ã€‚ä¸€æ—¦é€‰æ‹©å¥½ç±»å‹ï¼Œåœ¨æ²¡æœ‰ä¿®æ”¹ API çš„æƒ…å†µä¸‹ï¼Œå°†ä¸èƒ½è¶…å‡ºå…¶ä½å®½åº¦ï¼ˆå¦‚ 32 ä½æˆ–è€… 64 ä½ï¼‰ã€‚</p><p>æœ‰äº›ç¨‹åºå‘˜è™½ç„¶æ›´å€¾å‘äºä½¿ç”¨æšä¸¾è€Œé int å¸¸é‡ï¼Œä½†æ˜¯ä»–ä»¬åœ¨éœ€è¦ä¼ é€’å¤šç»„å¸¸é‡é›†æ—¶ï¼Œä»ç„¶å€¾å‘äºä½¿ç”¨ä½åŸŸã€‚å…¶å®æ²¡æœ‰ç†ç”±è¿™ä¹ˆåšï¼Œå› ä¸ºè¿˜æœ‰æ›´å¥½çš„æ›¿ä»£æ–¹æ³•ã€‚java.util åŒ…æä¾›äº† EnumSet ç±»æ¥æœ‰æ•ˆåœ°è¡¨ç¤ºä»å•ä¸ªæšä¸¾ç±»å‹ä¸­æå–çš„å¤šä¸ªå€¼çš„å¤šä¸ªé›†åˆã€‚è¿™ä¸ªç±»å®ç° Set æ¥å£ï¼Œæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½ã€ç±»å‹å®‰å…¨æ€§ï¼Œä»¥åŠå¯ä»¥ä»ä»»ä½•å…¶ä»– Set å®ç°ä¸­å¾—åˆ°çš„äº’ç”¨æ€§ã€‚ä½†æ˜¯åœ¨å†…éƒ¨å…·ä½“çš„å®ç°ä¸Šï¼Œæ¯ä¸ª EnumSet å†…å®¹éƒ½è¡¨ç¤ºä¸ºä½çŸ¢é‡ã€‚å¦‚æœåº•å±‚çš„æšä¸¾ç±»å‹æœ‰ 64 ä¸ªæˆ–è€…æ›´å°‘çš„å…ƒç´ ï¼ˆå¤§å¤šå¦‚æ­¤ï¼‰æ•´ä¸ª EnumSet å°±ä½¿ç”¨å•ä¸ª long æ¥è¡¨ç¤ºï¼Œå› æ­¤å®ƒçš„æ€§èƒ½æ¯”å¾—ä¸Šä½åŸŸçš„æ€§èƒ½ã€‚æ‰¹å¤„ç†æ“ä½œï¼Œå¦‚ removeAll å’Œ retainAllï¼Œéƒ½æ˜¯åˆ©ç”¨ä½ç®—æ³•æ¥å®ç°çš„ï¼Œå°±åƒæ‰‹å·¥æ›¿ä½åŸŸå®ç°çš„é‚£æ ·ã€‚ä½†æ˜¯å¯ä»¥é¿å…æ‰‹å·¥ä½æ“ä½œæ—¶å®¹æ˜“å‡ºç°çš„é”™è¯¯ä»¥åŠä¸‘é™‹çš„ä»£ç ï¼Œå› ä¸º EnumSet æ›¿ä½ å®Œæˆäº†è¿™é¡¹è‰°å·¨çš„å·¥ä½œã€‚</p><p>ä¸‹é¢æ˜¯å‰ä¸€ä¸ªèŒƒä¾‹æ”¹æˆç”¨æšä¸¾ä»£æ›¿ä½åŸŸä¹‹åçš„ä»£ç ï¼Œå®ƒæ›´åŠ ç®€çŸ­ã€æ›´åŠ æ¸…æ¥šï¼Œä¹Ÿæ›´åŠ å®‰å…¨ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// EnumSet - a modern replacement for bit fields</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Text2</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Style</span> <span class="token punctuation">{</span>
        BOLD<span class="token punctuation">,</span> ITALIC<span class="token punctuation">,</span> UNDERLINE<span class="token punctuation">,</span> STRIKETHROUGH
    <span class="token punctuation">}</span>

    <span class="token comment">// Any set could by passed in, but EnumSet is clearly best</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">applyStyles</span><span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Style</span><span class="token punctuation">&gt;</span></span> styles<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸‹é¢æ˜¯å°† EnumSet å®ä¾‹ä¼ é€’ç»™ applyStyles æ–¹æ³•çš„å®¢æˆ·ç«¯ä»£ç ã€‚EnumSet æä¾›äº†ä¸°å¯Œçš„é™æ€å·¥å‚æ¥è½»æ¾åˆ›å»ºé›†åˆï¼Œå…¶ä¸­ä¸€ä¸ªå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p><p><code>text.applyStyles(EnumSet.of(Style.BOLD, Style.ITALIC));</code></p><p>æ³¨æ„ applyStyles æ–¹æ³•é‡‡ç”¨çš„æ˜¯ Set&lt;Style&gt; è€Œé EnumSet&lt;Style&gt;ã€‚è™½ç„¶çœ‹èµ·æ¥å¥½åƒæ‰€æœ‰çš„å®¢æˆ·ç«¯éƒ½å¯ä»¥å°† EnumSet ä¼ åˆ°è¿™ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯æœ€å¥½è¿˜æ˜¯æ¥å—æ¥å£ç±»å‹è€Œéæ¥å—å®ç°ç±»å‹ã€‚è¿™æ˜¯è€ƒè™‘åˆ°å¯èƒ½ä¼šæœ‰ç‰¹æ®Šçš„å®¢æˆ·ç«¯éœ€è¦ä¼ é€’ä¸€äº›å…¶ä»–çš„ Set å®ç°ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼Œæ­£æ˜¯å› ä¸ºæšä¸¾ç±»å‹è¦ç”¨åœ¨é›†åˆä¸­ï¼Œæ‰€ä»¥æ²¡æœ‰ç†ç”±ç”¨ä½åŸŸæ¥è¡¨ç¤ºå®ƒã€‚EnumSet ç±»é›†ä½åŸŸçš„ç®€æ´å’Œæ€§èƒ½ä¼˜åŠ¿åŠç¬¬ 34 æ¡ä¸­æ‰€è¿°çš„æšä¸¾ç±»å‹çš„æ‰€æœ‰ä¼˜ç‚¹äºä¸€èº«ã€‚å®é™…ä¸Š EnumSet æœ‰ä¸ªç¼ºç‚¹ï¼Œå³æˆªæ­¢ Java 9 å‘è¡Œç‰ˆæœ¬ï¼Œå®ƒéƒ½æ— æ³•åˆ›å»ºä¸å¯å˜çš„ EnumSetï¼Œä½†æ˜¯è¿™ä¸€ç‚¹å¾ˆå¯èƒ½åœ¨å³å°†å‘å¸ƒçš„ç‰ˆæœ¬ä¸­å¾—åˆ°ä¿®æ­£ã€‚åŒæ—¶ï¼Œå¯ä»¥ç”¨ Collections.unmodifiableSet å°† EnumSet å°è£…èµ·æ¥ï¼Œä½†æ˜¯ç®€æ´æ€§å’Œæ€§èƒ½ä¼šå—åˆ°å½±å“ã€‚</p><h2 id="ç¬¬-37-æ¡-ç”¨-enummap-ä»£æ›¿åºæ•°ç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#ç¬¬-37-æ¡-ç”¨-enummap-ä»£æ›¿åºæ•°ç´¢å¼•" aria-hidden="true">#</a> ç¬¬ 37 æ¡ï¼šç”¨ EnumMap ä»£æ›¿åºæ•°ç´¢å¼•</h2><p>æœ‰æ—¶ä½ å¯èƒ½ä¼šè§åˆ°åˆ©ç”¨ ordinal æ–¹æ³•æ¥ç´¢å¼•æ•°ç»„æˆ–åˆ—è¡¨çš„ä»£ç ã€‚ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªè¶…çº§ç®€åŒ–çš„ç±»ï¼Œç”¨æ¥è¡¨ç¤ºä¸€ç§çƒ¹é¥ªç”¨çš„é¦™è‰ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Plant</span> <span class="token punctuation">{</span>
    <span class="token keyword">enum</span> <span class="token class-name">LifeCycle</span> <span class="token punctuation">{</span> ANNUAL<span class="token punctuation">,</span> PERENNIAL<span class="token punctuation">,</span> BIENNIAL <span class="token punctuation">}</span>
    <span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token class-name">LifeCycle</span> lifeCycle<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Plant</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">LifeCycle</span> lifeCycle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>lifeCycle <span class="token operator">=</span> lifeCycle<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨å‡è®¾æœ‰ä¸€ä¸ªé¦™è‰çš„æ•°ç»„ï¼Œè¡¨ç¤ºä¸€åº§èŠ±å›­ä¸­çš„æ¤ç‰©ï¼Œä½ æƒ³è¦æŒ‰ç…§ç±»å‹ï¼ˆä¸€å¹´ç”Ÿã€å¤šå¹´ç”Ÿæˆ–è€…ä¸¤å¹´ç”Ÿæ¤ç‰©ï¼‰è¿›è¡Œç»„ç»‡ä¹‹åå°†è¿™äº›æ¤ç‰©åˆ—å‡ºæ¥ã€‚å¦‚æœè¦è¿™ä¹ˆåšï¼Œéœ€è¦æ„å»ºä¸‰ä¸ªé›†åˆï¼Œæ¯ç§ç±»å‹ä¸€ä¸ªï¼Œå¹¶ä¸”éå†æ•´åº§èŠ±å›­ï¼Œå°†æ¯ç§é¦™è‰æ”¾åˆ°ç›¸åº”çš„é›†åˆä¸­ã€‚æœ‰äº›ç¨‹åºå‘˜ä¼šå°†è¿™äº›é›†åˆæ”¾åˆ°ä¸€ä¸ªæŒ‰ç…§ç±»å‹çš„åºæ•°è¿›è¡Œç´¢å¼•çš„æ•°ç»„ä¸­æ¥å®ç°è¿™ä¸€ç‚¹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Using ordinal() to index into an array - DON&#39;T DO THIS!</span>
<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plant</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> plantsByLifeCycle <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plant</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">[</span><span class="token class-name">Plant<span class="token punctuation">.</span>LifeCycle</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> plantsByLifeCycle<span class="token punctuation">.</span><span class="token number">1</span>ength<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  plantsByLifeCycle<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Plant</span> p <span class="token operator">:</span> garden<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  plantsByLifeCycle<span class="token punctuation">[</span>p<span class="token punctuation">.</span>lifeCycle<span class="token punctuation">.</span><span class="token function">ordinal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 

<span class="token comment">// Print the results</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> plantsByLifeCycle<span class="token punctuation">.</span><span class="token number">1</span>ength<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s: %s%n&quot;</span><span class="token punctuation">,</span> plantsByLifeCycle<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> plantsByLifeCycle<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ç§æ–¹æ³•çš„ç¡®å¯è¡Œï¼Œä½†æ˜¯éšè—ç€è®¸å¤šé—®é¢˜ã€‚å› ä¸ºæ•°ç»„ä¸èƒ½ä¸æ³›å‹å…¼å®¹ï¼Œç¨‹åºéœ€è¦è¿›è¡Œæœªå—æ£€çš„è½¬æ¢ï¼Œå¹¶ä¸”ä¸èƒ½æ­£ç¡®æ— è¯¯åœ°è¿›è¡Œç¼–è¯‘ã€‚å› ä¸ºæ•°ç»„ä¸çŸ¥é“å®ƒçš„ç´¢å¼•ä»£è¡¨ç€ä»€ä¹ˆï¼Œä½ å¿…é¡»æ‰‹å·¥æ ‡æ³¨è¿™äº›ç´¢å¼•çš„è¾“å‡ºã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•æœ€ä¸¥é‡çš„é—®é¢˜åœ¨äºï¼Œå½“ä½ è®¿é—®ä¸€ä¸ªæŒ‰ç…§æšä¸¾çš„åºæ•°è¿›è¡Œç´¢å¼•çš„æ•°ç»„æ—¶ï¼Œä½¿ç”¨æ­£ç¡®çš„ int å€¼å°±æ˜¯ä½ çš„èŒè´£äº†ï¼›int ä¸èƒ½æä¾›æšä¸¾çš„ç±»å‹å®‰å…¨ã€‚ä½ å¦‚æœä½¿ç”¨äº†é”™è¯¯çš„å€¼ï¼Œç¨‹åºå°±ä¼šæ‚„æ‚„åœ°å®Œæˆé”™è¯¯çš„å·¥ä½œï¼Œæˆ–è€…å¹¸è¿çš„è¯ï¼Œä¼šæŠ›å‡º ArrayIndexOutOfBoundException å¼‚å¸¸ã€‚</p><p>æœ‰ä¸€ç§æ›´å¥½çš„æ–¹æ³•å¯ä»¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœã€‚æ•°ç»„å®é™…ä¸Šå……å½“ç€ä»æšä¸¾åˆ°å€¼çš„æ˜ å°„ï¼Œå› æ­¤å¯èƒ½è¿˜è¦ç”¨åˆ° Mapã€‚æ›´å…·ä½“åœ°è¯´ï¼Œæœ‰ä¸€ç§éå¸¸å¿«é€Ÿçš„ Map å®ç°ä¸“é—¨ç”¨äºæšä¸¾é”®ï¼Œç§°ä½œ java.util.EnumMapã€‚ä»¥ä¸‹å°±æ˜¯ç”¨ EnumMap æ”¹å†™åçš„ç¨‹åºï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Using an EnumMap to associate data with an enum</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plant<span class="token punctuation">.</span>LifeCycle</span><span class="token punctuation">,</span> <span class="token class-name">Set</span><span class="token punctuation">&lt;</span><span class="token class-name">Plant</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> plantsByLifeCycle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EnumMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Plant<span class="token punctuation">.</span>LifeCycle</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Plant<span class="token punctuation">.</span>LifeCycle</span> lc <span class="token operator">:</span> <span class="token class-name">Plant<span class="token punctuation">.</span>LifeCycle</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  plantsByLifeCycle<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>lc<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Plant</span> p <span class="token operator">:</span> garden<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  plantsByLifeCycle<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>lifeCycle<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>plantsByLifeCycle<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µç¨‹åºæ›´ç®€çŸ­ã€æ›´æ¸…æ¥šï¼Œä¹Ÿæ›´åŠ å®‰å…¨ï¼Œè¿è¡Œé€Ÿåº¦æ–¹é¢å¯ä»¥ä¸ä½¿ç”¨åºæ•°çš„ç¨‹åºç›¸åª²ç¾ã€‚å®ƒæ²¡æœ‰ä¸å®‰å…¨çš„è½¬æ¢ï¼›ä¸å¿…æ‰‹å·¥æ ‡æ³¨è¿™äº›ç´¢å¼•çš„è¾“å‡ºï¼Œå› ä¸ºæ˜ å°„é”®çŸ¥é“å¦‚ä½•å°†è‡ªèº«ç¿»è¯‘æˆå¯æ‰“å°å­—ç¬¦ä¸²çš„æšä¸¾ï¼›è®¡ç®—æ•°ç»„ç´¢å¼•æ—¶ä¹Ÿä¸å¯èƒ½å‡ºé”™ã€‚EnumMap åœ¨è¿è¡Œé€Ÿåº¦æ–¹é¢ä¹‹æ‰€ä»¥èƒ½ä¸é€šè¿‡åºæ•°ç´¢å¼•çš„æ•°ç»„ç›¸åª²ç¾ï¼Œæ­£æ˜¯å› ä¸º EnuMap åœ¨å†…éƒ¨ä½¿ç”¨äº†è¿™ç§æ•°ç»„ã€‚ä½†æ˜¯å®ƒå¯¹ç¨‹åºå‘˜éšè—äº†è¿™ç§å®ç°ç»†èŠ‚ï¼Œé›† Map çš„ä¸°å¯ŒåŠŸèƒ½å’Œç±»å‹å®‰å…¨ä¸æ•°ç»„çš„å¿«é€Ÿäºä¸€èº«ã€‚æ³¨æ„ EnumMap æ„é€ å™¨é‡‡ç”¨é”®ç±»å‹çš„ Class å¯¹è±¡ï¼šè¿™æ˜¯ä¸€ä¸ªæœ‰é™åˆ¶çš„ç±»å‹ä»¤ç‰Œï¼Œå®ƒæä¾›äº†è¿è¡Œæ—¶çš„æ³›å‹ä¿¡æ¯ã€‚</p><p>ä¸Šä¸€æ®µç¨‹åºå¯èƒ½æ¯”ç”¨ stream ç®¡ç†æ˜ å°„è¦ç®€çŸ­å¾—å¤šã€‚ä¸‹é¢æ˜¯åŸºäº stream çš„æœ€ç®€å•çš„ä»£ç ï¼Œå¤§é‡å¤åˆ¶äº†ä¸Šä¸€ä¸ªç¤ºä¾‹çš„è¡Œä¸ºï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Naive stream-based approach - unlikely to produce an EnumMap!</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>garden<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">col1ect</span><span class="token punctuation">(</span><span class="token function">groupingBy</span><span class="token punctuation">(</span>p <span class="token operator">-&gt;</span> p<span class="token punctuation">.</span><span class="token function">1ifeCycle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µä»£ç çš„é—®é¢˜åœ¨äºå®ƒé€‰æ‹©è‡ªå·±çš„æ˜ å°„å®ç°ï¼Œå®é™…ä¸Šä¸ä¼šæ˜¯ä¸€ä¸ª EnumMapï¼Œå› æ­¤ä¸æ˜¾å¼ EnumMap ç‰ˆæœ¬çš„ç©ºé—´åŠæ—¶é—´æ€§èƒ½å¹¶ä¸å»åˆã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¦ä½¿ç”¨æœ‰ä¸‰ç§å‚æ•°å½¢å¼çš„ Collectors.groupingBy æ–¹æ³•ï¼Œå®ƒå…è®¸è°ƒç”¨è€…åˆ©ç”¨ mapFactory å‚æ•°å®šä¹‰æ˜ å°„å®ç°ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Using a stream and an EnumMap to associate data with an enum\</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>garden<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token function">groupingBy</span><span class="token punctuation">(</span>p <span class="token operator">-&gt;</span> p<span class="token punctuation">.</span>lifeCycle<span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">EnumMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">LifeCycle</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">toSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™æ ·ä¸€ä¸ªç©å…·ç¨‹åºä¸­ä¸å€¼å¾—è¿›è¡Œè¿™ç§ä¼˜åŒ–ï¼Œä½†æ˜¯åœ¨å¤§é‡ä½¿ç”¨æ˜ å°„çš„ç¨‹åºä¸­å°±å¾ˆé‡è¦äº†ã€‚</p><p>åŸºäº stream çš„ä»£ç ç‰ˆæœ¬çš„è¡Œä¸ºä¸ EnumMap ç‰ˆæœ¬çš„ç¨æœ‰ä¸åŒã€‚EnumMap ç‰ˆæœ¬æ€»æ˜¯ç»™æ¯ä¸€ä¸ªæ¤ç‰©ç”Ÿå‘½å‘¨æœŸéƒ½è®¾è®¡ä¸€ä¸ªåµŒå¥—æ˜ å°„ï¼ŒåŸºäº stream çš„ç‰ˆæœ¬åˆ™ä»…å½“èŠ±å›­ä¸­åŒ…å«äº†ä¸€ç§æˆ–å¤šç§æ¤ç‰©å¸¦æœ‰è¯¥ç”Ÿå‘½å‘¨æœŸæ—¶æ‰ä¼šè®¾è®¡ä¸€ä¸ªåµŒå¥—æ˜ å°„ã€‚å› æ­¤ï¼Œå‡å¦‚èŠ±å›­ä¸­åŒ…å«äº†ä¸€å¹´ç”Ÿå’Œå¤šå¹´ç”Ÿæ¤ç‰©ï¼Œä½†æ²¡æœ‰ä¸¤å¹´ç”Ÿæ¤ç‰©ï¼ŒplantsByLifeCycle çš„æ•°é‡åœ¨ EnumMap ç‰ˆæœ¬ä¸­åº”è¯¥æ˜¯ä¸‰ç§ï¼Œåœ¨åŸºäº stream çš„ä¸¤ä¸ªç‰ˆæœ¬ä¸­åˆ™éƒ½æ˜¯ä¸¤ç§ã€‚</p><p>ä½ è¿˜å¯èƒ½è§åˆ°æŒ‰ç…§åºæ•°è¿›è¡Œç´¢å¼•ï¼ˆä¸¤æ¬¡ï¼‰çš„æ•°ç»„çš„æ•°ç»„ï¼Œè¯¥åºæ•°è¡¨ç¤ºä¸¤ä¸ªæšä¸¾å€¼çš„æ˜ å°„ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢è¿™ä¸ªç¨‹åºå°±æ˜¯ä½¿ç”¨è¿™æ ·ä¸€ä¸ªæ•°ç»„å°†ä¸¤ä¸ªé˜¶æ®µæ˜ å°„åˆ°ä¸€ä¸ªé˜¶æ®µè¿‡æ¸¡ä¸­ï¼ˆä»æ¶²ä½“åˆ°å›ºä½“ç§°ä½œå‡å›ºï¼Œä»æ¶²ä½“åˆ°æ°”ä½“ç§°ä½œæ²¸è…¾ï¼Œè¯¸å¦‚æ­¤ç±»ï¼‰ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Using ordinal() to index array of arrays - DON&#39;T DO THIS!</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Phase</span> <span class="token punctuation">{</span>
    SOLID<span class="token punctuation">,</span> LIQUID<span class="token punctuation">,</span> GAS<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Transition</span> <span class="token punctuation">{</span>
        MELT<span class="token punctuation">,</span> FREEZE<span class="token punctuation">,</span> BOIL<span class="token punctuation">,</span> CONDENSE<span class="token punctuation">,</span> SUBLIME<span class="token punctuation">,</span> DEPOSIT<span class="token punctuation">;</span>

        <span class="token comment">// Rows indexed by from-ordinal, cols by to-ordinal</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Transition</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> TRANSITIONS <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token punctuation">{</span><span class="token keyword">null</span><span class="token punctuation">,</span> MELT<span class="token punctuation">,</span> SUBLIME<span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>FREEZE<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> BOIL<span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>DEPOSIT<span class="token punctuation">,</span> CONDENSE<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token comment">// Returns the phase transition from one phase to another</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Transition</span> <span class="token function">from</span><span class="token punctuation">(</span><span class="token class-name">Phase</span> from<span class="token punctuation">,</span> <span class="token class-name">Phase</span> <span class="token keyword">to</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> TRANSITIONS<span class="token punctuation">[</span>from<span class="token punctuation">.</span><span class="token function">ordinal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">to</span><span class="token punctuation">.</span><span class="token function">ordinal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µç¨‹åºå¯è¡Œï¼Œçœ‹èµ·æ¥ä¹Ÿæ¯”è¾ƒä¼˜é›…ï¼Œä½†æ˜¯äº‹å®å¹¶éå¦‚æ­¤ã€‚å°±åƒä¸Šé¢é‚£ä¸ªæ¯”è¾ƒç®€å•çš„é¦™è‰èŠ±å›­çš„ç¤ºä¾‹ä¸€æ ·ï¼Œç¼–è¯‘å™¨æ— æ³•çŸ¥é“åºæ•°å’Œæ•°ç»„ç´¢å¼•ä¹‹é—´çš„å…³ç³»ã€‚å¦‚æœåœ¨è¿‡æ¸¡è¡¨ä¸­å‡ºäº†é”™ï¼Œæˆ–è€…åœ¨ä¿®æ”¹ Phase æˆ–è€… Phase.Transition æšä¸¾ç±»å‹çš„æ—¶å€™å¿˜è®°å°†å®ƒæ›´æ–°ï¼Œç¨‹åºå°±ä¼šåœ¨è¿è¡Œæ—¶å¤±è´¥ã€‚è¿™ç§å¤±è´¥çš„å½¢å¼å¯èƒ½ä¸º ArrayIndexOutOfBoundsExceptionã€NullPointerException æˆ–è€…ï¼ˆæ›´ç³Ÿç³•çš„æ˜¯ï¼‰æ²¡æœ‰ä»»ä½•æç¤ºçš„é”™è¯¯è¡Œä¸ºã€‚è¿™å¼ è¡¨çš„å¤§å°æ˜¯é˜¶æ®µæ•°çš„å¹³æ–¹ï¼Œå³ä½¿éç©ºé¡¹çš„æ•°é‡æ¯”è¾ƒå°‘ã€‚</p><p>åŒæ ·ï¼Œåˆ©ç”¨ EnumMap ä¾ç„¶å¯ä»¥åšå¾—æ›´å¥½ä¸€äº›ã€‚å› ä¸ºæ¯ä¸ªé˜¶æ®µè¿‡æ¸¡éƒ½æ˜¯é€šè¿‡ä¸€å¯¹é˜¶æ®µæšä¸¾è¿›è¡Œç´¢å¼•çš„ï¼Œæœ€å¥½å°†è¿™ç§å…³ç³»è¡¨ç¤ºä¸ºä¸€ä¸ªæ˜ å°„ï¼Œè¿™ä¸ªæ˜ å°„çš„é”®æ˜¯ä¸€ä¸ªæšä¸¾ï¼ˆèµ·å§‹é˜¶æ®µï¼‰ï¼Œå€¼ä¸ºå¦ä¸€ä¸ªæ˜ å°„ï¼Œè¿™ç¬¬äºŒä¸ªæ˜ å°„çš„é”®ä¸ºç¬¬äºŒä¸ªæšä¸¾ï¼ˆç›®æ ‡é˜¶æ®µï¼‰ï¼Œå®ƒçš„å€¼ä¸ºç»“æœï¼ˆé˜¶æ®µè¿‡æ¸¡ï¼‰ï¼Œå³å½¢æˆäº† Mapï¼ˆèµ·å§‹é˜¶æ®µï¼ŒMapï¼ˆç›®æ ‡é˜¶æ®µï¼Œé˜¶æ®µè¿‡æ¸¡ï¼‰ï¼‰è¿™ç§å½¢å¼ã€‚ä¸€ä¸ªé˜¶æ®µè¿‡æ¸¡æ‰€å…³è”çš„ä¸¤ä¸ªé˜¶æ®µï¼Œæœ€å¥½é€šè¿‡ â€œæ•°æ®ä¸é˜¶æ®µè¿‡æ¸¡æšä¸¾ä¹‹é—´çš„å…³ç³»â€æ¥è·å–ï¼Œä¹‹åç”¨è¯¥é˜¶æ®µè¿‡æ¸¡æšä¸¾æ¥åˆå§‹åŒ–åµŒå¥—çš„ EnumMapï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Using a nested EnumMap to associate data with enum pairs</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Phase</span> <span class="token punctuation">{</span>
    SOLID<span class="token punctuation">,</span> LIQUID<span class="token punctuation">,</span> GAS<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Transition</span> <span class="token punctuation">{</span>
        <span class="token function">MELT</span><span class="token punctuation">(</span>SOLID<span class="token punctuation">,</span> LIQUID<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">FREEZE</span><span class="token punctuation">(</span>LIQUID<span class="token punctuation">,</span> SOLID<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">BOIL</span><span class="token punctuation">(</span>LIQUID<span class="token punctuation">,</span> GAS<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">CONDENSE</span><span class="token punctuation">(</span>GAS<span class="token punctuation">,</span> LIQUID<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">SUBLIME</span><span class="token punctuation">(</span>SOLID<span class="token punctuation">,</span> GAS<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">DEPOSIT</span><span class="token punctuation">(</span>GAS<span class="token punctuation">,</span> SOLID<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Phase</span> from<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Phase</span> <span class="token keyword">to</span><span class="token punctuation">;</span>

        <span class="token class-name">Transition</span><span class="token punctuation">(</span><span class="token class-name">Phase</span> from<span class="token punctuation">,</span> <span class="token class-name">Phase</span> <span class="token keyword">to</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>from <span class="token operator">=</span> from<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">to</span> <span class="token operator">=</span> <span class="token keyword">to</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Initialize the phase transition map</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Phase</span><span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">Phase</span><span class="token punctuation">,</span> <span class="token class-name">Transition</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> m <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token function">groupingBy</span><span class="token punctuation">(</span>t <span class="token operator">-&gt;</span> t<span class="token punctuation">.</span>from<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">EnumMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Phase</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token function">toMap</span><span class="token punctuation">(</span>t <span class="token operator">-&gt;</span> t<span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">,</span> t <span class="token operator">-&gt;</span> t<span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> y<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">EnumMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Phase</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Transition</span> <span class="token function">from</span><span class="token punctuation">(</span><span class="token class-name">Phase</span> from<span class="token punctuation">,</span> <span class="token class-name">Phase</span> <span class="token keyword">to</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> m<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>from<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">to</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆå§‹åŒ–é˜¶æ®µè¿‡æ¸¡æ˜ å°„çš„ä»£ç çœ‹èµ·æ¥å¯èƒ½æœ‰ç‚¹å¤æ‚ã€‚æ˜ å°„çš„ç±»å‹ä¸º Map&lt;Phase, Map&lt;Phase, Transition&gt;&gt;ï¼Œè¡¨ç¤ºæ˜¯ç”±é”®ä¸ºæº Phaseï¼ˆå³ç¬¬ä¸€ä¸ªé˜¶æ®µï¼‰ã€å€¼ä¸ºå¦ä¸€ä¸ªæ˜ å°„ç»„æˆçš„ Mapï¼Œå…¶ä¸­ç»„æˆå€¼çš„ Map æ˜¯ç”±é”®å€¼å¯¹ç›®æ ‡ Phaseï¼ˆå³ç¬¬äºŒä¸ªé˜¶æ®µï¼‰å’Œ Transition ç»„æˆçš„ã€‚è¿™ä¸ªæ˜ å°„çš„æ˜ å°„æ˜¯åˆ©ç”¨ä¸¤ä¸ªé›†åˆçš„çº§è”é¡ºåºè¿›è¡Œåˆå§‹åŒ–çš„ã€‚ç¬¬ä¸€ä¸ªé›†åˆæŒ‰æº Phase å¯¹è¿‡æ¸¡è¿›è¡Œåˆ†ç»„ï¼Œç¬¬äºŒä¸ªé›†åˆåˆ©ç”¨ä»ç›®æ ‡ Phase åˆ°è¿‡æ¸¡ä¹‹é—´çš„æ˜ å°„åˆ›å»ºä¸€ä¸ª EnumMapã€‚ç¬¬äºŒä¸ªé›†åˆä¸­çš„ merge å‡½æ•°ï¼ˆ(x, y) -&gt; yï¼‰æ²¡æœ‰ç”¨åˆ°ï¼›åªæœ‰å½“æˆ‘ä»¬å› ä¸ºæƒ³è¦è·å¾—ä¸€ä¸ª EnumMap è€Œå®šä¹‰æ˜ å°„å·¥å‚æ—¶æ‰éœ€è¦ç”¨åˆ°å®ƒï¼ŒåŒæ—¶ Collectors æä¾›äº†é‡å å·¥å‚ã€‚</p><p>ç°åœ¨å‡è®¾æƒ³è¦ç»™ç³»ç»Ÿæ·»åŠ ä¸€ä¸ªæ–°çš„é˜¶æ®µï¼šplasmaï¼ˆç¦»å­ï¼‰æˆ–è€…ç”µç¦»æ°”ä½“ã€‚åªæœ‰ä¸¤ä¸ªè¿‡æ¸¡ä¸è¿™ä¸ªé˜¶æ®µå…³è”ï¼šç”µç¦»åŒ–ï¼Œå®ƒå°†æ°”ä½“å˜æˆç¦»å­ï¼›ä»¥åŠæ¶ˆç”µç¦»åŒ–ï¼Œå°†ç¦»å­å˜æˆæ°”ä½“ã€‚ä¸ºäº†æ›´æ–°åŸºäºæ•°ç»„çš„ç¨‹åºï¼Œå¿…é¡»ç»™ Phase æ·»åŠ ä¸€ç§æ–°å¸¸é‡ï¼Œç»™ Phase.Transition æ·»åŠ ä¸¤ç§æ–°å¸¸é‡ï¼Œç”¨ä¸€ç§æ–°çš„ 16 ä¸ªå…ƒç´ çš„ç‰ˆæœ¬å–ä»£åŸæ¥ 9 ä¸ªå…ƒç´ çš„æ•°ç»„çš„æ•°ç»„ã€‚å¦‚æœç»™æ•°ç»„æ·»åŠ çš„å…ƒç´ è¿‡å¤šæˆ–è€…è¿‡å°‘ï¼Œæˆ–è€…å…ƒç´ æ”¾ç½®ä¸å¦¥å½“ï¼Œå¯å°±éº»çƒ¦äº†ï¼šç¨‹åºå¯ä»¥ç¼–è¯‘ï¼Œä½†æ˜¯ä¼šåœ¨è¿è¡Œæ—¶å¤±è´¥ã€‚ä¸ºäº†æ›´æ–°åŸºäº EnumMap çš„ç‰ˆæœ¬ï¼Œæ‰€è¦åšçš„å°±æ˜¯å¿…é¡»å°† PLASMA æ·»åŠ åˆ° Phase åˆ—è¡¨ï¼Œå¹¶å°† IONIZE(GAS, PLASMA)å’Œ DEIONIZE(PLASMA, GAS) æ·»åŠ åˆ° Phase.Transition çš„åˆ—è¡¨ä¸­ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Adding a new phase using the nested EnumMap implementation</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Phase</span> <span class="token punctuation">(</span>
	SOLID<span class="token punctuation">,</span> LIQUID<span class="token punctuation">,</span> GAS<span class="token punctuation">,</span> PLASMA<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Transition</span> <span class="token punctuation">{</span>
    <span class="token function">MELT</span><span class="token punctuation">(</span>SOLID<span class="token punctuation">,</span> LIQUID<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">FREEZE</span><span class="token punctuation">(</span>LIQUID<span class="token punctuation">,</span> SOLID<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">BOIL</span><span class="token punctuation">(</span>LIQUID<span class="token punctuation">,</span> GAS<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">CONDENSE</span><span class="token punctuation">(</span>GAS<span class="token punctuation">,</span> LIQUID<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">SUBLIME</span><span class="token punctuation">(</span>SOLID<span class="token punctuation">,</span> GAS<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">DEPOSIT</span><span class="token punctuation">(</span>GAS<span class="token punctuation">,</span> SOLID<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token function">IONIZE</span><span class="token punctuation">(</span>GAS<span class="token punctuation">,</span> PLASMA<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">DEIONIZE</span><span class="token punctuation">(</span>PLASMA<span class="token punctuation">,</span> GAS<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
  	<span class="token comment">// ... Remainder unchanged</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¨‹åºä¼šè‡ªè¡Œå¤„ç†æ‰€æœ‰å…¶ä»–çš„äº‹æƒ…ï¼Œè¿™æ ·å°±å‡ ä¹æ²¡æœ‰å‡ºé”™çš„å¯èƒ½ã€‚ä»å†…éƒ¨æ¥çœ‹ï¼Œæ˜ å°„çš„æ˜ å°„è¢«å®ç°æˆäº†æ•°ç»„çš„æ•°ç»„ï¼Œå› æ­¤åœ¨æå‡äº†æ¸…æ™°æ€§ã€å®‰å…¨æ€§å’Œæ˜“ç»´æŠ¤æ€§çš„åŒæ—¶ï¼Œåœ¨ç©ºé—´æˆ–è€…æ—¶é—´ä¸Šä¹Ÿå‡ ä¹æ²¡æœ‰å¤šä½™çš„å¼€é”€ã€‚</p><p>ä¸ºäº†ç®€æ´èµ·è§ï¼Œä¸Šè¿°èŒƒä¾‹æ˜¯ç”¨ null è¡¨æ˜çŠ¶æ€æ²¡æœ‰å˜åŒ–ï¼ˆè¿™é‡Œçš„ to å’Œ from æ˜¯ç›¸ç­‰çš„ï¼‰ã€‚è¿™å¹¶ä¸æ˜¯å¥½çš„å®è·µï¼Œå¯èƒ½åœ¨è¿è¡Œæ—¶å¯¼è‡´ NullPointerException å¼‚å¸¸ã€‚è¦ç»™è¿™ä¸ªé—®é¢˜è®¾è®¡ä¸€ä¸ªæ•´æ´ã€ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼Œéœ€è¦é«˜è¶…çš„æŠ€å·§ï¼Œå¾—åˆ°çš„ç¨‹åºä¼šå¾ˆé•¿ï¼Œè´¬æŸäº†æœ¬æ¡ç›®çš„ä¸»è¦ç²¾ç¥ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼Œæœ€å¥½ä¸è¦ç”¨åºæ•°æ¥ç´¢å¼•æ•°ç»„ï¼Œè€Œè¦ä½¿ç”¨ EnumMapã€‚å¦‚æœä½ æ‰€è¡¨ç¤ºçš„è¿™ç§å…³ç³»æ˜¯å¤šç»´çš„ï¼Œå°±ä½¿ç”¨ EnumMap&lt;..., EnumMap&lt;...&gt;&gt;ã€‚åº”ç”¨ç¨‹åºçš„ç¨‹åºå‘˜ä¸€èˆ¬éƒ½ä¸ä½¿ç”¨ Enum.ordinal æ–¹æ³•ï¼Œä»…ä»…åœ¨æå°‘æ•°æƒ…å†µä¸‹æ‰ä¼šä½¿ç”¨ï¼Œå› æ­¤è¿™æ˜¯ä¸€ç§ç‰¹æ®Šæƒ…å†µã€‚</p><h2 id="ç¬¬-38-æ¡-ç”¨æ¥å£æ¨¡æ‹Ÿå¯æ‰©å±•çš„æšä¸¾" tabindex="-1"><a class="header-anchor" href="#ç¬¬-38-æ¡-ç”¨æ¥å£æ¨¡æ‹Ÿå¯æ‰©å±•çš„æšä¸¾" aria-hidden="true">#</a> ç¬¬ 38 æ¡ï¼šç”¨æ¥å£æ¨¡æ‹Ÿå¯æ‰©å±•çš„æšä¸¾</h2><p>å‡ ä¹ä»æ‰€æœ‰æ–¹é¢æ¥çœ‹ï¼Œæšä¸¾ç±»å‹éƒ½ä¼˜è¶Šäºç±»å‹å®‰å…¨æšä¸¾æ¨¡å¼ã€‚ä»è¡¨é¢ä¸Šçœ‹ï¼Œæœ‰ä¸€ä¸ªå¼‚å¸¸ä¸å¯ä¼¸ç¼©æ€§æœ‰å…³ï¼Œè¿™ä¸ªå¼‚å¸¸å¯èƒ½å¤„åœ¨åŸæ¥çš„æ¨¡å¼ä¸­ï¼Œå´æ²¡æœ‰å¾—åˆ°è¯­è¨€æ„é€ çš„æ”¯æŒã€‚æ¢å¥è¯è¯´ï¼Œä½¿ç”¨ç±»å‹å®‰å…¨æšä¸¾æ¨¡å¼èƒ½å¤Ÿå®ç°è®©ä¸€ä¸ªæšä¸¾ç±»å‹å»æ‰©å±•å¦ä¸€ä¸ªæšä¸¾ç±»å‹ï¼›åˆ©ç”¨è¿™ç§è¯­è¨€ç‰¹æ€§ï¼Œåˆ™ä¸å¯èƒ½åšåˆ°ã€‚è¿™ç»éå¶ç„¶ã€‚æšä¸¾çš„å¯ä¼¸ç¼©æ€§æœ€åè¯æ˜åŸºæœ¬ä¸Šéƒ½ä¸æ˜¯ä»€ä¹ˆå¥½ç‚¹å­ã€‚æ‰©å±•ç±»å‹çš„å…ƒç´ ä¸ºåŸºæœ¬ç±»å‹çš„å®ä¾‹ï¼ŒåŸºæœ¬ç±»å‹çš„å®ä¾‹å´ä¸æ˜¯æ‰©å±•ç±»å‹çš„å…ƒç´ ï¼Œè¿™æ ·å¾ˆæ··ä¹±ã€‚ç›®å‰è¿˜æ²¡æœ‰å¾ˆå¥½çš„æ–¹æ³•æ¥æšä¸¾åŸºæœ¬ç±»å‹çš„æ‰€æœ‰å…ƒç´ åŠå…¶æ‰©å±•ã€‚æœ€ç»ˆï¼Œå¯ä¼¸ç¼©æ€§ä¼šå¯¼è‡´è®¾è®¡å’Œå®ç°çš„è®¸å¤šæ–¹é¢å˜å¾—å¤æ‚èµ·æ¥ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºå¯ä¼¸ç¼©çš„æšä¸¾ç±»å‹è€Œè¨€ï¼Œè‡³å°‘æœ‰ä¸€ç§å…·æœ‰è¯´æœåŠ›çš„ç”¨ä¾‹ï¼Œè¿™å°±æ˜¯æ“ä½œç ï¼Œä¹Ÿç§°ä½œ opcodeã€‚æ“ä½œç æ˜¯æŒ‡è¿™æ ·çš„æšä¸¾ç±»å‹ï¼šå®ƒçš„å…ƒç´ è¡¨ç¤ºåœ¨æŸç§æœºå™¨ä¸Šçš„é‚£äº›æ“ä½œï¼Œä¾‹å¦‚ Operation ç±»å‹ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªç®€å•çš„è®¡ç®—å™¨ä¸­çš„æŸäº›å‡½æ•°ã€‚æœ‰æ—¶è¦å°½å¯èƒ½åœ°è®© API çš„ç”¨æˆ·æä¾›å®ƒä»¬è‡ªå·±çš„æ“ä½œï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆåœ°æ‰©å±• API æ‰€æä¾›çš„æ“ä½œé›†ã€‚</p><p>å¹¸è¿çš„æ˜¯ï¼Œæœ‰ä¸€ç§å¾ˆå¥½çš„æ–¹æ³•å¯ä»¥åˆ©ç”¨æšä¸¾ç±»å‹æ¥å®ç°è¿™ç§æ•ˆæœã€‚ç”±äºæšä¸¾ç±»å‹å¯ä»¥é€šè¿‡ç»™æ“ä½œç ç±»å‹å’Œï¼ˆå±äºæ¥å£çš„æ ‡å‡†å®ç°çš„ï¼‰æšä¸¾å®šä¹‰æ¥å£æ¥å®ç°ä»»æ„æ¥å£ï¼ŒåŸºæœ¬çš„æƒ³æ³•å°±æ˜¯åˆ©ç”¨è¿™ä¸€äº‹å®ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯ Operation ç±»å‹çš„æ‰©å±•ç‰ˆæœ¬ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Emulated extensible enum using an interface</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Operation</span> <span class="token punctuation">{</span>
    <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">BasicOperation</span> <span class="token keyword">implements</span> <span class="token class-name">Operation</span> <span class="token punctuation">{</span>
    <span class="token function">PLUS</span><span class="token punctuation">(</span><span class="token string">&quot;+&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">MINUS</span><span class="token punctuation">(</span><span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> x <span class="token operator">-</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">TIMES</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> x <span class="token operator">*</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">DIVIDE</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> x <span class="token operator">/</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> symbol<span class="token punctuation">;</span>

    <span class="token class-name">BasicOperation</span><span class="token punctuation">(</span><span class="token class-name">String</span> symbol<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>symbol <span class="token operator">=</span> symbol<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> symbol<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è™½ç„¶æšä¸¾ç±»å‹ä¸æ˜¯å¯æ‰©å±•çš„ï¼Œä½†æ¥å£ç±»å‹å´æ˜¯å¯æ‰©å±•çš„ï¼Œå®ƒæ˜¯ç”¨æ¥è¡¨ç¤º API ä¸­çš„æ“ä½œçš„æ¥å£ç±»å‹ã€‚ä½ å¯ä»¥å®šä¹‰å¦ä¸€ä¸ªæšä¸¾ç±»å‹ï¼Œå®ƒå®ç°</p><p>è¿™ä¸ªæ¥å£ï¼Œå¹¶ç”¨è¿™ä¸ªæ–°ç±»å‹çš„å®ä¾‹ä»£æ›¿åŸºæœ¬ç±»å‹ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æƒ³è¦å®šä¹‰ä¸€ä¸ªä¸Šè¿°æ“ä½œç±»å‹çš„æ‰©å±•ï¼Œç”±æ±‚å¹‚å’Œæ±‚ä½™æ“ä½œç»„æˆã€‚ä½ æ‰€è¦åšçš„å°±æ˜¯ç¼–å†™ä¸€ä¸ªæšä¸¾ç±»å‹ï¼Œè®©å®ƒå®ç° Operation æ¥å£ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Emulated extension enum</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">ExtendedOperation</span> <span class="token keyword">implements</span> <span class="token class-name">Operation</span> <span class="token punctuation">{</span>
    <span class="token function">EXP</span><span class="token punctuation">(</span><span class="token string">&quot;^&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">REMAINDER</span><span class="token punctuation">(</span><span class="token string">&quot;%&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> x <span class="token operator">%</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> symbol<span class="token punctuation">;</span>

    <span class="token class-name">ExtendedOperation</span><span class="token punctuation">(</span><span class="token class-name">String</span> symbol<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>symbol <span class="token operator">=</span> symbol<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> symbol<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å¯ä»¥ä½¿ç”¨åŸºç¡€æ“ä½œçš„ä»»ä½•åœ°æ–¹ï¼Œç°åœ¨éƒ½å¯ä»¥ä½¿ç”¨æ–°çš„æ“ä½œï¼Œåªè¦ API æ˜¯å†™æˆé‡‡ç”¨æ¥å£ç±»å‹è€Œéå®ç°ã€‚æ³¨æ„ï¼Œåœ¨æšä¸¾ä¸­ï¼Œä¸å¿…åƒåœ¨ä¸å¯æ‰©å±•çš„æšä¸¾ä¸­æ‰€åšçš„é‚£æ ·ï¼Œåˆ©ç”¨ç‰¹å®šäºå®ä¾‹çš„æ–¹æ³•å®ç°æ¥å£°æ˜æŠ½è±¡çš„ apply æ–¹æ³•ã€‚å› ä¸ºæŠ½è±¡çš„æ–¹æ³•ï¼ˆapplyï¼‰æ˜¯æ¥å£çš„ä¸€éƒ¨åˆ†ã€‚</p><p>ä¸ä»…å¯ä»¥åœ¨ä»»ä½•éœ€è¦â€œåŸºæœ¬æšä¸¾â€çš„åœ°æ–¹å•ç‹¬ä¼ é€’ä¸€ä¸ªâ€œæ‰©å±•æšä¸¾â€çš„å®ä¾‹ï¼Œè€Œä¸”é™¤äº†é‚£äº›åŸºæœ¬ç±»å‹çš„å…ƒç´ ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä¼ é€’å®Œæ•´çš„æ‰©å±•æšä¸¾ç±»å‹ï¼Œå¹¶ä½¿ç”¨å®ƒçš„å…ƒç´ ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">double</span> x <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">parseDouble</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">double</span> y <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">parseDouble</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">ExtendedOperation</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">Enum</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span> <span class="token operator">&amp;</span> <span class="token class-name">Operation</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> opEnumType<span class="token punctuation">,</span> <span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Operation</span> op <span class="token operator">:</span> opEnumType<span class="token punctuation">.</span><span class="token function">getEnumConstants</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>	<span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%f %s %f = %f%n&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> op<span class="token punctuation">,</span> y<span class="token punctuation">,</span> op<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„æ‰©å±•è¿‡çš„æ“ä½œç±»å‹çš„ç±»çš„å­—é¢æ–‡å­—ï¼ˆExtendedOperation.classï¼‰ä» main è¢«ä¼ é€’ç»™äº† test æ–¹æ³•ï¼Œæ¥æè¿°è¢«æ‰©å±•æ“ä½œçš„é›†åˆã€‚è¿™ä¸ªç±»çš„å­—é¢æ–‡å­—å……å½“æœ‰é™åˆ¶çš„ç±»å‹ä»¤ç‰Œã€‚opEnumType å‚æ•°ä¸­å…¬è®¤å¾ˆå¤æ‚çš„å£°æ˜ï¼ˆ&lt;T extends Enum&lt;T&gt; &amp; Operation&gt; Class&lt;T&gt;ï¼‰ç¡®ä¿äº† Class å¯¹è±¡æ—¢è¡¨ç¤ºæšä¸¾åˆè¡¨ç¤º Operation çš„å­ç±»å‹ï¼Œè¿™æ­£æ˜¯éå†å…ƒç´ å’Œæ‰§è¡Œä¸æ¯ä¸ªå…ƒç´ ç›¸å…³è”çš„æ“ä½œæ—¶æ‰€éœ€è¦çš„ã€‚</p><p>ç¬¬äºŒç§æ–¹æ³•æ˜¯ä¼ å…¥ä¸€ä¸ª Collection&lt;? extends Operation&gt;ï¼Œè¿™æ˜¯ä¸ªæœ‰é™åˆ¶çš„é€šé…ç¬¦ç±»å‹ï¼Œè€Œä¸æ˜¯ä¼ é€’ä¸€ä¸ªç±»å¯¹è±¡ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">double</span> x <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">parseDouble</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">double</span> y <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">parseDouble</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">ExtendedOperation</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> test <span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Operation</span><span class="token punctuation">&gt;</span></span> opSet<span class="token punctuation">,</span> <span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Operation</span> op <span class="token operator">:</span> opSet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%f %s %f = %f%n&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> op<span class="token punctuation">,</span> y<span class="token punctuation">,</span> op<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·å¾—åˆ°çš„ä»£ç æ²¡æœ‰é‚£ä¹ˆå¤æ‚ï¼Œtest æ–¹æ³•ä¹Ÿæ¯”è¾ƒçµæ´»ä¸€äº›ï¼šå®ƒå…è®¸è°ƒç”¨è€…å°†å¤šä¸ªå®ç°ç±»å‹çš„æ“ä½œåˆå¹¶åˆ°ä¸€èµ·ã€‚å¦ä¸€æ–¹é¢ï¼Œä¹Ÿæ”¾å¼ƒäº†åœ¨æŒ‡å®šæ“ä½œä¸Šä½¿ç”¨ EnumSet å’Œ EnumMap çš„åŠŸèƒ½ã€‚</p><p>ä¸Šé¢è¿™ä¸¤æ®µç¨‹åºè¿è¡Œæ—¶å¸¦ä¸Šå‘½ä»¤è¡Œå‚æ•° 4 å’Œ 2ï¼Œéƒ½ä¼šäº§ç”Ÿå¦‚ä¸‹è¾“å‡ºï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token number">4.000000</span> <span class="token operator">^</span> <span class="token number">2.000000</span> <span class="token operator">=</span> <span class="token number">16.000000</span>
<span class="token number">4.000000</span> <span class="token operator">%</span> <span class="token number">2.000000</span> <span class="token operator">=</span> <span class="token number">0.000000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”¨æ¥å£æ¨¡æ‹Ÿå¯ä¼¸ç¼©æšä¸¾æœ‰ä¸ªå°å°çš„ä¸è¶³ï¼Œå³æ— æ³•å°†å®ç°ä»ä¸€ä¸ªæšä¸¾ç±»å‹ç»§æ‰¿åˆ°å¦ä¸€ä¸ªæšä¸¾ç±»å‹ã€‚å¦‚æœå®ç°ä»£ç ä¸ä¾èµ–äºä»»ä½•çŠ¶æ€ï¼Œå°±å¯ä»¥å°†ç¼ºçœå®ç°æ”¾åœ¨æ¥å£ä¸­ã€‚åœ¨ä¸Šè¿° Operation çš„ç¤ºä¾‹ä¸­ï¼Œä¿å­˜å’Œè·å–ä¸æŸé¡¹æ“ä½œç›¸å…³è”çš„ç¬¦å·çš„é€»è¾‘ä»£ç ï¼Œå¿…é¡»å¤åˆ¶åˆ° BasicOperation å’Œ ExtendedOperation ä¸­ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯å¯ä»¥çš„ï¼Œå› ä¸ºå¤åˆ¶çš„ä»£ç éå¸¸å°‘ã€‚å¦‚æœå…±äº«åŠŸèƒ½æ¯”è¾ƒå¤šï¼Œåˆ™å¯ä»¥å°†å®ƒå°è£…åœ¨ä¸€ä¸ªè¾…åŠ©ç±»æˆ–è€…é™æ€è¾…åŠ©æ–¹æ³•ä¸­ï¼Œæ¥é¿å…ä»£ç çš„å¤åˆ¶å·¥ä½œã€‚</p><p>æœ¬æ¡ç›®æ‰€è¿°çš„æ¨¡å¼ä¹Ÿåœ¨ Java ç±»åº“ä¸­å¾—åˆ°äº†åº”ç”¨ã€‚ä¾‹å¦‚ï¼Œjava.nio.file.LinkOption æšä¸¾ç±»å‹ï¼Œå®ƒåŒæ—¶å®ç°äº† CopyOption å’Œ OpenOption æ¥å£ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼Œè™½ç„¶æ— æ³•ç¼–å†™å¯æ‰©å±•çš„æšä¸¾ç±»å‹ï¼Œå´å¯ä»¥é€šè¿‡ç¼–å†™æ¥å£ä»¥åŠå®ç°è¯¥æ¥å£çš„åŸºç¡€æšä¸¾ç±»å‹æ¥å¯¹å®ƒè¿›è¡Œæ¨¡æ‹Ÿã€‚è¿™æ ·å…è®¸å®¢æˆ·ç«¯ç¼–å†™è‡ªå·±çš„æšä¸¾ï¼ˆæˆ–è€…å…¶ä»–ç±»å‹ï¼‰æ¥å®ç°æ¥å£ã€‚å¦‚æœ API æ˜¯æ ¹æ®æ¥å£ç¼–å†™çš„ï¼Œé‚£ä¹ˆåœ¨å¯ä»¥ä½¿ç”¨åŸºç¡€æšä¸¾ç±»å‹çš„ä»»ä½•åœ°æ–¹ï¼Œä¹Ÿéƒ½å¯ä»¥ä½¿ç”¨è¿™äº›æšä¸¾ã€‚</p><h2 id="ç¬¬-39-æ¡-æ³¨è§£ä¼˜å…ˆäºå‘½åæ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ç¬¬-39-æ¡-æ³¨è§£ä¼˜å…ˆäºå‘½åæ¨¡å¼" aria-hidden="true">#</a> ç¬¬ 39 æ¡ï¼šæ³¨è§£ä¼˜å…ˆäºå‘½åæ¨¡å¼</h2><p>æ ¹æ®ç»éªŒï¼Œä¸€èˆ¬ä½¿ç”¨å‘½åæ¨¡å¼è¡¨æ˜æœ‰äº›ç¨‹åºå…ƒç´ éœ€è¦é€šè¿‡æŸç§å·¥å…·æˆ–è€…æ¡†æ¶è¿›è¡Œç‰¹æ®Šå¤„ç†ã€‚ä¾‹å¦‚ï¼Œåœ¨ Java 4 å‘è¡Œç‰ˆæœ¬ä¹‹å‰ï¼ŒJUnit æµ‹è¯•æ¡†æ¶åŸæœ¬è¦æ±‚å…¶ç”¨æˆ·ä¸€å®šè¦ç”¨ test ä½œä¸ºæµ‹è¯•æ–¹æ³•åç§°çš„å¼€å¤´ã€‚è¿™ç§æ–¹æ³•å¯è¡Œï¼Œä½†æ˜¯æœ‰å‡ ä¸ªå¾ˆä¸¥é‡çš„ç¼ºç‚¹ã€‚é¦–å…ˆï¼Œæ–‡å­—æ‹¼å†™é”™è¯¯ä¼šå¯¼è‡´å¤±è´¥ï¼Œä¸”æ²¡æœ‰ä»»ä½•æç¤ºã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä¸å°å¿ƒå°†ä¸€ä¸ªæµ‹è¯•æ–¹æ³•å‘½åä¸º tsetSafetyOverride è€Œä¸æ˜¯ testSafetyOverrideã€‚JUnit 3 ä¸ä¼šæç¤ºï¼Œä½†ä¹Ÿä¸ä¼šæ‰§è¡Œæµ‹è¯•ï¼Œé€ æˆé”™è¯¯çš„å®‰å…¨æ„Ÿã€‚</p><p>å‘½åæ¨¡å¼çš„ç¬¬äºŒä¸ªç¼ºç‚¹æ˜¯ï¼Œæ— æ³•ç¡®ä¿å®ƒä»¬åªç”¨äºç›¸åº”çš„ç¨‹åºå…ƒç´ ä¸Šã€‚ä¾‹å¦‚ï¼Œå‡è®¾å°†æŸä¸ªç±»ç§°ä½œ TestSafetyMechanismsï¼Œæ˜¯å¸Œæœ› JUnit 3 ä¼šè‡ªåŠ¨åœ°æµ‹è¯•å®ƒæ‰€æœ‰çš„æ–¹æ³•ï¼Œè€Œä¸ç®¡å®ƒä»¬å«ä»€ä¹ˆåç§°ã€‚JUnit 3 è¿˜æ˜¯ä¸ä¼šæç¤ºï¼Œä½†ä¹ŸåŒæ ·ä¸ä¼šæ‰§è¡Œæµ‹è¯•ã€‚</p><p>å‘½åæ¨¡å¼çš„ç¬¬ä¸‰ä¸ªç¼ºç‚¹æ˜¯ï¼Œå®ƒä»¬æ²¡æœ‰æä¾›å°†å‚æ•°å€¼ä¸ç¨‹åºå…ƒç´ å…³è”èµ·æ¥çš„å¥½æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æƒ³è¦æ”¯æŒä¸€ç§æµ‹è¯•ç±»åˆ«ï¼Œå®ƒåªåœ¨æŠ›å‡ºç‰¹æ®Šå¼‚å¸¸æ—¶æ‰ä¼šæˆåŠŸã€‚å¼‚å¸¸ç±»å‹æœ¬è´¨ä¸Šæ˜¯æµ‹è¯•çš„ä¸€ä¸ªå‚æ•°ã€‚ä½ å¯ä»¥åˆ©ç”¨æŸç§å…·ä½“çš„å‘½åæ¨¡å¼ï¼Œå°†å¼‚å¸¸ç±»å‹åç§°ç¼–ç åˆ°æµ‹è¯•æ–¹æ³•åç§°ä¸­ï¼Œä½†æ˜¯è¿™æ ·çš„ä»£ç å¾ˆä¸é›…è§‚ï¼Œä¹Ÿå¾ˆè„†å¼±ã€‚ç¼–è¯‘å™¨ä¸çŸ¥é“è¦å»æ£€éªŒå‡†å¤‡å‘½åå¼‚å¸¸çš„å­—ç¬¦ä¸²æ˜¯å¦çœŸæ­£å‘½åæˆåŠŸã€‚å¦‚æœå‘½åçš„ç±»ä¸å­˜åœ¨ï¼Œæˆ–è€…ä¸æ˜¯ä¸€ä¸ªå¼‚å¸¸ï¼Œä½ ä¹Ÿè¦åˆ°è¯•ç€è¿è¡Œæµ‹è¯•æ—¶æ‰ä¼šå‘ç°ã€‚</p><p>æ³¨è§£å¾ˆå¥½åœ°è§£å†³äº†æ‰€æœ‰è¿™äº›é—®é¢˜ï¼ŒJUnit ä» Java 4 å¼€å§‹ä½¿ç”¨ã€‚åœ¨æœ¬æ¡ç›®ä¸­ï¼Œæˆ‘ä»¬è¦ç¼–å†™è‡ªå·±çš„è¯•éªŒæµ‹è¯•æ¡†æ¶ï¼Œå±•ç¤ºä¸€ä¸‹æ³¨è§£çš„ä½¿ç”¨æ–¹æ³•ã€‚å‡è®¾æƒ³è¦å®šä¹‰ä¸€ä¸ªæ³¨è§£ç±»å‹æ¥æŒ‡å®šç®€å•çš„æµ‹è¯•ï¼Œå®ƒä»¬è‡ªåŠ¨è¿è¡Œï¼Œå¹¶åœ¨æŠ›å‡ºå¼‚å¸¸æ—¶å¤±è´¥ã€‚ä»¥ä¸‹å°±æ˜¯è¿™æ ·çš„ä¸€ä¸ªæ³¨è§£ç±»å‹ï¼Œå‘½åä¸º Testï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Marker annotation type declaration</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * Indicates that the annotated method is a test method.
 * Use only on parameterless static methods.
 */</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Test æ³¨è§£ç±»å‹çš„å£°æ˜å°±æ˜¯å®ƒè‡ªèº«é€šè¿‡ Retention å’Œ Target æ³¨è§£è¿›è¡Œäº†æ³¨è§£ã€‚æ³¨è§£ç±»å‹å£°æ˜ä¸­çš„è¿™ç§æ³¨è§£è¢«ç§°ä½œå…ƒæ³¨è§£ã€‚@Retention(RetentionPolicy.RUNTIME) å…ƒæ³¨è§£è¡¨æ˜ Test æ³¨è§£åœ¨è¿è¡Œæ—¶ä¹Ÿåº”è¯¥å­˜åœ¨ï¼Œå¦åˆ™æµ‹è¯•å·¥å…·å°±æ— æ³•çŸ¥é“ Test æ³¨è§£ã€‚@Target(ElementType.METHOD) å…ƒæ³¨è§£è¡¨æ˜ï¼ŒTest æ³¨è§£åªåœ¨æ–¹æ³•å£°æ˜ä¸­æ‰æ˜¯åˆæ³•çš„ï¼šå®ƒä¸èƒ½è¿ç”¨åˆ°ç±»å£°æ˜ã€åŸŸå£°æ˜æˆ–è€…å…¶ä»–ç¨‹åºå…ƒç´ ä¸Šã€‚</p><p>æ³¨æ„ Test æ³¨è§£å£°æ˜ä¸Šæ–¹çš„æ³¨é‡Šï¼š&quot;Use only on parameterless static methodâ€ï¼ˆåªç”¨äºæ— å‚çš„é™æ€æ–¹æ³•ï¼‰ã€‚å¦‚æœç¼–è¯‘å™¨èƒ½å¤Ÿå¼ºåˆ¶è¿™ä¸€é™åˆ¶æœ€å¥½ï¼Œä½†æ˜¯å®ƒåšä¸åˆ°ï¼Œé™¤éç¼–å†™ä¸€ä¸ªæ³¨è§£å¤„ç†å™¨ï¼Œè®©å®ƒæ¥å®Œæˆã€‚å…³äºè¿™ä¸ªä¸»é¢˜çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… javax.annotation.processing çš„æ–‡æ¡£ã€‚åœ¨æ²¡æœ‰è¿™ç±»æ³¨è§£å¤„ç†å™¨çš„æƒ…å†µä¸‹ï¼Œå¦‚æœå°† Test æ³¨è§£æ”¾åœ¨å®ä¾‹æ–¹æ³•çš„å£°æ˜ä¸­ï¼Œæˆ–è€…æ”¾åœ¨å¸¦æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªå‚æ•°çš„æ–¹æ³•ä¸­ï¼Œæµ‹è¯•ç¨‹åºè¿˜æ˜¯å¯ä»¥ç¼–è¯‘ï¼Œè®©æµ‹è¯•å·¥å…·åœ¨è¿è¡Œæ—¶æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚</p><p>ä¸‹é¢å°±æ˜¯ç°å®åº”ç”¨ä¸­çš„ Test æ³¨è§£ï¼Œç§°ä½œæ ‡è®°æ³¨è§£ï¼Œå› ä¸ºå®ƒæ²¡æœ‰å‚æ•°ï¼Œåªæ˜¯â€œæ ‡æ³¨â€è¢«æ³¨è§£çš„å…ƒç´ ã€‚å¦‚æœç¨‹åºå‘˜æ‹¼é”™äº† Testï¼Œæˆ–è€…å°† Test æ³¨è§£åº”ç”¨åˆ°ç¨‹åºå…ƒç´ è€Œéæ–¹æ³•å£°æ˜ï¼Œç¨‹åºå°±æ— æ³•ç¼–è¯‘ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Program containing marker annotations</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Sample</span> <span class="token punctuation">{</span>
    <span class="token comment">// Test should pass</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Test should fail</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">m3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;Boom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Not a test</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">m4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// INVALID USE: nonstatic method</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">m5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">m6</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Test should fail</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">m7</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;Crash&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">m8</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Sample ç±»æœ‰ 7 ä¸ªé™æ€æ–¹æ³•ï¼Œå…¶ä¸­ 4 ä¸ªè¢«æ³¨è§£ä¸ºæµ‹è¯•ã€‚è¿™ 4 ä¸ªä¸­æœ‰ 2 ä¸ªæŠ›å‡ºäº†å¼‚å¸¸ï¼šm3 å’Œ m7ï¼Œå¦å¤–ä¸¤ä¸ªåˆ™æ²¡æœ‰ï¼šm1 å’Œ m5ã€‚ä½†æ˜¯å…¶ä¸­ä¸€ä¸ªæ²¡æœ‰æŠ›å‡ºå¼‚å¸¸çš„è¢«æ³¨è§£æ–¹æ³•ï¼šm5ï¼Œæ˜¯ä¸€ä¸ªå®ä¾‹æ–¹æ³•ï¼Œå› æ­¤ä¸å±äºæ³¨è§£çš„æœ‰æ•ˆä½¿ç”¨ã€‚æ€»ä¹‹ï¼ŒSample åŒ…å« 4 é¡¹æµ‹è¯•ï¼šä¸€é¡¹ä¼šé€šè¿‡ï¼Œä¸¤é¡¹ä¼šå¤±è´¥ï¼Œå¦ä¸€é¡¹æ— æ•ˆã€‚æ²¡æœ‰ç”¨ Test æ³¨è§£è¿›è¡Œæ ‡æ³¨çš„å¦å¤– 4 ä¸ªæ–¹æ³•ä¼šè¢«æµ‹è¯•å·¥å…·å¿½ç•¥ã€‚</p><p>Test æ³¨è§£å¯¹ Sample ç±»çš„è¯­ä¹‰æ²¡æœ‰ç›´æ¥çš„å½±å“ã€‚å®ƒä»¬åªè´Ÿè´£æä¾›ä¿¡æ¯ä¾›ç›¸å…³çš„ç¨‹åºä½¿ç”¨ã€‚æ›´ä¸€èˆ¬åœ°è®²ï¼Œæ³¨è§£æ°¸è¿œä¸ä¼šæ”¹å˜è¢«æ³¨è§£ä»£ç çš„è¯­ä¹‰ï¼Œä½†æ˜¯ä½¿å®ƒå¯ä»¥é€šè¿‡å·¥å…·è¿›è¡Œç‰¹æ®Šçš„å¤„ç†ï¼Œä¾‹å¦‚åƒè¿™ç§ç®€å•çš„æµ‹è¯•è¿è¡Œç±»ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Program to process marker annotations</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RunTests</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> tests <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> passed <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> testClass <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Method</span> m <span class="token operator">:</span> testClass<span class="token punctuation">.</span><span class="token function">getDeclaredMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">Test</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                tests<span class="token operator">++</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    m<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    passed<span class="token operator">++</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InvocationTargetException</span> wrappedExc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Throwable</span> exc <span class="token operator">=</span> wrappedExc<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>m <span class="token operator">+</span> <span class="token string">&quot; failed: &quot;</span> <span class="token operator">+</span> exc<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> exc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Invalid @Test: &quot;</span> <span class="token operator">+</span> m<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Passed: %d, Failed: %d%n&quot;</span><span class="token punctuation">,</span> passed<span class="token punctuation">,</span> tests <span class="token operator">-</span> passed<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•è¿è¡Œå·¥å…·åœ¨å‘½ä»¤è¡Œä¸Šä½¿ç”¨å®Œå…¨åŒ¹é…çš„ç±»åï¼Œå¹¶é€šè¿‡è°ƒç”¨ Method.invoke åå°„å¼åœ°è¿è¡Œç±»ä¸­æ‰€æœ‰æ ‡æ³¨äº† Test æ³¨è§£çš„æ–¹æ³•ã€‚isAnnotationPresent æ–¹æ³•å‘ŠçŸ¥è¯¥å·¥å…·è¦è¿è¡Œå“ªäº›æ–¹æ³•ã€‚å¦‚æœæµ‹è¯•æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ï¼Œåå°„æœºåˆ¶å°±ä¼šå°†å®ƒå°è£…åœ¨ InvocationTargetException ä¸­ã€‚è¯¥å·¥å…·æ•æ‰åˆ°è¿™ä¸ªå¼‚å¸¸ï¼Œå¹¶æ‰“å°å¤±è´¥æŠ¥å‘Šï¼ŒåŒ…å«æµ‹è¯•æ–¹æ³•æŠ›å‡ºçš„åŸå§‹å¼‚å¸¸ï¼Œè¿™äº›ä¿¡æ¯æ˜¯é€šè¿‡ getCause æ–¹æ³•ä» InvocationTargetException ä¸­æå–å‡ºæ¥çš„ã€‚</p><p>å¦‚æœå°è¯•é€šè¿‡åå°„è°ƒç”¨æµ‹è¯•æ–¹æ³•æ—¶æŠ›å‡º InvocationTargetException ä¹‹å¤–çš„ä»»ä½•å¼‚å¸¸ï¼Œè¡¨æ˜ç¼–è¯‘æ—¶æ²¡æœ‰æ•æ‰åˆ° Test æ³¨è§£çš„æ— æ•ˆç”¨æ³•ã€‚è¿™ç§ç”¨æ³•åŒ…æ‹¬å®ä¾‹æ–¹æ³•çš„æ³¨è§£ï¼Œæˆ–è€…å¸¦æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°çš„æ–¹æ³•çš„æ³¨è§£ï¼Œæˆ–è€…ä¸å¯è®¿é—®çš„æ–¹æ³•çš„æ³¨è§£ã€‚æµ‹è¯•è¿è¡Œç±»ä¸­çš„ç¬¬äºŒä¸ª catch å—æ•æ‰åˆ°è¿™äº› Test ç”¨æ³•é”™è¯¯ï¼Œå¹¶æ‰“å°å‡ºç›¸åº”çš„é”™è¯¯æ¶ˆæ¯ã€‚ä¸‹é¢å°±æ˜¯ RunTests åœ¨ Sample ä¸Šè¿è¡Œæ—¶æ‰“å°çš„è¾“å‡ºï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token class-name"><span class="token namespace">item39<span class="token punctuation">.</span></span>Sample</span><span class="token punctuation">.</span><span class="token function">m3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> failed<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>RuntimeException</span><span class="token operator">:</span> <span class="token class-name">Boom</span>
<span class="token class-name">Invalid</span> <span class="token annotation punctuation">@Test</span><span class="token operator">:</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name"><span class="token namespace">item39<span class="token punctuation">.</span></span>Sample</span><span class="token punctuation">.</span><span class="token function">m5</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token class-name"><span class="token namespace">item39<span class="token punctuation">.</span></span>Sample</span><span class="token punctuation">.</span><span class="token function">m7</span><span class="token punctuation">(</span><span class="token punctuation">)</span> failed<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>RuntimeException</span><span class="token operator">:</span> <span class="token class-name">Crash</span>
<span class="token class-name">Passed</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">Failed</span><span class="token operator">:</span> <span class="token number">3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨æˆ‘ä»¬è¦é’ˆå¯¹åªåœ¨æŠ›å‡ºç‰¹æ®Šå¼‚å¸¸æ—¶æ‰æˆåŠŸçš„æµ‹è¯•æ·»åŠ æ”¯æŒã€‚ä¸ºæ­¤éœ€è¦ä¸€ä¸ªæ–°çš„æ³¨è§£ç±»å‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Annotation type with a parameter</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * Indicates that the annotated method is a test method that
 * must throw the designated exception to succed.
 */</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">ExceptionTest</span> <span class="token punctuation">{</span>
    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Throwable</span><span class="token punctuation">&gt;</span></span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªæ³¨è§£çš„å‚æ•°ç±»å‹æ˜¯ Class&lt;? extends Throwable&gt;ã€‚è¿™ä¸ªé€šé…ç¬¦ç±»å‹æœ‰äº›ç»•å£ã€‚å®ƒåœ¨è‹±è¯­ä¸­çš„æ„æ€æ˜¯ï¼šæŸä¸ªæ‰©å±• Throwable çš„ç±»çš„ Class å¯¹è±¡ï¼Œå®ƒå…è®¸æ³¨è§£çš„ç”¨æˆ·æŒ‡å®šä»»ä½•å¼‚å¸¸ï¼ˆæˆ–é”™è¯¯ï¼‰ç±»å‹ã€‚è¿™ç§ç”¨æ³•æ˜¯æœ‰é™åˆ¶çš„ç±»å‹ä»¤ç‰Œçš„ä¸€ä¸ªç¤ºä¾‹ã€‚ä¸‹é¢å°±æ˜¯å®é™…åº”ç”¨ä¸­çš„è¿™ä¸ªæ³¨è§£ã€‚æ³¨æ„ç±»åç§°è¢«ç”¨ä½œäº†æ³¨è§£å‚æ•°çš„å€¼ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Program containing annotations with a parameter</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Sample2</span> <span class="token punctuation">{</span>
    <span class="token comment">// Test should pass</span>
    <span class="token annotation punctuation">@ExceptionTest</span><span class="token punctuation">(</span><span class="token class-name">ArithmeticException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        i <span class="token operator">=</span> i <span class="token operator">/</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Should fail (wrong exception)</span>
    <span class="token annotation punctuation">@ExceptionTest</span><span class="token punctuation">(</span><span class="token class-name">ArithmeticException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Should fail (no exception)</span>
    <span class="token annotation punctuation">@ExceptionTest</span><span class="token punctuation">(</span><span class="token class-name">ArithmeticException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">m3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨æˆ‘ä»¬è¦ä¿®æ”¹ä¸€ä¸‹æµ‹è¯•è¿è¡Œå·¥å…·æ¥å¤„ç†æ–°çš„æ³¨è§£ã€‚è¿™å…¶ä¸­åŒ…æ‹¬å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ° main æ–¹æ³•ä¸­ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">ExceptionTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  tests<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    m<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Test %s failed: no excepetion%n&quot;</span><span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InvocationTargetException</span> wrappedExc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Throwable</span> exc <span class="token operator">=</span> wrappedExc<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Throwable</span><span class="token punctuation">&gt;</span></span> excType <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">ExceptionTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>excType<span class="token punctuation">.</span><span class="token function">isInstance</span><span class="token punctuation">(</span>exc<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      passed<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Test %s failed: expected %s, got %s%n&quot;</span><span class="token punctuation">,</span> m<span class="token punctuation">,</span> excType<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> exc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> exc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Invalid @Test: &quot;</span> <span class="token operator">+</span> m<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µä»£ç ç±»ä¼¼äºç”¨æ¥å¤„ç† Test æ³¨è§£çš„ä»£ç ï¼Œä½†æœ‰ä¸€å¤„ä¸åŒï¼šè¿™æ®µä»£ç æå–äº†æ³¨è§£å‚æ•°çš„å€¼ï¼Œå¹¶ç”¨å®ƒæ£€éªŒè¯¥æµ‹è¯•æŠ›å‡ºçš„å¼‚å¸¸æ˜¯å¦ä¸ºæ­£ç¡®çš„ç±»å‹ã€‚æ²¡æœ‰æ˜¾å¼çš„è½¬æ¢ï¼Œå› æ­¤æ²¡æœ‰å‡ºç° ClassCastException çš„å±é™©ã€‚ç¼–è¯‘è¿‡çš„æµ‹è¯•ç¨‹åºç¡®ä¿å®ƒçš„æ³¨è§£å‚æ•°è¡¨ç¤ºçš„æ˜¯æœ‰æ•ˆçš„å¼‚å¸¸ç±»å‹ï¼Œéœ€è¦æé†’ä¸€ç‚¹ï¼šæœ‰å¯èƒ½æ³¨è§£å‚æ•°åœ¨ç¼–è¯‘æ—¶æ˜¯æœ‰æ•ˆçš„ï¼Œä½†æ˜¯è¡¨ç¤ºç‰¹å®šå¼‚å¸¸ç±»å‹çš„ç±»æ–‡ä»¶åœ¨è¿è¡Œæ—¶å´ä¸å­˜åœ¨ã€‚åœ¨è¿™ç§å¸Œæœ›å¾ˆå°‘å‡ºç°çš„æƒ…å†µä¸‹ï¼Œæµ‹è¯•è¿è¡Œç±»ä¼šæŠ›å‡º TypeNotPresentException å¼‚å¸¸ã€‚</p><p>å°†ä¸Šé¢çš„å¼‚å¸¸æµ‹è¯•ç¤ºä¾‹å†æ·±å…¥ä¸€ç‚¹ï¼Œæƒ³è±¡æµ‹è¯•å¯ä»¥åœ¨æŠ›å‡ºä»»ä½•ä¸€ç§æŒ‡å®šå¼‚å¸¸æ—¶éƒ½èƒ½å¤Ÿé€šè¿‡ã€‚æ³¨è§£æœºåˆ¶æœ‰ä¸€ç§å·¥å…·ï¼Œä½¿å¾—æ”¯æŒè¿™ç§ç”¨æ³•å˜å¾—ååˆ†å®¹æ˜“ã€‚å‡è®¾æˆ‘ä»¬å°† ExceptionTest æ³¨è§£çš„å‚æ•°ç±»å‹æ”¹æˆ Class å¯¹è±¡çš„ä¸€ä¸ªæ•°ç»„ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Annotation type with an array parameter</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">ExceptionTest</span> <span class="token punctuation">{</span>
    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Exception</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨è§£ä¸­æ•°ç»„å‚æ•°çš„è¯­æ³•ååˆ†çµæ´»ã€‚å®ƒæ˜¯è¿›è¡Œè¿‡ä¼˜åŒ–çš„å•å…ƒç´ æ•°ç»„ã€‚ä½¿ç”¨äº† ExceptionTest æ–°ç‰ˆçš„æ•°ç»„å‚æ•°ä¹‹åï¼Œä¹‹å‰çš„æ‰€æœ‰ ExceptionTest æ³¨è§£ä»ç„¶æœ‰æ•ˆï¼Œå¹¶äº§ç”Ÿå•å…ƒç´ çš„æ•°ç»„ã€‚ä¸ºäº†æŒ‡å®šå¤šå…ƒç´ çš„æ•°ç»„ï¼Œè¦ç”¨èŠ±æ‹¬å·å°†å…ƒç´ åŒ…å›´èµ·æ¥ï¼Œå¹¶ç”¨é€—å·å°†å®ƒä»¬éš”å¼€ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Code containing an annotation with an array parameter</span>
<span class="token annotation punctuation">@ExceptionTest</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">IndexOutOfBoundsException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">Nul1PointerException</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">doublyBad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// The spec permits this method to throw either </span>
  <span class="token comment">// IndexOutOfBoundsException or NullPointerException </span>
  list<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> nul1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¿®æ”¹æµ‹è¯•è¿è¡Œå·¥å…·æ¥å¤„ç†æ–°çš„ ExceptionTest ç›¸å½“ç®€å•ã€‚ä¸‹é¢çš„ä»£ç ä»£æ›¿äº†åŸæ¥çš„ä»£ç ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">ExceptionTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  tests<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    m<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Test %s failed: no excepetion%n&quot;</span><span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Trowable</span> wrappedExc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Throwable</span> exc <span class="token operator">=</span> wrappedEx<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> oldPassed <span class="token operator">=</span> passed<span class="token punctuation">;</span>
    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Exception</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> excTypes <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">ExceptionTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Exception</span><span class="token punctuation">&gt;</span></span> excType <span class="token operator">:</span> excTypes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>excType<span class="token punctuation">.</span><span class="token function">isInstance</span><span class="token punctuation">(</span>exc<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        passed<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>passed <span class="token operator">==</span> oldPassed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Test %s failed: %s %n&quot;</span><span class="token punctuation">,</span> m<span class="token punctuation">,</span> exc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä» Java 8 å¼€å§‹ï¼Œè¿˜æœ‰å¦ä¸€ç§æ–¹æ³•å¯ä»¥è¿›è¡Œå¤šå€¼æ³¨è§£ã€‚å®ƒä¸æ˜¯ç”¨ä¸€ä¸ªæ•°ç»„å‚æ•°å£°æ˜ä¸€ä¸ªæ³¨è§£ç±»å‹ï¼Œè€Œæ˜¯ç”¨ Repeatable å…ƒæ³¨è§£å¯¹æ³¨è§£çš„å£°æ˜è¿›è¡Œæ³¨è§£ï¼Œè¡¨ç¤ºè¯¥æ³¨è§£å¯ä»¥è¢«é‡å¤åœ°åº”ç”¨ç»™å•ä¸ªå…ƒç´ ã€‚è¿™ä¸ªå…ƒæ³¨è§£åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯åŒ…å«æ³¨è§£ç±»å‹çš„ç±»å¯¹è±¡ï¼Œå®ƒå”¯ä¸€çš„å‚æ•°æ˜¯ä¸€ä¸ªæ³¨è§£ç±»å‹æ•°ç»„ã€‚ä¸‹é¢çš„æ³¨è§£å£°æ˜å°±æ˜¯æŠŠ ExceptionTest æ³¨è§£æ”¹æˆä½¿ç”¨è¿™ä¸ªæ–¹æ³•ä¹‹åçš„ç‰ˆæœ¬ã€‚æ³¨æ„åŒ…å«çš„æ³¨è§£ç±»å‹å¿…é¡»åˆ©ç”¨é€‚å½“çš„ä¿ç•™ç­–ç•¥å’Œç›®æ ‡è¿›è¡Œæ³¨è§£ï¼Œå¦åˆ™å£°æ˜å°†æ— æ³•ç¼–è¯‘ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Repeatable annotation type</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Repeatable</span><span class="token punctuation">(</span><span class="token class-name">ExceptionTestContainer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">ExceptionTest</span> <span class="token punctuation">{</span>
    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Exception</span><span class="token punctuation">&gt;</span></span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">ExceptionTestContainer</span> <span class="token punctuation">{</span>
    <span class="token class-name">ExceptionTest</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸‹é¢æ˜¯ doublyBad æµ‹è¯•æ–¹æ³•ç”¨é‡å¤æ³¨è§£ä»£æ›¿æ•°ç»„å€¼æ³¨è§£ä¹‹åçš„ä»£ç ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Code containing a repeated annotation</span>
<span class="token annotation punctuation">@ExceptionTest</span><span class="token punctuation">(</span><span class="token class-name">IndexOutOfBoundsException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ExceptionTest</span><span class="token punctuation">(</span><span class="token class-name">Nul1PointerException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">doublyBad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span> 
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¤„ç†å¯é‡å¤çš„æ³¨è§£è¦éå¸¸å°å¿ƒã€‚é‡å¤çš„æ³¨è§£ä¼šäº§ç”Ÿä¸€ä¸ªåŒ…å«æ³¨è§£ç±»å‹çš„åˆæˆæ³¨è§£ã€‚getAnnotationsByType æ–¹æ³•æ©ç›–äº†è¿™ä¸ªäº‹å®ï¼Œå¯ä»¥ç”¨äºè®¿é—®å¯é‡å¤æ³¨è§£ç±»å‹çš„é‡å¤å’Œéé‡å¤çš„æ³¨è§£ã€‚ä½† isAnnotationPresent ä½¿å®ƒå˜æˆäº†æ˜¾å¼çš„ï¼Œå³é‡å¤çš„æ³¨è§£ä¸æ˜¯æ³¨è§£ç±»å‹ï¼ˆè€Œæ˜¯æ‰€åŒ…å«çš„æ³¨è§£ç±»å‹ï¼‰çš„ä¸€éƒ¨åˆ†ã€‚å¦‚æœä¸€ä¸ªå…ƒç´ å…·æœ‰æŸç§ç±»å‹çš„é‡å¤æ³¨è§£ï¼Œå¹¶ä¸”ç”¨ isAnnotationPresent æ–¹æ³•æ£€éªŒè¯¥å…ƒç´ æ˜¯å¦å…·æœ‰è¯¥ç±»å‹çš„æ³¨è§£ï¼Œä¼šå‘ç°å®ƒæ²¡æœ‰ã€‚ç”¨è¿™ç§æ–¹æ³•æ£€éªŒæ˜¯å¦å­˜åœ¨æ³¨è§£ç±»å‹ï¼Œä¼šå¯¼è‡´ç¨‹åºé»˜é»˜åœ°å¿½ç•¥æ‰é‡å¤çš„æ³¨è§£ã€‚åŒæ ·åœ°ï¼Œç”¨è¿™ç§æ–¹æ³•æ£€éªŒæ˜¯å¦å­˜åœ¨åŒ…å«çš„æ³¨è§£ç±»å‹ï¼Œä¼šå¯¼è‡´ç¨‹åºé»˜é»˜åœ°å¿½ç•¥æ‰éé‡å¤çš„æ³¨è§£ã€‚ä¸ºäº†åˆ©ç”¨ isAnnotationPresent æ£€æµ‹é‡å¤å’Œéé‡å¤çš„æ³¨è§£ï¼Œå¿…é¡»æ£€æŸ¥æ³¨è§£ç±»å‹åŠå…¶åŒ…å«çš„æ³¨è§£ç±»å‹ã€‚ä¸‹é¢æ˜¯ Runtests ç¨‹åºæ”¹æˆä½¿ç”¨ ExceptionTest æ³¨è§£æ—¶æœ‰å…³éƒ¨åˆ†çš„ä»£ç ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Processing repeatable annotations</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">ExceptionTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token operator">||</span> m<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">ExceptionTestContainer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  tests<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    m<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Test %s failed: no excepetion%n&quot;</span><span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Trowable</span> wrappedExc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Throwable</span> exc <span class="token operator">=</span> wrappedEx<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> oldPassed <span class="token operator">=</span> passed<span class="token punctuation">;</span>
    <span class="token class-name">ExceptionTest</span><span class="token punctuation">[</span><span class="token punctuation">]</span> excTests <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">getAnnotationsByType</span><span class="token punctuation">(</span><span class="token class-name">ExceptionTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ExceptionTest</span> excTest <span class="token operator">:</span> excTests<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>excTest<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isInstance</span><span class="token punctuation">(</span>exc<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        passed<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>passed <span class="token operator">==</span> oldPassed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Test %s failed: %s %n&quot;</span><span class="token punctuation">,</span> m<span class="token punctuation">,</span> exc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åŠ å…¥å¯é‡å¤çš„æ³¨è§£ï¼Œæå‡äº†æºä»£ç çš„å¯è¯»æ€§ï¼Œé€»è¾‘ä¸Šæ˜¯å°†åŒä¸€ä¸ªæ³¨è§£ç±»å‹çš„å¤šä¸ªå®ä¾‹åº”ç”¨åˆ°äº†ä¸€ä¸ªæŒ‡å®šçš„ç¨‹åºå…ƒç´ ã€‚å¦‚æœä½ è§‰å¾—å®ƒä»¬å¢å¼ºäº†æºä»£ç çš„å¯è¯»æ€§å°±ä½¿ç”¨å®ƒä»¬ï¼Œä½†æ˜¯è®°ä½åœ¨å£°æ˜å’Œå¤„ç†å¯é‡å¤æ³¨è§£çš„ä»£ç ä¸­ä¼šæœ‰æ›´å¤šçš„æ ·æ¿ä»£ç ï¼Œå¹¶ä¸”å¤„ç†å¯é‡å¤çš„æ³¨è§£å®¹æ˜“å‡ºé”™ã€‚</p><p>æœ¬æ¡ç›®ä¸­çš„æµ‹è¯•æ¡†æ¶åªæ˜¯ä¸€ä¸ªè¯•éªŒï¼Œä½†å®ƒæ¸…æ¥šåœ°ç¤ºèŒƒäº†æ³¨è§£ä¹‹äºå‘½åæ¨¡å¼çš„ä¼˜è¶Šæ€§ã€‚è¿™åªæ˜¯æ­å¼€äº†æ³¨è§£åŠŸèƒ½çš„å†°å±±ä¸€è§’ã€‚å¦‚æœæ˜¯åœ¨ç¼–å†™ä¸€ä¸ªéœ€è¦ç¨‹åºå‘˜ç»™æºæ–‡ä»¶æ·»åŠ ä¿¡æ¯çš„å·¥å…·ï¼Œå°±è¦å®šä¹‰ä¸€ç»„é€‚å½“çš„æ³¨è§£ç±»å‹ã€‚æ—¢ç„¶æœ‰äº†æ³¨è§£ï¼Œå°±å®Œå…¨æ²¡æœ‰ç†ç”±å†ä½¿ç”¨å‘½åæ¨¡å¼äº†ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œé™¤äº†â€œå·¥å…·é“åŒ â€ï¼ˆå³å¹³å°æ¡†æ¶ç¨‹åºå‘˜ï¼‰ä¹‹å¤–ï¼Œå¤§å¤šæ•°ç¨‹åºå‘˜éƒ½ä¸å¿…å®šä¹‰æ³¨è§£ç±»å‹ã€‚ä½†æ˜¯æ‰€æœ‰çš„ç¨‹åºå‘˜éƒ½åº”è¯¥ä½¿ç”¨ Java å¹³å°æ‰€æä¾›çš„é¢„å®šä¹‰çš„æ³¨è§£ç±»å‹ã€‚è¿˜è¦è€ƒè™‘ä½¿ç”¨ IDE æˆ–è€…é™æ€åˆ†æå·¥å…·æ‰€æä¾›çš„ä»»ä½•æ³¨è§£ã€‚è¿™ç§æ³¨è§£å¯ä»¥æå‡ç”±è¿™äº›å·¥å…·æ‰€æä¾›çš„è¯Šæ–­ä¿¡æ¯çš„è´¨é‡ã€‚ä½†æ˜¯è¦æ³¨æ„è¿™äº›æ³¨è§£è¿˜æ²¡æœ‰æ ‡å‡†åŒ–ï¼Œå› æ­¤å¦‚æœå˜æ¢å·¥å…·æˆ–è€…å½¢æˆæ ‡å‡†ï¼Œå°±æœ‰å¾ˆå¤šå·¥ä½œè¦åšäº†ã€‚</p><h2 id="ç¬¬-40-æ¡-åšæŒä½¿ç”¨-override-æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#ç¬¬-40-æ¡-åšæŒä½¿ç”¨-override-æ³¨è§£" aria-hidden="true">#</a> ç¬¬ 40 æ¡ï¼šåšæŒä½¿ç”¨ Override æ³¨è§£</h2><p>Java ç±»åº“ä¸­åŒ…å«äº†å‡ ç§æ³¨è§£ç±»å‹ã€‚å¯¹äºä¼ ç»Ÿçš„ç¨‹åºå‘˜è€Œè¨€ï¼Œè¿™é‡Œé¢æœ€é‡è¦çš„å°±æ˜¯ @0verride æ³¨è§£ã€‚è¿™ä¸ªæ³¨è§£åªèƒ½ç”¨åœ¨æ–¹æ³•å£°æ˜ä¸­ï¼Œå®ƒè¡¨ç¤ºè¢«æ³¨è§£çš„æ–¹æ³•å£°æ˜è¦†ç›–äº†è¶…ç±»å‹ä¸­çš„ä¸€ä¸ªæ–¹æ³•å£°æ˜ã€‚å¦‚æœåšæŒä½¿ç”¨è¿™ä¸ªæ³¨è§£ï¼Œå¯ä»¥é˜²æ­¢ä¸€å¤§ç±»çš„éæ³•é”™è¯¯ã€‚ä»¥ä¸‹é¢çš„ç¨‹åºä¸ºä¾‹ï¼Œè¿™é‡Œçš„ Bigram ç±»è¡¨ç¤ºä¸€ä¸ªåŒå­—æ¯ç»„æˆ–è€…æœ‰åºçš„å­—æ¯å¯¹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Can you spot the bug?</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bigram</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">char</span> first<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">char</span> second<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Bigram</span><span class="token punctuation">(</span><span class="token keyword">char</span> first<span class="token punctuation">,</span> <span class="token keyword">char</span> second<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>first <span class="token operator">=</span> first<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>second <span class="token operator">=</span> second<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Bigram</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> b<span class="token punctuation">.</span>first <span class="token operator">==</span> first <span class="token operator">&amp;&amp;</span> b<span class="token punctuation">.</span>second <span class="token operator">==</span> second<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">31</span> <span class="token operator">*</span> first <span class="token operator">+</span> second<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Bigram</span><span class="token punctuation">&gt;</span></span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">char</span> ch <span class="token operator">=</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">;</span> ch <span class="token operator">&lt;=</span> <span class="token char">&#39;z&#39;</span><span class="token punctuation">;</span> ch<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Bigram</span><span class="token punctuation">(</span>ch<span class="token punctuation">,</span> ch<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸»ç¨‹åºåå¤åœ°å°† 26 ä¸ªåŒå­—æ¯ç»„æ·»åŠ åˆ°é›†åˆä¸­ï¼Œæ¯ä¸ªåŒå­—æ¯ç»„éƒ½ç”±ä¸¤ä¸ªç›¸åŒçš„å°å†™å­—æ¯ç»„æˆã€‚éšåå®ƒæ‰“å°å‡ºé›†åˆçš„å¤§å°ã€‚ä½ å¯èƒ½ä»¥ä¸ºç¨‹åºæ‰“å°å‡ºçš„å¤§å°ä¸º 26ï¼Œå› ä¸ºé›†åˆä¸èƒ½åŒ…å«é‡å¤ã€‚å¦‚æœä½ è¯•ç€è¿è¡Œç¨‹åºï¼Œä¼šå‘ç°å®ƒæ‰“å°çš„ä¸æ˜¯ 26 è€Œæ˜¯ 260ã€‚å“ªé‡Œå‡ºé”™äº†å‘¢ï¼Ÿ</p><p>å¾ˆæ˜¾ç„¶ï¼ŒBigram ç±»çš„åˆ›å»ºè€…åŸæœ¬æƒ³è¦è¦†ç›– equals æ–¹æ³•ï¼ŒåŒæ—¶è¿˜è®°å¾—è¦†ç›–äº† hashCodeã€‚é—æ†¾çš„æ˜¯ï¼Œä¸å¹¸çš„ç¨‹åºå‘˜æ²¡èƒ½è¦†ç›– equals æ–¹æ³•ï¼Œè€Œæ˜¯å°†å®ƒé‡è½½äº†ã€‚ä¸ºäº†è¦†ç›– Object.equals å¿…é¡»å®šä¹‰ä¸€ä¸ªå‚æ•°ä¸º Object ç±»å‹çš„ equals æ–¹æ³•ï¼Œä½†æ˜¯ Bigram ç±»çš„ equals æ–¹æ³•çš„å‚æ•°å¹¶ä¸æ˜¯ Object ç±»å‹ï¼Œå› æ­¤ Bigram ç±»ä» Object ç»§æ‰¿äº† equals æ–¹æ³•ã€‚è¿™ä¸ª equals æ–¹æ³•æµ‹è¯•å¯¹è±¡çš„åŒä¸€æ€§ï¼Œå°±åƒ == æ“ä½œç¬¦ä¸€æ ·ã€‚æ¯ä¸ª bigram çš„ 10 ä¸ªå¤‡ä»½ä¸­ï¼Œæ¯ä¸€ä¸ªéƒ½ä¸å…¶ä½™çš„ 9 ä¸ªä¸åŒï¼Œå› æ­¤ Object.equals è®¤ä¸ºå®ƒä»¬ä¸ç›¸ç­‰ï¼Œè¿™æ­£æ˜¯ç¨‹åºä¼šæ‰“å°å‡º 260 çš„åŸå› ã€‚</p><p>å¹¸è¿çš„æ˜¯ï¼Œç¼–è¯‘å™¨å¯ä»¥å¸®åŠ©ä½ å‘ç°è¿™ä¸ªé”™è¯¯ï¼Œä½†æ˜¯åªæœ‰å½“ä½ å‘ŠçŸ¥ç¼–è¯‘å™¨ä½ æƒ³è¦è¦†ç›– Object.equals æ—¶æ‰è¡Œã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¦ç”¨ @Override æ ‡æ³¨ Bigram.euqalsï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Bigram</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> b<span class="token punctuation">.</span>first <span class="token operator">==</span> first <span class="token operator">&amp;&amp;</span> b<span class="token punctuation">.</span>second <span class="token operator">==</span> second<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæ’å…¥è¿™ä¸ªæ³¨è§£ï¼Œå¹¶è¯•ç€é‡æ–°ç¼–è¯‘ç¨‹åºï¼Œç¼–è¯‘å™¨å°±ä¼šäº§ç”Ÿå¦‚ä¸‹çš„é”™è¯¯æ¶ˆæ¯ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Bigram</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">10</span><span class="token operator">:</span> method does not override or implement a method from a supertype
<span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Bigram</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token operator">^</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½ ä¼šç«‹å³æ„è¯†åˆ°å“ªé‡Œé”™äº†ï¼Œæ‹æ‹è‡ªå·±çš„å¤´ï¼Œæç„¶å¤§æ‚Ÿï¼Œé©¬ä¸Šç”¨æ­£ç¡®çš„æ¥å–ä»£å‡ºé”™çš„ equals å®ç°ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span> 
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>o <span class="token keyword">instanceof</span> <span class="token class-name">Bigram</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token class-name">Bigram</span> b <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Bigram</span><span class="token punctuation">)</span> o<span class="token punctuation">;</span>
	<span class="token keyword">return</span> b<span class="token punctuation">.</span>first <span class="token operator">==</span> first <span class="token operator">&amp;&amp;</span> b<span class="token punctuation">.</span>second <span class="token operator">==</span> second<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› æ­¤ï¼Œåº”è¯¥åœ¨ä½ æƒ³è¦è¦†ç›–è¶…ç±»å£°æ˜çš„æ¯ä¸ªæ–¹æ³•å£°æ˜ä¸­ä½¿ç”¨ Override æ³¨è§£ã€‚è¿™ä¸€è§„åˆ™æœ‰ä¸ªå°å°çš„ä¾‹å¤–ã€‚å¦‚æœä½ åœ¨ç¼–å†™ä¸€ä¸ªæ²¡æœ‰æ ‡æ³¨ä¸ºæŠ½è±¡çš„ç±»ï¼Œå¹¶ä¸”ç¡®ä¿¡å®ƒè¦†ç›–äº†è¶…ç±»çš„æŠ½è±¡æ–¹æ³•ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°±ä¸å¿…å°† Override æ³¨è§£æ”¾åœ¨è¯¥æ–¹æ³•ä¸Šäº†ã€‚åœ¨æ²¡æœ‰å£°æ˜ä¸ºæŠ½è±¡çš„ç±»ä¸­ï¼Œå¦‚æœæ²¡æœ‰è¦†ç›–æŠ½è±¡çš„è¶…ç±»æ–¹æ³•ï¼Œç¼–è¯‘å™¨å°±ä¼šå‘å‡ºä¸€æ¡é”™è¯¯æ¶ˆæ¯ã€‚ä½†æ˜¯ï¼Œä½ å¯èƒ½å¸Œæœ›å…³æ³¨ç±»ä¸­æ‰€æœ‰è¦†ç›–è¶…ç±»æ–¹æ³•çš„æ–¹æ³•ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥æ”¾å¿ƒåœ°æ ‡æ³¨è¿™äº›æ–¹æ³•ã€‚å¤§å¤šæ•° IDE å¯ä»¥è®¾ç½®ä¸ºåœ¨éœ€è¦è¦†ç›–ä¸€ä¸ªæ–¹æ³•æ—¶è‡ªåŠ¨æ’å…¥ Override æ³¨è§£ã€‚</p><p>å¤§å¤šæ•° IDE éƒ½æä¾›äº†ä½¿ç”¨ Override æ³¨è§£çš„å¦ä¸€ç§ç†ç”±ã€‚å¦‚æœå¯ç”¨ç›¸åº”çš„ä»£ç æ£€éªŒåŠŸèƒ½ï¼Œå½“æœ‰ä¸€ä¸ªæ–¹æ³•æ²¡æœ‰ Override æ³¨è§£ï¼Œå´è¦†ç›–äº†è¶…ç±»æ–¹æ³•æ—¶ï¼ŒIDE å°±ä¼šäº§ç”Ÿä¸€æ¡è­¦å‘Šã€‚å¦‚æœä½¿ç”¨äº† Override æ³¨è§£ï¼Œè¿™äº›è­¦å‘Šå°±ä¼šæé†’ä½ è­¦æƒ•æ— æ„è¯†çš„è¦†ç›–ã€‚è¿™äº›è­¦å‘Šè¡¥å……äº†ç¼–è¯‘å™¨çš„é”™è¯¯æ¶ˆæ¯ï¼Œåè€…ä¼šæé†’ä½ è­¦æƒ•æ— æ„è¯†çš„è¦†ç›–å¤±è´¥ã€‚IDE å’Œç¼–è¯‘å™¨å¯ä»¥ç¡®ä¿ä½ æ— ä¸€é—æ¼åœ°è¦†ç›–ä»»ä½•ä½ æƒ³è¦è¦†ç›–çš„æ–¹æ³•ã€‚</p><p>Override æ³¨è§£å¯ä»¥ç”¨åœ¨æ–¹æ³•å£°æ˜ä¸­ï¼Œè¦†ç›–æ¥è‡ªæ¥å£ä»¥åŠç±»çš„å£°æ˜ã€‚ç”±äºç¼ºçœæ–¹æ³•çš„å‡ºç°ï¼Œåœ¨æ¥å£æ–¹æ³•çš„å…·ä½“å®ç°ä¸Šä½¿ç”¨ Overrideï¼Œå¯ä»¥ç¡®ä¿ç­¾åæ­£ç¡®ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å®è·µã€‚å¦‚æœçŸ¥é“æ¥å£æ²¡æœ‰ç¼ºçœæ–¹æ³•ï¼Œå¯ä»¥é€‰æ‹©çœç•¥æ¥å£æ–¹æ³•çš„å…·ä½“å®ç°ä¸Šçš„ Override æ³¨è§£ï¼Œä»¥å‡å°‘æ··ä¹±ã€‚</p><p>ä½†æ˜¯åœ¨æŠ½è±¡ç±»æˆ–è€…æ¥å£ä¸­ï¼Œè¿˜æ˜¯å€¼å¾—æ ‡æ³¨æ‰€æœ‰ä½ æƒ³è¦çš„æ–¹æ³•ï¼Œæ¥è¦†ç›–è¶…ç±»æˆ–è€…è¶…æ¥å£æ–¹æ³•ï¼Œæ— è®ºå®ƒä»¬æ˜¯å…·ä½“çš„è¿˜æ˜¯æŠ½è±¡çš„ã€‚ä¾‹å¦‚ï¼ŒSet æ¥å£æ²¡æœ‰ç»™ Collection æ¥å£æ·»åŠ æ–°æ–¹æ³•ï¼Œå› æ­¤å®ƒåº”è¯¥åœ¨å®ƒçš„æ‰€æœ‰æ–¹æ³•å£°æ˜ä¸­åŒ…æ‹¬ Override æ³¨è§£ï¼Œä»¥ç¡®ä¿å®ƒä¸ä¼šæ„å¤–åœ°ç»™ Collection æ¥å£æ·»åŠ ä»»ä½•æ–°æ–¹æ³•ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼Œå¦‚æœåœ¨ä½ æƒ³è¦çš„æ¯ä¸ªæ–¹æ³•å£°æ˜ä¸­ä½¿ç”¨ Override æ³¨è§£æ¥è¦†ç›–è¶…ç±»å£°æ˜ï¼Œç¼–è¯‘å™¨å°±å¯ä»¥æ›¿ä½ é˜²æ­¢å¤§é‡çš„é”™è¯¯ï¼Œä½†æœ‰ä¸€ä¸ªä¾‹å¤–ã€‚åœ¨å…·ä½“çš„ç±»ä¸­ï¼Œä¸å¿…æ ‡æ³¨ä½ ç¡®ä¿¡è¦†ç›–äº†æŠ½è±¡æ–¹æ³•å£°æ˜çš„æ–¹æ³•ï¼ˆè™½ç„¶è¿™ä¹ˆåšä¹Ÿæ²¡æœ‰ä»€ä¹ˆåå¤„ï¼‰ã€‚</p><h2 id="ç¬¬-41-æ¡-ç”¨æ ‡è®°æ¥å£å®šä¹‰ç±»å‹" tabindex="-1"><a class="header-anchor" href="#ç¬¬-41-æ¡-ç”¨æ ‡è®°æ¥å£å®šä¹‰ç±»å‹" aria-hidden="true">#</a> ç¬¬ 41 æ¡ï¼šç”¨æ ‡è®°æ¥å£å®šä¹‰ç±»å‹</h2><p>æ ‡è®°æ¥å£æ˜¯ä¸åŒ…å«æ–¹æ³•å£°æ˜çš„æ¥å£ï¼Œå®ƒåªæ˜¯æŒ‡æ˜ï¼ˆæˆ–è€…â€œæ ‡æ˜â€ï¼‰ä¸€ä¸ªç±»å®ç°äº†å…·æœ‰æŸç§å±æ€§çš„æ¥å£ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ Serializable æ¥å£ã€‚é€šè¿‡å®ç°è¿™ä¸ªæ¥å£ï¼Œç±»è¡¨æ˜å®ƒçš„å®ä¾‹å¯ä»¥è¢«å†™åˆ° ObjectOutputStream ä¸­ï¼ˆæˆ–è€…â€œè¢«åºåˆ—åŒ–â€ï¼‰ã€‚</p><p>ä½ å¯èƒ½å¬è¯´è¿‡æ ‡è®°æ³¨è§£ä½¿å¾—æ ‡è®°æ¥å£è¿‡æ—¶äº†ã€‚è¿™ç§æ–­è¨€æ˜¯ä¸æ­£ç¡®çš„ã€‚æ ‡è®°æ¥å£æœ‰ä¸¤ç‚¹èƒœè¿‡æ ‡è®°æ³¨è§£ã€‚é¦–å…ˆï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œæ ‡è®°æ¥å£å®šä¹‰çš„ç±»å‹æ˜¯ç”±è¢«æ ‡è®°ç±»çš„å®ä¾‹å®ç°çš„ï¼›æ ‡è®°æ³¨è§£åˆ™æ²¡æœ‰å®šä¹‰è¿™æ ·çš„ç±»å‹ã€‚æ ‡è®°æ¥å£ç±»å‹çš„å­˜åœ¨ï¼Œå…è®¸ä½ åœ¨ç¼–è¯‘æ—¶å°±èƒ½æ•æ‰åˆ°ã€‚åœ¨ä½¿ç”¨æ ‡è®°æ³¨è§£çš„æƒ…å†µä¸‹ï¼Œè¦åˆ°è¿è¡Œæ—¶æ‰èƒ½æ•æ‰åˆ°çš„é”™è¯¯ã€‚Java çš„åºåˆ—åŒ–è®¾æ–½åˆ©ç”¨ Serializable æ ‡è®°æ¥å£è¡¨æ˜ä¸€ä¸ªç±»å‹æ˜¯å¯ä»¥åºåˆ—åŒ–çš„ã€‚ObjectOutputStream.writeObject æ–¹æ³•å°†ä¼ å…¥çš„å¯¹è±¡åºåˆ—åŒ–ï¼Œå…¶å‚æ•°å¿…é¡»æ˜¯å¯åºåˆ—åŒ–çš„ã€‚è¯¥æ–¹æ³•çš„å‚æ•°ç±»å‹åº”è¯¥ä¸º Serializableï¼Œå¦‚æœè¯•ç€åºåˆ—åŒ–ä¸€ä¸ªä¸æ°å½“çš„å¯¹è±¡ï¼Œï¼ˆé€šè¿‡ç±»å‹æ£€æŸ¥ï¼‰åœ¨ç¼–è¯‘æ—¶å°±ä¼šè¢«å‘ç°ã€‚ç¼–è¯‘æ—¶çš„é”™è¯¯ä¾¦æµ‹æ˜¯æ ‡è®°æ¥å£çš„ç›®çš„ï¼Œä½†é—æ†¾çš„æ˜¯ï¼ŒObjectOutputStream.write API å¹¶æ²¡æœ‰åˆ©ç”¨ Serializable æ¥å£çš„ä¼˜åŠ¿ï¼šå…¶å‚æ•°å£°æ˜ä¸º Object ç±»å‹ï¼Œå› æ­¤ï¼Œå¦‚æœå°è¯•åºåˆ—åŒ–ä¸€ä¸ªä¸å¯åºåˆ—åŒ–çš„å¯¹è±¡ï¼Œå°†ç›´åˆ°ç¨‹åºè¿è¡Œæ—¶æ‰ä¼šå¤±è´¥ã€‚</p><p>æ ‡è®°æ¥å£èƒœè¿‡æ ‡è®°æ³¨è§£çš„å¦ä¸€ä¸ªä¼˜ç‚¹æ˜¯ï¼Œå®ƒä»¬å¯ä»¥è¢«æ›´åŠ ç²¾ç¡®åœ°è¿›è¡Œé”å®šã€‚å¦‚æœæ³¨è§£ç±»å‹ç”¨ç›®æ ‡ ElementType.TYPE å£°æ˜ï¼Œå®ƒå°±å¯ä»¥è¢«åº”ç”¨äºä»»ä½•ç±»æˆ–è€…æ¥å£ã€‚å‡è®¾æœ‰ä¸€ä¸ªæ ‡è®°åªé€‚ç”¨äºç‰¹æ®Šæ¥å£çš„å®ç°ã€‚å¦‚æœå°†å®ƒå®šä¹‰æˆä¸€ä¸ªæ ‡è®°æ¥å£ï¼Œå°±å¯ä»¥ç”¨å®ƒå°†å”¯ä¸€çš„æ¥å£æ‰©å±•æˆå®ƒé€‚ç”¨çš„æ¥å£ï¼Œç¡®ä¿æ‰€æœ‰è¢«æ ‡è®°çš„ç±»å‹ä¹Ÿéƒ½æ˜¯è¯¥å”¯ä¸€æ¥å£çš„å­ç±»å‹ã€‚</p><p>Set æ¥å£å¯ä»¥è¯´å°±æ˜¯è¿™ç§æœ‰é™åˆ¶çš„æ ‡è®°æ¥å£ã€‚å®ƒåªé€‚ç”¨äº Collection å­ç±»å‹ï¼Œä½†æ˜¯å®ƒä¸ä¼šæ·»åŠ é™¤äº† Collection å®šä¹‰ä¹‹å¤–çš„æ–¹æ³•ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸æŠŠå®ƒå½“ä½œæ˜¯æ ‡è®°æ¥å£ï¼Œå› ä¸ºå®ƒæ”¹è¿›äº†å‡ ä¸ª Collection æ–¹æ³•çš„åˆçº¦ï¼ŒåŒ…æ‹¬ addã€equals å’Œ hashCodeã€‚ä½†æ˜¯å¾ˆå®¹æ˜“æƒ³è±¡åªé€‚ç”¨äºæŸç§ç‰¹æ®Šæ¥å£çš„å­ç±»å‹çš„æ ‡è®°æ¥å£ï¼Œå®ƒæ²¡æœ‰æ”¹è¿›æ¥å£çš„ä»»ä½•æ–¹æ³•çš„åˆçº¦ã€‚è¿™ç§æ ‡è®°æ¥å£å¯ä»¥æè¿°æ•´ä¸ªå¯¹è±¡çš„æŸä¸ªçº¦æŸæ¡ä»¶ï¼Œæˆ–è€…è¡¨æ˜å®ä¾‹èƒ½å¤Ÿåˆ©ç”¨å…¶ä»–æŸä¸ªç±»çš„æ–¹æ³•è¿›è¡Œå¤„ç†ï¼ˆå°±åƒ Serializable æ¥å£è¡¨æ˜å®ä¾‹å¯ä»¥é€šè¿‡ ObjectOutputStream è¿›è¡Œå¤„ç†ä¸€æ ·ï¼‰ã€‚</p><p>æ ‡è®°æ³¨è§£èƒœè¿‡æ ‡è®°æ¥å£çš„æœ€å¤§ä¼˜ç‚¹åœ¨äºï¼Œå®ƒä»¬æ˜¯æ›´å¤§çš„æ³¨è§£æœºåˆ¶çš„ä¸€éƒ¨åˆ†ã€‚å› æ­¤ï¼Œæ ‡è®°æ³¨è§£åœ¨é‚£äº›æ”¯æŒæ³¨è§£ä½œä¸ºç¼–ç¨‹å…ƒç´ ä¹‹ä¸€çš„æ¡†æ¶ä¸­åŒæ ·å…·æœ‰ä¸€è‡´æ€§ã€‚</p><p>é‚£ä¹ˆä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨æ ‡è®°æ³¨è§£ï¼Œä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨æ ‡è®°æ¥å£å‘¢ï¼Ÿå¾ˆæ˜¾ç„¶ï¼Œå¦‚æœæ ‡è®°æ˜¯åº”ç”¨äºä»»ä½•ç¨‹åºå…ƒç´ è€Œä¸æ˜¯ç±»æˆ–è€…æ¥å£ï¼Œå°±å¿…é¡»ä½¿ç”¨æ³¨è§£ï¼Œå› ä¸ºåªæœ‰ç±»å’Œæ¥å£å¯ä»¥ç”¨æ¥å®ç°æˆ–è€…æ‰©å±•æ¥å£ã€‚å¦‚æœæ ‡è®°åªåº”ç”¨äºç±»å’Œæ¥å£ï¼Œå°±è¦é—®é—®è‡ªå·±ï¼šæˆ‘è¦ç¼–å†™ä¸€ä¸ªè¿˜æ˜¯å¤šä¸ªåªæ¥å—æœ‰è¿™ç§æ ‡è®°çš„æ–¹æ³•å‘¢ï¼Ÿå¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œå°±åº”è¯¥ä¼˜å…ˆä½¿ç”¨æ ‡è®°æ¥å£è€Œéæ³¨è§£ã€‚è¿™æ ·ä½ å°±å¯ä»¥ç”¨æ¥å£ä½œä¸ºç›¸å…³æ–¹æ³•çš„å‚æ•°ç±»å‹ï¼Œå®ƒå¯ä»¥çœŸæ­£ä¸ºä½ æä¾›ç¼–è¯‘æ—¶è¿›è¡Œç±»å‹æ£€æŸ»çš„å¥½å¤„ã€‚å¦‚æœä½ ç¡®ä¿¡è‡ªå·±æ°¸è¿œä¸éœ€è¦ç¼–å†™ä¸€ä¸ªåªæ¥å—å¸¦æœ‰æ ‡è®°çš„å¯¹è±¡ï¼Œé‚£ä¹ˆæˆ–è®¸æœ€å¥½ä½¿ç”¨æ ‡è®°æ³¨è§£ã€‚æ­¤å¤–ï¼Œå¦‚æœæ ‡è®°æ˜¯å¹¿æ³›ä½¿ç”¨æ³¨è§£çš„æ¡†æ¶çš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†ï¼Œåˆ™æ˜¾ç„¶åº”è¯¥é€‰æ‹©æ ‡è®°æ³¨è§£ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼Œæ ‡è®°æ¥å£å’Œæ ‡è®°æ³¨è§£éƒ½å„æœ‰ç”¨å¤„ã€‚å¦‚æœæƒ³è¦å®šä¹‰ä¸€ä¸ªä»»ä½•æ–°æ–¹æ³•éƒ½ä¸ä¼šä¸ä¹‹å…³è”çš„ç±»å‹ï¼Œæ ‡è®°æ¥å£å°±æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚å¦‚æœæƒ³è¦æ ‡è®°ç¨‹åºå…ƒç´ è€Œéç±»å’Œæ¥å£ï¼Œæˆ–è€…æ ‡è®°è¦é€‚åˆäºå·²ç»å¹¿æ³›ä½¿ç”¨äº†æ³¨è§£ç±»å‹çš„æ¡†æ¶ï¼Œé‚£ä¹ˆæ ‡è®°æ³¨è§£å°±æ˜¯æ­£ç¡®çš„é€‰æ‹©ã€‚å¦‚æœä½ å‘ç°è‡ªå·±åœ¨ç¼–å†™çš„æ˜¯ç›®æ ‡ä¸º ElementType.TYPE çš„æ ‡è®°æ³¨è§£ç±»å‹ï¼Œå°±è¦èŠ±ç‚¹æ—¶é—´è€ƒè™‘æ¸…æ¥šï¼Œå®ƒæ˜¯å¦çœŸçš„åº”è¯¥ä¸ºæ³¨è§£ç±»å‹ï¼Œæƒ³æƒ³æ ‡è®°æ¥å£æ˜¯å¦ä¼šæ›´åŠ åˆé€‚ã€‚</p><p>ä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œæœ¬æ¡ç›®ä¸ç¬¬ 22 æ¡ä¸­â€œå¦‚æœä¸æƒ³å®šä¹‰ç±»å‹å°±ä¸è¦ä½¿ç”¨æ¥å£â€çš„è¯´æ³•ç›¸åã€‚æœ¬æ¡ç›®æœ€æ¥è¿‘çš„æ„æ€æ˜¯è¯´ï¼šâ€œå¦‚æœæƒ³è¦å®šä¹‰ç±»å‹ï¼Œä¸€å®šè¦ä½¿ç”¨æ¥å£ã€‚â€</p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://gitee.com/anansneaker/vuepress-theme-hope/edit/master/docs/reading-notes/Effective Java/ç¬¬6ç«  æšä¸¾å’Œæ³¨è§£.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><span class="info">2022/8/6 ä¸‹åˆ5:11:40</span></div><div class="meta-item contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: cl55563@163.com">é˜¿æ¥ sneaker</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/reading-notes/Effective%20Java/%E7%AC%AC5%E7%AB%A0%20%E6%B3%9B%E5%9E%8B.html" class="nav-link prev" aria-label="ç¬¬ 5 ç«  æ³›å‹"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->ç¬¬ 5 ç«  æ³›å‹</div></a><a href="/reading-notes/Effective%20Java/%E7%AC%AC7%E7%AB%A0%20Lambda%E5%92%8CStream.html" class="nav-link next" aria-label="ç¬¬ 7 ç«  Lambda å’Œ Stream"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">ç¬¬ 7 ç«  Lambda å’Œ Stream<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer"></div><div class="copyright">Copyright Â© 2022 é˜¿æ¥ sneaker</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.0d56c066.js" defer></script>
  </body>
</html>
