<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.48" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://www.cxlsn.cn/reading-notes/Effective%20Java/%E7%AC%AC7%E7%AB%A0%20Lambda%E5%92%8CStream.html"><meta property="og:site_name" content="MyBlog"><meta property="og:title" content="ç¬¬ 7 ç«  Lambda å’Œ Stream"><meta property="og:type" content="article"><meta property="og:updated_time" content="2022-08-16T11:56:17.000Z"><meta property="og:locale" content="zh-CN"><meta property="article:modified_time" content="2022-08-16T11:56:17.000Z"><title>ç¬¬ 7 ç«  Lambda å’Œ Stream | MyBlog</title><meta name="description" content="MyBlog">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.09a441ee.css">
    <link rel="modulepreload" href="/assets/app.0d56c066.js"><link rel="modulepreload" href="/assets/ç¬¬7ç«  Lambdaå’ŒStream.html.11e132a3.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/ç¬¬7ç«  Lambdaå’ŒStream.html.664c81b8.js"><link rel="prefetch" href="/assets/index.html.18f6ed2e.js"><link rel="prefetch" href="/assets/home.html.32fca429.js"><link rel="prefetch" href="/assets/slide.html.a293c482.js"><link rel="prefetch" href="/assets/index.html.bcf51f43.js"><link rel="prefetch" href="/assets/index.html.3768ee5f.js"><link rel="prefetch" href="/assets/index.html.b7a9ea16.js"><link rel="prefetch" href="/assets/ç¬¬10ç«  å¼‚å¸¸.html.33f3792f.js"><link rel="prefetch" href="/assets/ç¬¬11ç«  å¹¶å‘.html.41f89aa7.js"><link rel="prefetch" href="/assets/ç¬¬12ç«  åºåˆ—åŒ–.html.08c4c0cc.js"><link rel="prefetch" href="/assets/ç¬¬2ç«  åˆ›å»ºå’Œé”€æ¯å¯¹è±¡.html.1b6f55e3.js"><link rel="prefetch" href="/assets/ç¬¬3ç«  å¯¹äºæ‰€æœ‰å¯¹è±¡éƒ½é€šç”¨çš„æ–¹æ³•.html.e81922f0.js"><link rel="prefetch" href="/assets/ç¬¬4ç«  ç±»å’Œæ¥å£.html.bbf64366.js"><link rel="prefetch" href="/assets/ç¬¬5ç«  æ³›å‹.html.053306ed.js"><link rel="prefetch" href="/assets/ç¬¬6ç«  æšä¸¾å’Œæ³¨è§£.html.cb21ea0d.js"><link rel="prefetch" href="/assets/ç¬¬8ç«  æ–¹æ³•.html.bfc52ab1.js"><link rel="prefetch" href="/assets/ç¬¬9ç«  é€šç”¨ç¼–ç¨‹.html.6a1d88a2.js"><link rel="prefetch" href="/assets/index.html.153be5a1.js"><link rel="prefetch" href="/assets/index.html.4b079bc8.js"><link rel="prefetch" href="/assets/ç¬¬1ç« Javaå¤šçº¿ç¨‹æŠ€èƒ½.html.f4c43a60.js"><link rel="prefetch" href="/assets/ç¬¬2ç« å¯¹è±¡åŠå˜é‡çš„å¹¶å‘è®¿é—®.html.24971a2d.js"><link rel="prefetch" href="/assets/ç¬¬3ç« çº¿ç¨‹é—´é€šä¿¡.html.e9963ba8.js"><link rel="prefetch" href="/assets/ç¬¬4ç« é”çš„ä½¿ç”¨.html.bc309d92.js"><link rel="prefetch" href="/assets/ç¬¬5ç« å®šæ—¶å™¨.html.aaf2b6ee.js"><link rel="prefetch" href="/assets/ç¬¬6ç« å•ä¾‹æ¨¡å¼ä¸å¤šçº¿ç¨‹.html.a87eb20f.js"><link rel="prefetch" href="/assets/ç¬¬7ç« æ‹¾é—å¢è¡¥.html.2cbb6898.js"><link rel="prefetch" href="/assets/ç¬¬8ç« å¹¶å‘é›†åˆæ¡†æ¶.html.1739cc6b.js"><link rel="prefetch" href="/assets/ç¬¬9ç« çº¿ç¨‹æ± ThreadPoolExecutorçš„ä½¿ç”¨.html.186199c8.js"><link rel="prefetch" href="/assets/index.html.62274579.js"><link rel="prefetch" href="/assets/ç¬¬1ç« å¤šçº¿ç¨‹åŸºç¡€.html.afd475cd.js"><link rel="prefetch" href="/assets/ç¬¬2ç« Atomicç±».html.06be1f5d.js"><link rel="prefetch" href="/assets/ç¬¬3ç« Lockä¸Condition.html.ab9d71ca.js"><link rel="prefetch" href="/assets/ç¬¬4ç« åŒæ­¥å·¥å…·ç±».html.c3382339.js"><link rel="prefetch" href="/assets/ç¬¬5ç« å¹¶å‘å®¹å™¨.html.ef80cb1d.js"><link rel="prefetch" href="/assets/ç¬¬6ç« çº¿ç¨‹æ± ä¸Future.html.e4a6ecca.js"><link rel="prefetch" href="/assets/ç¬¬7ç« ForkJoinPool.html.98e49c17.js"><link rel="prefetch" href="/assets/ç¬¬8ç« CompletableFuture.html.f7a413b4.js"><link rel="prefetch" href="/assets/index.html.12f0ee52.js"><link rel="prefetch" href="/assets/ç¬¬10ç« Javaå¹¶å‘åŒ…ä¸­çº¿ç¨‹åŒæ­¥å™¨åŸç†å‰–æ.html.b977fee1.js"><link rel="prefetch" href="/assets/ç¬¬11ç« å¹¶å‘ç¼–ç¨‹å®è·µ.html.623c5cbb.js"><link rel="prefetch" href="/assets/ç¬¬1ç« å¹¶å‘ç¼–ç¨‹çº¿ç¨‹åŸºç¡€.html.3967f815.js"><link rel="prefetch" href="/assets/ç¬¬2ç« å¹¶å‘ç¼–ç¨‹çš„å…¶ä»–åŸºç¡€çŸ¥è¯†.html.1c7f7072.js"><link rel="prefetch" href="/assets/ç¬¬3ç« Javaå¹¶å‘åŒ…ä¸­ThreadLocalRandomç±»åŸç†å‰–æ.html.8f28f52d.js"><link rel="prefetch" href="/assets/ç¬¬4ç« Javaå¹¶å‘åŒ…ä¸­åŸå­æ“ä½œç±»åŸç†å‰–æ.html.2e32d2f3.js"><link rel="prefetch" href="/assets/ç¬¬5ç« Javaå¹¶å‘åŒ…ä¸­å¹¶å‘Listæºç å‰–æ.html.4b8c96f3.js"><link rel="prefetch" href="/assets/ç¬¬6ç« Javaå¹¶å‘åŒ…ä¸­é”åŸç†å‰–æ.html.57b14c73.js"><link rel="prefetch" href="/assets/ç¬¬7ç« Javaå¹¶å‘åŒ…ä¸­å¹¶å‘é˜Ÿåˆ—åŸç†å‰–æ.html.21d8c694.js"><link rel="prefetch" href="/assets/ç¬¬8ç« Javaå¹¶å‘åŒ…ä¸­çº¿ç¨‹æ± ThreadPoolExecutoråŸç†æ¢ç©¶.html.44cbbd21.js"><link rel="prefetch" href="/assets/ç¬¬9ç« Javaå¹¶å‘åŒ…ä¸­ScheduledThreadPoolExecutoråŸç†æ¢ç©¶.html.b4fa44fb.js"><link rel="prefetch" href="/assets/index.html.e5d1d6c3.js"><link rel="prefetch" href="/assets/ç¬¬10ç«  Mapå’ŒSet.html.a55e5985.js"><link rel="prefetch" href="/assets/ç¬¬11ç«  å †ä¸ä¼˜å…ˆçº§åˆ—è¡¨.html.e280a8e4.js"><link rel="prefetch" href="/assets/ç¬¬12ç«  é€šç”¨å®¹å™¨å’Œæ€»ç»“.html.7f8f71e8.js"><link rel="prefetch" href="/assets/ç¬¬13ç«  æ–‡ä»¶åŸºæœ¬æŠ€æœ¯.html.5f4b89df.js"><link rel="prefetch" href="/assets/ç¬¬14ç«  æ–‡ä»¶é«˜çº§æŠ€æœ¯.html.8c6479e2.js"><link rel="prefetch" href="/assets/ç¬¬15ç«  å¹¶å‘åŸºç¡€çŸ¥è¯†.html.5cb53a4c.js"><link rel="prefetch" href="/assets/ç¬¬16ç«  å¹¶å‘åŒ…çš„åŸºçŸ³.html.142bea88.js"><link rel="prefetch" href="/assets/ç¬¬17ç«  å¹¶å‘å®¹å™¨.html.3acbf1e5.js"><link rel="prefetch" href="/assets/ç¬¬18ç«  å¼‚æ­¥ä»»åŠ¡æ‰§è¡ŒæœåŠ¡.html.1b161f70.js"><link rel="prefetch" href="/assets/ç¬¬19ç«  åŒæ­¥å’Œåä½œå·¥å…·ç±».html.addf5980.js"><link rel="prefetch" href="/assets/ç¬¬1ç«  ç¼–ç¨‹åŸºç¡€.html.baf9d7d3.js"><link rel="prefetch" href="/assets/ç¬¬20ç«  å¹¶å‘æ€»ç»“.html.0b3bb480.js"><link rel="prefetch" href="/assets/ç¬¬21ç«  åå°„.html.af2446cd.js"><link rel="prefetch" href="/assets/ç¬¬22ç«  æ³¨è§£.html.d1e27bc4.js"><link rel="prefetch" href="/assets/ç¬¬23ç«  åŠ¨æ€ä»£ç†.html.7995d8c2.js"><link rel="prefetch" href="/assets/ç¬¬24ç«  ç±»åŠ è½½æœºåˆ¶.html.b0642f1c.js"><link rel="prefetch" href="/assets/ç¬¬25ç«  æ­£åˆ™è¡¨è¾¾å¼.html.8b5d5322.js"><link rel="prefetch" href="/assets/ç¬¬26ç«  å‡½æ•°å¼ç¼–ç¨‹.html.7b517aff.js"><link rel="prefetch" href="/assets/ç¬¬2ç«  ç†è§£æ•°æ®èƒŒåçš„äºŒè¿›åˆ¶.html.94e4cb31.js"><link rel="prefetch" href="/assets/ç¬¬3ç«  ç±»çš„åŸºç¡€.html.5639d229.js"><link rel="prefetch" href="/assets/ç¬¬4ç«  ç±»çš„ç»§æ‰¿.html.2f958e91.js"><link rel="prefetch" href="/assets/ç¬¬5ç«  ç±»çš„ç»§æ‰¿.html.7d7e56a6.js"><link rel="prefetch" href="/assets/ç¬¬6ç«  å¼‚å¸¸.html.adb3eef3.js"><link rel="prefetch" href="/assets/ç¬¬7ç«  å¸¸ç”¨åŸºç¡€ç±».html.17e1b88d.js"><link rel="prefetch" href="/assets/ç¬¬8ç«  æ³›å‹.html.9d1aa562.js"><link rel="prefetch" href="/assets/ç¬¬9ç«  åˆ—è¡¨å’Œé˜Ÿåˆ—.html.1b223279.js"><link rel="prefetch" href="/assets/index.html.213dbe07.js"><link rel="prefetch" href="/assets/ç¬¬10ç« Executoræ¡†æ¶.html.2d819cce.js"><link rel="prefetch" href="/assets/ç¬¬11ç« Javaå¹¶å‘ç¼–ç¨‹å®è·µ.html.e045243d.js"><link rel="prefetch" href="/assets/ç¬¬1ç« å¹¶å‘ç¼–ç¨‹çš„æŒ‘æˆ˜.html.f2cf1cf0.js"><link rel="prefetch" href="/assets/ç¬¬2ç« Javaå¹¶å‘æœºåˆ¶çš„åº•å±‚å®ç°åŸç†.html.84620d72.js"><link rel="prefetch" href="/assets/ç¬¬3ç« Javaå†…å­˜æ¨¡å‹.html.57e9f10a.js"><link rel="prefetch" href="/assets/ç¬¬4ç« Javaå¹¶å‘ç¼–ç¨‹åŸºç¡€.html.e1837d6e.js"><link rel="prefetch" href="/assets/ç¬¬5ç« Javaä¸­çš„é”.html.509db6c5.js"><link rel="prefetch" href="/assets/ç¬¬6ç« Javaå¹¶å‘å®¹å™¨å’Œæ¡†æ¶.html.fab16b37.js"><link rel="prefetch" href="/assets/ç¬¬7ç« Javaä¸­çš„13ä¸ªåŸå­æ“ä½œç±».html.8a2e8902.js"><link rel="prefetch" href="/assets/ç¬¬8ç« Javaä¸­çš„å¹¶å‘å·¥å…·ç±».html.ede4146b.js"><link rel="prefetch" href="/assets/ç¬¬9ç« Javaä¸­çš„çº¿ç¨‹æ± .html.e7e64f52.js"><link rel="prefetch" href="/assets/index.html.ccabe8d8.js"><link rel="prefetch" href="/assets/ç¬¬10ç« é¿å…æ´»è·ƒæ€§å±é™©.html.288ef3a6.js"><link rel="prefetch" href="/assets/ç¬¬11ç« æ€§èƒ½ä¸å¯ä¼¸ç¼©æ€§.html.66974eb6.js"><link rel="prefetch" href="/assets/ç¬¬12ç« å¹¶å‘ç¨‹åºçš„æµ‹è¯•.html.064eea71.js"><link rel="prefetch" href="/assets/ç¬¬13ç« æ˜¾å¼é”.html.bf44c451.js"><link rel="prefetch" href="/assets/ç¬¬14ç« æ„å»ºè‡ªå®šä¹‰çš„åŒæ­¥å·¥å…·.html.23a2e0be.js"><link rel="prefetch" href="/assets/ç¬¬15ç« åŸå­å˜é‡ä¸éé˜»å¡åŒæ­¥æœºåˆ¶.html.06dd6e43.js"><link rel="prefetch" href="/assets/ç¬¬16ç« Javaå†…å­˜æ¨¡å‹ç®€ä»‹.html.977d59cd.js"><link rel="prefetch" href="/assets/ç¬¬1ç« ç®€ä»‹.html.90b5e48c.js"><link rel="prefetch" href="/assets/ç¬¬2ç« çº¿ç¨‹å®‰å…¨.html.2501a94b.js"><link rel="prefetch" href="/assets/ç¬¬3ç« å¯¹è±¡çš„å…±äº«.html.faeb65aa.js"><link rel="prefetch" href="/assets/ç¬¬4ç« å¯¹è±¡çš„ç»„åˆ.html.1fe1b50c.js"><link rel="prefetch" href="/assets/ç¬¬5ç« åŸºç¡€æ„å»ºæ¨¡å—.html.1fe6799b.js"><link rel="prefetch" href="/assets/ç¬¬6ç« ä»»åŠ¡æ‰§è¡Œ.html.70613e72.js"><link rel="prefetch" href="/assets/ç¬¬7ç« å–æ¶ˆä¸å…³é—­.html.1e1c2d49.js"><link rel="prefetch" href="/assets/ç¬¬8ç« çº¿ç¨‹æ± çš„ä½¿ç”¨.html.72ef0a90.js"><link rel="prefetch" href="/assets/ç¬¬9ç« å›¾å½¢ç”¨æˆ·ç•Œé¢åº”ç”¨ç¨‹åº.html.11c377b5.js"><link rel="prefetch" href="/assets/001-two-sum.html.a3f3595a.js"><link rel="prefetch" href="/assets/002-add-two-numbers.html.e7703c4f.js"><link rel="prefetch" href="/assets/003-longest-substring-without-repeating-characters.html.0c6329c6.js"><link rel="prefetch" href="/assets/index.html.d8ad8d07.js"><link rel="prefetch" href="/assets/index.html.5a513471.js"><link rel="prefetch" href="/assets/ç¬¬10ç« å‰ç«¯ç¼–è¯‘ä¸ä¼˜åŒ–.html.2a6b1789.js"><link rel="prefetch" href="/assets/ç¬¬11ç« åç«¯ç¼–è¯‘ä¸ä¼˜åŒ–.html.59704c7c.js"><link rel="prefetch" href="/assets/ç¬¬12ç« Javaå†…å­˜æ¨¡å‹ä¸çº¿ç¨‹.html.deaa5ea6.js"><link rel="prefetch" href="/assets/ç¬¬13ç« çº¿ç¨‹å®‰å…¨ä¸é”ä¼˜åŒ–.html.fd873e3a.js"><link rel="prefetch" href="/assets/ç¬¬1ç« èµ°è¿‘Java.html.0897d78c.js"><link rel="prefetch" href="/assets/ç¬¬2ç« Javaå†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸.html.0978cdd4.js"><link rel="prefetch" href="/assets/ç¬¬3ç« åƒåœ¾æ”¶é›†å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥.html.a47791fa.js"><link rel="prefetch" href="/assets/ç¬¬4ç« è™šæ‹Ÿæœºæ€§èƒ½ç›‘æ§ã€æ•…éšœå¤„ç†å·¥å…·.html.61f80277.js"><link rel="prefetch" href="/assets/ç¬¬5ç« è°ƒä¼˜æ¡ˆä¾‹åˆ†æä¸å®æˆ˜.html.7a5b7c4c.js"><link rel="prefetch" href="/assets/ç¬¬6ç« ç±»æ–‡ä»¶ç»“æ„.html.3e8cd2c6.js"><link rel="prefetch" href="/assets/ç¬¬7ç« è™šæ‹Ÿæœºç±»åŠ è½½æœºåˆ¶.html.3af5a31c.js"><link rel="prefetch" href="/assets/ç¬¬8ç« è™šæ‹Ÿæœºå­—èŠ‚ç æ‰§è¡Œå¼•æ“.html.dc5c593e.js"><link rel="prefetch" href="/assets/ç¬¬9ç« ç±»åŠ è½½åŠæ‰§è¡Œå­ç³»ç»Ÿçš„æ¡ˆä¾‹ä¸å®æˆ˜.html.c3e2fd28.js"><link rel="prefetch" href="/assets/index.html.c2e9c36e.js"><link rel="prefetch" href="/assets/ç¬¬1ç« èµ°å…¥å¹¶è¡Œä¸–ç•Œ.html.bf2758d5.js"><link rel="prefetch" href="/assets/ç¬¬2ç« Javaå¹¶è¡Œç¨‹åºåŸºç¡€.html.8a27b9a6.js"><link rel="prefetch" href="/assets/ç¬¬3ç« JDKå¹¶å‘åŒ….html.55a5bb57.js"><link rel="prefetch" href="/assets/ç¬¬4ç« é”çš„ä¼˜åŒ–åŠæ³¨æ„äº‹é¡¹.html.0ac6ac12.js"><link rel="prefetch" href="/assets/ç¬¬5ç« å¹¶è¡Œæ¨¡å¼ä¸ç®—æ³•.html.6e857f15.js"><link rel="prefetch" href="/assets/ç¬¬6ç« Java8910ä¸å¹¶å‘.html.61173fb4.js"><link rel="prefetch" href="/assets/ç¬¬7ç« ä½¿ç”¨Akkaæ„å»ºé«˜å¹¶å‘ç¨‹åº.html.610f0e53.js"><link rel="prefetch" href="/assets/ç¬¬8ç« å¹¶è¡Œç¨‹åºè°ƒè¯•.html.dcf9af72.js"><link rel="prefetch" href="/assets/ç¬¬9ç« å¤šçº¿ç¨‹ä¼˜åŒ–ç¤ºä¾‹â€”Jettyæ ¸å¿ƒä»£ç åˆ†æ.html.1b25b9bb.js"><link rel="prefetch" href="/assets/index.html.8c841845.js"><link rel="prefetch" href="/assets/ç¬¬10ç« Classè£…è½½ç³»ç»Ÿ.html.800b1d8e.js"><link rel="prefetch" href="/assets/ç¬¬11ç« å­—èŠ‚ç æ‰§è¡Œ.html.fd59242f.js"><link rel="prefetch" href="/assets/ç¬¬1ç« åˆæ¢Javaè™šæ‹Ÿæœº.html.80ec8c68.js"><link rel="prefetch" href="/assets/ç¬¬2ç« è®¤è¯†Javaè™šæ‹Ÿæœºçš„åŸºæœ¬ç»“æ„.html.bbf499e1.js"><link rel="prefetch" href="/assets/ç¬¬3ç« å¸¸ç”¨Javaè™šæ‹Ÿæœºå‚æ•°.html.10cb1042.js"><link rel="prefetch" href="/assets/ç¬¬4ç« åƒåœ¾å›æ”¶çš„æ¦‚å¿µä¸ç®—æ³•.html.90d52151.js"><link rel="prefetch" href="/assets/ç¬¬5ç« åƒåœ¾æ”¶é›†å™¨å’Œå†…å­˜åˆ†é….html.98dc8566.js"><link rel="prefetch" href="/assets/ç¬¬6ç« æ€§èƒ½ç›‘æ§å·¥å…·.html.d9178ab7.js"><link rel="prefetch" href="/assets/ç¬¬7ç« åˆ†æJavaå †.html.76f053df.js"><link rel="prefetch" href="/assets/ç¬¬8ç« é”ä¸å¹¶å‘.html.c6edc3b8.js"><link rel="prefetch" href="/assets/ç¬¬9ç« Classæ–‡ä»¶ç»“æ„.html.ce3b9ffe.js"><link rel="prefetch" href="/assets/404.html.a61819a1.js"><link rel="prefetch" href="/assets/index.html.196bf7d0.js"><link rel="prefetch" href="/assets/index.html.6474b04a.js"><link rel="prefetch" href="/assets/index.html.12d9ea9f.js"><link rel="prefetch" href="/assets/index.html.8cf1d97b.js"><link rel="prefetch" href="/assets/index.html.b1d72dff.js"><link rel="prefetch" href="/assets/index.html.6a433ed8.js"><link rel="prefetch" href="/assets/index.html.292db8d2.js"><link rel="prefetch" href="/assets/index.html.db46c28d.js"><link rel="prefetch" href="/assets/home.html.b3222fa8.js"><link rel="prefetch" href="/assets/slide.html.3b4fa46d.js"><link rel="prefetch" href="/assets/index.html.eab01647.js"><link rel="prefetch" href="/assets/index.html.f6997ce1.js"><link rel="prefetch" href="/assets/index.html.4f492e58.js"><link rel="prefetch" href="/assets/ç¬¬10ç«  å¼‚å¸¸.html.b369a82a.js"><link rel="prefetch" href="/assets/ç¬¬11ç«  å¹¶å‘.html.1e83a7e7.js"><link rel="prefetch" href="/assets/ç¬¬12ç«  åºåˆ—åŒ–.html.934b2280.js"><link rel="prefetch" href="/assets/ç¬¬2ç«  åˆ›å»ºå’Œé”€æ¯å¯¹è±¡.html.bf39597f.js"><link rel="prefetch" href="/assets/ç¬¬3ç«  å¯¹äºæ‰€æœ‰å¯¹è±¡éƒ½é€šç”¨çš„æ–¹æ³•.html.c2f582c1.js"><link rel="prefetch" href="/assets/ç¬¬4ç«  ç±»å’Œæ¥å£.html.d616fa92.js"><link rel="prefetch" href="/assets/ç¬¬5ç«  æ³›å‹.html.fe9bf71e.js"><link rel="prefetch" href="/assets/ç¬¬6ç«  æšä¸¾å’Œæ³¨è§£.html.b0c192a2.js"><link rel="prefetch" href="/assets/ç¬¬8ç«  æ–¹æ³•.html.0f5952cd.js"><link rel="prefetch" href="/assets/ç¬¬9ç«  é€šç”¨ç¼–ç¨‹.html.a9158c44.js"><link rel="prefetch" href="/assets/index.html.66d9275e.js"><link rel="prefetch" href="/assets/index.html.e1e195ac.js"><link rel="prefetch" href="/assets/ç¬¬1ç« Javaå¤šçº¿ç¨‹æŠ€èƒ½.html.d201a503.js"><link rel="prefetch" href="/assets/ç¬¬2ç« å¯¹è±¡åŠå˜é‡çš„å¹¶å‘è®¿é—®.html.8eff37f9.js"><link rel="prefetch" href="/assets/ç¬¬3ç« çº¿ç¨‹é—´é€šä¿¡.html.96ad7aa4.js"><link rel="prefetch" href="/assets/ç¬¬4ç« é”çš„ä½¿ç”¨.html.0b108a46.js"><link rel="prefetch" href="/assets/ç¬¬5ç« å®šæ—¶å™¨.html.079d1655.js"><link rel="prefetch" href="/assets/ç¬¬6ç« å•ä¾‹æ¨¡å¼ä¸å¤šçº¿ç¨‹.html.dd40cab9.js"><link rel="prefetch" href="/assets/ç¬¬7ç« æ‹¾é—å¢è¡¥.html.c98b6afc.js"><link rel="prefetch" href="/assets/ç¬¬8ç« å¹¶å‘é›†åˆæ¡†æ¶.html.c47636a0.js"><link rel="prefetch" href="/assets/ç¬¬9ç« çº¿ç¨‹æ± ThreadPoolExecutorçš„ä½¿ç”¨.html.fdd06e63.js"><link rel="prefetch" href="/assets/index.html.970ebb57.js"><link rel="prefetch" href="/assets/ç¬¬1ç« å¤šçº¿ç¨‹åŸºç¡€.html.f6e06884.js"><link rel="prefetch" href="/assets/ç¬¬2ç« Atomicç±».html.5c9a96af.js"><link rel="prefetch" href="/assets/ç¬¬3ç« Lockä¸Condition.html.dd94c834.js"><link rel="prefetch" href="/assets/ç¬¬4ç« åŒæ­¥å·¥å…·ç±».html.f32cb37a.js"><link rel="prefetch" href="/assets/ç¬¬5ç« å¹¶å‘å®¹å™¨.html.11ef3b3d.js"><link rel="prefetch" href="/assets/ç¬¬6ç« çº¿ç¨‹æ± ä¸Future.html.f2664d19.js"><link rel="prefetch" href="/assets/ç¬¬7ç« ForkJoinPool.html.5b09c440.js"><link rel="prefetch" href="/assets/ç¬¬8ç« CompletableFuture.html.00ddc982.js"><link rel="prefetch" href="/assets/index.html.05f6dacd.js"><link rel="prefetch" href="/assets/ç¬¬10ç« Javaå¹¶å‘åŒ…ä¸­çº¿ç¨‹åŒæ­¥å™¨åŸç†å‰–æ.html.22c349a1.js"><link rel="prefetch" href="/assets/ç¬¬11ç« å¹¶å‘ç¼–ç¨‹å®è·µ.html.5db30ba4.js"><link rel="prefetch" href="/assets/ç¬¬1ç« å¹¶å‘ç¼–ç¨‹çº¿ç¨‹åŸºç¡€.html.59828def.js"><link rel="prefetch" href="/assets/ç¬¬2ç« å¹¶å‘ç¼–ç¨‹çš„å…¶ä»–åŸºç¡€çŸ¥è¯†.html.95634460.js"><link rel="prefetch" href="/assets/ç¬¬3ç« Javaå¹¶å‘åŒ…ä¸­ThreadLocalRandomç±»åŸç†å‰–æ.html.5e3f88be.js"><link rel="prefetch" href="/assets/ç¬¬4ç« Javaå¹¶å‘åŒ…ä¸­åŸå­æ“ä½œç±»åŸç†å‰–æ.html.aa40f522.js"><link rel="prefetch" href="/assets/ç¬¬5ç« Javaå¹¶å‘åŒ…ä¸­å¹¶å‘Listæºç å‰–æ.html.19da87be.js"><link rel="prefetch" href="/assets/ç¬¬6ç« Javaå¹¶å‘åŒ…ä¸­é”åŸç†å‰–æ.html.e64d1f1d.js"><link rel="prefetch" href="/assets/ç¬¬7ç« Javaå¹¶å‘åŒ…ä¸­å¹¶å‘é˜Ÿåˆ—åŸç†å‰–æ.html.05c55f53.js"><link rel="prefetch" href="/assets/ç¬¬8ç« Javaå¹¶å‘åŒ…ä¸­çº¿ç¨‹æ± ThreadPoolExecutoråŸç†æ¢ç©¶.html.355c02bf.js"><link rel="prefetch" href="/assets/ç¬¬9ç« Javaå¹¶å‘åŒ…ä¸­ScheduledThreadPoolExecutoråŸç†æ¢ç©¶.html.bc89022d.js"><link rel="prefetch" href="/assets/index.html.0812d30d.js"><link rel="prefetch" href="/assets/ç¬¬10ç«  Mapå’ŒSet.html.d15ebc0a.js"><link rel="prefetch" href="/assets/ç¬¬11ç«  å †ä¸ä¼˜å…ˆçº§åˆ—è¡¨.html.22879ed0.js"><link rel="prefetch" href="/assets/ç¬¬12ç«  é€šç”¨å®¹å™¨å’Œæ€»ç»“.html.af4e25e8.js"><link rel="prefetch" href="/assets/ç¬¬13ç«  æ–‡ä»¶åŸºæœ¬æŠ€æœ¯.html.e9de4ab6.js"><link rel="prefetch" href="/assets/ç¬¬14ç«  æ–‡ä»¶é«˜çº§æŠ€æœ¯.html.6944682e.js"><link rel="prefetch" href="/assets/ç¬¬15ç«  å¹¶å‘åŸºç¡€çŸ¥è¯†.html.fbf03dc9.js"><link rel="prefetch" href="/assets/ç¬¬16ç«  å¹¶å‘åŒ…çš„åŸºçŸ³.html.f5fbd049.js"><link rel="prefetch" href="/assets/ç¬¬17ç«  å¹¶å‘å®¹å™¨.html.d522da1e.js"><link rel="prefetch" href="/assets/ç¬¬18ç«  å¼‚æ­¥ä»»åŠ¡æ‰§è¡ŒæœåŠ¡.html.76e9a36e.js"><link rel="prefetch" href="/assets/ç¬¬19ç«  åŒæ­¥å’Œåä½œå·¥å…·ç±».html.669856bd.js"><link rel="prefetch" href="/assets/ç¬¬1ç«  ç¼–ç¨‹åŸºç¡€.html.3f747685.js"><link rel="prefetch" href="/assets/ç¬¬20ç«  å¹¶å‘æ€»ç»“.html.1e326470.js"><link rel="prefetch" href="/assets/ç¬¬21ç«  åå°„.html.25579869.js"><link rel="prefetch" href="/assets/ç¬¬22ç«  æ³¨è§£.html.10b1af26.js"><link rel="prefetch" href="/assets/ç¬¬23ç«  åŠ¨æ€ä»£ç†.html.76b2167b.js"><link rel="prefetch" href="/assets/ç¬¬24ç«  ç±»åŠ è½½æœºåˆ¶.html.2dc4cd09.js"><link rel="prefetch" href="/assets/ç¬¬25ç«  æ­£åˆ™è¡¨è¾¾å¼.html.d3486e09.js"><link rel="prefetch" href="/assets/ç¬¬26ç«  å‡½æ•°å¼ç¼–ç¨‹.html.dd3f8bd7.js"><link rel="prefetch" href="/assets/ç¬¬2ç«  ç†è§£æ•°æ®èƒŒåçš„äºŒè¿›åˆ¶.html.3d5eaefa.js"><link rel="prefetch" href="/assets/ç¬¬3ç«  ç±»çš„åŸºç¡€.html.c86161b4.js"><link rel="prefetch" href="/assets/ç¬¬4ç«  ç±»çš„ç»§æ‰¿.html.2bce738f.js"><link rel="prefetch" href="/assets/ç¬¬5ç«  ç±»çš„ç»§æ‰¿.html.ad950d91.js"><link rel="prefetch" href="/assets/ç¬¬6ç«  å¼‚å¸¸.html.09ddca79.js"><link rel="prefetch" href="/assets/ç¬¬7ç«  å¸¸ç”¨åŸºç¡€ç±».html.12c88740.js"><link rel="prefetch" href="/assets/ç¬¬8ç«  æ³›å‹.html.81d0949a.js"><link rel="prefetch" href="/assets/ç¬¬9ç«  åˆ—è¡¨å’Œé˜Ÿåˆ—.html.38c68a48.js"><link rel="prefetch" href="/assets/index.html.bf5d33db.js"><link rel="prefetch" href="/assets/ç¬¬10ç« Executoræ¡†æ¶.html.a7e672e0.js"><link rel="prefetch" href="/assets/ç¬¬11ç« Javaå¹¶å‘ç¼–ç¨‹å®è·µ.html.debb41c7.js"><link rel="prefetch" href="/assets/ç¬¬1ç« å¹¶å‘ç¼–ç¨‹çš„æŒ‘æˆ˜.html.1b00855d.js"><link rel="prefetch" href="/assets/ç¬¬2ç« Javaå¹¶å‘æœºåˆ¶çš„åº•å±‚å®ç°åŸç†.html.f005f932.js"><link rel="prefetch" href="/assets/ç¬¬3ç« Javaå†…å­˜æ¨¡å‹.html.6ec525fb.js"><link rel="prefetch" href="/assets/ç¬¬4ç« Javaå¹¶å‘ç¼–ç¨‹åŸºç¡€.html.bd275d3c.js"><link rel="prefetch" href="/assets/ç¬¬5ç« Javaä¸­çš„é”.html.83cc4dba.js"><link rel="prefetch" href="/assets/ç¬¬6ç« Javaå¹¶å‘å®¹å™¨å’Œæ¡†æ¶.html.8a83a2ef.js"><link rel="prefetch" href="/assets/ç¬¬7ç« Javaä¸­çš„13ä¸ªåŸå­æ“ä½œç±».html.2c3c8029.js"><link rel="prefetch" href="/assets/ç¬¬8ç« Javaä¸­çš„å¹¶å‘å·¥å…·ç±».html.61794c87.js"><link rel="prefetch" href="/assets/ç¬¬9ç« Javaä¸­çš„çº¿ç¨‹æ± .html.9434f936.js"><link rel="prefetch" href="/assets/index.html.93c2aee6.js"><link rel="prefetch" href="/assets/ç¬¬10ç« é¿å…æ´»è·ƒæ€§å±é™©.html.e7ea1e3a.js"><link rel="prefetch" href="/assets/ç¬¬11ç« æ€§èƒ½ä¸å¯ä¼¸ç¼©æ€§.html.42d4a3a1.js"><link rel="prefetch" href="/assets/ç¬¬12ç« å¹¶å‘ç¨‹åºçš„æµ‹è¯•.html.690d2aba.js"><link rel="prefetch" href="/assets/ç¬¬13ç« æ˜¾å¼é”.html.1171f97b.js"><link rel="prefetch" href="/assets/ç¬¬14ç« æ„å»ºè‡ªå®šä¹‰çš„åŒæ­¥å·¥å…·.html.6c72f888.js"><link rel="prefetch" href="/assets/ç¬¬15ç« åŸå­å˜é‡ä¸éé˜»å¡åŒæ­¥æœºåˆ¶.html.9de6dd1b.js"><link rel="prefetch" href="/assets/ç¬¬16ç« Javaå†…å­˜æ¨¡å‹ç®€ä»‹.html.847d1584.js"><link rel="prefetch" href="/assets/ç¬¬1ç« ç®€ä»‹.html.5ff3b256.js"><link rel="prefetch" href="/assets/ç¬¬2ç« çº¿ç¨‹å®‰å…¨.html.34a72eca.js"><link rel="prefetch" href="/assets/ç¬¬3ç« å¯¹è±¡çš„å…±äº«.html.088b59e3.js"><link rel="prefetch" href="/assets/ç¬¬4ç« å¯¹è±¡çš„ç»„åˆ.html.420592f2.js"><link rel="prefetch" href="/assets/ç¬¬5ç« åŸºç¡€æ„å»ºæ¨¡å—.html.b697dc08.js"><link rel="prefetch" href="/assets/ç¬¬6ç« ä»»åŠ¡æ‰§è¡Œ.html.d2692cee.js"><link rel="prefetch" href="/assets/ç¬¬7ç« å–æ¶ˆä¸å…³é—­.html.1033df86.js"><link rel="prefetch" href="/assets/ç¬¬8ç« çº¿ç¨‹æ± çš„ä½¿ç”¨.html.5655d9dd.js"><link rel="prefetch" href="/assets/ç¬¬9ç« å›¾å½¢ç”¨æˆ·ç•Œé¢åº”ç”¨ç¨‹åº.html.2c9a92f0.js"><link rel="prefetch" href="/assets/001-two-sum.html.bd5b42b8.js"><link rel="prefetch" href="/assets/002-add-two-numbers.html.1cd12f58.js"><link rel="prefetch" href="/assets/003-longest-substring-without-repeating-characters.html.3f87474a.js"><link rel="prefetch" href="/assets/index.html.346ee126.js"><link rel="prefetch" href="/assets/index.html.bddb9164.js"><link rel="prefetch" href="/assets/ç¬¬10ç« å‰ç«¯ç¼–è¯‘ä¸ä¼˜åŒ–.html.27f33bd6.js"><link rel="prefetch" href="/assets/ç¬¬11ç« åç«¯ç¼–è¯‘ä¸ä¼˜åŒ–.html.2d98e937.js"><link rel="prefetch" href="/assets/ç¬¬12ç« Javaå†…å­˜æ¨¡å‹ä¸çº¿ç¨‹.html.e5d51c84.js"><link rel="prefetch" href="/assets/ç¬¬13ç« çº¿ç¨‹å®‰å…¨ä¸é”ä¼˜åŒ–.html.2e377ef2.js"><link rel="prefetch" href="/assets/ç¬¬1ç« èµ°è¿‘Java.html.7c41e7a9.js"><link rel="prefetch" href="/assets/ç¬¬2ç« Javaå†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸.html.82365a5f.js"><link rel="prefetch" href="/assets/ç¬¬3ç« åƒåœ¾æ”¶é›†å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥.html.1360e884.js"><link rel="prefetch" href="/assets/ç¬¬4ç« è™šæ‹Ÿæœºæ€§èƒ½ç›‘æ§ã€æ•…éšœå¤„ç†å·¥å…·.html.0a90211f.js"><link rel="prefetch" href="/assets/ç¬¬5ç« è°ƒä¼˜æ¡ˆä¾‹åˆ†æä¸å®æˆ˜.html.e7e286da.js"><link rel="prefetch" href="/assets/ç¬¬6ç« ç±»æ–‡ä»¶ç»“æ„.html.9f84d086.js"><link rel="prefetch" href="/assets/ç¬¬7ç« è™šæ‹Ÿæœºç±»åŠ è½½æœºåˆ¶.html.31c0a6a3.js"><link rel="prefetch" href="/assets/ç¬¬8ç« è™šæ‹Ÿæœºå­—èŠ‚ç æ‰§è¡Œå¼•æ“.html.6f40ca25.js"><link rel="prefetch" href="/assets/ç¬¬9ç« ç±»åŠ è½½åŠæ‰§è¡Œå­ç³»ç»Ÿçš„æ¡ˆä¾‹ä¸å®æˆ˜.html.5bf71bd8.js"><link rel="prefetch" href="/assets/index.html.18e34f59.js"><link rel="prefetch" href="/assets/ç¬¬1ç« èµ°å…¥å¹¶è¡Œä¸–ç•Œ.html.d4a7a8b1.js"><link rel="prefetch" href="/assets/ç¬¬2ç« Javaå¹¶è¡Œç¨‹åºåŸºç¡€.html.79f6e18f.js"><link rel="prefetch" href="/assets/ç¬¬3ç« JDKå¹¶å‘åŒ….html.df0acd9f.js"><link rel="prefetch" href="/assets/ç¬¬4ç« é”çš„ä¼˜åŒ–åŠæ³¨æ„äº‹é¡¹.html.5a2b559c.js"><link rel="prefetch" href="/assets/ç¬¬5ç« å¹¶è¡Œæ¨¡å¼ä¸ç®—æ³•.html.c0ec6141.js"><link rel="prefetch" href="/assets/ç¬¬6ç« Java8910ä¸å¹¶å‘.html.9a2cc047.js"><link rel="prefetch" href="/assets/ç¬¬7ç« ä½¿ç”¨Akkaæ„å»ºé«˜å¹¶å‘ç¨‹åº.html.e1442a98.js"><link rel="prefetch" href="/assets/ç¬¬8ç« å¹¶è¡Œç¨‹åºè°ƒè¯•.html.ddf890de.js"><link rel="prefetch" href="/assets/ç¬¬9ç« å¤šçº¿ç¨‹ä¼˜åŒ–ç¤ºä¾‹â€”Jettyæ ¸å¿ƒä»£ç åˆ†æ.html.0ab5a261.js"><link rel="prefetch" href="/assets/index.html.9735d51d.js"><link rel="prefetch" href="/assets/ç¬¬10ç« Classè£…è½½ç³»ç»Ÿ.html.50bb638d.js"><link rel="prefetch" href="/assets/ç¬¬11ç« å­—èŠ‚ç æ‰§è¡Œ.html.f0a2e1fd.js"><link rel="prefetch" href="/assets/ç¬¬1ç« åˆæ¢Javaè™šæ‹Ÿæœº.html.0a668344.js"><link rel="prefetch" href="/assets/ç¬¬2ç« è®¤è¯†Javaè™šæ‹Ÿæœºçš„åŸºæœ¬ç»“æ„.html.1777df39.js"><link rel="prefetch" href="/assets/ç¬¬3ç« å¸¸ç”¨Javaè™šæ‹Ÿæœºå‚æ•°.html.65784af7.js"><link rel="prefetch" href="/assets/ç¬¬4ç« åƒåœ¾å›æ”¶çš„æ¦‚å¿µä¸ç®—æ³•.html.d6231456.js"><link rel="prefetch" href="/assets/ç¬¬5ç« åƒåœ¾æ”¶é›†å™¨å’Œå†…å­˜åˆ†é….html.6446a277.js"><link rel="prefetch" href="/assets/ç¬¬6ç« æ€§èƒ½ç›‘æ§å·¥å…·.html.e9ce7787.js"><link rel="prefetch" href="/assets/ç¬¬7ç« åˆ†æJavaå †.html.ee273e82.js"><link rel="prefetch" href="/assets/ç¬¬8ç« é”ä¸å¹¶å‘.html.7624390a.js"><link rel="prefetch" href="/assets/ç¬¬9ç« Classæ–‡ä»¶ç»“æ„.html.f4c2ac9f.js"><link rel="prefetch" href="/assets/404.html.36540b0d.js"><link rel="prefetch" href="/assets/index.html.583c479d.js"><link rel="prefetch" href="/assets/index.html.c407fe6a.js"><link rel="prefetch" href="/assets/index.html.99a8f87f.js"><link rel="prefetch" href="/assets/index.html.7587b161.js"><link rel="prefetch" href="/assets/index.html.f6866d7d.js"><link rel="prefetch" href="/assets/index.html.a985c72b.js"><link rel="prefetch" href="/assets/index.html.4c96ae2e.js"><link rel="prefetch" href="/assets/404.629f43ab.js"><link rel="prefetch" href="/assets/Layout.26a2a4c9.js"><link rel="prefetch" href="/assets/Slide.b01858c1.js"><link rel="prefetch" href="/assets/Blog.ac038c81.js"><link rel="prefetch" href="/assets/auto.esm.52abc6cc.js"><link rel="prefetch" href="/assets/index.147398ee.js"><link rel="prefetch" href="/assets/index.e1c5a3de.js"><link rel="prefetch" href="/assets/mermaid.esm.min.e741c6cd.js"><link rel="prefetch" href="/assets/highlight.esm.9b852bc5.js"><link rel="prefetch" href="/assets/markdown.esm.77e8db25.js"><link rel="prefetch" href="/assets/math.esm.cb9d4be3.js"><link rel="prefetch" href="/assets/notes.esm.62c5f19d.js"><link rel="prefetch" href="/assets/reveal.esm.41ec5d7f.js"><link rel="prefetch" href="/assets/search.esm.04894411.js"><link rel="prefetch" href="/assets/zoom.esm.78977eba.js"><link rel="prefetch" href="/assets/photoswipe.esm.2debdee5.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/" class="brand"><img class="logo" src="/logo.svg" alt="MyBlog"><!----><span class="site-name hide-in-pad">MyBlog</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="è¯»ä¹¦ç¬”è®°"><span class="title"><span class="icon iconfont icon-note" style=""></span>è¯»ä¹¦ç¬”è®°</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/reading-notes/Effective%20Java" class="nav-link active" aria-label="Effective Java"><!---->Effective Java<!----></a></li><li class="dropdown-item"><a href="/reading-notes/Java%E7%BC%96%E7%A8%8B%E7%9A%84%E9%80%BB%E8%BE%91" class="nav-link" aria-label="Java ç¼–ç¨‹çš„é€»è¾‘"><!---->Java ç¼–ç¨‹çš„é€»è¾‘<!----></a></li><li class="dropdown-item"><a href="/reading-notes/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%AE%9E%E6%88%98" class="nav-link" aria-label="Java å¹¶å‘ç¼–ç¨‹å®æˆ˜"><!---->Java å¹¶å‘ç¼–ç¨‹å®æˆ˜<!----></a></li><li class="dropdown-item"><a href="/reading-notes/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF" class="nav-link" aria-label="Java å¤šçº¿ç¨‹ç¼–ç¨‹æ ¸å¿ƒæŠ€æœ¯"><!---->Java å¤šçº¿ç¨‹ç¼–ç¨‹æ ¸å¿ƒæŠ€æœ¯<!----></a></li><li class="dropdown-item"><a href="/reading-notes/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B9%8B%E7%BE%8E" class="nav-link" aria-label="Java å¹¶å‘ç¼–ç¨‹ä¹‹ç¾"><!---->Java å¹¶å‘ç¼–ç¨‹ä¹‹ç¾<!----></a></li><li class="dropdown-item"><a href="/reading-notes/Java%E5%B9%B6%E5%8F%91%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%EF%BC%9AJDK%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90" class="nav-link" aria-label="Java å¹¶å‘å®ç°åŸç†ï¼šJDK æºç å‰–æ"><!---->Java å¹¶å‘å®ç°åŸç†ï¼šJDK æºç å‰–æ<!----></a></li><li class="dropdown-item"><a href="/reading-notes/%E5%AE%9E%E6%88%98Java%E9%AB%98%E5%B9%B6%E5%8F%91%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1" class="nav-link" aria-label="å®æˆ˜ Java é«˜å¹¶å‘ç¨‹åºè®¾è®¡"><!---->å®æˆ˜ Java é«˜å¹¶å‘ç¨‹åºè®¾è®¡<!----></a></li><li class="dropdown-item"><a href="/reading-notes/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%9A%84%E8%89%BA%E6%9C%AF" class="nav-link" aria-label="Java å¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯"><!---->Java å¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯<!----></a></li><li class="dropdown-item"><a href="/reading-notes/%E5%AE%9E%E6%88%98Java%E8%99%9A%E6%8B%9F%E6%9C%BA%EF%BC%9AJVM%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD%E4%B8%8E%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96" class="nav-link" aria-label="å®æˆ˜ Java è™šæ‹Ÿæœºï¼šJVM æ•…éšœè¯Šæ–­ä¸æ€§èƒ½ä¼˜åŒ–"><!---->å®æˆ˜ Java è™šæ‹Ÿæœºï¼šJVM æ•…éšœè¯Šæ–­ä¸æ€§èƒ½ä¼˜åŒ–<!----></a></li><li class="dropdown-item"><a href="/reading-notes/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA%EF%BC%9AJVM%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5" class="nav-link" aria-label="æ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºï¼šJVM é«˜çº§ç‰¹æ€§ä¸æœ€ä½³å®è·µ"><!---->æ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºï¼šJVM é«˜çº§ç‰¹æ€§ä¸æœ€ä½³å®è·µ<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="leetcode"><span class="title"><span class="icon iconfont icon-note" style=""></span>leetcode</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/leetcode/Top100" class="nav-link" aria-label="Top 100"><!---->Top 100<!----></a></li></ul></button></div></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://gitee.com/anansneaker/vuepress-theme-hope" target="_blank" rel="noopener noreferrer" aria-label="Gitee"><svg xmlns="http://www.w3.org/2000/svg" class="icon gitee-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="gitee icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm242.97-533.34H482.39a23.7 23.7 0 0 0-23.7 23.7l-.03 59.28c0 13.08 10.59 23.7 23.7 23.7h165.96a23.7 23.7 0 0 1 23.7 23.7v11.85a71.1 71.1 0 0 1-71.1 71.1H375.71a23.7 23.7 0 0 1-23.7-23.7V423.11a71.1 71.1 0 0 1 71.1-71.1h331.8a23.7 23.7 0 0 0 23.7-23.7l.06-59.25a23.73 23.73 0 0 0-23.7-23.73H423.11a177.78 177.78 0 0 0-177.78 177.75v331.83c0 13.08 10.62 23.7 23.7 23.7h349.62a159.99 159.99 0 0 0 159.99-159.99V482.33a23.7 23.7 0 0 0-23.7-23.7z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" placeholder="æœç´¢" autocomplete="off" spellcheck="false" value><!----></form><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><p class="sidebar-heading active"><span class="icon iconfont icon-note" style=""></span><span class="title">è¯»ä¹¦ç¬”è®°</span><!----></p><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">Effective Java</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/reading-notes/Effective%20Java/%E7%AC%AC2%E7%AB%A0%20%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html" class="nav-link sidebar-link sidebar-page" aria-label="ç¬¬ 2 ç«  åˆ›å»ºå’Œé”€æ¯å¯¹è±¡"><!---->ç¬¬ 2 ç«  åˆ›å»ºå’Œé”€æ¯å¯¹è±¡<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/reading-notes/Effective%20Java/%E7%AC%AC3%E7%AB%A0%20%E5%AF%B9%E4%BA%8E%E6%89%80%E6%9C%89%E5%AF%B9%E8%B1%A1%E9%83%BD%E9%80%9A%E7%94%A8%E7%9A%84%E6%96%B9%E6%B3%95.html" class="nav-link sidebar-link sidebar-page" aria-label="ç¬¬ 3 ç«  å¯¹äºæ‰€æœ‰å¯¹è±¡éƒ½é€šç”¨çš„æ–¹æ³•"><!---->ç¬¬ 3 ç«  å¯¹äºæ‰€æœ‰å¯¹è±¡éƒ½é€šç”¨çš„æ–¹æ³•<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/reading-notes/Effective%20Java/%E7%AC%AC4%E7%AB%A0%20%E7%B1%BB%E5%92%8C%E6%8E%A5%E5%8F%A3.html" class="nav-link sidebar-link sidebar-page" aria-label="ç¬¬ 4 ç«  ç±»å’Œæ¥å£"><!---->ç¬¬ 4 ç«  ç±»å’Œæ¥å£<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/reading-notes/Effective%20Java/%E7%AC%AC5%E7%AB%A0%20%E6%B3%9B%E5%9E%8B.html" class="nav-link sidebar-link sidebar-page" aria-label="ç¬¬ 5 ç«  æ³›å‹"><!---->ç¬¬ 5 ç«  æ³›å‹<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/reading-notes/Effective%20Java/%E7%AC%AC6%E7%AB%A0%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%B3%A8%E8%A7%A3.html" class="nav-link sidebar-link sidebar-page" aria-label="ç¬¬ 6 ç«  æšä¸¾å’Œæ³¨è§£"><!---->ç¬¬ 6 ç«  æšä¸¾å’Œæ³¨è§£<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC7%E7%AB%A0%20Lambda%E5%92%8CStream.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="ç¬¬ 7 ç«  Lambda å’Œ Stream"><!---->ç¬¬ 7 ç«  Lambda å’Œ Stream<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC7%E7%AB%A0%20Lambda%E5%92%8CStream.html#ç¬¬-42-æ¡-lambda-ä¼˜å…ˆäºåŒ¿åç±»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¬¬ 42 æ¡ï¼šLambda ä¼˜å…ˆäºåŒ¿åç±»"><!---->ç¬¬ 42 æ¡ï¼šLambda ä¼˜å…ˆäºåŒ¿åç±»<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC7%E7%AB%A0%20Lambda%E5%92%8CStream.html#ç¬¬-43-æ¡-æ–¹æ³•å¼•ç”¨ä¼˜å…ˆäº-lambda" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¬¬ 43 æ¡ï¼šæ–¹æ³•å¼•ç”¨ä¼˜å…ˆäº Lambda"><!---->ç¬¬ 43 æ¡ï¼šæ–¹æ³•å¼•ç”¨ä¼˜å…ˆäº Lambda<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC7%E7%AB%A0%20Lambda%E5%92%8CStream.html#ç¬¬-44-æ¡-åšæŒä½¿ç”¨æ ‡å‡†çš„å‡½æ•°æ¥å£" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¬¬ 44 æ¡ï¼šåšæŒä½¿ç”¨æ ‡å‡†çš„å‡½æ•°æ¥å£"><!---->ç¬¬ 44 æ¡ï¼šåšæŒä½¿ç”¨æ ‡å‡†çš„å‡½æ•°æ¥å£<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC7%E7%AB%A0%20Lambda%E5%92%8CStream.html#ç¬¬-45-æ¡-è°¨æ…ä½¿ç”¨-stream" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¬¬ 45 æ¡ï¼šè°¨æ…ä½¿ç”¨ Stream"><!---->ç¬¬ 45 æ¡ï¼šè°¨æ…ä½¿ç”¨ Stream<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC7%E7%AB%A0%20Lambda%E5%92%8CStream.html#ç¬¬-46-æ¡-ä¼˜å…ˆé€‰æ‹©-stream-ä¸­æ— å‰¯ä½œç”¨çš„å‡½æ•°" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¬¬ 46 æ¡ï¼šä¼˜å…ˆé€‰æ‹© Stream ä¸­æ— å‰¯ä½œç”¨çš„å‡½æ•°"><!---->ç¬¬ 46 æ¡ï¼šä¼˜å…ˆé€‰æ‹© Stream ä¸­æ— å‰¯ä½œç”¨çš„å‡½æ•°<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC7%E7%AB%A0%20Lambda%E5%92%8CStream.html#ç¬¬-47-æ¡-stream-è¦ä¼˜å…ˆç”¨-collection-ä½œä¸ºè¿”å›ç±»å‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¬¬ 47 æ¡ï¼šStream è¦ä¼˜å…ˆç”¨ Collection ä½œä¸ºè¿”å›ç±»å‹"><!---->ç¬¬ 47 æ¡ï¼šStream è¦ä¼˜å…ˆç”¨ Collection ä½œä¸ºè¿”å›ç±»å‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC7%E7%AB%A0%20Lambda%E5%92%8CStream.html#ç¬¬-48-æ¡-è°¨æ…ä½¿ç”¨-stream-å¹¶è¡Œ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¬¬ 48 æ¡ï¼šè°¨æ…ä½¿ç”¨ Stream å¹¶è¡Œ"><!---->ç¬¬ 48 æ¡ï¼šè°¨æ…ä½¿ç”¨ Stream å¹¶è¡Œ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/reading-notes/Effective%20Java/%E7%AC%AC8%E7%AB%A0%20%E6%96%B9%E6%B3%95.html" class="nav-link sidebar-link sidebar-page" aria-label="ç¬¬ 8 ç« æ–¹æ³•"><!---->ç¬¬ 8 ç« æ–¹æ³•<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/reading-notes/Effective%20Java/%E7%AC%AC9%E7%AB%A0%20%E9%80%9A%E7%94%A8%E7%BC%96%E7%A8%8B.html" class="nav-link sidebar-link sidebar-page" aria-label="ç¬¬ 9 ç« é€šç”¨ç¼–ç¨‹"><!---->ç¬¬ 9 ç« é€šç”¨ç¼–ç¨‹<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/reading-notes/Effective%20Java/%E7%AC%AC10%E7%AB%A0%20%E5%BC%82%E5%B8%B8.html" class="nav-link sidebar-link sidebar-page" aria-label="ç¬¬ 10 ç« å¼‚å¸¸"><!---->ç¬¬ 10 ç« å¼‚å¸¸<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/reading-notes/Effective%20Java/%E7%AC%AC11%E7%AB%A0%20%E5%B9%B6%E5%8F%91.html" class="nav-link sidebar-link sidebar-page" aria-label="ç¬¬ 11 ç« å¹¶å‘"><!---->ç¬¬ 11 ç« å¹¶å‘<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/reading-notes/Effective%20Java/%E7%AC%AC12%E7%AB%A0%20%E5%BA%8F%E5%88%97%E5%8C%96.html" class="nav-link sidebar-link sidebar-page" aria-label="ç¬¬ 12 ç« åºåˆ—åŒ–"><!---->ç¬¬ 12 ç« åºåˆ—åŒ–<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Java ç¼–ç¨‹çš„é€»è¾‘</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Java å¹¶å‘ç¼–ç¨‹å®æˆ˜</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Javaå¤šçº¿ç¨‹ç¼–ç¨‹æ ¸å¿ƒæŠ€æœ¯</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Java å¹¶å‘ç¼–ç¨‹ä¹‹ç¾</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Java å¹¶å‘å®ç°åŸç†ï¼šJDK æºç å‰–æ</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">å®æˆ˜ Java é«˜å¹¶å‘ç¨‹åºè®¾è®¡</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Java å¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">å®æˆ˜ Java è™šæ‹Ÿæœºï¼šJVM æ•…éšœè¯Šæ–­ä¸æ€§èƒ½ä¼˜åŒ–</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">æ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºï¼šJVM é«˜çº§ç‰¹æ€§ä¸æœ€ä½³å®è·µ</span><span class="arrow right"></span></button><!----></section><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-note" style=""></span><span class="title">leetcode</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/leetcode/Top100/" class="nav-link sidebar-link sidebar-page" aria-label="Top 100"><!---->Top 100<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->ç¬¬ 7 ç«  Lambda å’Œ Stream</h1><div class="page-info"><span class="author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down" localizeddate="2022å¹´6æœˆ16æ—¥" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://www.cxlsn.cn/" target="_blank" rel="noopener noreferrer">é˜¿æ¥ sneaker</a></span><span property="author" content="é˜¿æ¥ sneaker"></span></span><!----><span class="date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022å¹´6æœˆ16æ—¥</span><meta property="datePublished" content="2022-06-16T01:04:26.000Z"></span><!----><!----><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down" localizeddate="2022å¹´6æœˆ16æ—¥" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 60 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT60M"></span><span class="words-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="down" localizeddate="2022å¹´6æœˆ16æ—¥" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 17895 å­—</span><meta property="wordCount" content="17895"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC7%E7%AB%A0%20Lambda%E5%92%8CStream.html#ç¬¬-42-æ¡-lambda-ä¼˜å…ˆäºåŒ¿åç±»" class="router-link-active router-link-exact-active toc-link level2">ç¬¬ 42 æ¡ï¼šLambda ä¼˜å…ˆäºåŒ¿åç±»</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC7%E7%AB%A0%20Lambda%E5%92%8CStream.html#ç¬¬-43-æ¡-æ–¹æ³•å¼•ç”¨ä¼˜å…ˆäº-lambda" class="router-link-active router-link-exact-active toc-link level2">ç¬¬ 43 æ¡ï¼šæ–¹æ³•å¼•ç”¨ä¼˜å…ˆäº Lambda</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC7%E7%AB%A0%20Lambda%E5%92%8CStream.html#ç¬¬-44-æ¡-åšæŒä½¿ç”¨æ ‡å‡†çš„å‡½æ•°æ¥å£" class="router-link-active router-link-exact-active toc-link level2">ç¬¬ 44 æ¡ï¼šåšæŒä½¿ç”¨æ ‡å‡†çš„å‡½æ•°æ¥å£</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC7%E7%AB%A0%20Lambda%E5%92%8CStream.html#ç¬¬-45-æ¡-è°¨æ…ä½¿ç”¨-stream" class="router-link-active router-link-exact-active toc-link level2">ç¬¬ 45 æ¡ï¼šè°¨æ…ä½¿ç”¨ Stream</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC7%E7%AB%A0%20Lambda%E5%92%8CStream.html#ç¬¬-46-æ¡-ä¼˜å…ˆé€‰æ‹©-stream-ä¸­æ— å‰¯ä½œç”¨çš„å‡½æ•°" class="router-link-active router-link-exact-active toc-link level2">ç¬¬ 46 æ¡ï¼šä¼˜å…ˆé€‰æ‹© Stream ä¸­æ— å‰¯ä½œç”¨çš„å‡½æ•°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC7%E7%AB%A0%20Lambda%E5%92%8CStream.html#ç¬¬-47-æ¡-stream-è¦ä¼˜å…ˆç”¨-collection-ä½œä¸ºè¿”å›ç±»å‹" class="router-link-active router-link-exact-active toc-link level2">ç¬¬ 47 æ¡ï¼šStream è¦ä¼˜å…ˆç”¨ Collection ä½œä¸ºè¿”å›ç±»å‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/reading-notes/Effective%20Java/%E7%AC%AC7%E7%AB%A0%20Lambda%E5%92%8CStream.html#ç¬¬-48-æ¡-è°¨æ…ä½¿ç”¨-stream-å¹¶è¡Œ" class="router-link-active router-link-exact-active toc-link level2">ç¬¬ 48 æ¡ï¼šè°¨æ…ä½¿ç”¨ Stream å¹¶è¡Œ</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="ç¬¬-7-ç« -lambda-å’Œ-stream" tabindex="-1"><a class="header-anchor" href="#ç¬¬-7-ç« -lambda-å’Œ-stream" aria-hidden="true">#</a> ç¬¬ 7 ç«  Lambda å’Œ Stream</h1><p>åœ¨ Java 8 ä¸­ï¼Œå¢åŠ äº†å‡½æ•°æ¥å£ã€Lambda å’Œæ–¹æ³•å¼•ç”¨ï¼Œä½¿å¾—åˆ›å»ºå‡½æ•°å¯¹è±¡å˜å¾—å¾ˆå®¹æ˜“ã€‚ä¸æ­¤åŒæ—¶ï¼Œè¿˜å¢åŠ äº† Stream APIï¼Œä¸ºå¤„ç†æ•°æ®å…ƒç´ çš„åºåˆ—æä¾›äº†ç±»åº“çº§åˆ«çš„æ”¯æŒã€‚åœ¨æœ¬ç« ä¸­ï¼Œå°†è®¨è®ºå¦‚ä½•æœ€ä½³åœ°åˆ©ç”¨è¿™äº›æœºåˆ¶ã€‚</p><h2 id="ç¬¬-42-æ¡-lambda-ä¼˜å…ˆäºåŒ¿åç±»" tabindex="-1"><a class="header-anchor" href="#ç¬¬-42-æ¡-lambda-ä¼˜å…ˆäºåŒ¿åç±»" aria-hidden="true">#</a> ç¬¬ 42 æ¡ï¼šLambda ä¼˜å…ˆäºåŒ¿åç±»</h2><p>æ ¹æ®ä»¥å¾€çš„ç»éªŒï¼Œæ˜¯ç”¨å¸¦æœ‰å•ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼ˆæˆ–è€…ï¼Œå‡ ä¹éƒ½ä¸æ˜¯æŠ½è±¡ç±»ï¼‰ä½œä¸ºå‡½æ•°ç±»å‹ã€‚å®ƒä»¬çš„å®ä¾‹ç§°ä½œå‡½æ•°å¯¹è±¡ï¼Œè¡¨ç¤ºå‡½æ•°æˆ–è€…è¦é‡‡å–çš„åŠ¨ä½œã€‚è‡ªä» 1997 å¹´å‘å¸ƒ JDK 1.1 ä»¥æ¥ï¼Œåˆ›å»ºå‡½æ•°å¯¹è±¡çš„ä¸»è¦æ–¹å¼æ˜¯é€šè¿‡åŒ¿åç±»ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæŒ‰ç…§å­—ç¬¦ä¸²çš„é•¿åº¦å¯¹å­—ç¬¦ä¸²åˆ—è¡¨è¿›è¡Œæ’åºçš„ä»£ç ç‰‡æ®µï¼Œå®ƒç”¨ä¸€ä¸ªåŒ¿åç±»åˆ›å»ºäº†æ’åºçš„æ¯”è¾ƒå‡½æ•°ï¼ˆåŠ å¼ºæ’åˆ—é¡ºåºï¼‰ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Anonymous class instance as a function object - obsolete!</span>
<span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>words<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">String</span> s1<span class="token punctuation">,</span> <span class="token class-name">String</span> s2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> s2<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>ï¼›
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åŒ¿åç±»æ»¡è¶³äº†ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡çš„è®¾è®¡æ¨¡å¼å¯¹å‡½æ•°å¯¹è±¡çš„éœ€æ±‚ï¼Œæœ€è‘—åçš„æœ‰ç­–ç•¥æ¨¡å¼ã€‚Comparator æ¥å£ä»£è¡¨ä¸€ç§æ’åºçš„æŠ½è±¡ç­–ç•¥ï¼›ä¸Šè¿°</p><p>çš„åŒ¿åç±»åˆ™æ˜¯ä¸ºå­—ç¬¦ä¸²æ’åºçš„ä¸€ç§å…·ä½“ç­–ç•¥ã€‚ä½†æ˜¯ï¼ŒåŒ¿åç±»çš„çƒ¦çä½¿å¾—åœ¨ Java ä¸­è¿›è¡Œå‡½æ•°ç¼–ç¨‹çš„å‰æ™¯å˜å¾—ååˆ†é»¯æ·¡ã€‚</p><p>åœ¨ Java 8 ä¸­ï¼Œå½¢æˆäº†â€œå¸¦æœ‰å•ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£æ˜¯ç‰¹æ®Šçš„ï¼Œå€¼å¾—ç‰¹æ®Šå¯¹å¾…â€çš„è§‚å¿µã€‚è¿™äº›æ¥å£ç°åœ¨è¢«ç§°ä½œå‡½æ•°æ¥å£ï¼ŒJava å…è®¸åˆ©ç”¨ Lambda è¡¨è¾¾å¼åˆ›å»ºè¿™äº›æ¥å£çš„å®ä¾‹ã€‚Lambda ç±»ä¼¼äºåŒ¿åç±»çš„å‡½æ•°ï¼Œä½†æ˜¯æ¯”å®ƒç®€æ´å¾—å¤šã€‚ä»¥ä¸‹æ˜¯ä¸Šè¿°ä»£ç ç”¨ Lambda ä»£æ›¿åŒ¿åç±»ä¹‹åçš„æ ·å­ã€‚æ ·æ¿ä»£ç æ²¡æœ‰äº†ï¼Œå…¶è¡Œä¸ºä¹Ÿååˆ†æ˜ç¡®ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Lambda expression as function object (replaces anonymous class)</span>
<span class="token class-name">Col1ections</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>words<span class="token punctuation">,</span> <span class="token punctuation">(</span>s1<span class="token punctuation">,</span> s2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>sl<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> s2<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>ï¼›
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼ŒLambda çš„ç±»å‹ï¼ˆComparator&lt;String&gt;ï¼‰ï¼Œå…¶å‚æ•°çš„ç±»å‹ï¼ˆs1 å’Œ s2ï¼Œä¸¤ä¸ªéƒ½æ˜¯ Stringï¼‰åŠå…¶è¿”å›å€¼çš„ç±»å‹ï¼ˆintï¼‰ï¼Œéƒ½æ²¡æœ‰å‡ºç°åœ¨ä»£ç ä¸­ã€‚ç¼–è¯‘å™¨åˆ©ç”¨ä¸€ä¸ªç§°ä½œç±»å‹æ¨å¯¼çš„è¿‡ç¨‹ï¼Œæ ¹æ®ä¸Šä¸‹æ–‡æ¨æ–­å‡ºè¿™äº›ç±»å‹ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨æ— æ³•ç¡®å®šç±»å‹ï¼Œä½ å°±å¿…é¡»æŒ‡å®šã€‚ç±»å‹æ¨å¯¼çš„è§„åˆ™å¾ˆå¤æ‚ã€‚å‡ ä¹æ²¡æœ‰ç¨‹åºå‘˜èƒ½å¤Ÿè¯¦ç»†äº†è§£è¿™äº›è§„åˆ™ï¼Œä½†æ˜¯æ²¡å…³ç³»ã€‚åˆ é™¤æ‰€æœ‰ Lambda å‚æ•°çš„ç±»å‹å§ï¼Œé™¤éå®ƒä»¬çš„å­˜åœ¨èƒ½å¤Ÿä½¿ç¨‹åºå˜å¾—æ›´åŠ æ¸…æ™°ã€‚å¦‚æœç¼–è¯‘å™¨äº§ç”Ÿä¸€æ¡é”™è¯¯æ¶ˆæ¯ï¼Œå‘Šè¯‰ä½ æ— æ³•æ¨å¯¼å‡º Lambda å‚æ•°çš„ç±»å‹ï¼Œé‚£ä¹ˆä½ å°±æŒ‡å®šç±»å‹ã€‚æœ‰æ—¶å€™è¿˜éœ€è¦è½¬æ¢è¿”å›å€¼æˆ–è€…æ•´ä¸ª Lambda è¡¨è¾¾å¼ï¼Œä½†æ˜¯è¿™ç§æƒ…å†µå¾ˆå°‘è§ã€‚</p><p>å…³äºç±»å‹æ¨å¯¼åº”è¯¥å¢åŠ ä¸€æ¡è­¦å‘Šã€‚ç¬¬ 26 æ¡å‘Šè¯‰ä½ ä¸è¦ä½¿ç”¨åŸç”Ÿæ€ç±»å‹ï¼Œç¬¬ 29 æ¡è¯´è¿‡è¦æ”¯æŒæ³›å‹ç±»å‹ï¼Œç¬¬ 30 æ¡è¯´è¿‡è¦æ”¯æŒæ³›å‹æ–¹æ³•ã€‚åœ¨ä½¿ç”¨ Lambda æ—¶ï¼Œè¿™æ¡å»ºè®®ç¡®å®éå¸¸é‡è¦ï¼Œå› ä¸ºç¼–è¯‘å™¨æ˜¯ä»æ³›å‹è·å–åˆ°å¾—ä»¥æ‰§è¡Œç±»å‹æ¨å¯¼çš„å¤§éƒ¨åˆ†ç±»å‹ä¿¡æ¯çš„ã€‚å¦‚æœä½ æ²¡æœ‰æä¾›è¿™äº›ä¿¡æ¯ï¼Œç¼–è¯‘å™¨å°±æ— æ³•è¿›è¡Œç±»å‹æ¨å¯¼ï¼Œä½ å°±å¿…é¡»åœ¨ Lambda ä¸­æ‰‹å·¥æŒ‡å®šç±»å‹ï¼Œè¿™æ ·æå¤§åœ°å¢åŠ äº†å®ƒä»¬çš„çƒ¦çç¨‹åº¦ã€‚å¦‚æœä¸Šè¿°ä»£ç ç‰‡æ®µä¸­çš„å˜é‡ words å£°æ˜ä¸ºåŸç”Ÿæ€ç±»å‹ Listï¼Œè€Œä¸æ˜¯å‚æ•°åŒ–çš„ç±»å‹ List&lt;String&gt;ï¼Œå®ƒå°±ä¸ä¼šè¿›è¡Œç¼–è¯‘ã€‚</p><p>å½“ç„¶ï¼Œå¦‚æœç”¨ Lambda è¡¨è¾¾å¼ä»£æ›¿æ¯”è¾ƒå™¨æ„é€ æ–¹æ³•ï¼Œæœ‰æ—¶è¿™ä¸ªä»£ç ç‰‡æ®µä¸­çš„æ¯”è¾ƒå™¨è¿˜ä¼šæ›´åŠ ç®€ç»ƒï¼š</p><p><code>Collections.sort(words, comparingInt(String::length));</code></p><p>äº‹å®ä¸Šï¼Œå¦‚æœåˆ©ç”¨ Java 8 åœ¨ List æ¥å£ä¸­æ·»åŠ çš„ sort æ–¹æ³•ï¼Œè¿™ä¸ªä»£ç ç‰‡æ®µè¿˜å¯ä»¥æ›´åŠ ç®€çŸ­ä¸€äº›ï¼š</p><p><code>words.sort(comparingInt(String::length));</code></p><p>Java ä¸­å¢åŠ äº† Lambda ä¹‹åï¼Œä½¿å¾—ä¹‹å‰ä¸èƒ½ä½¿ç”¨å‡½æ•°å¯¹è±¡çš„åœ°æ–¹ç°åœ¨ä¹Ÿèƒ½ä½¿ç”¨äº†ã€‚ä¾‹å¦‚ï¼ŒOperation æšä¸¾ç±»å‹ä¸ºä¾‹ã€‚ç”±äºæ¯ä¸ªæšä¸¾çš„ apply æ–¹æ³•éƒ½éœ€è¦ä¸åŒçš„è¡Œä¸ºï¼Œæˆ‘ä»¬ç”¨äº†ç‰¹å®šäºå¸¸é‡çš„ç±»ä¸»ä½“ï¼Œå¹¶è¦†ç›–äº†æ¯ä¸ªæšä¸¾å¸¸é‡ä¸­çš„ apply æ–¹æ³•ã€‚é€šè¿‡ä»¥ä¸‹ä»£ç å›é¡¾ä¸€ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Enum type with constant-specific class bodies and data</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Operation</span> <span class="token punctuation">{</span>
    <span class="token function">PLUS</span><span class="token punctuation">(</span><span class="token string">&quot;+&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">MINUS</span><span class="token punctuation">(</span><span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> x <span class="token operator">-</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">TIMES</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> x <span class="token operator">*</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">DIVIDE</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> x <span class="token operator">/</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> symbol<span class="token punctuation">;</span>

    <span class="token class-name">Operation</span><span class="token punctuation">(</span><span class="token class-name">String</span> symbol<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>symbol <span class="token operator">=</span> symbol<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> symbol<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æšä¸¾å®ä¾‹åŸŸä¼˜å…ˆäºç‰¹å®šäºå¸¸é‡çš„ç±»ä¸»ä½“ã€‚Lambda ä½¿å¾—åˆ©ç”¨å‰è€…å®ç°ç‰¹å®šäºå¸¸é‡çš„è¡Œä¸ºå˜å¾—æ¯”ç”¨åè€…æ¥å¾—æ›´åŠ å®¹æ˜“äº†ã€‚åªè¦ç»™æ¯ä¸ªæšä¸¾å¸¸é‡çš„æ„é€ å™¨ä¼ é€’ä¸€ä¸ªå®ç°å…¶è¡Œä¸ºçš„ Lambda å³å¯ã€‚æ„é€ å™¨å°† Lambda ä¿å­˜åœ¨ä¸€ä¸ªå®ä¾‹åŸŸä¸­ï¼Œapply æ–¹æ³•å†å°†è°ƒç”¨è½¬ç»™ Lambdaã€‚ç”±æ­¤å¾—åˆ°çš„ä»£ç æ¯”åŸæ¥çš„ç‰ˆæœ¬æ›´ç®€å•ï¼Œä¹Ÿæ›´åŠ æ¸…æ™°ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Enum with function object fields &amp; constant-specific behavior</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Operation</span> <span class="token punctuation">{</span>
    <span class="token function">PLUS</span><span class="token punctuation">(</span><span class="token string">&quot;+&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> x <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">MINUS</span><span class="token punctuation">(</span><span class="token string">&quot;-&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> x <span class="token operator">-</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">TIMES</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> x <span class="token operator">*</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">DIVIDE</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> x <span class="token operator">/</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> symbol<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">DoubleBinaryOperator</span> op<span class="token punctuation">;</span>

    <span class="token class-name">Operation</span><span class="token punctuation">(</span><span class="token class-name">String</span> symbol<span class="token punctuation">,</span> <span class="token class-name">DoubleBinaryOperator</span> op<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>symbol <span class="token operator">=</span> symbol<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>op <span class="token operator">=</span> op<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> symbol<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> op<span class="token punctuation">.</span><span class="token function">applyAsDouble</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼Œè¿™é‡Œç»™ Lambda ä½¿ç”¨äº† DoubleBinaryOperator æ¥å£ï¼Œä»£è¡¨æšä¸¾å¸¸é‡çš„è¡Œä¸ºã€‚è¿™æ˜¯åœ¨ java.util.function ä¸­é¢„å®šä¹‰çš„ä¼—å¤šå‡½æ•°æ¥å£ä¹‹ä¸€ã€‚å®ƒè¡¨ç¤ºä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ª double å‚æ•°çš„å‡½æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ª double ç»“æœã€‚</p><p>çœ‹çœ‹åŸºäº Lambda çš„ Operation æšä¸¾ï¼Œä½ å¯èƒ½ä¼šæƒ³ï¼Œç‰¹å®šäºå¸¸é‡çš„æ–¹æ³•ä¸»ä½“å·²ç»å½¢åŒè™šè®¾äº†ï¼Œä½†æ˜¯å®é™…å¹¶éå¦‚æ­¤ã€‚ä¸æ–¹æ³•å’Œç±»ä¸åŒçš„æ˜¯ï¼ŒLambda æ²¡æœ‰åç§°å’Œæ–‡æ¡£ï¼›å¦‚æœä¸€ä¸ªè®¡ç®—æœ¬èº«ä¸æ˜¯è‡ªæè¿°çš„ï¼Œæˆ–è€…è¶…å‡ºäº†å‡ è¡Œï¼Œé‚£å°±ä¸è¦æŠŠå®ƒæ”¾åœ¨ä¸€ä¸ª Lambda ä¸­ã€‚å¯¹äº Lambda è€Œè¨€ï¼Œä¸€è¡Œæ˜¯æœ€ç†æƒ³çš„ï¼Œä¸‰è¡Œæ˜¯åˆç†çš„æœ€å¤§æé™ã€‚å¦‚æœè¿èƒŒäº†è¿™ä¸ªè§„åˆ™ï¼Œå¯èƒ½å¯¹ç¨‹åºçš„å¯è¯»æ€§é€ æˆä¸¥é‡çš„å±å®³ã€‚å¦‚æœ Lambda å¾ˆé•¿æˆ–è€…éš¾ä»¥é˜…è¯»ï¼Œè¦ä¹ˆæ‰¾ä¸€ç§æ–¹æ³•å°†å®ƒç®€åŒ–ï¼Œè¦ä¹ˆé‡æ„ç¨‹åºæ¥æ¶ˆé™¤å®ƒã€‚è€Œä¸”ï¼Œä¼ å…¥æšä¸¾æ„é€ å™¨çš„å‚æ•°æ˜¯åœ¨é™æ€çš„ç¯å¢ƒä¸­è®¡ç®—çš„ã€‚å› è€Œï¼Œæšä¸¾æ„é€ å™¨ä¸­çš„ Lambda æ— æ³•è®¿é—®æšä¸¾çš„å®ä¾‹æˆå‘˜ã€‚å¦‚æœæšä¸¾ç±»å‹å¸¦æœ‰éš¾ä»¥ç†è§£çš„ç‰¹å®šäºå¸¸é‡çš„è¡Œä¸ºï¼Œæˆ–è€…æ— æ³•åœ¨å‡ è¡Œä¹‹å†…å®ç°ï¼Œåˆæˆ–è€…éœ€è¦è®¿é—®å®ä¾‹åŸŸæˆ–æ–¹æ³•ï¼Œé‚£ä¹ˆç‰¹å®šäºå¸¸é‡çš„ç±»ä¸»ä½“ä»ç„¶æ˜¯é¦–é€‰ã€‚</p><p>åŒæ ·åœ°ï¼Œä½ å¯èƒ½ä¼šè®¤ä¸ºï¼Œåœ¨ Lambda æ—¶ä»£ï¼ŒåŒ¿åç±»å·²ç»è¿‡æ—¶äº†ã€‚è¿™ç§æƒ³æ³•æ¯”è¾ƒæ¥è¿‘äº‹å®ï¼Œä½†æ˜¯ä»æœ‰ä¸€äº›å·¥ä½œç”¨ Lambda æ— æ³•å®Œæˆï¼Œåªèƒ½ç”¨åŒ¿åç±»æ‰èƒ½å®Œæˆã€‚Lambda é™äºå‡½æ•°æ¥å£ã€‚å¦‚æœæƒ³åˆ›å»ºæŠ½è±¡ç±»çš„å®ä¾‹ï¼Œå¯ä»¥ç”¨åŒ¿åç±»æ¥å®Œæˆï¼Œè€Œä¸æ˜¯ç”¨ Lambdaã€‚åŒæ ·åœ°ï¼Œå¯ä»¥ç”¨åŒ¿åç±»ä¸ºå¸¦æœ‰å¤šä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£åˆ›å»ºå®ä¾‹ã€‚æœ€åä¸€ç‚¹ï¼ŒLambda æ— æ³•è·å¾—å¯¹è‡ªèº«çš„å¼•ç”¨ã€‚åœ¨ Lambda ä¸­ï¼Œå…³é”®å­— this æ˜¯æŒ‡å¤–å›´å®ä¾‹ï¼Œè¿™ä¸ªé€šå¸¸æ­£æ˜¯ä½ æƒ³è¦çš„ã€‚åœ¨åŒ¿åç±»ä¸­ï¼Œå…³é”®å­— this æ˜¯æŒ‡åŒ¿åç±»å®ä¾‹ã€‚å¦‚æœéœ€è¦ä»å‡½æ•°å¯¹è±¡çš„ä¸»ä½“å†…éƒ¨è®¿é—®å®ƒï¼Œå°±å¿…é¡»ä½¿ç”¨åŒ¿åç±»ã€‚</p><p>Lambda ä¸åŒ¿åç±»å…±äº«ä½ æ— æ³•å¯é åœ°é€šè¿‡å®ç°æ¥åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„å±æ€§ã€‚å› æ­¤ï¼Œå°½å¯èƒ½ä¸è¦ï¼ˆé™¤éè¿«ä¸å¾—å·²ï¼‰åºåˆ—åŒ–ä¸€ä¸ª Lambdaï¼ˆæˆ–è€…åŒ¿åç±»å®ä¾‹ï¼‰ã€‚å¦‚æœæƒ³è¦å¯åºåˆ—åŒ–çš„å‡½æ•°å¯¹è±¡ï¼Œå¦‚ Comparatorï¼Œå°±ä½¿ç”¨ç§æœ‰é™æ€åµŒå¥—ç±»çš„å®ä¾‹ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼Œä» Java 8 å¼€å§‹ï¼ŒLambda å°±æˆäº†è¡¨ç¤ºå°å‡½æ•°å¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚åƒä¸‡ä¸è¦ç»™å‡½æ•°å¯¹è±¡ä½¿ç”¨åŒ¿åç±»ï¼Œé™¤éå¿…é¡»åˆ›å»ºéå‡½æ•°æ¥å£çš„ç±»å‹çš„å®ä¾‹ã€‚åŒæ—¶ï¼Œè¿˜è¦è®°ä½ï¼ŒLambda ä½¿å¾—è¡¨ç¤ºå°å‡½æ•°å¯¹è±¡å˜å¾—å¦‚æ­¤è½»æ¾ï¼Œå› æ­¤æ‰“å¼€äº†ä¹‹å‰ä»æœªå®è·µè¿‡çš„åœ¨ Java ä¸­è¿›è¡Œå‡½æ•°ç¼–ç¨‹çš„å¤§é—¨ã€‚</p><h2 id="ç¬¬-43-æ¡-æ–¹æ³•å¼•ç”¨ä¼˜å…ˆäº-lambda" tabindex="-1"><a class="header-anchor" href="#ç¬¬-43-æ¡-æ–¹æ³•å¼•ç”¨ä¼˜å…ˆäº-lambda" aria-hidden="true">#</a> ç¬¬ 43 æ¡ï¼šæ–¹æ³•å¼•ç”¨ä¼˜å…ˆäº Lambda</h2><p>ä¸åŒ¿åç±»ç›¸æ¯”ï¼ŒLambda çš„ä¸»è¦ä¼˜åŠ¿åœ¨äºæ›´åŠ ç®€æ´ã€‚Java æä¾›äº†ç”Ÿæˆæ¯” Lambda æ›´ç®€æ´å‡½æ•°å¯¹è±¡çš„æ–¹æ³•ï¼šæ–¹æ³•å¼•ç”¨ã€‚ä»¥ä¸‹ä»£ç ç‰‡æ®µçš„æºç¨‹åºæ˜¯ç”¨æ¥ä¿æŒä»ä»»æ„é”®åˆ° Integer å€¼çš„ä¸€ä¸ªæ˜ å°„ã€‚å¦‚æœè¿™ä¸ªå€¼ä¸ºè¯¥é”®çš„å®ä¾‹æ•°ç›®ï¼Œé‚£ä¹ˆè¿™æ®µç¨‹åºå°±æ˜¯ä¸€ä¸ªå¤šé›†åˆçš„å®ç°ã€‚è¿™ä¸ªä»£ç ç‰‡æ®µçš„ä½œç”¨æ˜¯ï¼Œå½“è¿™ä¸ªé”®ä¸åœ¨æ˜ å°„ä¸­æ—¶ï¼Œå°†æ•°å­— 1 å’Œé”®å…³è”èµ·æ¥ï¼›æˆ–è€…å½“è¿™ä¸ªé”®å·²ç»å­˜åœ¨ï¼Œå°±è´Ÿè´£é€’å¢è¯¥å…³è”å€¼ï¼š</p><p><code>map.merge(key, 1, (count, incr) -&gt; count + incr);</code></p><p>æ³¨æ„ï¼Œè¿™è¡Œä»£ç ä¸­ä½¿ç”¨äº† merge æ–¹æ³•ï¼Œè¿™æ˜¯ Java 8 ç‰ˆæœ¬åœ¨ Map æ¥å£ä¸­æ·»åŠ çš„ã€‚å¦‚æœæŒ‡å®šçš„é”®æ²¡æœ‰æ˜ å°„ï¼Œè¯¥æ–¹æ³•å°±ä¼šæ’å…¥æŒ‡å®šå€¼ï¼›å¦‚æœæœ‰æ˜ å°„å­˜åœ¨ï¼Œmerge æ–¹æ³•å°±ä¼šå°†æŒ‡å®šçš„å‡½æ•°åº”ç”¨åˆ°å½“å‰å€¼å’ŒæŒ‡å®šå€¼ä¸Šï¼Œå¹¶ç”¨ç»“æœè¦†ç›–å½“å‰å€¼ã€‚è¿™è¡Œä»£ç ä»£è¡¨äº† merge æ–¹æ³•çš„å…¸å‹ç”¨ä¾‹ã€‚</p><p>è¿™æ ·çš„ä»£ç è¯»èµ·æ¥æ¸…æ™°æ˜äº†ï¼Œä½†ä»æœ‰äº›æ ·æ¿ä»£ç ã€‚å‚æ•° count å’Œ incr æ²¡æœ‰æ·»åŠ å¤ªå¤šä»·å€¼ï¼Œå´å ç”¨äº†ä¸å°‘ç©ºé—´ã€‚å®é™…ä¸Šï¼ŒLambda è¦å‘Šè¯‰ä½ çš„å°±æ˜¯ï¼Œè¯¥å‡½æ•°è¿”å›çš„æ˜¯å®ƒä¸¤ä¸ªå‚æ•°çš„å’Œã€‚ä» Java 8 å¼€å§‹ï¼ŒIntegerï¼ˆä»¥åŠæ‰€æœ‰å…¶ä»–çš„æ•°å­—åŒ–åŸºæœ¬åŒ…è£…ç±»å‹éƒ½ï¼‰æä¾›äº†ä¸€ä¸ªåä¸º sum çš„é™æ€æ–¹æ³•ï¼Œå®ƒçš„ä½œç”¨ä¹ŸåŒæ ·æ˜¯æ±‚å’Œã€‚æˆ‘ä»¬åªè¦ä¼ å…¥ä¸€ä¸ªå¯¹è¯¥æ–¹æ³•çš„å¼•ç”¨ï¼Œå°±å¯ä»¥æ›´è½»æ¾åœ°å¾—åˆ°ç›¸åŒçš„ç»“æœï¼š</p><p><code>map.merge(key, 1, Integer::sum);</code></p><p>æ–¹æ³•å¸¦çš„å‚æ•°è¶Šå¤šèƒ½ç”¨æ–¹æ³•å¼•ç”¨æ¶ˆé™¤çš„æ ·æ¿ä»£ç å°±è¶Šå¤šã€‚ä½†åœ¨æœ‰äº› Lambda ä¸­ï¼Œå³ä¾¿å®ƒæ›´é•¿ï¼Œä½†ä½ æ‰€é€‰æ‹©çš„å‚æ•°åç§°æä¾›äº†éå¸¸æœ‰ç”¨çš„æ–‡æ¡£ä¿¡æ¯ï¼Œä¹Ÿä¼šä½¿å¾— Lambda çš„å¯è¯»æ€§æ›´å¼ºï¼Œå¹¶ä¸”æ¯”æ–¹æ³•å¼•ç”¨æ›´æ˜“äºç»´æŠ¤ã€‚</p><p>åªè¦æ–¹æ³•å¼•ç”¨èƒ½åšçš„äº‹ï¼Œå°±æ²¡æœ‰ Lambda ä¸èƒ½å®Œæˆçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨æ–¹æ³•å¼•ç”¨é€šå¸¸èƒ½å¤Ÿå¾—åˆ°æ›´åŠ ç®€çŸ­ã€æ¸…æ™°çš„ä»£ç ã€‚å¦‚æœ Lambda å¤ªé•¿ï¼Œæˆ–è€…è¿‡äºå¤æ‚ï¼Œè¿˜æœ‰å¦ä¸€ç§é€‰æ‹©ï¼šä» Lambda ä¸­æå–ä»£ç ï¼Œæ”¾åˆ°ä¸€ä¸ªæ–°çš„æ–¹æ³•ä¸­ï¼Œå¹¶ç”¨è¯¥æ–¹æ³•çš„ä¸€ä¸ªå¼•ç”¨ä»£æ›¿ Lambdaã€‚ä½ å¯ä»¥ç»™è¿™ä¸ªæ–¹æ³•èµ·ä¸€ä¸ªæœ‰æ„ä¹‰çš„åå­—ï¼Œå¹¶ç”¨è‡ªå·±æ»¡æ„çš„æ–¹å¼ç¼–å†™è¿›å…¥æ–‡æ¡£ã€‚</p><p>å¦‚æœæ˜¯ç”¨ IDE ç¼–ç¨‹ï¼Œåˆ™å¯ä»¥åœ¨ä»»ä½•å¯èƒ½çš„åœ°æ–¹éƒ½ç”¨æ–¹æ³•å¼•ç”¨ä»£æ›¿ Lambdaã€‚é€šå¸¸ï¼ˆä½†å¹¶éæ€»æ˜¯ï¼‰åº”è¯¥è®© IDE æŠŠæ¡æœºä¼šå¥½å¥½è¡¨ç°ä¸€ä¸‹ã€‚æœ‰æ—¶å€™ï¼ŒLambda ä¹Ÿä¼šæ¯”æ–¹æ³•å¼•ç”¨æ›´åŠ ç®€æ´æ˜äº†ã€‚è¿™ç§æƒ…å†µå¤§å¤šæ˜¯å½“æ–¹æ³•ä¸ Lambda å¤„åœ¨åŒä¸€ä¸ªç±»ä¸­çš„æ—¶å€™ã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µï¼Œå‡å®šå‘ç”Ÿåœ¨ä¸€ä¸ªåä¸º GoshThisClassNameIsHumongous çš„ç±»ä¸­ï¼š</p><p><code>service.execute(GoshThisClassNameIsHumongous::action);</code></p><p>Lambda ç‰ˆæœ¬çš„ä»£ç å¦‚ä¸‹ï¼š</p><p><code>service.execute(() -&gt; action());</code></p><p>è¿™ä¸ªä»£ç ç‰‡æ®µä½¿ç”¨äº†æ–¹æ³•å¼•ç”¨ï¼Œä½†æ˜¯å®ƒæ—¢ä¸æ¯” Lambda æ›´ç®€çŸ­ï¼Œä¹Ÿä¸æ¯”å®ƒæ›´æ¸…æ™°ï¼Œå› æ­¤åº”è¯¥ä¼˜å…ˆè€ƒè™‘ Lambdaã€‚ç±»ä¼¼çš„è¿˜æœ‰ Function æ¥å£ï¼Œå®ƒç”¨ä¸€ä¸ªé™æ€å·¥å‚æ–¹æ³•è¿”å› id å‡½æ•° Function.identity()ã€‚å¦‚æœå®ƒä¸ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè€Œæ˜¯åœ¨è¡Œå†…ç¼–å†™åŒç­‰çš„ Lambda è¡¨è¾¾å¼ï¼šx -&gt; xï¼Œä¸€èˆ¬ä¼šæ¯”è¾ƒç®€æ´æ˜äº†ã€‚</p><p>è®¸å¤šæ–¹æ³•å¼•ç”¨éƒ½æŒ‡å‘é™æ€æ–¹æ³•ï¼Œä½†å…¶ä¸­æœ‰ 4 ç§æ²¡æœ‰è¿™ä¹ˆåšã€‚å…¶ä¸­ä¸¤ä¸ªæ˜¯æœ‰é™åˆ¶å’Œæ— é™åˆ¶çš„å®ä¾‹æ–¹æ³•å¼•ç”¨ã€‚åœ¨æœ‰é™åˆ¶çš„å¼•ç”¨ä¸­ï¼Œæ¥æ”¶å¯¹è±¡æ˜¯åœ¨æ–¹æ³•å¼•ç”¨ä¸­æŒ‡å®šçš„ã€‚æœ‰é™åˆ¶çš„å¼•ç”¨æœ¬è´¨ä¸Šç±»ä¼¼äºé™æ€å¼•ç”¨ï¼šå‡½æ•°å¯¹è±¡ä¸è¢«å¼•ç”¨æ–¹æ³•å¸¦æœ‰ç›¸åŒçš„å‚æ•°ã€‚åœ¨æ— é™åˆ¶çš„å¼•ç”¨ä¸­ï¼Œæ¥æ”¶å¯¹è±¡æ˜¯åœ¨è¿ç”¨å‡½æ•°å¯¹è±¡æ—¶ï¼Œé€šè¿‡åœ¨è¯¥æ–¹æ³•çš„å£°æ˜å‡½æ•°å‰é¢é¢å¤–æ·»åŠ ä¸€ä¸ªå‚æ•°æ¥æŒ‡å®šçš„ã€‚æ— é™åˆ¶çš„å¼•ç”¨ç»å¸¸ç”¨åœ¨æµç®¡é“ä¸­ä½œä¸ºæ˜ å°„å’Œè¿‡æ»¤å‡½æ•°ã€‚æœ€åï¼Œè¿˜æœ‰ä¸¤ç§æ„é€ å™¨å¼•ç”¨ï¼Œåˆ†åˆ«é’ˆå¯¹ç±»å’Œæ•°ç»„ã€‚æ„é€ å™¨å¼•ç”¨æ˜¯å……å½“å·¥å‚å¯¹è±¡ã€‚è¿™äº”ç§æ–¹æ³•å¼•ç”¨æ¦‚æ‹¬å¦‚ä¸‹ï¼š</p><table><thead><tr><th>æ–¹æ³•å¼•ç”¨ç±»å‹</th><th>èŒƒä¾‹</th><th>Lambda ç­‰å¼</th></tr></thead><tbody><tr><td>é™æ€</td><td>Integer::parselnt</td><td>str -&gt; Integer.parseInt(str);</td></tr><tr><td>æœ‰é™åˆ¶</td><td>Instant.now()::isAfter</td><td>Instant then = Instant.now();<br>t -&gt; then.isAfter(t);</td></tr><tr><td>æ— é™åˆ¶</td><td>String::toLowerCase</td><td>str -&gt; str.toLowerCase();</td></tr><tr><td>ç±»æ„é€ å™¨</td><td>TreeMap&lt;K, V&gt;::new</td><td>() -&gt; new TreeMap&lt;K, V&gt;;</td></tr><tr><td>æ•°ç»„æ„é€ å™¨</td><td>int[]::new</td><td>Len -&gt; new int[len];</td></tr></tbody></table><p>æ€»è€Œè¨€ä¹‹ï¼Œæ–¹æ³•å¼•ç”¨å¸¸å¸¸æ¯” Lambda è¡¨è¾¾å¼æ›´åŠ ç®€æ´æ˜äº†ã€‚åªè¦æ–¹æ³•å¼•ç”¨æ›´åŠ ç®€æ´ã€æ¸…æ™°ï¼Œå°±ç”¨æ–¹æ³•å¼•ç”¨ï¼›å¦‚æœæ–¹æ³•å¼•ç”¨å¹¶ä¸ç®€æ´ï¼Œå°±åšæŒä½¿ç”¨ Lambdaã€‚</p><h2 id="ç¬¬-44-æ¡-åšæŒä½¿ç”¨æ ‡å‡†çš„å‡½æ•°æ¥å£" tabindex="-1"><a class="header-anchor" href="#ç¬¬-44-æ¡-åšæŒä½¿ç”¨æ ‡å‡†çš„å‡½æ•°æ¥å£" aria-hidden="true">#</a> ç¬¬ 44 æ¡ï¼šåšæŒä½¿ç”¨æ ‡å‡†çš„å‡½æ•°æ¥å£</h2><p>åœ¨ Java å…·æœ‰ Lambda è¡¨è¾¾å¼ä¹‹åï¼Œç¼–å†™ API çš„æœ€ä½³å®è·µä¹Ÿåšäº†ç›¸åº”çš„æ”¹å˜ã€‚ä¾‹å¦‚åœ¨æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä¸­ï¼Œç”¨ä¸€ä¸ªå­ç±»è¦†ç›–åŸºæœ¬ç±»å‹æ–¹æ³•ï¼Œæ¥é™å®šå…¶è¶…ç±»çš„è¡Œä¸ºï¼Œè¿™æ˜¯æœ€ä¸è®¨äººå–œæ¬¢çš„ã€‚ç°åœ¨çš„æ›¿ä»£æ–¹æ³•æ˜¯æä¾›ä¸€ä¸ªæ¥å—å‡½æ•°å¯¹è±¡çš„é™æ€å·¥å‚æˆ–è€…æ„é€ å™¨ï¼Œä¾¿å¯è¾¾åˆ°åŒæ ·çš„æ•ˆæœã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œéœ€è¦ç¼–å†™æ›´å¤šçš„æ„é€ å™¨å’Œæ–¹æ³•ï¼Œä»¥å‡½æ•°å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚éœ€è¦éå¸¸è°¨æ…åœ°é€‰æ‹©æ­£ç¡®çš„å‡½æ•°å‚æ•°ç±»å‹ã€‚</p><p>ä»¥ LinkedHashMap ä¸ºä¾‹ã€‚æ¯å½“æœ‰æ–°çš„é”®æ·»åŠ åˆ°æ˜ å°„ä¸­æ—¶ï¼Œput å°±ä¼šè°ƒç”¨å…¶å—ä¿æŠ¤çš„ removeEldestEntry æ–¹æ³•ã€‚å¦‚æœè¦†ç›–è¯¥æ–¹æ³•ï¼Œä¾¿å¯ä»¥ç”¨è¿™ä¸ªç±»ä½œä¸ºç¼“å­˜ã€‚å½“è¯¥æ–¹æ³•è¿”å› trueï¼Œæ˜ å°„å°±ä¼šåˆ é™¤æœ€æ—©ä¼ å…¥è¯¥æ–¹æ³•çš„æ¡ç›®ã€‚ä¸‹åˆ—è¦†ç›–ä»£ç å…è®¸æ˜ å°„å¢é•¿åˆ° 100 ä¸ªæ¡ç›®ï¼Œç„¶åæ¯æ·»åŠ ä¸€ä¸ªæ–°çš„é”®ï¼Œå°±ä¼šåˆ é™¤æœ€æ—©çš„é‚£ä¸ªæ¡ç›®ï¼Œå§‹ç»ˆä¿æŒæœ€æ–°çš„ 100 ä¸ªæ¡ç›®ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">boolean</span> <span class="token function">removeEldestEntry</span><span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> eldest<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token keyword">return</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªæ–¹æ³•å¾ˆå¥½ç”¨ï¼Œä½†æ˜¯ç”¨ Lambda å¯ä»¥å®Œæˆå¾—æ›´æ¼‚äº®ã€‚å‡å¦‚ç°åœ¨ç¼–å†™ LinkedHashMapï¼Œå®ƒä¼šæœ‰ä¸€ä¸ªå¸¦å‡½æ•°å¯¹è±¡çš„é™æ€å·¥å‚æˆ–è€…æ„é€ å™¨ã€‚çœ‹ä¸€ä¸‹ removeEldestEntry çš„å£°æ˜ï¼Œä½ å¯èƒ½ä¼šä»¥ä¸ºè¯¥å‡½æ•°å¯¹è±¡åº”è¯¥å¸¦ä¸€ä¸ª Map.Entry&lt;K, V&gt;ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ª boolean,ï¼Œä½†å®é™…å¹¶éå¦‚æ­¤ï¼šremoveEldestEntry æ–¹æ³•ä¼šè°ƒç”¨ size()ï¼Œè·å–æ˜ å°„ä¸­çš„æ¡ç›®æ•°é‡ï¼Œè¿™æ˜¯å› ä¸º removeEldestEntry æ˜¯æ˜ å°„ä¸­çš„ä¸€ä¸ªå®ä¾‹æ–¹æ³•ã€‚ä¼ åˆ°æ„é€ å™¨çš„å‡½æ•°å¯¹è±¡åˆ™ä¸æ˜¯æ˜ å°„ä¸­çš„å®ä¾‹æ–¹æ³•ï¼Œæ— æ³•æ•æ‰åˆ°ï¼Œå› ä¸ºè°ƒç”¨å…¶å·¥å‚æˆ–è€…æ„é€ å™¨æ—¶ï¼Œè¿™ä¸ªæ˜ å°„è¿˜ä¸å­˜åœ¨ã€‚æ‰€ä»¥ï¼Œæ˜ å°„å¿…é¡»å°†å®ƒè‡ªèº«ä¼ ç»™å‡½æ•°å¯¹è±¡ï¼Œå› æ­¤å¿…é¡»ä¼ å…¥æ˜ å°„åŠå…¶æœ€æ—©çš„æ¡ç›®ä½œä¸º remove æ–¹æ³•çš„å‚æ•°ã€‚å£°æ˜ä¸€ä¸ªè¿™æ ·çš„å‡½æ•°æ¥å£çš„ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Unnecessary functional interface; use a standard one instead.</span>
<span class="token annotation punctuation">@FunctionalInterface</span>
<span class="token keyword">interface</span> <span class="token class-name">EldestEntryRemovalFunction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">boolean</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">,</span> <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> eldest<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªæ¥å£å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œä½†æ˜¯ä¸åº”è¯¥ä½¿ç”¨ï¼Œå› ä¸ºæ²¡å¿…è¦ä¸ºæ­¤å£°æ˜ä¸€ä¸ªæ–°çš„æ¥å£ã€‚java.util.function åŒ…å·²ç»ä¸ºæ­¤æä¾›äº†å¤§é‡æ ‡å‡†çš„å‡½æ•°æ¥å£ã€‚åªè¦æ ‡å‡†çš„å‡½æ•°æ¥å£èƒ½å¤Ÿæ»¡è¶³éœ€æ±‚ï¼Œé€šå¸¸åº”è¯¥ä¼˜å…ˆè€ƒè™‘ï¼Œè€Œä¸æ˜¯ä¸“é—¨å†æ„å»ºä¸€ä¸ªæ–°çš„å‡½æ•°æ¥å£ã€‚è¿™æ ·ä¼šä½¿ API æ›´åŠ å®¹æ˜“å­¦ä¹ ï¼Œé€šè¿‡å‡å°‘å®ƒçš„æ¦‚å¿µå†…å®¹ï¼Œæ˜¾è‘—æå‡äº’æ“ä½œæ€§ä¼˜åŠ¿ï¼Œå› ä¸ºè®¸å¤šæ ‡å‡†çš„å‡½æ•°æ¥å£éƒ½æä¾›äº†æœ‰ç”¨çš„é»˜è®¤æ–¹æ³•ã€‚å¦‚ Predicate æ¥å£æä¾›äº†åˆå¹¶æ–­è¨€çš„æ–¹æ³•ã€‚å¯¹äºä¸Šè¿° LinkedHashMap èŒƒä¾‹ï¼Œåº”è¯¥ä¼˜å…ˆä½¿ç”¨æ ‡å‡†çš„ BiPredicate&lt;Map&lt;K, V&gt;, Map.Entry&lt;K, V&gt;&gt; æ¥å£ï¼Œè€Œä¸æ˜¯å®šåˆ¶ EldestEntryRemovalFunction æ¥å£ã€‚</p><p>java.util.function ä¸­å…±æœ‰ 43 ä¸ªæ¥å£ã€‚åˆ«æŒ‡æœ›èƒ½å¤Ÿå…¨éƒ¨è®°ä½å®ƒä»¬ï¼Œä½†æ˜¯å¦‚æœèƒ½è®°ä½å…¶ä¸­ 6 ä¸ªåŸºç¡€æ¥å£ï¼Œå¿…è¦æ—¶å°±å¯ä»¥æ¨æ–­å‡ºå…¶ä½™æ¥å£äº†ã€‚åŸºç¡€æ¥å£ä½œç”¨äºå¯¹è±¡å¼•ç”¨ç±»å‹ã€‚Operator æ¥å£ä»£è¡¨å…¶ç»“æœä¸å‚æ•°ç±»å‹ä¸€è‡´çš„å‡½æ•°ã€‚Predicate æ¥å£ä»£è¡¨å¸¦æœ‰ä¸€ä¸ªå‚æ•°å¹¶è¿”å›ä¸€ä¸ª boolean çš„å‡½æ•°ã€‚Function æ¥å£ä»£è¡¨å…¶å‚æ•°ä¸è¿”å›çš„ç±»å‹ä¸ä¸€è‡´çš„å‡½æ•°ã€‚Supplier æ¥å£ä»£è¡¨æ²¡æœ‰å‚æ•°å¹¶ä¸”è¿”å›ï¼ˆæˆ–â€œæä¾›â€ï¼‰ä¸€ä¸ªå€¼çš„å‡½æ•°ã€‚æœ€åï¼ŒConsumer ä»£è¡¨çš„æ˜¯å¸¦æœ‰ä¸€ä¸ªå‡½æ•°ä½†ä¸è¿”å›ä»»ä½•å€¼çš„å‡½æ•°ï¼Œç›¸å½“äºæ¶ˆè´¹æ‰äº†å…¶å‚æ•°ã€‚è¿™ 6 ä¸ªåŸºç¡€å‡½æ•°æ¥å£æ¦‚è¿°å¦‚ä¸‹ï¼š</p><table><thead><tr><th>æ¥å£</th><th>å‡½æ•°ç­¾å</th><th>èŒƒä¾‹</th></tr></thead><tbody><tr><td>UnaryOperator&lt;T&gt;</td><td>T apply(T t)</td><td>String::toLowerCase</td></tr><tr><td>BinaryOperator&lt;T&gt;</td><td>T apply (T t1, T t2)</td><td>BigInteger::add</td></tr><tr><td>Predicate&lt;T&gt;</td><td>boolean test(T t)</td><td>Collection::isEmpty</td></tr><tr><td>Function&lt;T, R&gt;</td><td>R apply(T t)</td><td>Arrays::asList</td></tr><tr><td>Supplier&lt;T&gt;</td><td>T get()</td><td>Instant::now</td></tr><tr><td>Consumer&lt;T&gt;</td><td>void accept(T t)</td><td>System.out::println</td></tr></tbody></table><p>è¿™ 6 ä¸ªåŸºç¡€æ¥å£å„è‡ªè¿˜æœ‰ 3 ç§å˜ä½“ï¼Œåˆ†åˆ«å¯ä»¥ä½œç”¨äºåŸºæœ¬ç±»å‹ intã€long å’Œ doubleã€‚å®ƒä»¬çš„å‘½åæ–¹å¼æ˜¯åœ¨å…¶åŸºç¡€æ¥å£åç§°å‰é¢åŠ ä¸ŠåŸºæœ¬ç±»å‹è€Œå¾—ã€‚å› æ­¤ï¼Œä»¥å¸¦æœ‰ int çš„ predicate æ¥å£ä¸ºä¾‹ï¼Œå…¶å˜ä½“åç§°åº”è¯¥æ˜¯ IntPredicateï¼Œå®ƒæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶è¿ç®—ç¬¦å¸¦æœ‰ä¸¤ä¸ª long å€¼å‚æ•°å¹¶è¿”å›ä¸€ä¸ª long å€¼ LongBinaryOperatorã€‚è¿™äº›å˜ä½“æ¥å£çš„ç±»å‹éƒ½ä¸æ˜¯å‚æ•°åŒ–çš„ï¼Œé™¤ Function å˜ä½“å¤–ï¼Œåè€…æ˜¯ä»¥è¿”å›ç±»å‹ä½œä¸ºå‚æ•°ã€‚ä¾‹å¦‚ï¼ŒLongFunction&lt;int [] &gt; è¡¨ç¤ºå¸¦æœ‰ä¸€ä¸ª long å‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ª int [] æ•°ç»„ã€‚</p><p>Function æ¥å£è¿˜æœ‰ 9 ç§å˜ä½“ï¼Œç”¨äºç»“æœç±»å‹ä¸ºåŸºæœ¬ç±»å‹çš„æƒ…å†µã€‚æºç±»å‹å’Œç»“æœç±»å‹å§‹ç»ˆä¸ä¸€æ ·ï¼Œå› ä¸ºä»ç±»å‹åˆ°è‡ªèº«çš„å‡½æ•°å°±æ˜¯ UnaryOperatorã€‚å¦‚æœæºç±»å‹å’Œç»“æœç±»å‹å‡ä¸ºåŸºæœ¬ç±»å‹ï¼Œå°±æ˜¯åœ¨ Function å‰é¢æ·»åŠ æ ¼å¼å¦‚ <em>Scr</em>To<em>Result</em>ï¼Œå¦‚ LongToIntFunctionï¼ˆæœ‰ 6 ç§å˜ä½“ï¼‰ã€‚å¦‚æœæºç±»å‹ä¸ºåŸºæœ¬ç±»å‹ï¼Œç»“æœç±»å‹æ˜¯ä¸€ä¸ªå¯¹è±¡å‚æ•°ï¼Œåˆ™è¦åœ¨ Function å‰æ·»åŠ  &lt;Src&gt;ToObjï¼Œå¦‚ DoubleToObjFunctionï¼ˆæœ‰ 3 ç§å˜ä½“ï¼‰ã€‚</p><p>è¿™ä¸‰ç§åŸºç¡€å‡½æ•°æ¥å£è¿˜æœ‰å¸¦ä¸¤ä¸ªå‚æ•°çš„ç‰ˆæœ¬ï¼Œå¦‚ BiPredicate&lt;T,U&gt;ã€BiFunction&lt;T,U,R&gt; å’Œ BiConsumer&lt;T, U&gt;ã€‚è¿˜æœ‰ BiFunction å˜ä½“ç”¨äºè¿”å›ä¸‰ä¸ªç›¸å…³çš„åŸºæœ¬ç±»å‹ï¼šToIntBiFunction&lt;T, U&gt;ã€ToLongBiFunction&lt;T, U&gt; å’Œ ToDoubleBiFunction&lt;T, U&gt;ã€‚Consumer æ¥å£ä¹Ÿæœ‰å¸¦ä¸¤ä¸ªå‚æ•°çš„å˜ä½“ç‰ˆæœ¬ï¼Œå®ƒä»¬å¸¦ä¸€ä¸ªå¯¹è±¡å¼•ç”¨å’Œä¸€ä¸ªåŸºæœ¬ç±»å‹ï¼šObjDoubleConsumer&lt;T&gt;ã€ObjIntConsumer&lt;T&gt;å’Œ ObjLongConsumer&lt;T&gt;ã€‚æ€»ä¹‹ï¼Œè¿™äº›åŸºç¡€æ¥å£æœ‰ 9 ç§å¸¦ä¸¤ä¸ªå‚æ•°çš„ç‰ˆæœ¬ã€‚</p><p>æœ€åï¼Œè¿˜æœ‰ BooleanSupplier æ¥å£ï¼Œå®ƒæ˜¯ Supplier æ¥å£çš„ä¸€ç§å˜ä½“ï¼Œè¿”å› boolean å€¼ã€‚è¿™æ˜¯åœ¨æ‰€æœ‰çš„æ ‡å‡†å‡½æ•°æ¥å£åç§°ä¸­å”¯ä¸€æ˜¾å¼æåˆ° boolean ç±»å‹çš„ï¼Œä½† boolean è¿”å›å€¼æ˜¯é€šè¿‡ Predicate åŠå…¶ 4 ç§å˜ä½“æ¥æ”¯æŒçš„ã€‚BooleanSupplier æ¥å£å’Œä¸Šè¿°æ®µè½ä¸­æåŠçš„ 42 ä¸ªæ¥å£ï¼Œæ€»è®¡ 43 ä¸ªæ ‡å‡†å‡½æ•°æ¥å£ã€‚æ˜¾ç„¶ï¼Œè¿™æ˜¯ä¸ªå¤§æ•°ç›®ï¼Œä½†æ˜¯å®ƒä»¬ä¹‹é—´å¹¶éçºµæ¨ªäº¤é”™ã€‚å¦ä¸€æ–¹é¢ï¼Œä½ éœ€è¦çš„å‡½æ•°æ¥å£éƒ½æ›¿ä½ å†™å¥½äº†ï¼Œå®ƒä»¬çš„åç§°éƒ½æ˜¯å¾ªè§„è¹ˆçŸ©çš„ï¼Œéœ€è¦çš„æ—¶å€™å¹¶ä¸éš¾æ‰¾åˆ°ã€‚</p><p>ç°æœ‰çš„å¤§å¤šæ•°æ ‡å‡†å‡½æ•°æ¥å£éƒ½åªæ”¯æŒåŸºæœ¬ç±»å‹ã€‚åƒä¸‡ä¸è¦ç”¨å¸¦åŒ…è£…ç±»å‹çš„åŸºç¡€å‡½æ•°æ¥å£æ¥ä»£æ›¿åŸºæœ¬å‡½æ•°æ¥å£ã€‚è™½ç„¶å¯è¡Œï¼Œä½†å®ƒç ´åäº†ç¬¬ 61 æ¡çš„è§„åˆ™â€œåŸºæœ¬ç±»å‹ä¼˜äºè£…ç®±åŸºæœ¬ç±»å‹â€ã€‚ä½¿ç”¨è£…ç®±åŸºæœ¬ç±»å‹è¿›è¡Œæ‰¹é‡æ“ä½œå¤„ç†ï¼Œæœ€ç»ˆä¼šå¯¼è‡´è‡´å‘½çš„æ€§èƒ½é—®é¢˜ã€‚</p><p>ç°åœ¨çŸ¥é“äº†ï¼Œé€šå¸¸åº”è¯¥ä¼˜å…ˆä½¿ç”¨æ ‡å‡†çš„å‡½æ•°æ¥å£ï¼Œè€Œä¸æ˜¯ç”¨è‡ªå·±ç¼–å†™çš„æ¥å£ã€‚ä½†ä»€ä¹ˆæ—¶å€™åº”è¯¥è‡ªå·±ç¼–å†™æ¥å£å‘¢ï¼Ÿå½“ç„¶ï¼Œæ˜¯åœ¨å¦‚æœæ²¡æœ‰ä»»ä½•æ ‡å‡†çš„å‡½æ•°æ¥å£èƒ½å¤Ÿæ»¡è¶³ä½ çš„éœ€æ±‚ä¹‹æ—¶ï¼Œå¦‚éœ€è¦ä¸€ä¸ªå¸¦æœ‰ä¸‰ä¸ªå‚æ•°çš„ predicate æ¥å£ï¼Œæˆ–è€…éœ€è¦ä¸€ä¸ªæŠ›å‡ºå—æ£€å¼‚å¸¸çš„æ¥å£æ—¶ï¼Œå½“ç„¶å°±éœ€è¦è‡ªå·±ç¼–å†™å•¦ã€‚ä½†æ˜¯ä¹Ÿæœ‰è¿™æ ·çš„æƒ…å†µï¼šæœ‰ç»“æ„ç›¸åŒçš„æ ‡å‡†å‡½æ•°æ¥å£å¯ç”¨ï¼Œå´è¿˜æ˜¯åº”è¯¥è‡ªå·±ç¼–å†™å‡½æ•°æ¥å£ã€‚</p><p>è¿˜æ˜¯ä»¥å’±ä»¬çš„è€æœ‹å‹ Comparator&lt;T&gt; ä¸ºä¾‹å§ã€‚å®ƒä¸ ToIntBiFunction&lt;T, T&gt; æ¥å£åœ¨ç»“æ„ä¸Šä¸€è‡´ï¼Œè™½ç„¶å‰è€…è¢«æ·»åŠ åˆ°ç±»åº“ä¸­æ—¶ï¼Œåä¸€ä¸ªæ¥å£å·²ç»å­˜åœ¨ï¼Œä½†å¦‚æœç”¨åè€…å°±é”™äº†ã€‚Comparator ä¹‹æ‰€ä»¥éœ€è¦æœ‰è‡ªå·±çš„æ¥å£ï¼Œæœ‰ä¸‰ä¸ªåŸå› ã€‚é¦–å…ˆï¼Œæ¯å½“åœ¨ API ä¸­ä½¿ç”¨æ—¶ï¼Œå…¶åç§°æä¾›äº†è‰¯å¥½çš„æ–‡æ¡£ä¿¡æ¯ï¼Œå¹¶ä¸”è¢«å¤§é‡ä½¿ç”¨ã€‚å…¶æ¬¡ï¼ŒComparator æ¥å£å¯¹äºå¦‚ä½•æ„æˆä¸€ä¸ªæœ‰æ•ˆçš„å®ä¾‹ï¼Œæœ‰ç€ä¸¥æ ¼çš„æ¡ä»¶é™åˆ¶ï¼Œè¿™æ„æˆäº†å®ƒçš„æ€»åˆ™ã€‚å®ç°è¯¥æ¥å£ç›¸å½“äºæ‰¿è¯ºéµå®ˆå…¶å¥‘çº¦ã€‚ç¬¬ä¸‰ï¼Œè¿™ä¸ªæ¥å£é…ç½®äº†å¤§é‡å¾ˆå¥½ç”¨çš„ç¼ºçœæ–¹æ³•ï¼Œå¯ä»¥å¯¹æ¯”è¾ƒå™¨è¿›è¡Œè½¬æ¢å’Œåˆå¹¶ã€‚</p><p>å¦‚æœä½ æ‰€éœ€è¦çš„å‡½æ•°æ¥å£ä¸ Comparator â€”æ ·å…·æœ‰ä¸€é¡¹æˆ–è€…å¤šé¡¹ä»¥ä¸‹ç‰¹å¾ï¼Œåˆ™å¿…é¡»è®¤çœŸè€ƒè™‘è‡ªå·±ç¼–å†™ä¸“ç”¨çš„å‡½æ•°æ¥å£ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ ‡å‡†çš„å‡½æ•°æ¥å£ï¼š</p><ul><li>é€šç”¨ï¼Œå¹¶ä¸”å°†å—ç›Šäºæè¿°æ€§çš„åç§°ã€‚</li><li>å…·æœ‰ä¸å…¶å…³è”çš„ä¸¥æ ¼çš„å¥‘çº¦ã€‚</li><li>å°†å—ç›Šäºå®šåˆ¶çš„ç¼ºçœæ–¹æ³•ã€‚</li></ul><p>å¦‚æœå†³å®šè‡ªå·±ç¼–å†™å‡½æ•°æ¥å£ï¼Œä¸€å®šè¦è®°ä½ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå› è€Œè®¾è®¡æ—¶åº”å½“ä¸‡åˆ†è°¨æ…ã€‚</p><p>æ³¨æ„ï¼ŒEldestEntryRemovalFunction æ¥å£æ˜¯ç”¨ @FunctionalInterface æ³¨è§£è¿›è¡Œæ ‡æ³¨çš„ã€‚è¿™ä¸ªæ³¨è§£ç±»å‹æœ¬è´¨ä¸Šä¸ @Override ç±»ä¼¼ã€‚è¿™æ˜¯ä¸€ä¸ªæ ‡æ³¨äº†ç¨‹åºå‘˜è®¾è®¡æ„å›¾çš„è¯­å¥ï¼Œå®ƒæœ‰ä¸‰ä¸ªç›®çš„ï¼šå‘Šè¯‰è¿™ä¸ªç±»åŠå…¶æ–‡æ¡£çš„è¯»è€…ï¼Œè¿™ä¸ªæ¥å£æ˜¯é’ˆå¯¹ Lambda è®¾è®¡çš„ï¼›è¿™ä¸ªæ¥å£ä¸ä¼šè¿›è¡Œç¼–è¯‘ï¼Œé™¤éå®ƒåªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼›é¿å…åç»­ç»´æŠ¤äººå‘˜ä¸å°å¿ƒç»™è¯¥æ¥å£æ·»åŠ æŠ½è±¡æ–¹æ³•ã€‚å¿…é¡»å§‹ç»ˆç”¨ @FunctionalInterface æ³¨è§£å¯¹è‡ªå·±ç¼–å†™çš„å‡½æ•°æ¥å£è¿›è¡Œæ ‡æ³¨ã€‚</p><p>æœ€åä¸€ç‚¹æ˜¯å…³äºå‡½æ•°æ¥å£åœ¨ API ä¸­çš„ä½¿ç”¨ã€‚ä¸è¦åœ¨ç›¸åŒçš„å‚æ•°ä½ç½®ï¼Œæä¾›ä¸åŒçš„å‡½æ•°æ¥å£æ¥è¿›è¡Œå¤šæ¬¡é‡è½½çš„æ–¹æ³•ï¼Œå¦åˆ™å¯èƒ½åœ¨å®¢æˆ·ç«¯å¯¼è‡´æ­§ä¹‰ã€‚è¿™ä¸ä»…ä»…æ˜¯ç†è®ºä¸Šçš„é—®é¢˜ã€‚æ¯”å¦‚ ExecutorService çš„ submit æ–¹æ³•å°±å¯èƒ½å¸¦æœ‰ Callable&lt;T&gt; æˆ–è€… Runnableï¼Œå¹¶ä¸”è¿˜å¯ä»¥ç¼–å†™ä¸€ä¸ªå®¢æˆ·ç«¯ç¨‹åºï¼Œè¦æ±‚è¿›è¡Œä¸€æ¬¡è½¬æ¢ï¼Œä»¥æ˜¾ç¤ºæ­£ç¡®çš„é‡è½½ã€‚é¿å…è¿™ä¸ªé—®é¢˜çš„æœ€ç®€å•æ–¹å¼æ˜¯ï¼Œä¸è¦ç¼–å†™åœ¨åŒä¸€ä¸ªå‚æ•°ä½ç½®ä½¿ç”¨ä¸åŒå‡½æ•°æ¥å£çš„é‡è½½ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼Œæ—¢ç„¶ Java æœ‰äº† Lambdaï¼Œå°±å¿…é¡»æ—¶åˆ»è°¨è®°ç”¨ Lambda æ¥è®¾è®¡ APIã€‚è¾“å…¥æ—¶æ¥å—å‡½æ•°æ¥å£ç±»å‹ï¼Œå¹¶åœ¨è¾“å‡ºæ—¶è¿”å›ä¹‹ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæœ€å¥½ä½¿ç”¨ java.util.function.Function ä¸­æä¾›çš„æ ‡å‡†æ¥å£ï¼Œä½†æ˜¯å¿…é¡»è­¦æƒ•åœ¨ç›¸å¯¹ç½•è§çš„å‡ ç§æƒ…å†µä¸‹ï¼Œæœ€å¥½è¿˜æ˜¯è‡ªå·±ç¼–å†™ä¸“ç”¨çš„å‡½æ•°æ¥å£ã€‚</p><h2 id="ç¬¬-45-æ¡-è°¨æ…ä½¿ç”¨-stream" tabindex="-1"><a class="header-anchor" href="#ç¬¬-45-æ¡-è°¨æ…ä½¿ç”¨-stream" aria-hidden="true">#</a> ç¬¬ 45 æ¡ï¼šè°¨æ…ä½¿ç”¨ Stream</h2><p>åœ¨ Java 8 ä¸­å¢åŠ äº† Stream APIï¼Œç®€åŒ–äº†ä¸²è¡Œæˆ–å¹¶è¡Œçš„å¤§æ‰¹é‡æ“ä½œã€‚è¿™ä¸ª API æä¾›äº†ä¸¤ä¸ªå…³é”®æŠ½è±¡ï¼šStreamï¼ˆæµï¼‰ä»£è¡¨æ•°æ®å…ƒç´ æœ‰é™æˆ–æ— é™çš„é¡ºåºï¼ŒStream pipelineï¼ˆæµç®¡é“ï¼‰åˆ™ä»£è¡¨è¿™äº›å…ƒç´ çš„ä¸€ä¸ªå¤šçº§è®¡ç®—ã€‚Stream ä¸­çš„å…ƒç´ å¯èƒ½æ¥è‡ªä»»ä½•ä½ç½®ã€‚å¸¸è§çš„æ¥æºåŒ…æ‹¬é›†åˆã€æ•°ç»„ã€æ–‡ä»¶ã€æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼åŒ¹é…å™¨ã€ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼Œä»¥åŠå…¶ä»– Streamã€‚Stream ä¸­çš„æ•°æ®å…ƒç´ å¯ä»¥æ˜¯å¯¹è±¡å¼•ç”¨ï¼Œæˆ–è€…åŸºæœ¬ç±»å‹å€¼ã€‚å®ƒæ”¯æŒä¸‰ç§åŸºæœ¬ç±»å‹ï¼šintã€long å’Œ doubleã€‚</p><p>ä¸€ä¸ª Stream pipeline ä¸­åŒ…å«ä¸€ä¸ªæº Streamï¼Œæ¥ç€æ˜¯ 0 ä¸ªæˆ–è€…å¤šä¸ªä¸­é—´æ“ä½œå’Œä¸€ä¸ªç»ˆæ­¢æ“ä½œã€‚æ¯ä¸ªä¸­é—´æ“ä½œéƒ½ä¼šé€šè¿‡æŸç§æ–¹å¼å¯¹ Stream è¿›è¡Œè½¬æ¢ï¼Œä¾‹å¦‚å°†æ¯ä¸ªå…ƒç´ æ˜ å°„åˆ°è¯¥å…ƒç´ çš„å‡½æ•°ï¼Œæˆ–è€…è¿‡æ»¤æ‰ä¸æ»¡è¶³æŸäº›æ¡ä»¶çš„æ‰€æœ‰å…ƒç´ ã€‚æ‰€æœ‰çš„ä¸­é—´æ“ä½œéƒ½æ˜¯å°†ä¸€ä¸ª Stream è½¬æ¢æˆå¦ä¸€ä¸ª Streamï¼Œå…¶å…ƒç´ ç±»å‹å¯èƒ½ä¸è¾“å…¥çš„ Stream ä¸€æ ·ï¼Œä¹Ÿå¯èƒ½ä¸åŒã€‚ç»ˆæ­¢æ“ä½œä¼šåœ¨æœ€åä¸€ä¸ªä¸­é—´æ“ä½œäº§ç”Ÿçš„ Stream ä¸Šæ‰§è¡Œä¸€ä¸ªæœ€ç»ˆçš„è®¡ç®—ï¼Œä¾‹å¦‚å°†å…¶å…ƒç´ ä¿å­˜åˆ°ä¸€ä¸ªé›†åˆä¸­ï¼Œå¹¶è¿”å›æŸä¸€ä¸ªå…ƒç´ ï¼Œæˆ–è€…æ‰“å°å‡ºæ‰€æœ‰å…ƒç´ ç­‰ã€‚</p><p>Stream pipeline é€šå¸¸æ˜¯ lazy çš„ï¼šç›´åˆ°è°ƒç”¨ç»ˆæ­¢æ“ä½œæ—¶æ‰ä¼šå¼€å§‹è®¡ç®—ï¼Œå¯¹äºå®Œæˆç»ˆæ­¢æ“ä½œä¸éœ€è¦çš„æ•°æ®å…ƒç´ ï¼Œå°†æ°¸è¿œéƒ½ä¸ä¼šè¢«è®¡ç®—ã€‚æ­£æ˜¯è¿™ç§ lazy è®¡ç®—ï¼Œä½¿æ— é™ Stream æˆä¸ºå¯èƒ½ã€‚æ³¨æ„ï¼Œæ²¡æœ‰ç»ˆæ­¢æ“ä½œçš„ Stream pipeline å°†æ˜¯ä¸€ä¸ªé™é»˜çš„æ— æ“ä½œæŒ‡ä»¤ï¼Œå› æ­¤åƒä¸‡ä¸èƒ½å¿˜è®°ç»ˆæ­¢æ“ä½œã€‚</p><p>Stream API æ˜¯æµå¼çš„ï¼šæ‰€æœ‰åŒ…å« pipeline çš„è°ƒç”¨å¯ä»¥é“¾æ¥æˆä¸€ä¸ªè¡¨è¾¾å¼ã€‚äº‹å®ä¸Šï¼Œå¤šä¸ª pipeline ä¹Ÿå¯ä»¥é“¾æ¥åœ¨ä¸€èµ·ï¼Œæˆä¸ºä¸€ä¸ªè¡¨è¾¾å¼ã€‚</p><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒStream pipeline æ˜¯æŒ‰é¡ºåºè¿è¡Œçš„ã€‚è¦ä½¿ pipeline å¹¶å‘æ‰§è¡Œï¼Œåªéœ€åœ¨è¯¥ pipeline çš„ä»»ä½• Stream ä¸Šè°ƒç”¨ parallel æ–¹æ³•å³å¯ï¼Œä½†æ˜¯é€šå¸¸ä¸å»ºè®®è¿™ä¹ˆåšã€‚</p><p>Stream API åŒ…ç½—ä¸‡è±¡ï¼Œè¶³ä»¥ç”¨ Stream æ‰§è¡Œä»»ä½•è®¡ç®—ï¼Œä½†æ˜¯â€œå¯ä»¥â€å¹¶ä¸æ„å‘³ç€â€œåº”è¯¥â€ã€‚å¦‚æœä½¿ç”¨å¾—å½“ï¼ŒStream å¯ä»¥ä½¿ç¨‹åºå˜å¾—æ›´åŠ ç®€æ´ã€æ¸…æ™°ï¼›å¦‚æœä½¿ç”¨ä¸å½“ï¼Œä¼šä½¿ç¨‹åºå˜å¾—æ··ä¹±ä¸”éš¾ä»¥ç»´æŠ¤ã€‚å¯¹äºä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨ Streamï¼Œå¹¶æ²¡æœ‰ç¡¬æ€§çš„è§„å®šï¼Œä½†æ˜¯å¯ä»¥æœ‰æ‰€å¯å‘ã€‚</p><p>ä»¥ä¸‹é¢çš„ç¨‹åºä¸ºä¾‹ï¼Œå®ƒçš„ä½œç”¨æ˜¯ä»è¯å…¸æ–‡ä»¶ä¸­è¯»å–å•è¯ï¼Œå¹¶æ‰“å°å‡ºå•è¯é•¿åº¦ç¬¦åˆç”¨æˆ·æŒ‡å®šçš„æœ€ä½å€¼çš„æ‰€æœ‰æ¢ä½è¯ã€‚è®°ä½ï¼ŒåŒ…å«ç›¸åŒçš„å­—æ¯ï¼Œä½†æ˜¯å­—æ¯é¡ºåºä¸åŒçš„ä¸¤ä¸ªè¯ï¼Œç§°ä½œæ¢ä½è¯ã€‚è¯¥ç¨‹åºä¼šä»ç”¨æˆ·æŒ‡å®šçš„è¯å…¸æ–‡ä»¶ä¸­è¯»å–æ¯ä¸€ä¸ªè¯ï¼Œå¹¶å°†ç¬¦åˆæ¡ä»¶çš„å•è¯æ”¾å…¥ä¸€ä¸ªæ˜ å°„ä¸­ã€‚è¿™ä¸ªæ˜ å°„é”®æ˜¯æŒ‰å­—æ¯é¡ºåºæ’åˆ—çš„å•è¯ï¼Œå› æ­¤&quot;stapleâ€çš„é”®æ˜¯&quot;aelpst&quot;ï¼Œ&quot;petals&quot;çš„é”®ä¹Ÿæ˜¯&quot;aelpst&quot;ï¼šè¿™ä¸¤ä¸ªè¯å°±æ˜¯æ¢ä½è¯ï¼Œæ‰€æœ‰æ¢ä½è¯çš„å­—æ¯æ’åˆ—å½¢å¼æ˜¯ä¸€æ ·çš„ï¼ˆæœ‰æ—¶å€™ä¹Ÿå« alphagramï¼‰ã€‚æ˜ å°„å€¼æ˜¯åŒ…å«äº†å­—æ¯æ’åˆ—å½¢å¼ä¸€è‡´çš„æ‰€æœ‰å•è¯ã€‚è¯å…¸è¯»å–å®Œæˆä¹‹åï¼Œæ¯ä¸€ä¸ªåˆ—è¡¨å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ¢ä½è¯ç»„ã€‚éšåï¼Œç¨‹åºä¼šéå†æ˜ å°„çš„ values()ï¼Œé¢„è§ˆå¹¶æ‰“å°å‡ºå•è¯é•¿åº¦ç¬¦åˆæé™å€¼çš„æ‰€æœ‰åˆ—è¡¨ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Print all large anagram groups in a dictionary iteratively</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Anagrams</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">File</span> dictionary <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> minGroupSize <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Set</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> groups <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Scanner</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span>dictionary<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> word <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                groups<span class="token punctuation">.</span><span class="token function">computeIfAbsent</span><span class="token punctuation">(</span><span class="token function">alphabetize</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>unused<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> group <span class="token operator">:</span> groups<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>group<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> minGroupSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>group<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;: &quot;</span> <span class="token operator">+</span> group<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">alphabetize</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªç¨‹åºä¸­æœ‰ä¸€ä¸ªæ­¥éª¤å€¼å¾—æ³¨æ„ã€‚è¢«æ’å…¥åˆ°æ˜ å°„ä¸­çš„æ¯ä¸€ä¸ªå•è¯éƒ½ä»¥ç²—ä½“æ˜¾ç¤ºï¼Œè¿™æ˜¯ä½¿ç”¨äº† Java 8 ä¸­æ–°å¢çš„ computeIfAbsent æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¼šåœ¨æ˜ å°„ä¸­æŸ¥æ‰¾ä¸€ä¸ªé”®ï¼šå¦‚æœè¿™ä¸ªé”®å­˜åœ¨ï¼Œè¯¥æ–¹æ³•åªä¼šè¿”å›ä¸ä¹‹å…³è”çš„å€¼ã€‚å¦‚æœé”®ä¸å­˜åœ¨ï¼Œè¯¥æ–¹æ³•å°±ä¼šå¯¹è¯¥é”®è¿ç”¨æŒ‡å®šçš„å‡½æ•°å¯¹è±¡ç®—å‡ºä¸€ä¸ªå€¼ï¼Œå°†è¿™ä¸ªå€¼ä¸é”®å…³è”èµ·æ¥ï¼Œå¹¶è¿”å›è®¡ç®—å¾—åˆ°çš„å€¼ã€‚computeIfAbsent æ–¹æ³•ç®€åŒ–äº†å°†å¤šä¸ªå€¼ä¸æ¯ä¸ªé”®å…³è”èµ·æ¥çš„æ˜ å°„å®ç°ã€‚</p><p>ä¸‹é¢ä¸¾ä¸ªä¾‹å­ï¼Œå®ƒä¹Ÿèƒ½è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œåªä¸è¿‡å¤§é‡ä½¿ç”¨äº† Streamã€‚æ³¨æ„ï¼Œå®ƒçš„æ‰€æœ‰ç¨‹åºéƒ½æ˜¯åŒ…å«åœ¨ä¸€ä¸ªè¡¨è¾¾å¼ä¸­ï¼Œé™¤äº†æ‰“å¼€è¯å…¸æ–‡ä»¶çš„é‚£éƒ¨åˆ†ä»£ç ä¹‹å¤–ã€‚ä¹‹æ‰€ä»¥è¦åœ¨å¦ä¸€ä¸ªè¡¨è¾¾å¼ä¸­æ‰“å¼€è¯å…¸æ–‡ä»¶ï¼Œåªæ˜¯ä¸ºäº†ä½¿ç”¨ try-with-resources è¯­å¥ï¼Œå®ƒå¯ä»¥ç¡®ä¿å…³é—­è¯å…¸æ–‡ä»¶ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Overuse of streams - don&#39;t do this!</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Anagrams</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Path</span> dictionary <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> minGroupSize <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> words <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">lines</span><span class="token punctuation">(</span>dictionary<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            words<span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token function">groupingBy</span><span class="token punctuation">(</span>word <span class="token operator">-&gt;</span> word<span class="token punctuation">.</span><span class="token function">chars</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">StringBuilder</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">,</span>
                                    <span class="token punctuation">(</span>sb<span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> c<span class="token punctuation">)</span><span class="token punctuation">,</span>
                                    <span class="token class-name">StringBuilder</span><span class="token operator">::</span><span class="token function">append</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>group <span class="token operator">-&gt;</span> group<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> minGroupSize<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>group <span class="token operator">-&gt;</span> group<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;: &quot;</span> <span class="token operator">+</span> group<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä½ å‘ç°è¿™æ®µä»£ç å¥½éš¾æ‡‚ï¼Œåˆ«æ‹…å¿ƒï¼Œä½ å¹¶ä¸æ˜¯å”¯ä¸€æœ‰æ­¤æƒ³æ³•çš„äººã€‚å®ƒè™½ç„¶ç®€çŸ­ï¼Œä½†æ˜¯éš¾ä»¥è¯»æ‡‚ï¼Œå¯¹äºé‚£äº›ä½¿ç”¨ Stream è¿˜ä¸ç†Ÿç»ƒçš„ç¨‹åºå‘˜è€Œè¨€æ›´æ˜¯å¦‚æ­¤ã€‚æ»¥ç”¨ Stream ä¼šä½¿ç¨‹åºä»£ç æ›´éš¾ä»¥è¯»æ‡‚å’Œç»´æŠ¤ã€‚</p><p>å¥½åœ¨è¿˜æœ‰ä¸€ç§èˆ’é€‚çš„ä¸­é—´æ–¹æ¡ˆã€‚ä¸‹é¢çš„ç¨‹åºè§£å†³äº†åŒæ ·çš„é—®é¢˜ï¼Œå®ƒä½¿ç”¨äº† Streamï¼Œä½†æ˜¯æ²¡æœ‰è¿‡åº¦ä½¿ç”¨ã€‚ç»“æœï¼Œä¸åŸæ¥çš„ç¨‹åºç›¸æ¯”ï¼Œè¿™ä¸ªç‰ˆæœ¬å˜å¾—æ—¢ç®€çŸ­åˆæ¸…æ™°ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Tasteful use of streams enhances clarity and conciseness</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Anagrams</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Path</span> dictionary <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> minGroupSize <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> words <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">lines</span><span class="token punctuation">(</span>dictionary<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            words<span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token function">groupingBy</span><span class="token punctuation">(</span>word <span class="token operator">-&gt;</span> <span class="token function">alphabetize</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>group <span class="token operator">-&gt;</span> group<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> minGroupSize<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>g <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;: &quot;</span> <span class="token operator">+</span> g<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// alphabetize method is the same as in original version</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å³ä½¿ä½ ä¹‹å‰æ²¡æ€ä¹ˆæ¥è§¦è¿‡ Streamï¼Œè¿™æ®µç¨‹åºä¹Ÿä¸éš¾ç†è§£ã€‚å®ƒåœ¨ try-with-resources å—ä¸­æ‰“å¼€è¯å…¸æ–‡ä»¶ï¼Œè·å¾—ä¸€ä¸ªåŒ…å«äº†æ–‡ä»¶ä¸­æ‰€æœ‰ä»£ç çš„ Streamã€‚Stream å˜é‡å‘½åä¸º wordsï¼Œæ˜¯å»ºè®® Stream ä¸­çš„æ¯ä¸ªå…ƒç´ å‡ä¸ºå•è¯ã€‚è¿™ä¸ª Stream ä¸­çš„ pipeline æ²¡æœ‰ä¸­é—´æ“ä½œï¼›å®ƒçš„ç»ˆæ­¢æ“ä½œå°†æ‰€æœ‰çš„å•è¯é›†åˆåˆ°ä¸€ä¸ªæ˜ å°„ä¸­ï¼ŒæŒ‰ç…§å®ƒä»¬çš„å­—æ¯æ’åºå½¢å¼å¯¹å•è¯è¿›è¡Œåˆ†ç»„ã€‚è¿™ä¸ªæ˜ å°„ä¸å‰é¢ä¸¤ä¸ªç‰ˆæœ¬ä¸­çš„æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚éšåï¼Œåœ¨æ˜ å°„çš„ values() è§†å›¾ä¸­æ‰“å¼€äº†ä¸€ä¸ªæ–°çš„ Stream&lt;List&lt;String&gt;&gt;ã€‚å½“ç„¶ï¼Œè¿™ä¸ª Stream ä¸­çš„å…ƒç´ éƒ½æ˜¯æ¢ä½è¯åˆ†ç»„ã€‚Stream è¿›è¡Œäº†è¿‡æ»¤ï¼ŒæŠŠæ‰€æœ‰å•è¯é•¿åº¦å°äº minGroupSize çš„å•è¯éƒ½å»æ‰äº†ï¼Œæœ€åï¼Œé€šè¿‡ç»ˆæ­¢æ“ä½œçš„ forEach æ‰“å°å‡ºå‰©ä¸‹çš„åˆ†ç»„ã€‚</p><p>æ³¨æ„ï¼ŒLambda å‚æ•°çš„åç§°éƒ½æ˜¯ç»è¿‡ç²¾å¿ƒæŒ‘é€‰çš„ã€‚å®é™…ä¸Šå‚æ•°åº”å½“ä»¥ group å‘½åï¼Œåªæ˜¯è¿™æ ·å¾—åˆ°çš„ä»£ç è¡Œå¯¹äºä¹¦æœ¬è€Œè¨€å¤ªå®½äº†ã€‚åœ¨æ²¡æœ‰æ˜¾å¼ç±»å‹çš„æƒ…å†µä¸‹ï¼Œä»”ç»†å‘½å Lambda å‚æ•°ï¼Œè¿™å¯¹äº Stream pipeline çš„å¯è¯»æ€§è‡³å…³é‡è¦ã€‚</p><p>è¿˜è¦æ³¨æ„å•è¯çš„å­—æ¯æ’åºæ˜¯åœ¨ä¸€ä¸ªå•ç‹¬çš„ alphabetize æ–¹æ³•ä¸­å®Œæˆçš„ã€‚ç»™æ“ä½œå‘½åï¼Œå¹¶ä¸”ä¸è¦åœ¨ä¸»ç¨‹åºä¸­ä¿ç•™å®ç°ç»†èŠ‚ï¼Œè¿™äº›éƒ½å¢å¼ºäº†ç¨‹åºçš„å¯è¯»æ€§ã€‚åœ¨ stream pipeline ä¸­ä½¿ç”¨ helper æ–¹æ³•ï¼Œå¯¹äºå¯è¯»æ€§è€Œè¨€ï¼Œæ¯”åœ¨è¿­ä»£åŒ–ä»£ç ä¸­ä½¿ç”¨æ›´ä¸ºé‡è¦ï¼Œå› ä¸º pipeline ç¼ºä¹æ˜¾å¼çš„ç±»å‹ä¿¡æ¯å’Œå…·åä¸´æ—¶å˜é‡ã€‚</p><p>å¯ä»¥é‡æ–°å®ç° alphabetize æ–¹æ³•æ¥ä½¿ç”¨ Streamï¼Œåªæ˜¯åŸºäº Stream çš„ alphabetize æ–¹æ³•æ²¡é‚£ä¹ˆæ¸…æ™°ï¼Œéš¾ä»¥æ­£ç¡®ç¼–å†™ï¼Œé€Ÿåº¦ä¹Ÿå¯èƒ½å˜æ…¢ã€‚è¿™äº›ä¸è¶³æ˜¯å› ä¸º Java ä¸æ”¯æŒåŸºæœ¬ç±»å‹çš„ char Streamï¼ˆè¿™å¹¶ä¸æ„å‘³ç€ Java åº”è¯¥æ”¯æŒ char Streamï¼›ä¹Ÿä¸å¯èƒ½æ”¯æŒï¼‰ã€‚ä¸ºäº†è¯æ˜ç”¨ Stream å¤„ç† char å€¼çš„å„ç§å±é™©ï¼Œè¯·çœ‹ä»¥ä¸‹ä»£ç ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">.</span><span class="token function">chars</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">print</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æˆ–è®¸ä½ ä»¥ä¸ºå®ƒä¼šè¾“å‡º Hello world!ï¼Œä½†æ˜¯è¿è¡Œä¹‹åå‘ç°ï¼Œå®ƒè¾“å‡ºçš„æ˜¯ 721011081081113211911111410810033ã€‚è¿™æ˜¯å› ä¸º &quot;Hello world!&quot;.chars() è¿”å›çš„ Stream ä¸­çš„å…ƒç´ ï¼Œå¹¶ä¸æ˜¯ char å€¼ï¼Œè€Œæ˜¯ int å€¼ï¼Œå› æ­¤è°ƒç”¨äº† print çš„ int è¦†ç›–ã€‚åä¸º chars çš„æ–¹æ³•ï¼Œå´è¿”å› int å€¼çš„ Streamï¼Œè¿™å›ºç„¶ä¼šé€ æˆå›°æ‰°ã€‚ä¿®æ­£æ–¹æ³•æ˜¯åˆ©ç”¨è½¬æ¢å¼ºåˆ¶è°ƒç”¨æ­£ç¡®çš„è¦†ç›–ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">.</span><span class="token function">chars</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä½†æ˜¯ï¼Œæœ€å¥½é¿å…åˆ©ç”¨ Stream æ¥å¤„ç† char å€¼ã€‚</p><p>åˆšå¼€å§‹ä½¿ç”¨ Stream æ—¶ï¼Œå¯èƒ½ä¼šå†²åŠ¨åˆ°æ¨ä¸å¾—å°†æ‰€æœ‰çš„å¾ªç¯éƒ½è½¬æ¢æˆ Streamï¼Œä½†æ˜¯åˆ‡è®°ï¼Œåƒä¸‡åˆ«å†²åŠ¨ã€‚è¿™å¯èƒ½ä¼šç ´åä»£ç çš„å¯è¯»æ€§å’Œæ˜“ç»´æŠ¤æ€§ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå³ä½¿æ˜¯ç›¸å½“å¤æ‚çš„ä»»ï¼Œæœ€å¥½ä¹Ÿç»“åˆ Stream å’Œè¿­ä»£æ¥ä¸€èµ·å®Œæˆï¼Œå¦‚ä¸Šé¢çš„ Anagrams ç¨‹åºèŒƒä¾‹æ‰€ç¤ºã€‚å› æ­¤ï¼Œé‡æ„ç°æœ‰ä»£ç æ¥ä½¿ç”¨ Streamï¼Œå¹¶ä¸”åªåœ¨å¿…è¦çš„æ—¶å€™æ‰åœ¨æ–°ä»£ç ä¸­ä½¿ç”¨ã€‚</p><p>å¦‚æœ¬æ¡ç›®ä¸­çš„èŒƒä¾‹ç¨‹åºæ‰€ç¤ºï¼ŒStream pipeline åˆ©ç”¨å‡½æ•°å¯¹è±¡ï¼ˆä¸€èˆ¬æ˜¯ Lambda æˆ–è€…æ–¹æ³•å¼•ç”¨ï¼‰æ¥æè¿°é‡å¤çš„è®¡ç®—ï¼Œè€Œè¿­ä»£ç‰ˆä»£ç åˆ™åˆ©ç”¨ä»£ç å—æ¥æè¿°é‡å¤çš„è®¡ç®—ã€‚ä¸‹åˆ—å·¥ä½œåªèƒ½é€šè¿‡ä»£ç å—ï¼Œè€Œä¸èƒ½é€šè¿‡å‡½æ•°å¯¹è±¡æ¥å®Œæˆï¼š</p><ul><li>ä»ä»£ç å—ä¸­ï¼Œå¯ä»¥è¯»å–æˆ–è€…ä¿®æ”¹èŒƒå›´å†…çš„ä»»æ„å±€éƒ¨å˜é‡ï¼›ä» Lambda åˆ™åªèƒ½è¯»å– final æˆ–è€…æœ‰æ•ˆçš„ final å˜é‡ï¼Œå¹¶ä¸”ä¸èƒ½ä¿®æ”¹ä»»ä½• local å˜é‡ã€‚</li><li>ä»ä»£ç å—ä¸­ï¼Œå¯ä»¥ä»å¤–å›´æ–¹æ³•ä¸­ returnã€break æˆ– continue å¤–å›´å¾ªç¯ï¼Œæˆ–è€…æŠ›å‡ºè¯¥æ–¹æ³•å£°æ˜è¦æŠ›å‡ºçš„ä»»ä½•å—æ£€å¼‚å¸¸ï¼›ä» Lambda ä¸­åˆ™å®Œå…¨æ— æ³•å®Œæˆè¿™äº›äº‹æƒ…ã€‚</li></ul><p>å¦‚æœæŸä¸ªè®¡ç®—æœ€å¥½è¦åˆ©ç”¨ä¸Šè¿°è¿™äº›æ–¹æ³•æ¥æè¿°ï¼Œå®ƒå¯èƒ½å¹¶ä¸å¤ªé€‚åˆ Streamã€‚åä¹‹ï¼ŒStream å¯ä»¥ä½¿å¾—å®Œæˆè¿™äº›å·¥ä½œå˜å¾—æ˜“å¦‚åæŒï¼š</p><ul><li>ç»Ÿä¸€è½¬æ¢å…ƒç´ çš„åºåˆ—</li><li>è¿‡æ»¤å…ƒç´ çš„åºåˆ—</li><li>åˆ©ç”¨å•ä¸ªæ“ä½œï¼ˆå¦‚æ·»åŠ ã€è¿æ¥æˆ–è€…è®¡ç®—å…¶æœ€å°å€¼ï¼‰åˆå¹¶å…ƒç´ çš„é¡ºåº</li><li>å°†å…ƒç´ çš„åºåˆ—å­˜æ”¾åˆ°ä¸€ä¸ªé›†åˆä¸­ï¼Œæ¯”å¦‚æ ¹æ®æŸäº›å…¬å…±å±æ€§è¿›è¡Œåˆ†ç»„</li><li>æœç´¢æ»¡è¶³æŸäº›æ¡ä»¶çš„å…ƒç´ çš„åºåˆ—</li></ul><p>å¦‚æœæŸä¸ªè®¡ç®—æœ€å¥½æ˜¯åˆ©ç”¨è¿™äº›æ–¹æ³•æ¥å®Œæˆï¼Œå®ƒå°±éå¸¸é€‚åˆä½¿ç”¨ Streamã€‚</p><p>åˆ©ç”¨ Stream å¾ˆéš¾å®Œæˆçš„ä¸€ä»¶äº‹æƒ…å°±æ˜¯ï¼ŒåŒæ—¶ä»ä¸€ä¸ª pipeline çš„å¤šä¸ªé˜¶æ®µå»è®¿é—®ç›¸åº”çš„å…ƒç´ ï¼šä¸€æ—¦å°†ä¸€ä¸ªå€¼æ˜ å°„åˆ°æŸä¸ªå…¶ä»–å€¼ï¼ŒåŸæ¥çš„å€¼å°±ä¸¢å¤±äº†ã€‚ä¸€ç§è§£å†³åŠæ³•æ˜¯å°†æ¯ä¸ªå€¼éƒ½æ˜ å°„åˆ°åŒ…å«åŸå§‹å€¼å’Œæ–°å€¼çš„ä¸€ä¸ªå¯¹è±¡å¯¹ï¼Œä¸è¿‡è¿™å¹¶éä¸‡å…¨ä¹‹ç­–ï¼Œå½“ pipeline çš„å¤šä¸ªé˜¶æ®µéƒ½éœ€è¦è¿™äº›å¯¹è±¡å¯¹æ—¶å°¤å…¶å¦‚æ­¤ã€‚è¿™æ ·å¾—åˆ°çš„ä»£ç å°†æ˜¯æ··ä¹±ã€ç¹æ‚çš„ï¼Œè¿èƒŒäº† Stream çš„åˆè¡·ã€‚æœ€å¥½çš„è§£å†³åŠæ³•æ˜¯ï¼Œå½“éœ€è¦è®¿é—®è¾ƒæ—©é˜¶æ®µçš„å€¼æ—¶ï¼Œå°†æ˜ å°„é¢ å€’è¿‡æ¥ã€‚</p><p>ä¾‹å¦‚ï¼Œç¼–å†™ä¸€ä¸ªæ‰“å°å‡ºå‰ 20 ä¸ªæ¢…æ£®ç´ æ•°çš„ç¨‹åºã€‚è§£é‡Šä¸€ä¸‹ï¼Œæ¢…æ£®ç´ æ•°æ˜¯ä¸€ä¸ªå½¢å¼ä¸º 2<sup>p</sup>-1 çš„æ•°å­—ã€‚å¦‚æœ p æ˜¯ä¸€ä¸ªç´ æ•°ï¼Œç›¸åº”çš„æ¢…æ£®æ•°å­—ä¹Ÿæ˜¯ç´ æ•°ï¼›é‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ªæ¢…æ£®ç´ æ•°ã€‚ä½œä¸º pipeline çš„ç¬¬ä¸€ä¸ª Streamï¼Œæˆ‘ä»¬æƒ³è¦çš„æ˜¯æ‰€æœ‰ç´ æ•°ã€‚ä¸‹é¢çš„æ–¹æ³•å°†è¿”å›ï¼ˆæ— é™ï¼‰Streamã€‚å‡è®¾ä½¿ç”¨çš„æ˜¯é™æ€å¯¼å…¥ï¼Œä¾¿äºè®¿é—® BigInteger çš„é™æ€æˆå‘˜ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BigInteger</span><span class="token punctuation">&gt;</span></span> <span class="token function">primes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">iterate</span><span class="token punctuation">(</span>TWO<span class="token punctuation">,</span> <span class="token class-name">BigInteger</span><span class="token operator">::</span><span class="token function">nextProbablePrime</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ–¹æ³•çš„åç§°æ˜¯ä¸€ä¸ªå¤æ•°åè¯ï¼Œå®ƒæè¿°äº† Stream çš„å…ƒç´ ã€‚å¼ºçƒˆå»ºè®®è¿”å› Stream çš„æ‰€æœ‰æ–¹æ³•éƒ½é‡†ç”¨è¿™ç§å‘½åæƒ¯ä¾‹ï¼Œå› ä¸ºå¯ä»¥å¢å¼º Stream pipeline çš„å¯è¯»æ€§ã€‚è¯¥æ–¹æ³•ä½¿ç”¨é™æ€å·¥å‚ Stream.iterateï¼Œå®ƒæœ‰ä¸¤ä¸ªå‚æ•°ï¼šStream ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä»¥åŠä»å‰ä¸€ä¸ªå…ƒç´ ä¸­ç”Ÿæˆä¸‹ä¸€ä¸ªå…ƒç´ çš„ä¸€ä¸ªå‡½æ•°ã€‚ä¸‹é¢çš„ç¨‹åºç”¨äºæ‰“å°å‡ºå‰ 20 ä¸ªæ¢…æ£®ç´ æ•°ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">primes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>p <span class="token operator">-&gt;</span> TWO<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">intValueExact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span>ONE<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>mersenne <span class="token operator">-&gt;</span> mersenne<span class="token punctuation">.</span><span class="token function">isProbablePrime</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µç¨‹åºæ˜¯å¯¹ä¸Šè¿°å†…å®¹çš„ç®€å•ç¼–ç ç¤ºèŒƒï¼šå®ƒä»ç´ æ•°å¼€å§‹ï¼Œè®¡ç®—å‡ºç›¸åº”çš„æ¢…æ£®ç´ æ•°ï¼Œè¿‡æ»¤æ‰æ‰€æœ‰ä¸æ˜¯ç´ æ•°çš„æ•°å­—ï¼ˆå…¶ä¸­ 50 æ˜¯ä¸ªç¥å¥‡çš„æ•°å­—ï¼Œå®ƒæ§åˆ¶ç€è¿™ä¸ªæ¦‚ç‡ç´ æ€§æµ‹è¯•ï¼‰ï¼Œé™åˆ¶æœ€ç»ˆå¾—åˆ°çš„ Stream ä¸º 20 ä¸ªå…ƒç´ ï¼Œå¹¶æ‰“å°å‡ºæ¥ã€‚</p><p>ç°åœ¨å‡è®¾æƒ³è¦åœ¨æ¯ä¸ªæ¢…æ£®ç´ æ•°ä¹‹å‰åŠ ä¸Šå…¶æŒ‡æ•°ã€‚è¿™ä¸ªå€¼åªå‡ºç°åœ¨ç¬¬ä¸€ä¸ª Stream ä¸­ï¼Œå› æ­¤åœ¨è´Ÿè´£è¾“å‡ºç»“æœçš„ç»ˆæ­¢æ“ä½œä¸­æ˜¯è®¿é—®ä¸åˆ°çš„ã€‚æ‰€å¹¸å°†å‘ç”Ÿåœ¨ç¬¬ä¸€ä¸ªä¸­é—´æ“ä½œä¸­çš„æ˜ å°„é¢ å€’è¿‡æ¥ï¼Œä¾¿å¯ä»¥å¾ˆå®¹æ˜“åœ°è®¡ç®—å‡ºæ¢…æ£®æ•°å­—çš„æŒ‡æ•°ã€‚è¯¥æŒ‡æ•°åªä¸è¿‡æ˜¯ä¸€ä¸ªä»¥äºŒè¿›åˆ¶è¡¨ç¤ºçš„ä½æ•°ï¼Œå› æ­¤ç»ˆæ­¢æ“ä½œå¯ä»¥äº§ç”Ÿæ‰€è¦çš„ç»“æœï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>mp <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mp<span class="token punctuation">.</span><span class="token function">bitLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;: &quot;</span> <span class="token operator">+</span> mp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç°å®ä¸­æœ‰è®¸å¤šä»»åŠ¡å¹¶ä¸æ˜ç¡®è¦ä½¿ç”¨ Streamï¼Œè¿˜æ˜¯ç”¨è¿­ä»£ã€‚ä¾‹å¦‚æœ‰ä¸ªä»»åŠ¡æ˜¯è¦å°†ä¸€å‰¯æ–°çº¸ç‰Œåˆå§‹åŒ–ã€‚å‡è®¾ Card æ˜¯ä¸€ä¸ªä¸å˜å€¼ç±»ï¼Œç”¨äºå°è£… Rank å’Œ Suitï¼Œè¿™ä¸¤è€…éƒ½æ˜¯æšä¸¾ç±»å‹ã€‚è¿™é¡¹ä»»åŠ¡ä»£è¡¨äº†æ‰€æœ‰éœ€è¦è®¡ç®—ä»ä¸¤ä¸ªé›†åˆä¸­é€‰æ‹©æ‰€æœ‰å…ƒç´ å¯¹çš„ä»»åŠ¡ã€‚æ•°å­¦ä¸Šç§°ä¹‹ä¸ºä¸¤ä¸ªé›†åˆçš„ç¬›å¡å°”ç§¯ã€‚è¿™æ˜¯ä¸€ä¸ªè¿­ä»£åŒ–å®ç°ï¼ŒåµŒå…¥äº†ä¸€ä¸ª foreach å¾ªç¯ï¼Œå¤§å®¶å¯¹æ­¤åº”å½“éƒ½éå¸¸ç†Ÿæ‚‰äº†ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Iterative Cartesian product computation</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Card</span><span class="token punctuation">&gt;</span></span> <span class="token function">newDeck</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Card</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Suit</span> suit <span class="token operator">:</span> <span class="token class-name">Suit</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Rank</span> rank <span class="token operator">:</span> <span class="token class-name">Rank</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">newCard</span><span class="token punctuation">(</span>suit<span class="token punctuation">,</span> rank<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ˜¯ä¸€ä¸ªåŸºäº Stream çš„å®ç°ï¼Œåˆ©ç”¨äº†ä¸­é—´æ“ä½œ flatMapã€‚è¿™ä¸ªæ“ä½œæ˜¯å°† Stream ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜ å°„åˆ°ä¸€ä¸ª Stream ä¸­ï¼Œç„¶åå°†è¿™äº›æ–°çš„ Stream å…¨éƒ¨åˆå¹¶åˆ°ä¸€ä¸ª Streamï¼ˆæˆ–è€…å°†å®ƒä»¬æ‰å¹³åŒ–ï¼‰ã€‚æ³¨æ„ï¼Œè¿™ä¸ªå®ç°ä¸­åŒ…å«äº†ä¸€ä¸ªåµŒå…¥å¼çš„ Lambdaï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Stream-based Cartesian product computation\</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Card</span><span class="token punctuation">&gt;</span></span> <span class="token function">newDeck</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">Suit</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>suit <span class="token operator">-&gt;</span> 
             <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">Rank</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>rank <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Card</span><span class="token punctuation">(</span>suit<span class="token punctuation">,</span> rank<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">col1ect</span><span class="token punctuation">(</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸¤ç§ newDeck ç‰ˆæœ¬å“ªä¸€ç§æ›´å¥½ï¼Ÿè¿™å–å†³äºä¸ªäººåå¥½ï¼Œä»¥åŠç¼–ç¨‹ç¯å¢ƒã€‚ç¬¬ä¸€ç§ç‰ˆæœ¬æ¯”è¾ƒç®€å•ï¼Œå¯èƒ½æ„Ÿè§‰æ¯”è¾ƒè‡ªç„¶ï¼Œå¤§éƒ¨åˆ† Java ç¨‹åºå‘˜éƒ½èƒ½å¤Ÿç†è§£å’Œç»´æŠ¤ï¼Œä½†æ˜¯æœ‰äº›ç¨‹åºå‘˜å¯èƒ½ä¼šè§‰å¾—ç¬¬äºŒç§ç‰ˆæœ¬ï¼ˆåŸºäº Stream çš„ï¼‰æ›´èˆ’æœã€‚è¿™ä¸ªç‰ˆæœ¬å¯èƒ½æ›´ç®€æ´ä¸€ç‚¹ï¼Œå¦‚æœå·²ç»ç†Ÿç»ƒæŒæ¡ Stream å’Œå‡½æ•°ç¼–ç¨‹ï¼Œç†è§£èµ·æ¥ä¹Ÿä¸éš¾ã€‚å¦‚æœä¸ç¡®å®šè¦ç”¨å“ªä¸ªç‰ˆæœ¬ï¼Œæˆ–è®¸é€‰æ‹©è¿­ä»£åŒ–ç‰ˆæœ¬ä¼šæ›´åŠ å®‰å…¨ä¸€äº›ã€‚å¦‚æœæ›´å–œæ¬¢ Stream ç‰ˆæœ¬ï¼Œå¹¶ç›¸ä¿¡åç»­ä½¿ç”¨è¿™äº›ä»£ç çš„å…¶ä»–ç¨‹åºå‘˜ä¹Ÿä¼šå–œæ¬¢ï¼Œå°±åº”è¯¥ä½¿ç”¨ Stream ç‰ˆæœ¬ã€‚</p><p>æ€»ä¹‹ï¼Œæœ‰äº›ä»»åŠ¡æœ€å¥½ç”¨ Stream å®Œæˆï¼Œæœ‰äº›åˆ™è¦ç”¨è¿­ä»£ã€‚è€Œæœ‰è®¸å¤šä»»åŠ¡åˆ™æœ€å¥½æ˜¯ç»“åˆä½¿ç”¨è¿™ä¸¤ç§æ–¹æ³•æ¥ä¸€èµ·å®Œæˆã€‚å…·ä½“é€‰æ‹©ç”¨å“ªä¸€ç§æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰ç¡¬æ€§ã€é€Ÿæˆçš„è§„åˆ™ï¼Œä½†æ˜¯å¯ä»¥å‚è€ƒä¸€äº›æœ‰æ„ä¹‰çš„å¯å‘ã€‚åœ¨å¾ˆå¤šæ—¶å€™ï¼Œä¼šå¾ˆæ¸…æ¥šåº”è¯¥ä½¿ç”¨å“ªä¸€ç§æ–¹æ³•ï¼›æœ‰äº›æ—¶å€™ï¼Œåˆ™ä¸å¤ªæ˜æ˜¾ã€‚å¦‚æœå®åœ¨ä¸ç¡®å®šç”¨ Stream è¿˜æ˜¯ç”¨è¿­ä»£æ¯”è¾ƒå¥½ï¼Œé‚£ä¹ˆå°±ä¸¤ç§éƒ½è¯•è¯•ï¼Œçœ‹çœ‹å“ªä¸€ç§æ›´å¥½ç”¨å§ã€‚</p><h2 id="ç¬¬-46-æ¡-ä¼˜å…ˆé€‰æ‹©-stream-ä¸­æ— å‰¯ä½œç”¨çš„å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#ç¬¬-46-æ¡-ä¼˜å…ˆé€‰æ‹©-stream-ä¸­æ— å‰¯ä½œç”¨çš„å‡½æ•°" aria-hidden="true">#</a> ç¬¬ 46 æ¡ï¼šä¼˜å…ˆé€‰æ‹© Stream ä¸­æ— å‰¯ä½œç”¨çš„å‡½æ•°</h2><p>å¦‚æœåˆšæ¥è§¦ Streamï¼Œå¯èƒ½æ¯”è¾ƒéš¾ä»¥æŒæ¡å…¶ä¸­çš„çªé—¨ã€‚å°±ç®—åªæ˜¯ç”¨ Stream pipeline æ¥è¡¨è¾¾è®¡ç®—å°±å›°éš¾é‡é‡ã€‚å½“ä½ å¥½ä¸å®¹æ˜“æˆåŠŸäº†ï¼Œè¿è¡Œç¨‹åºä¹‹åï¼Œå´å¯èƒ½æ„Ÿåˆ°è¿™ä¹ˆåšå¹¶æ²¡æœ‰äº«å—åˆ°å¤šå¤§ç›Šå¤„ã€‚Stream å¹¶ä¸åªæ˜¯ä¸€ä¸ª APIï¼Œå®ƒæ˜¯ä¸€ç§åŸºäºå‡½æ•°ç¼–ç¨‹çš„æ¨¡å‹ã€‚ä¸ºäº†è·å¾— Stream å¸¦æ¥çš„æè¿°æ€§å’Œé€Ÿåº¦ï¼Œæœ‰æ—¶è¿˜æœ‰å¹¶è¡Œæ€§ï¼Œå¿…é¡»é‡‡ç”¨èŒƒå‹ä»¥åŠ APIã€‚</p><p>Stream èŒƒå‹æœ€é‡è¦çš„éƒ¨åˆ†æ˜¯æŠŠè®¡ç®—æ„é€ æˆä¸€ç³»åˆ—å˜å‹ï¼Œæ¯ä¸€çº§ç»“æœéƒ½å°½å¯èƒ½é è¿‘ä¸Šä¸€çº§ç»“æœçš„çº¯å‡½æ•°ã€‚çº¯å‡½æ•°æ˜¯æŒ‡å…¶ç»“æœåªå–å†³äºè¾“å…¥çš„å‡½æ•°ï¼šå®ƒä¸ä¾èµ–ä»»ä½•å¯å˜çš„çŠ¶æ€ï¼Œä¹Ÿä¸æ›´æ–°ä»»ä½•çŠ¶æ€ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œä¼ å…¥ Stream æ“ä½œçš„ä»»ä½•å‡½æ•°å¯¹è±¡ï¼Œæ— è®ºæ˜¯ä¸­é—´æ“ä½œè¿˜æ˜¯ç»ˆæ­¢æ“ä½œï¼Œéƒ½åº”è¯¥æ˜¯æ— å‰¯ä½œç”¨çš„ã€‚</p><p>æœ‰æ—¶ä¼šçœ‹åˆ°å¦‚ä¸‹ä»£ç ç‰‡æ®µï¼Œå®ƒæ„å»ºäº†ä¸€å¼ è¡¨æ ¼ï¼Œæ˜¾ç¤ºè¿™äº›å•è¯åœ¨ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­å‡ºç°çš„é¢‘ç‡ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Uses the streams API but not the paradigm--Don&#39;t do this!</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> freq <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> words <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tokens</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  words<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>word <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
    freq<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>word<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1L</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token operator">::</span><span class="token function">sum</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥ä¸Šä»£ç æœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿå®ƒæ¯•ç«Ÿä½¿ç”¨äº† Streamã€Lambda å’Œæ–¹æ³•å¼•ç”¨ï¼Œå¹¶ä¸”å¾—å‡ºäº†æ­£ç¡®çš„ç­”æ¡ˆã€‚ç®€è€Œè¨€ä¹‹ï¼Œè¿™æ ¹æœ¬ä¸æ˜¯ Stream ä»£ç ï¼›åªä¸è¿‡æ˜¯ä¼ªè£…æˆ Stream ä»£ç çš„è¿­ä»£å¼ä»£ç ã€‚å®ƒå¹¶æ²¡æœ‰äº«å—åˆ° Stream API å¸¦æ¥çš„ä¼˜åŠ¿ï¼Œä»£ç åè€Œæ›´é•¿äº†ç‚¹ï¼Œå¯è¯»æ€§ä¹Ÿå·®äº†ç‚¹ï¼Œå¹¶ä¸”æ¯”ç›¸åº”çš„è¿­ä»£åŒ–ä»£ç æ›´éš¾ç»´æŠ¤ã€‚å› ä¸ºè¿™æ®µä»£ç åˆ©ç”¨ä¸€ä¸ªæ”¹å˜å¤–éƒ¨çŠ¶æ€ï¼ˆé¢‘ç‡è¡¨ï¼‰çš„ Lambdaï¼Œå®Œæˆäº†åœ¨ç»ˆæ­¢æ“ä½œçš„ forEach ä¸­çš„æ‰€æœ‰å·¥ä½œã€‚forEach æ“ä½œçš„ä»»åŠ¡ä¸åªå±•ç¤ºç”± Stream æ‰§è¡Œçš„è®¡ç®—ç»“æœï¼Œè¿™åœ¨ä»£ç ä¸­å¹¶éå¥½äº‹ï¼Œæ”¹å˜çŠ¶æ€çš„ Lambda ä¹Ÿæ˜¯å¦‚æ­¤ã€‚é‚£ä¹ˆè¿™æ®µä»£ç åº”è¯¥æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Proper use of streams to initialize a frequency table</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> freq<span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> words <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tokens</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  freq <span class="token operator">=</span> words<span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token function">groupingBy</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">toLowerCase</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">counting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªä»£ç ç‰‡æ®µçš„ä½œç”¨ä¸å‰ä¸€ä¸ªä¾‹å­ä¸€æ ·ï¼Œåªæ˜¯æ­£ç¡®ä½¿ç”¨äº† Stream APIï¼Œå˜å¾—æ›´åŠ ç®€æ´ã€æ¸…æ™°ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆæœ‰äººä¼šä»¥å…¶ä»–çš„æ–¹å¼ç¼–å†™å‘¢ï¼Ÿè¿™æ˜¯ä¸ºäº†ä½¿ç”¨ä»–ä»¬å·²ç»ç†Ÿæ‚‰çš„å·¥å…·ã€‚Java ç¨‹åºå‘˜éƒ½çŸ¥é“å¦‚ä½•ä½¿ç”¨ for-each å¾ªç¯ï¼Œç»ˆæ­¢æ“ä½œçš„ forEach ä¹Ÿä¸ä¹‹ç±»ä¼¼ã€‚ä½† forEach æ“ä½œæ˜¯ç»ˆæ­¢æ“ä½œä¸­æœ€æ²¡æœ‰å¨åŠ›çš„ï¼Œä¹Ÿæ˜¯å¯¹ Stream æœ€ä¸å‹å¥½çš„ã€‚å®ƒæ˜¯æ˜¾å¼è¿­ä»£ï¼Œå› è€Œä¸é€‚åˆå¹¶è¡Œã€‚forEach æ“ä½œåº”è¯¥åªç”¨äºæŠ¥å‘Š Stream è®¡ç®—çš„ç»“æœï¼Œè€Œä¸æ˜¯æ‰§è¡Œè®¡ç®—ã€‚æœ‰æ—¶å€™ï¼Œä¹Ÿå¯ä»¥å°† forEach ç”¨äºå…¶ä»–ç›®çš„ï¼Œæ¯”å¦‚å°† Stream è®¡ç®—çš„ç»“æœæ·»åŠ åˆ°ä¹‹å‰å·²ç»å­˜åœ¨çš„é›†åˆä¸­å»ã€‚</p><p>æ”¹è¿›è¿‡çš„ä»£ç ä½¿ç”¨äº†ä¸€ä¸ªæ”¶é›†å™¨ï¼Œä¸ºäº†ä½¿ç”¨ Streamï¼Œè¿™æ˜¯å¿…é¡»äº†è§£çš„ä¸€ä¸ªæ–°æ¦‚å¿µã€‚Collectors API å¾ˆå“äººï¼šå®ƒæœ‰ 39 ç§æ–¹æ³•ï¼Œå…¶ä¸­æœ‰äº›æ–¹æ³•è¿˜å¸¦æœ‰ 5 ä¸ªç±»å‹å‚æ•°ï¼å¥½æ¶ˆæ¯æ˜¯ï¼Œä½ ä¸å¿…å®Œå…¨ææ‡‚è¿™ä¸ª API å°±èƒ½äº«å—å®ƒå¸¦æ¥çš„å¥½å¤„ã€‚å¯¹äºåˆå­¦è€…ï¼Œå¯ä»¥å¿½ç•¥ Collector æ¥å£ï¼Œå¹¶æŠŠæ”¶é›†å™¨å½“ä½œå°è£…ç¼©å‡ç­–ç•¥çš„ä¸€ä¸ªé»‘ç›’å­å¯¹è±¡ã€‚åœ¨è¿™é‡Œï¼Œç¼©å‡çš„æ„æ€æ˜¯å°† Stream çš„å…ƒç´ åˆå¹¶åˆ°å•ä¸ªå¯¹è±¡ä¸­å»ã€‚æ”¶é›†å™¨äº§ç”Ÿçš„å¯¹è±¡ä¸€èˆ¬æ˜¯ä¸€ä¸ªé›†åˆï¼ˆå³åç§°æ”¶é›†å™¨ï¼‰ã€‚</p><p>å°† Stream çš„å…ƒç´ é›†ä¸­åˆ°ä¸€ä¸ªçœŸæ­£çš„ Collection é‡Œå»çš„æ”¶é›†å™¨æ¯”è¾ƒç®€å•ã€‚æœ‰ä¸‰ä¸ªè¿™æ ·çš„æ”¶é›†å™¨ï¼štoList()ã€toSet() å’Œ toCollection(collectionFactory)ã€‚å®ƒä»¬åˆ†åˆ«è¿”å›ä¸€ä¸ªåˆ—è¡¨ã€ä¸€ä¸ªé›†åˆå’Œç¨‹åºå‘˜æŒ‡å®šçš„é›†åˆç±»å‹ã€‚äº†è§£äº†è¿™äº›ï¼Œå°±å¯ä»¥ç¼–å†™ Stream pipelineï¼Œä»é¢‘ç‡è¡¨ä¸­æå–æ’åå‰åçš„å•è¯åˆ—è¡¨äº†ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Pipeline to get a top-ten list of words from a frequency table</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> topTen <span class="token operator">=</span> freq<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token function">comparing</span><span class="token punctuation">(</span>freq<span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reversed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼Œè¿™é‡Œæ²¡æœ‰ç»™ toList æ–¹æ³•é…ä¸Šå®ƒçš„ Collectors ç±»ã€‚é™æ€å¯¼å…¥ Collectors çš„æ‰€æœ‰æˆå‘˜æ˜¯æƒ¯ä¾‹ä¹Ÿæ˜¯æ˜æ™ºçš„ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥æå‡ Stream pipeline çš„å¯è¯»æ€§ã€‚</p><p>è¿™æ®µä»£ç ä¸­å”¯ä¸€æœ‰æŠ€å·§çš„éƒ¨åˆ†æ˜¯ä¼ ç»™ sorted çš„æ¯”è¾ƒå™¨ comparing(freq::get).reversed()ã€‚comparing æ–¹æ³•æ˜¯ä¸€ä¸ªæ¯”è¾ƒå™¨æ„é€ æ–¹æ³•ï¼Œå®ƒå¸¦æœ‰ä¸€ä¸ªé”®æå–å‡½æ•°ã€‚å‡½æ•°è¯»å–ä¸€ä¸ªå•è¯ï¼Œâ€œæå–â€å®é™…ä¸Šæ˜¯ä¸€ä¸ªè¡¨æŸ¥æ‰¾ï¼šæœ‰é™åˆ¶çš„æ–¹æ³•å¼•ç”¨ freq::get åœ¨é¢‘ç‡è¡¨ä¸­æŸ»æ‰¾å•è¯ï¼Œå¹¶è¿”å›è¯¥å•è¯åœ¨æ–‡ä»¶ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚æœ€åï¼Œåœ¨æ¯”è¾ƒå™¨ä¸Šè°ƒç”¨ reversedï¼ŒæŒ‰é¢‘ç‡é«˜ä½å¯¹å•è¯è¿›è¡Œæ’åºã€‚åé¢çš„äº‹æƒ…å°±ç®€å•äº†ï¼Œåªè¦é™åˆ¶ Stream ä¸º 10 ä¸ªå•è¯ï¼Œå¹¶å°†å®ƒä»¬é›†ä¸­åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­å³å¯ã€‚</p><p>ä¸Šä¸€æ®µä»£ç æ˜¯åˆ©ç”¨ Scanner çš„ Stream æ–¹æ³•æ¥è·å¾— Streamã€‚è¿™ä¸ªæ–¹æ³•æ˜¯åœ¨ Java 9 ä¸­å¢åŠ çš„ã€‚å¦‚æœä½¿ç”¨çš„æ˜¯æ›´æ—©çš„ç‰ˆæœ¬ï¼Œå¯ä»¥æŠŠå®ç° Iterator çš„æ‰«æå™¨ï¼Œç¿»è¯‘æˆä½¿ç”¨äº†ç±»ä¼¼äºç¬¬ 47 æ¡ä¸­é€‚é…å™¨çš„ Streamï¼ˆstreamOf(Iterable&lt;E&gt;)ï¼‰ã€‚</p><p>Collectors ä¸­çš„å¦å¤– 36 ç§æ–¹æ³•åˆæ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿå®ƒä»¬å¤§å¤šæ•°æ˜¯ä¸ºäº†ä¾¿äºå°† Stream é›†åˆåˆ°æ˜ å°„ä¸­ï¼Œè¿™è¿œæ¯”é›†ä¸­åˆ°çœŸå®çš„é›†åˆä¸­è¦å¤æ‚å¾—å¤šã€‚æ¯ä¸ª Stream å…ƒç´ éƒ½æœ‰ä¸€ä¸ªå…³è”çš„é”®å’Œå€¼ï¼Œå¤šä¸ª Stream å…ƒç´ å¯ä»¥å…³è”åŒä¸€ä¸ªé”®ã€‚</p><p>æœ€ç®€å•çš„æ˜ å°„æ”¶é›†å™¨æ˜¯ toMap(keyMapper, valueMapper)ï¼Œå®ƒå¸¦æœ‰ä¸¤ä¸ªå‡½æ•°ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯å°† Stream å…ƒç´ æ˜ å°„åˆ°é”®ï¼Œå¦ä¸€ä¸ªæ˜¯å°†å®ƒæ˜ å°„åˆ°å€¼ã€‚æˆ‘ä»¬é‡‡ç”¨ç¬¬ 34 æ¡ fromString å®ç°ä¸­çš„æ”¶é›†å™¨ï¼Œå°†æšä¸¾çš„å­—ç¬¦ä¸²å½¢å¼æ˜ å°„åˆ°æšä¸¾æœ¬èº«ï¼š</p><p>// Using a toMap collector to make a map from string to enum</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Operation</span><span class="token punctuation">&gt;</span></span> stringToEnum <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token function">toMap</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token operator">::</span><span class="token function">toString</span><span class="token punctuation">,</span> e <span class="token operator">-&gt;</span> e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœ Stream ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜ å°„åˆ°ä¸€ä¸ªå”¯ä¸€çš„é”®ï¼Œé‚£ä¹ˆè¿™ä¸ªå½¢å¼ç®€å•çš„ toMap æ˜¯å¾ˆå®Œç¾çš„ã€‚å¦‚æœå¤šä¸ª Stream å…ƒç´ æ˜ å°„åˆ°åŒä¸€ä¸ªé”®ï¼Œpipeline å°±ä¼šæŠ›å‡ºä¸€ä¸ª IllegalStateException å¼‚å¸¸å°†å®ƒç»ˆæ­¢ã€‚</p><p>toMap æ›´å¤æ‚çš„å½¢å¼ï¼Œä»¥åŠ groupingBy æ–¹æ³•ï¼Œæä¾›äº†æ›´å¤šå¤„ç†è¿™ç±»å†²çªçš„ç­–ç•¥ã€‚å…¶ä¸­ä¸€ç§æ–¹å¼æ˜¯é™¤äº†ç»™ toMap æ–¹æ³•æä¾›äº†é”®å’Œå€¼æ˜ å°„å™¨ä¹‹å¤–ï¼Œè¿˜æä¾›ä¸€ä¸ªåˆå¹¶å‡½æ•°ã€‚åˆå¹¶å‡½æ•°æ˜¯ä¸€ä¸ª BinaryOperator&lt;V&gt;ï¼Œè¿™é‡Œçš„ V æ˜¯æ˜ å°„çš„å€¼ç±»å‹ã€‚åˆå¹¶å‡½æ•°å°†ä¸é”®å…³è”çš„ä»»ä½•å…¶ä»–å€¼ä¸ç°æœ‰å€¼åˆå¹¶èµ·æ¥ï¼Œå› æ­¤ï¼Œå‡å¦‚åˆå¹¶å‡½æ•°æ˜¯ä¹˜æ³•ï¼Œå¾—åˆ°çš„å€¼å°±æ˜¯ä¸è¯¥å€¼æ˜ å°„çš„é”®å…³è”çš„æ‰€æœ‰å€¼çš„ç§¯ã€‚</p><p>å¸¦æœ‰ä¸‰ä¸ªå‚æ•°çš„ toMap å½¢å¼ï¼Œå¯¹äºå®Œæˆä»é”®åˆ°ä¸é”®å…³è”çš„è¢«é€‰å…ƒç´ çš„æ˜ å°„ä¹Ÿæ˜¯éå¸¸æœ‰ç”¨çš„ã€‚å‡è®¾æœ‰ä¸€ä¸ª Streamï¼Œä»£è¡¨ä¸åŒæ­Œå”±å®¶çš„å”±ç‰‡ï¼Œæˆ‘ä»¬æƒ³å¾—åˆ°ä¸€ä¸ªä»æ­Œå”±å®¶åˆ°æœ€ç•…é”€å”±ç‰‡ä¹‹é—´çš„æ˜ å°„ã€‚ä¸‹é¢è¿™ä¸ªæ”¶é›†å™¨å°±å¯ä»¥å®Œæˆè¿™é¡¹ä»»åŠ¡ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Collector to generate a map from key to chosen element for key</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Artist</span><span class="token punctuation">,</span> <span class="token class-name">Album</span><span class="token punctuation">&gt;</span></span> topHits <span class="token operator">=</span> albums<span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token function">toMap</span><span class="token punctuation">(</span><span class="token class-name">Album</span><span class="token operator">::</span><span class="token function">artist</span><span class="token punctuation">,</span> a <span class="token operator">-&gt;</span> a<span class="token punctuation">,</span> <span class="token function">maxBy</span><span class="token punctuation">(</span><span class="token function">comparing</span><span class="token punctuation">(</span><span class="token class-name">Album</span><span class="token operator">::</span><span class="token function">sales</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼Œè¿™ä¸ªæ¯”è¾ƒå™¨ä½¿ç”¨äº†é™æ€å·¥å‚æ–¹æ³• maxByï¼Œè¿™æ˜¯ä» BinaryOperator é™æ€å¯¼å…¥çš„ã€‚è¯¥æ–¹æ³•å°† Comparator&lt;T&gt; è½¬æ¢æˆä¸€ä¸ª BinaryOperator&lt;T&gt;ï¼Œç”¨äºè®¡ç®—æŒ‡å®šæ¯”è¾ƒå™¨äº§ç”Ÿçš„æœ€å¤§å€¼ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ¯”è¾ƒå™¨æ˜¯ç”±æ¯”è¾ƒå™¨æ„é€ å™¨æ–¹æ³• comparing è¿”å›çš„ï¼Œå®ƒæœ‰ä¸€ä¸ªé”®æå–å‡½æ•° Album::salesã€‚è¿™çœ‹èµ·æ¥æœ‰ç‚¹ç»•ï¼Œä½†æ˜¯ä»£ç çš„å¯è¯»æ€§è‰¯å¥½ã€‚ä¸ä¸¥æ ¼åœ°è¯´ï¼Œå®ƒçš„æ„æ€æ˜¯â€œå°†å”±ç‰‡çš„ Stream è½¬æ¢æˆä¸€ä¸ªæ˜ å°„ï¼Œå°†æ¯ä¸ªæ­Œå”±å®¶æ˜ å°„åˆ°é”€é‡æœ€ä½³çš„å”±ç‰‡â€ã€‚è¿™å°±éå¸¸æ¥è¿‘é—®é¢˜é™ˆè¿°äº†ã€‚</p><p>å¸¦æœ‰ä¸‰ä¸ªå‚æ•°çš„ toMap å½¢å¼è¿˜æœ‰å¦ä¸€ç§ç”¨é€”ï¼Œå³ç”Ÿæˆä¸€ä¸ªæ”¶é›†å™¨ï¼Œå½“æœ‰å†²çªæ—¶å¼ºåˆ¶â€œä¿ç•™æœ€åæ›´æ–°â€ã€‚å¯¹äºè®¸å¤š Stream è€Œè¨€ï¼Œç»“æœæ˜¯ä¸ç¡®å®šçš„ï¼Œä½†å¦‚æœä¸æ˜ å°„å‡½æ•°çš„é”®å…³è”çš„æ‰€æœ‰å€¼éƒ½ç›¸åŒï¼Œæˆ–è€…éƒ½æ˜¯å¯æ¥å—çš„ï¼Œé‚£ä¹ˆä¸‹é¢è¿™ä¸ªæ”¶é›†å™¨çš„è¡Œä¸ºå°±æ­£æ˜¯ä½ æ‰€è¦çš„ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Collector to impose last-write-wins policy</span>
<span class="token function">toMap</span><span class="token punctuation">(</span>keyMapper<span class="token punctuation">,</span> valueMapper<span class="token punctuation">,</span> <span class="token punctuation">(</span>oldVal<span class="token punctuation">,</span> newVal<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> newVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>toMap çš„ç¬¬ä¸‰ä¸ªä¹Ÿæ˜¯æœ€åä¸€ç§å½¢å¼æ˜¯ï¼Œå¸¦æœ‰ç¬¬å››ä¸ªå‚æ•°ï¼Œè¿™æ˜¯ä¸€ä¸ªæ˜ å°„å·¥å‚ï¼Œåœ¨ä½¿ç”¨æ—¶è¦æŒ‡å®šç‰¹æ®Šçš„æ˜ å°„å®ç°ï¼Œå¦‚ EnumMap æˆ–è€… TreeMapã€‚</p><p>toMap çš„å‰ä¸‰ç§ç‰ˆæœ¬è¿˜æœ‰å¦å¤–çš„å˜æ¢å½¢å¼ï¼Œå‘½åä¸º toConcurrentMapï¼Œèƒ½æœ‰æ•ˆåœ°å¹¶è¡Œè¿è¡Œï¼Œå¹¶ç”Ÿæˆ ConcurrentHashMap å®ä¾‹ã€‚</p><p>é™¤äº† toMap æ–¹æ³•ï¼ŒCollectors API è¿˜æä¾›äº† groupingBy æ–¹æ³•ï¼Œå®ƒè¿”å›æ”¶é›†å™¨ä»¥ç”Ÿæˆæ˜ å°„ï¼Œæ ¹æ®åˆ†ç±»å‡½æ•°å°†å…ƒç´ åˆ†é—¨åˆ«ç±»ã€‚åˆ†ç±»å‡½æ•°å¸¦æœ‰ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›å…¶æ‰€å±çš„ç±»åˆ«ã€‚è¿™ä¸ªç±»åˆ«å°±æ˜¯å…ƒç´ çš„æ˜ å°„é”®ã€‚groupingBy æ–¹æ³•æœ€ç®€å•çš„ç‰ˆæœ¬æ˜¯åªæœ‰ä¸€ä¸ªåˆ†ç±»å™¨ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ˜ å°„ï¼Œæ˜ å°„å€¼ä¸ºæ¯ä¸ªç±»åˆ«ä¸­æ‰€æœ‰å…ƒç´ çš„åˆ—è¡¨ã€‚ä¸‹åˆ—ä»£ç å°±æ˜¯åœ¨ç¬¬ 45 æ¡çš„ Anagram ç¨‹åºä¸­ç”¨äºç”Ÿæˆæ˜ å°„ï¼ˆä»æŒ‰å­—æ¯æ’åºçš„å•è¯ï¼Œæ˜ å°„åˆ°å­—æ¯æ’åºç›¸åŒçš„å•è¯åˆ—è¡¨ï¼‰çš„æ”¶é›†å™¨ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>words<span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token function">groupingBy</span><span class="token punctuation">(</span>word <span class="token operator">-&gt;</span> <span class="token function">alphabetize</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦‚æœè¦è®© groupingBy è¿”å›ä¸€ä¸ªæ”¶é›†å™¨ï¼Œç”¨å®ƒç”Ÿæˆä¸€ä¸ªå€¼è€Œä¸æ˜¯åˆ—è¡¨çš„æ˜ å°„ï¼Œé™¤äº†åˆ†ç±»å™¨ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æŒ‡å®šä¸€ä¸ªä¸‹æ¸¸æ”¶é›†å™¨ã€‚ä¸‹æ¸¸æ”¶é›†å™¨ä»åŒ…å«æŸä¸ªç±»åˆ«ä¸­æ‰€æœ‰å…ƒç´ çš„ Stream ä¸­ç”Ÿæˆä¸€ä¸ªå€¼ã€‚è¿™ä¸ªå‚æ•°æœ€ç®€å•çš„ç”¨æ³•æ˜¯ä¼ å…¥ toSet()ï¼Œç»“æœç”Ÿæˆä¸€ä¸ªæ˜ å°„ï¼Œè¿™ä¸ªæ˜ å°„å€¼ä¸ºå…ƒç´ é›†åˆè€Œéåˆ—è¡¨ã€‚</p><p>å¦ä¸€ç§æ–¹æ³•æ˜¯ä¼ å…¥ toCollection(collectionFactory)ï¼Œå…è®¸åˆ›å»ºå­˜æ”¾å„å…ƒç´ ç±»åˆ«çš„é›†åˆã€‚è¿™æ ·å°±å¯ä»¥è‡ªç”±é€‰æ‹©è‡ªå·±æƒ³è¦çš„ä»»ä½•é›†åˆç±»å‹äº†ã€‚å¸¦ä¸¤ä¸ªå‚æ•°çš„ groupingBy ç‰ˆæœ¬çš„å¦ä¸€ç§ç®€å•ç”¨æ³•æ˜¯ï¼Œä¼ å…¥ counting() ä½œä¸ºä¸‹æ¸¸æ”¶é›†å™¨ã€‚è¿™æ ·ä¼šç”Ÿæˆä¸€ä¸ªæ˜ å°„ï¼Œå®ƒå°†æ¯ä¸ªç±»åˆ«ä¸è¯¥ç±»åˆ«ä¸­çš„å…ƒç´ æ•°é‡å…³è”èµ·æ¥ï¼Œè€Œä¸æ˜¯åŒ…å«å…ƒç´ çš„é›†åˆã€‚è¿™æ­£æ˜¯åœ¨æœ¬æ¡ç›®å¼€å¤´å¤„é¢‘ç‡è¡¨èŒƒä¾‹ä¸­è§åˆ°çš„ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> freq <span class="token operator">=</span> words<span class="token punctuation">.</span><span class="token function">col1ect</span><span class="token punctuation">(</span><span class="token function">groupingBy</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">toLowerCase</span><span class="token punctuation">,</span> <span class="token function">counting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>ï¼›
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>groupingBy çš„ç¬¬ä¸‰ä¸ªç‰ˆæœ¬ï¼Œé™¤äº†ä¸‹æ¸¸æ”¶é›†å™¨ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æŒ‡å®šä¸€ä¸ªæ˜ å°„å·¥å‚ã€‚æ³¨æ„ï¼Œè¿™ä¸ªæ–¹æ³•è¿èƒŒäº†æ ‡å‡†çš„å¯ä¼¸ç¼©å‚æ•°åˆ—è¡¨æ¨¡å¼ï¼šå‚æ•° mapFactory è¦åœ¨ downStream å‚æ•°ä¹‹å‰ï¼Œè€Œä¸æ˜¯åœ¨å®ƒä¹‹åã€‚groupingBy çš„è¿™ä¸ªç‰ˆæœ¬å¯ä»¥æ§åˆ¶æ‰€åŒ…å›´çš„æ˜ å°„ï¼Œä»¥åŠæ‰€åŒ…å›´çš„é›†åˆï¼Œå› æ­¤ï¼Œæ¯”å¦‚å¯ä»¥å®šä¹‰ä¸€ä¸ªæ”¶é›†å™¨ï¼Œè®©å®ƒè¿”å›å€¼ä¸º TreeSets çš„ TreeMapã€‚</p><p>groupingByConcurrent æ–¹æ³•æä¾›äº† groupingBy æ‰€æœ‰ä¸‰ç§é‡è½½çš„å˜ä½“ã€‚è¿™äº›å˜ä½“å¯ä»¥æœ‰æ•ˆåœ°å¹¶å‘è¿è¡Œï¼Œç”Ÿæˆ ConcurrentHashMap å®ä¾‹ã€‚è¿˜æœ‰ä¸€ç§æ¯”è¾ƒå°‘ç”¨åˆ°çš„ groupingBy å˜ä½“å«ä½œ partitioningByã€‚é™¤äº†åˆ†ç±»æ–¹æ³•ä¹‹å¤–ï¼Œå®ƒè¿˜å¸¦ä¸€ä¸ªæ–­è¨€ï¼Œå¹¶è¿”å›ä¸€ä¸ªé”®ä¸º Boolean çš„æ˜ å°„ã€‚è¿™ä¸ªæ–¹æ³•æœ‰ä¸¤ä¸ªé‡è½½ï¼Œå…¶ä¸­ä¸€ä¸ªé™¤äº†å¸¦æœ‰æ–­è¨€ä¹‹å¤–ï¼Œè¿˜å¸¦æœ‰ä¸‹æ¸¸æ”¶é›†å™¨ã€‚</p><p>counting æ–¹æ³•è¿”å›çš„æ”¶é›†å™¨ä»…ç”¨ä½œä¸‹æ¸¸æ”¶é›†å™¨ã€‚é€šè¿‡åœ¨ Stream ä¸Šçš„ count æ–¹æ³•ï¼Œç›´æ¥å°±æœ‰ç›¸åŒçš„åŠŸèƒ½ï¼Œå› æ­¤å‹æ ¹æ²¡æœ‰ç†ç”±ä½¿ç”¨ collect (counting())ã€‚è¿™ä¸ªå±æ€§è¿˜æœ‰ 15 ç§ Collectors å…¶ä¸­åŒ…å« 9 ç§æ–¹æ³•å…¶åç§°ä»¥ summingã€averaging å’Œ summarizing å¼€å¤´ï¼ˆç›¸åº”çš„ Stream åŸºæœ¬ç±»å‹ä¸Šå°±æœ‰ç›¸åŒçš„åŠŸèƒ½ï¼‰ã€‚å®ƒä»¬è¿˜åŒ…æ‹¬ reducingã€filteringã€mappingã€flatMapping å’Œ collectingAndThen æ–¹æ³•ã€‚å¤§å¤šæ•°ç¨‹åºå‘˜éƒ½èƒ½å®‰å…¨åœ°é¿å¼€è¿™é‡Œçš„å¤§å¤šæ•°æ–¹æ³•ã€‚ä»è®¾è®¡çš„è§’åº¦æ¥çœ‹ï¼Œè¿™äº›æ”¶é›†å™¨è¯•å›¾éƒ¨åˆ†å¤åˆ¶æ”¶é›†å™¨ä¸­ Stream çš„åŠŸèƒ½ï¼Œä»¥ä¾¿ä¸‹æ¸¸æ”¶é›†å™¨å¯ä»¥æˆä¸º&quot;ministreamâ€ã€‚</p><p>ç›®å‰å·²ç»æåˆ°äº† 3 ä¸ª Collectors æ–¹æ³•ã€‚è™½ç„¶å®ƒä»¬éƒ½åœ¨ Collectors ä¸­ï¼Œä½†æ˜¯å¹¶ä¸åŒ…å«é›†åˆã€‚å‰ä¸¤ä¸ªæ˜¯ minBy å’Œ maxByï¼Œå®ƒä»¬æœ‰ä¸€ä¸ªæ¯”è¾ƒå™¨ï¼Œå¹¶è¿”å›ç”±æ¯”è¾ƒå™¨ç¡®å®šçš„ Stream ä¸­çš„æœ€å°‘å…ƒç´ æˆ–è€…æœ€å¤šå…ƒç´ ã€‚å®ƒä»¬æ˜¯ Stream æ¥å£ä¸­ min å’Œ max æ–¹æ³•çš„ç²—ç•¥æ¦‚æ‹¬ï¼Œä¹Ÿæ˜¯ BinaryOperator ä¸­åŒåæ–¹æ³•è¿”å›çš„äºŒè¿›åˆ¶æ“ä½œç¬¦ï¼Œä¸æ”¶é›†å™¨ç›¸ç±»ä¼¼ã€‚å›é¡¾ä¸€ä¸‹åœ¨æœ€ç•…é”€å”±ç‰‡èŒƒä¾‹ä¸­ç”¨è¿‡çš„ BinaryOperator.maxBy æ–¹æ³•ã€‚</p><p>æœ€åä¸€ä¸ª Collectors æ–¹æ³•æ˜¯ joiningï¼Œå®ƒåªåœ¨ CharSequence å®ä¾‹çš„ Stream ä¸­æ“ä½œï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ã€‚å®ƒä»¥å‚æ•°çš„å½¢å¼è¿”å›ä¸€ä¸ªç®€å•åœ°åˆå¹¶å…ƒç´ çš„æ”¶é›†å™¨ã€‚å…¶ä¸­ä¸€ç§å‚æ•°å½¢å¼å¸¦æœ‰ä¸€ä¸ªåä¸º delimiterï¼ˆåˆ†ç•Œç¬¦ï¼‰çš„ CharSequence å‚æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªè¿æ¥ Stream å…ƒç´ å¹¶åœ¨ç›¸é‚»å…ƒç´ ä¹‹é—´æ’å…¥åˆ†éš”ç¬¦çš„æ”¶é›†å™¨ã€‚å¦‚æœä¼ å…¥ä¸€ä¸ªé€—å·ä½œä¸ºåˆ†éš”ç¬¦ï¼Œæ”¶é›†å™¨å°±ä¼šè¿”å›ä¸€ä¸ªç”¨é€—å·éš”å¼€çš„å€¼å­—ç¬¦ä¸²ï¼ˆä½†è¦æ³¨æ„ï¼Œå¦‚æœ Stream ä¸­çš„ä»»ä½•å…ƒç´ ä¸­åŒ…å«é€—å·ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å°±ä¼šå¼•èµ·æ­§ä¹‰ï¼‰ã€‚è¿™ä¸‰ç§å‚æ•°å½¢å¼ï¼Œé™¤äº†åˆ†éš”ç¬¦ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå‰ç¼€å’Œä¸€ä¸ªåç¼€ã€‚æœ€ç»ˆçš„æ”¶é›†å™¨ç”Ÿæˆçš„å­—ç¬¦ä¸²ï¼Œä¼šåƒåœ¨æ‰“å°é›†åˆæ—¶æ‰€å¾—åˆ°çš„é‚£æ ·ï¼Œå¦‚ [ came, saw, conquered ]ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼Œç¼–å†™ Stream pipeline çš„æœ¬è´¨æ˜¯æ— å‰¯ä½œç”¨çš„å‡½æ•°å¯¹è±¡ã€‚è¿™é€‚ç”¨äºä¼ å…¥ Stream åŠç›¸å…³å¯¹è±¡çš„æ‰€æœ‰å‡½æ•°å¯¹è±¡ã€‚ç»ˆæ­¢æ“ä½œä¸­çš„ forEach åº”è¯¥åªç”¨æ¥æŠ¥å‘Šç”± Stream æ‰§è¡Œçš„è®¡ç®—ç»“æœï¼Œè€Œä¸æ˜¯è®©å®ƒæ‰§è¡Œè®¡ç®—ã€‚ä¸ºäº†æ­£ç¡®åœ°ä½¿ç”¨ Streamï¼Œå¿…é¡»äº†è§£æ”¶é›†å™¨ã€‚æœ€é‡è¦çš„æ”¶é›†å™¨å·¥å‚æ˜¯ toListã€toSetã€toMapã€groupingBy å’Œ joiningã€‚</p><h2 id="ç¬¬-47-æ¡-stream-è¦ä¼˜å…ˆç”¨-collection-ä½œä¸ºè¿”å›ç±»å‹" tabindex="-1"><a class="header-anchor" href="#ç¬¬-47-æ¡-stream-è¦ä¼˜å…ˆç”¨-collection-ä½œä¸ºè¿”å›ç±»å‹" aria-hidden="true">#</a> ç¬¬ 47 æ¡ï¼šStream è¦ä¼˜å…ˆç”¨ Collection ä½œä¸ºè¿”å›ç±»å‹</h2><p>è®¸å¤šæ–¹æ³•éƒ½è¿”å›å…ƒç´ çš„åºåˆ—ã€‚åœ¨ Java 8 ä¹‹å‰ï¼Œè¿™ç±»æ–¹æ³•æ˜æ˜¾çš„è¿”å›ç±»å‹æ˜¯é›†åˆæ¥å£ Collectionã€Set å’Œ Listï¼›Iterableï¼›ä»¥åŠæ•°ç»„ç±»å‹ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¾ˆå®¹æ˜“ç¡®å®šè¦è¿”å›è¿™å…¶ä¸­å“ªä¸€ç§ç±»å‹ã€‚æ ‡å‡†æ˜¯ä¸€ä¸ªé›†åˆæ¥å£ã€‚å¦‚æœæŸä¸ªæ–¹æ³•åªä¸º for-each å¾ªç¯æˆ–è€…è¿”å›åºåˆ—è€Œå­˜åœ¨ï¼Œæ— æ³•ç”¨å®ƒæ¥å®ç°ä¸€äº› Collection æ–¹æ³•ï¼ˆä¸€èˆ¬æ˜¯ contains(Object)ï¼‰ï¼Œé‚£ä¹ˆå°±ç”¨ Iterable æ¥å£å§ã€‚å¦‚æœè¿”å›çš„å…ƒç´ æ˜¯åŸºæœ¬ç±»å‹å€¼ï¼Œæˆ–è€…æœ‰ä¸¥æ ¼çš„æ€§èƒ½è¦æ±‚ï¼Œå°±ä½¿ç”¨æ•°ç»„ã€‚åœ¨ Java 8 ä¸­å¢åŠ äº† Streamï¼Œæœ¬è´¨ä¸Šå¯¼è‡´ç»™åºåˆ—åŒ–è¿”å›çš„æ–¹æ³•é€‰æ‹©é€‚å½“è¿”å›ç±»å‹çš„ä»»åŠ¡å˜å¾—æ›´å¤æ‚äº†ã€‚</p><p>æˆ–è®¸ä½ æ›¾å¬è¯´è¿‡ï¼Œç°åœ¨ Stream æ˜¯è¿”å›å…ƒç´ åºåˆ—æœ€æ˜æ˜¾çš„é€‰æ‹©äº†ï¼Œä½†å¦‚ç¬¬ 45 æ¡æ‰€è¿°ï¼ŒStream å¹¶æ²¡æœ‰æ·˜æ±°è¿­ä»£ï¼šè¦ç¼–å†™å‡ºä¼˜ç§€çš„ä»£ç å¿…é¡»å·§å¦™åœ°å°† Stream ä¸è¿­ä»£ç»“åˆèµ·æ¥ä½¿ç”¨ã€‚å¦‚æœä¸€ä¸ª API åªè¿”å›ä¸€ä¸ª Streamï¼Œé‚£äº›æƒ³è¦ç”¨ for-each å¾ªç¯éå†è¿”å›åºåˆ—çš„ç”¨æˆ·è‚¯å®šè¦å¤±æœ›äº†ã€‚å› ä¸º Stream æ¥å£åªåœ¨ Iterable æ¥å£ä¸­åŒ…å«äº†å”¯ä¸€ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼ŒStream å¯¹äºè¯¥æ–¹æ³•çš„è§„èŒƒä¹Ÿé€‚ç”¨äº Iterable çš„ã€‚å”¯ä¸€å¯ä»¥è®©ç¨‹åºå‘˜é¿å…ç”¨ for-each å¾ªç¯éå† Stream çš„æ˜¯ Stream æ— æ³•æ‰©å±• Iterable æ¥å£ã€‚</p><p>é—æ†¾çš„æ˜¯ï¼Œè¿™ä¸ªé—®é¢˜è¿˜æ²¡æœ‰é€‚å½“çš„è§£å†³åŠæ³•ã€‚ä¹çœ‹ä¹‹ä¸‹ï¼Œå¥½åƒç»™ Stream çš„ iterator æ–¹æ³•ä¼ å…¥ä¸€ä¸ªæ–¹æ³•å¼•ç”¨å¯ä»¥è§£å†³ã€‚è¿™æ ·å¾—åˆ°çš„ä»£ç å¯èƒ½æœ‰ç‚¹æ‚ä¹±ã€ä¸æ¸…æ™°ï¼Œä½†ä¹Ÿä¸ç®—éš¾ä»¥ç†è§£ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Won&#39;t compile, due to limitations on Java&#39;s type inference</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ProcessHandle</span> ph <span class="token operator">:</span> <span class="token class-name">ProcessHandle</span><span class="token punctuation">.</span><span class="token function">allProcesses</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">::</span><span class="token function">iterator</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token comment">// Process the process</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é—æ†¾çš„æ˜¯ï¼Œå¦‚æœæƒ³è¦ç¼–è¯‘è¿™æ®µä»£ç ï¼Œå°±ä¼šå¾—åˆ°ä¸€æ¡æŠ¥é”™çš„ä¿¡æ¯ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Test</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">6</span><span class="token operator">:</span> error<span class="token operator">:</span> method reference not expected here 
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ProcessHandle</span> ph <span class="token operator">:</span> <span class="token class-name">ProcessHandle</span><span class="token punctuation">.</span><span class="token function">alIProcesses</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">::</span><span class="token function">iterator</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token operator">^</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸ºäº†ä½¿ä»£ç èƒ½å¤Ÿè¿›è¡Œç¼–è¯‘ï¼Œå¿…é¡»å°†æ–¹æ³•å¼•ç”¨è½¬æ¢æˆé€‚å½“å‚æ•°åŒ–çš„ Iterableï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Hideous workaround to iterate over a stream</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ProcessHandle</span> ph <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ProcessHandle</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> <span class="token class-name">ProcessHandle</span><span class="token punctuation">.</span><span class="token function">allProcesses</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">::</span><span class="token function">iterator</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªå®¢æˆ·ç«¯ä»£ç å¯è¡Œï¼Œä½†æ˜¯å®é™…ä½¿ç”¨æ—¶è¿‡äºæ‚ä¹±ã€ä¸æ¸…æ™°ã€‚æ›´å¥½çš„è§£å†³åŠæ³•æ˜¯ä½¿ç”¨é€‚é…å™¨æ–¹æ³•ã€‚JDK æ²¡æœ‰æä¾›è¿™æ ·çš„æ–¹æ³•ï¼Œä½†æ˜¯ç¼–å†™èµ·æ¥å¾ˆå®¹æ˜“ï¼Œä½¿ç”¨åœ¨ä¸Šè¿°ä»£ç ä¸­å†…åµŒçš„ç›¸åŒæ–¹æ³•å³å¯ã€‚æ³¨æ„ï¼Œåœ¨é€‚é…å™¨æ–¹æ³•ä¸­æ²¡æœ‰å¿…è¦è¿›è¡Œè½¬æ¢ï¼Œå› ä¸º Java çš„ç±»å‹å¼•ç”¨åœ¨è¿™é‡Œæ­£å¥½æ´¾ä¸Šäº†ç”¨åœºï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Adapter from Stream&lt;E&gt; to Iterable&lt;E&gt;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">iterableOf</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> stream<span class="token punctuation">)</span> <span class="token punctuation">(</span> 
  <span class="token keyword">return</span> stream<span class="token operator">::</span><span class="token function">iterator</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ‰äº†è¿™ä¸ªé€‚é…å™¨ï¼Œå°±å¯ä»¥åˆ©ç”¨ for-each è¯­å¥éå†ä»»ä½• Streamï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">ProcessHandle</span> p <span class="token operator">:</span> <span class="token function">iterableOf</span><span class="token punctuation">(</span><span class="token class-name">ProcessHandle</span><span class="token punctuation">.</span><span class="token function">allProcesses</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// Process the process</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼Œç¬¬ 34 æ¡ä¸­ Anagrams ç¨‹åºçš„ Stream ç‰ˆæœ¬æ˜¯ä½¿ç”¨ Files.lines æ–¹æ³•è¯»å–è¯å…¸ï¼Œè€Œè¿­ä»£ç‰ˆæœ¬åˆ™ä½¿ç”¨äº†æ‰«æå™¨ã€‚Files.lines æ–¹æ³•ä¼˜äºæ‰«æå™¨ï¼Œå› ä¸ºåè€…é»˜é»˜åœ°åæ‰äº†åœ¨è¯»å–æ–‡ä»¶è¿‡ç¨‹ä¸­é‡åˆ°çš„æ‰€æœ‰å¼‚å¸¸ã€‚æœ€ç†æƒ³çš„æ–¹å¼æ˜¯åœ¨è¿­ä»£ç‰ˆæœ¬ä¸­ä¹Ÿä½¿ç”¨ Files.linesã€‚è¿™æ˜¯ç¨‹åºå‘˜åœ¨ç‰¹å®šæƒ…å†µä¸‹æ‰€åšçš„ä¸€ç§å¦¥åï¼Œæ¯”å¦‚å½“ API åªæœ‰ Stream èƒ½è®¿é—®åºåˆ—ï¼Œè€Œä»–ä»¬æƒ³é€šè¿‡ for-each è¯­å¥éå†è¯¥åºåˆ—çš„æ—¶å€™ã€‚</p><p>åè¿‡æ¥è¯´ï¼Œæƒ³è¦åˆ©ç”¨ Stream pipeline å¤„ç†åºåˆ—çš„ç¨‹åºå‘˜ï¼Œä¹Ÿä¼šè¢«åªæä¾› Iterable çš„ API æå¾—æŸæ‰‹æ— ç­–ã€‚åŒæ ·åœ°ï¼ŒJDK æ²¡æœ‰æä¾›é€‚é…å™¨ï¼Œä½†æ˜¯ç¼–å†™èµ·æ¥ä¹Ÿå¾ˆå®¹æ˜“ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Adapter from Iterable&lt;E&gt; to Stream&lt;E&gt;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">streamOf</span><span class="token punctuation">(</span><span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> iterable<span class="token punctuation">)</span> <span class="token punctuation">(</span> 
  <span class="token keyword">return</span> <span class="token class-name">StreamSupport</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>iterable<span class="token punctuation">.</span><span class="token function">spliterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœåœ¨ç¼–å†™ä¸€ä¸ªè¿”å›å¯¹è±¡åºåˆ—çš„æ–¹æ³•æ—¶ï¼Œå°±çŸ¥é“å®ƒåªåœ¨ Stream pipeline ä¸­ä½¿ç”¨ï¼Œå½“ç„¶å°±å¯ä»¥æ”¾å¿ƒåœ°è¿”å› Stream äº†ã€‚åŒæ ·åœ°ï¼Œå½“è¿”å›åºåˆ—çš„æ–¹æ³•åªåœ¨è¿­ä»£ä¸­ä½¿ç”¨æ—¶ï¼Œåˆ™åº”è¯¥è¿”å› Iterableã€‚ä½†å¦‚æœæ˜¯ç”¨å…¬å…±çš„ API è¿”å›åºåˆ—ï¼Œåˆ™åº”è¯¥ä¸ºé‚£äº›æƒ³è¦ç¼–å†™ Stream pipelineï¼Œä»¥åŠæƒ³è¦ç¼–å†™ for-each è¯­å¥çš„ç”¨æˆ·åˆ†åˆ«æä¾›ï¼Œé™¤éæœ‰è¶³å¤Ÿçš„ç†ç”±ç›¸ä¿¡å¤§å¤šæ•°ç”¨æˆ·éƒ½æƒ³è¦ä½¿ç”¨ç›¸åŒçš„æœºåˆ¶ã€‚</p><p>Collection æ¥å£æ˜¯ Iterable çš„ä¸€ä¸ªå­ç±»å‹ï¼Œå®ƒæœ‰ä¸€ä¸ª stream æ–¹æ³•ï¼Œå› æ­¤æä¾›äº†è¿­ä»£å’Œ stream è®¿é—®ã€‚å¯¹äºå…¬å…±çš„ã€è¿”å›åºåˆ—çš„æ–¹æ³•ï¼ŒCollection æˆ–è€…é€‚å½“çš„å­ç±»å‹é€šå¸¸æ˜¯æœ€ä½³çš„è¿”å›ç±»å‹ã€‚æ•°ç»„ä¹Ÿé€šè¿‡ Arrays.asList å’Œ Stream.of æ–¹æ³•æä¾›äº†ç®€å•çš„è¿­ä»£å’Œ stream è®¿é—®ã€‚å¦‚æœè¿”å›çš„åºåˆ—è¶³å¤Ÿå°ï¼Œå®¹æ˜“å­˜å‚¨ï¼Œæˆ–è®¸æœ€å¥½è¿”å›æ ‡å‡†çš„é›†åˆå®ç°ï¼Œå¦‚ ArrayList æˆ–è€… HashSetã€‚ä½†æ˜¯åƒä¸‡åˆ«åœ¨å†…å­˜ä¸­ä¿å­˜å·¨å¤§çš„åºåˆ—ï¼Œå°†å®ƒä½œä¸ºé›†åˆè¿”å›å³å¯ã€‚</p><p>å¦‚æœè¿”å›çš„åºåˆ—å¾ˆå¤§ï¼Œä½†æ˜¯èƒ½è¢«å‡†ç¡®è¡¨è¿°ï¼Œå¯ä»¥è€ƒè™‘å®ç°ä¸€ä¸ªä¸“ç”¨çš„é›†åˆã€‚å‡è®¾æƒ³è¦è¿”å›ä¸€ä¸ªæŒ‡å®šé›†åˆçš„å¹‚é›†ï¼Œå…¶ä¸­åŒ…æ‹¬å®ƒæ‰€æœ‰çš„å­é›†ã€‚{ a, b, c } çš„å¹‚é›†æ˜¯ { {}, {a}, {b}, {c}, {a, b}, {a, c}, (b, c}, {a, b, c} }ã€‚å¦‚æœé›†åˆä¸­æœ‰ n ä¸ªå…ƒç´ ï¼Œå®ƒçš„å¹‚é›†å°±æœ‰ 2n ä¸ªã€‚å› æ­¤ï¼Œä¸å¿…è€ƒè™‘å°†å¹‚é›†ä¿å­˜åœ¨æ ‡å‡†çš„é›†åˆå®ç°ä¸­ã€‚ä½†æ˜¯ï¼Œæœ‰äº† AbstractList çš„ååŠ©ï¼Œä¸ºæ­¤å®ç°å®šåˆ¶é›†åˆå°±å¾ˆå®¹æ˜“äº†ã€‚</p><p>æŠ€å·§åœ¨äºï¼Œç”¨å¹‚é›†ä¸­æ¯ä¸ªå…ƒç´ çš„ç´¢å¼•ä½œä¸ºä½å‘é‡ï¼Œåœ¨ç´¢å¼•ä¸­æ’ç¬¬ n ä½ï¼Œè¡¨ç¤ºæºé›†åˆä¸­ç¬¬ n ä½å…ƒç´ å­˜åœ¨æˆ–è€…ä¸å­˜åœ¨ã€‚å®è´¨ä¸Šï¼Œåœ¨äºŒè¿›åˆ¶æ•° 0 è‡³ 2n-1 å’Œæœ‰ n ä½å…ƒç´ çš„é›†åˆçš„å¹‚é›†ä¹‹é—´ï¼Œæœ‰ä¸€ä¸ªè‡ªç„¶æ˜ å°„ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Returns the power set of an input set as custom collection</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PowerSet</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Set</span><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> src <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>src<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">30</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;Set too big&quot;</span> <span class="token operator">+</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AbstractList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Set</span><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 2 to the power srcSize</span>
                <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> src<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">contains</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> o <span class="token keyword">instanceof</span> <span class="token class-name">Set</span> <span class="token operator">&amp;&amp;</span> src<span class="token punctuation">.</span><span class="token function">containsAll</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token punctuation">)</span> o<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">,</span> index <span class="token operator">&gt;&gt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>index <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        result<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>src<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> result<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼Œå¦‚æœè¾“å…¥å€¼é›†åˆä¸­è¶…è¿‡ 30 ä¸ªå…ƒç´ ï¼ŒPowerSet.of ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚è¿™æ­£æ˜¯ç”¨ Collection è€Œä¸æ˜¯ç”¨ Stream æˆ– Iterable ä½œä¸ºè¿”å›ç±»å‹çš„ç¼ºç‚¹ï¼šCollection æœ‰ä¸€ä¸ªè¿”å› int ç±»å‹çš„ size æ–¹æ³•ï¼Œå®ƒé™åˆ¶è¿”å›çš„åºåˆ—é•¿åº¦ä¸º Integer.MAX_VALUE æˆ–è€… 2<sup>31</sup>-1ã€‚å¦‚æœé›†åˆæ›´å¤§ï¼Œç”šè‡³æ— é™å¤§ï¼ŒCollection è§„èŒƒç¡®å®å…è®¸ size æ–¹æ³•è¿”å› 2<sup>31</sup>-1ï¼Œä½†è¿™å¹¶éæ˜¯æœ€ä»¤äººæ»¡æ„çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>ä¸ºäº†åœ¨ Abstractcollection ç¼–å†™â€”ä¸ª Collection å®ç°ï¼Œé™¤äº† Iterable å¿…éœ€çš„é‚£ä¸€ä¸ªæ–¹æ³•ä¹‹å¤–ï¼Œåªéœ€è¦å†å®ç°ä¸¤ä¸ªæ–¹æ³•ï¼šcontains å’Œ sizeã€‚è¿™äº›æ–¹æ³•ç»å¸¸å¾ˆå®¹æ˜“ç¼–å†™å‡ºé«˜æ•ˆçš„å®ç°ã€‚å¦‚æœä¸å¯è¡Œï¼Œæˆ–è®¸æ˜¯å› ä¸ºæ²¡æœ‰åœ¨è¿­ä»£å‘ç”Ÿä¹‹å‰å…ˆç¡®å®šåºåˆ—çš„å†…å®¹ï¼Œè¿”å› Stream æˆ–è€… Iterableï¼Œæ„Ÿè§‰å“ªä¸€ç§æ›´è‡ªç„¶å³å¯ã€‚å¦‚æœèƒ½é€‰æ‹©ï¼Œå¯ä»¥å°è¯•ç€åˆ†åˆ«ç”¨ä¸¤ä¸ªæ–¹æ³•è¿”å›ã€‚</p><p>æœ‰æ—¶å€™åœ¨é€‰æ‹©è¿”å›ç±»å‹æ—¶ï¼Œåªéœ€è¦çœ‹æ˜¯å¦æ˜“äºå®ç°å³å¯ã€‚ä¾‹å¦‚ï¼Œè¦ç¼–å†™ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨å®ƒè¿”å›ä¸€ä¸ªè¾“å…¥åˆ—è¡¨çš„æ‰€æœ‰ï¼ˆç›¸é‚»çš„ï¼‰å­åˆ—è¡¨ã€‚å®ƒåªç”¨ä¸‰è¡Œä»£ç æ¥ç”Ÿæˆè¿™äº›å­åˆ—è¡¨ï¼Œå¹¶å°†å®ƒä»¬æ”¾åœ¨ä¸€ä¸ªæ ‡å‡†çš„é›†åˆä¸­ï¼Œä½†å­˜æ”¾è¿™ä¸ªé›†åˆæ‰€éœ€çš„å†…å­˜æ˜¯æºåˆ—è¡¨å¤§å°çš„å¹³æ–¹ã€‚è¿™è™½ç„¶æ²¡æœ‰å¹‚é›†é‚£ä¹ˆç³Ÿç³•ï¼Œä½†æ˜¾ç„¶ä¹Ÿæ˜¯æ— æ³•æ¥å—çš„ã€‚åƒç»™å¹‚é›†å®ç°å®šåˆ¶çš„é›†åˆé‚£æ ·ï¼Œç¡®å®å¾ˆçƒ¦çï¼Œè¿™ä¸ªå¯èƒ½è¿˜æ›´ç”šï¼Œå› ä¸º JDK æ²¡æœ‰æä¾›åŸºæœ¬çš„ Iterator å®ç°æ¥æ”¯æŒã€‚</p><p>ä½†æ˜¯ï¼Œå®ç°è¾“å…¥åˆ—è¡¨çš„æ‰€æœ‰å­åˆ—è¡¨çš„ Stream æ˜¯å¾ˆç®€å•çš„ï¼Œå°½ç®¡å®ƒç¡®å®éœ€è¦æœ‰ç‚¹æ´å¯ŸåŠ›ã€‚æˆ‘ä»¬æŠŠåŒ…å«åˆ—è¡¨ç¬¬ä¸€ä¸ªå…ƒç´ çš„å­åˆ—è¡¨ç§°ä½œåˆ—è¡¨çš„å‰ç¼€ã€‚ä¾‹å¦‚ï¼Œ(a, b, c) çš„å‰ç¼€å°±æ˜¯ (a)ã€(a, b) å’Œ (a, b, c)ã€‚åŒæ ·åœ°ï¼ŒæŠŠåŒ…å«æœ€åä¸€ä¸ªå…ƒç´ çš„å­åˆ—è¡¨ç§°ä½œåç¼€ï¼Œå› æ­¤ (a, b ,c) çš„åç¼€å°±æ˜¯ (a, b, c)ã€(b, c) å’Œ (c)ã€‚è€ƒéªŒæ´å¯ŸåŠ›çš„æ˜¯ï¼Œåˆ—è¡¨çš„å­åˆ—è¡¨ä¸è¿‡æ˜¯å‰ç¼€çš„åç¼€ï¼ˆæˆ–è€…è¯´åç¼€çš„å‰ç¼€ï¼‰å’Œç©ºåˆ—è¡¨ã€‚è¿™ä¸€å‘ç°ç›´æ¥å¸¦æ¥äº†ä¸€ä¸ªæ¸…æ™°ä¸”ç›¸å½“ç®€æ´çš„å®ç°ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Returns a stream of all the sublists of its input list</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SubLists</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">emptyList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">prefixes</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token class-name">SubLists</span><span class="token operator">::</span><span class="token function">suffixes</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">prefixes</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">rangeClosed</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">mapToObj</span><span class="token punctuation">(</span>end <span class="token operator">-&gt;</span> list<span class="token punctuation">.</span><span class="token function">subList</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">suffixes</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">mapToObj</span><span class="token punctuation">(</span>start <span class="token operator">-&gt;</span> list<span class="token punctuation">.</span><span class="token function">subList</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼Œå®ƒç”¨ Stream.concat æ–¹æ³•å°†ç©ºåˆ—è¡¨æ·»åŠ åˆ°è¿”å›çš„ Streamã€‚å¦å¤–è¿˜ç”¨ flatMap æ–¹æ³•ç”Ÿæˆäº†ä¸€ä¸ªåŒ…å«äº†æ‰€æœ‰å‰ç¼€çš„æ‰€æœ‰åç¼€çš„ Streamã€‚æœ€åï¼Œé€šè¿‡æ˜ å°„ IntStream.range å’Œ IntStream.rangeClosed è¿”å›çš„è¿ç»­ int å€¼çš„ Streamï¼Œç”Ÿæˆäº†å‰ç¼€å’Œåç¼€ã€‚é€šä¿—åœ°è®²ï¼Œè¿™ä¸€æœ¯è¯­çš„æ„æ€å°±æ˜¯æŒ‡æ•°ä¸ºæ•´æ•°çš„æ ‡å‡† for å¾ªç¯çš„ Stream ç‰ˆæœ¬ã€‚å› æ­¤ï¼Œè¿™ä¸ªå­åˆ—è¡¨å®ç°æœ¬è´¨ä¸Šä¸æ˜æ˜¾çš„åµŒå¥—å¼ for å¾ªç¯ç›¸ç±»ä¼¼ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> start <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> start <span class="token operator">&lt;</span> src<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> start<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> end <span class="token operator">=</span> start <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> end <span class="token operator">&lt;=</span> src<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> end<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>src<span class="token punctuation">.</span><span class="token function">subList</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ª for å¾ªç¯ä¹Ÿå¯ä»¥ç›´æ¥ç¿»è¯‘æˆä¸€ä¸ª Streamã€‚è¿™æ ·å¾—åˆ°çš„ç»“æœæ¯”å‰ä¸€ä¸ªå®ç°æ›´åŠ ç®€æ´ï¼Œä½†æ˜¯å¯è¯»æ€§ç¨å¾®å·®äº†ä¸€ç‚¹ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Returns a stream of all the sublists of its input list</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">mapToObj</span><span class="token punctuation">(</span>start <span class="token operator">-&gt;</span> <span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">rangeClosed</span><span class="token punctuation">(</span>start <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">mapToObj</span><span class="token punctuation">(</span>end <span class="token operator">-&gt;</span> list<span class="token punctuation">.</span><span class="token function">subList</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åƒå‰é¢çš„ for å¾ªç¯ä¸€æ ·ï¼Œè¿™æ®µä»£ç ä¹Ÿæ²¡æœ‰å‘å‡ºç©ºåˆ—è¡¨ã€‚ä¸ºäº†ä¿®æ­£è¿™ä¸ªé”™è¯¯ï¼Œä¹Ÿåº”è¯¥ä½¿ç”¨ concatï¼Œå¦‚å‰ä¸€ä¸ªç‰ˆæœ¬ä¸­é‚£æ ·ï¼Œæˆ–è€…ç”¨ rangeClosed è°ƒç”¨ä¸­çš„ (int) Math.signum(start) ä»£æ›¿ 1ã€‚</p><p>å­åˆ—è¡¨çš„è¿™äº› Stream å®ç°éƒ½å¾ˆå¥½ï¼Œä½†è¿™ä¸¤è€…éƒ½éœ€è¦ç”¨æˆ·åœ¨ä»»ä½•æ›´é€‚åˆè¿­ä»£çš„åœ°æ–¹ï¼Œé‡‡ç”¨ Stream-to-Iterable é€‚é…å™¨ï¼Œæˆ–è€…ç”¨ Streamã€‚Stream-to-Iterable é€‚é…å™¨ä¸ä»…æ‰“ä¹±äº†å®¢æˆ·ç«¯ä»£ç ï¼Œåœ¨æˆ‘çš„æœºå™¨ä¸Šå¾ªç¯çš„é€Ÿåº¦è¿˜é™ä½äº† 2.3 å€ã€‚ä¸“é—¨æ„å»ºçš„ Collection å®ç°ç›¸å½“çƒ¦çï¼Œä½†æ˜¯è¿è¡Œé€Ÿåº¦åœ¨æˆ‘çš„æœºå™¨ä¸Šæ¯”åŸºäº Stream çš„å®ç°å¿«äº†çº¦ 1.4 å€ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼Œåœ¨ç¼–å†™è¿”å›ä¸€ç³»åˆ—å…ƒç´ çš„æ–¹æ³•æ—¶ï¼Œè¦è®°ä½æœ‰äº›ç”¨æˆ·å¯èƒ½æƒ³è¦å½“ä½œ Stream å¤„ç†ï¼Œè€Œå…¶ä»–ç”¨æˆ·å¯èƒ½æƒ³è¦ä½¿ç”¨è¿­ä»£ã€‚è¦å°½é‡ä¸¤è¾¹å…¼é¡¾ã€‚å¦‚æœå¯ä»¥è¿”å›é›†åˆï¼Œå°±è¿”å›é›†åˆã€‚å¦‚æœé›†åˆä¸­å·²ç»æœ‰å…ƒç´ ï¼Œæˆ–è€…åºåˆ—ä¸­çš„å…ƒç´ æ•°é‡å¾ˆå°‘ï¼Œè¶³ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„é›†åˆï¼Œé‚£ä¹ˆå°±è¿”å›ä¸€ä¸ªæ ‡å‡†çš„é›†åˆï¼Œå¦‚ ArrayListã€‚å¦åˆ™ï¼Œå°±è¦è€ƒè™‘å®ç°ä¸€ä¸ªå®šåˆ¶çš„é›†åˆï¼Œå¦‚å¹‚é›†èŒƒä¾‹ä¸­æ‰€ç¤ºã€‚å¦‚æœæ— æ³•è¿”å›é›†åˆï¼Œå°±è¿”å› Stream æˆ–è€… Iterableï¼Œæ„Ÿè§‰å“ªä¸€ç§æ›´è‡ªç„¶å³å¯ã€‚å¦‚æœåœ¨æœªæ¥çš„ Java å‘è¡Œç‰ˆæœ¬ä¸­ï¼ŒStream æ¥å£å£°æ˜è¢«ä¿®æ”¹æˆæ‰©å±•äº† Iterable æ¥å£ï¼Œå°±å¯ä»¥æ”¾å¿ƒåœ°è¿”å› Stream äº†ï¼Œå› ä¸ºå®ƒä»¬å…è®¸è¿›è¡Œ Stream å¤„ç†å’Œè¿­ä»£ã€‚</p><h2 id="ç¬¬-48-æ¡-è°¨æ…ä½¿ç”¨-stream-å¹¶è¡Œ" tabindex="-1"><a class="header-anchor" href="#ç¬¬-48-æ¡-è°¨æ…ä½¿ç”¨-stream-å¹¶è¡Œ" aria-hidden="true">#</a> ç¬¬ 48 æ¡ï¼šè°¨æ…ä½¿ç”¨ Stream å¹¶è¡Œ</h2><p>åœ¨ä¸»æµçš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼ŒJava ä¸€ç›´èµ°åœ¨ç®€åŒ–å¹¶å‘ç¼–ç¨‹ä»»åŠ¡çš„æœ€å‰æ²¿ã€‚1996 å¹´ Java å‘å¸ƒæ—¶ï¼Œå°±é€šè¿‡åŒæ­¥å’Œ wait/notify å†…ç½®äº†å¯¹çº¿ç¨‹çš„æ”¯æŒã€‚Java 5 å¼•å…¥äº† java.util.concurrent ç±»åº“ï¼Œæä¾›äº†å¹¶è¡Œé›†åˆå’Œæ‰§è¡Œè€…æ¡†æ¶ã€‚Java 7 å¼•å…¥äº† fork-join åŒ…ï¼Œè¿™æ˜¯ä¸€ä¸ªå¤„ç†å¹¶è¡Œåˆ†è§£çš„é«˜æ€§èƒ½æ¡†æ¶ã€‚Java 8 å¼•å…¥äº† Streamï¼Œåªéœ€è¦è°ƒç”¨ä¸€æ¬¡ parallel æ–¹æ³•å°±å¯ä»¥å®ç°å¹¶è¡Œå¤„ç†ã€‚åœ¨ Java ä¸­ç¼–å†™å¹¶å‘ç¨‹åºå˜å¾—è¶Šæ¥è¶Šå®¹æ˜“ï¼Œä½†æ˜¯è¦ç¼–å†™å‡ºæ­£ç¡®åˆå¿«é€Ÿçš„å¹¶å‘ç¨‹åºï¼Œåˆ™ä¸€å‘æ²¡é‚£ä¹ˆç®€å•ã€‚å®‰å…¨æ€§å’Œæ´»æ€§å¤±è´¥æ˜¯å¹¶å‘ç¼–ç¨‹ä¸­éœ€è¦é¢å¯¹çš„é—®é¢˜ï¼ŒStream pipeline å¹¶è¡Œä¹Ÿä¸ä¾‹å¤–ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Stream-based program to generate the first 20 Mersenne primes</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">]</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">primes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>p <span class="token operator">-&gt;</span> TWO<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">intValueExact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span>ONE<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>mersenne <span class="token operator">-&gt;</span> mersenne<span class="token punctuation">.</span><span class="token function">isProbablePrime</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">static</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BigInteger</span><span class="token punctuation">&gt;</span></span> <span class="token function">primes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token keyword">return</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">iterate</span><span class="token punctuation">(</span>TWO<span class="token punctuation">,</span> <span class="token class-name">BigInteger</span><span class="token operator">::</span><span class="token function">nextProbablePrime</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨æˆ‘çš„æœºå™¨ä¸Šï¼Œè¿™æ®µç¨‹åºä¼šç«‹å³å¼€å§‹æ‰“å°ç´ æ•°ï¼Œå®Œæˆè¿è¡ŒèŠ±äº† 12.5 ç§’ã€‚å‡è®¾æˆ‘å¤©çœŸåœ°æƒ³é€šè¿‡åœ¨ Stream pipeline ä¸Šæ·»åŠ ä¸€ä¸ª parallel() è°ƒç”¨æ¥æé€Ÿã€‚ä½ è®¤ä¸ºè¿™æ ·ä¼šå¯¹å…¶æ€§èƒ½äº§ç”Ÿä»€ä¹ˆæ ·çš„å½±å“å‘¢ï¼Ÿè¿è¡Œé€Ÿåº¦ä¼šç¨å¾®å¿«ä¸€ç‚¹ç‚¹å—ï¼Ÿè¿˜æ˜¯ä¼šæ…¢ä¸€ç‚¹ç‚¹ï¼Ÿé—æ†¾çš„æ˜¯ï¼Œå…¶ç»“æœæ˜¯æ ¹æœ¬ä¸æ‰“å°ä»»ä½•å†…å®¹äº†ï¼ŒCPU çš„ä½¿ç”¨ç‡å´å®šåœ¨ 90% â€”åŠ¨ä¸åŠ¨äº†ï¼ˆæ´»æ€§å¤±è´¥ï¼‰ç¨‹åºæœ€åå¯èƒ½ä¼šç»ˆæ­¢ï¼Œä½†æ˜¯æˆ‘ä¸æƒ³ä¸€æ¢ç©¶ç«Ÿï¼ŒåŠä¸ªå°æ—¶åå°±å¼ºè¡ŒæŠŠå®ƒç»ˆæ­¢äº†ã€‚</p><p>è¿™æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿç®€å•åœ°è¯´ï¼ŒStream ç±»åº“ä¸çŸ¥é“å¦‚ä½•å¹¶è¡Œè¿™ä¸ª pipelineï¼Œä»¥åŠå¦‚ä½•æ¢ç´¢å¤±è´¥ã€‚å³ä¾¿åœ¨æœ€ä½³ç¯å¢ƒä¸‹ï¼Œå¦‚æœæºå¤´æ˜¯æ¥è‡ª Stream.iterateï¼Œæˆ–è€…ä½¿ç”¨äº†ä¸­é—´æ“ä½œçš„ limitï¼Œé‚£ä¹ˆå¹¶è¡Œ pipeline ä¹Ÿä¸å¯èƒ½æå‡æ€§èƒ½ã€‚è¿™ä¸ª pipeline å¿…é¡»åŒæ—¶æ»¡è¶³è¿™ä¸¤ä¸ªæ¡ä»¶ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œé»˜è®¤çš„å¹¶è¡Œç­–ç•¥åœ¨å¤„ç† limit çš„ä¸å¯é¢„çŸ¥æ€§æ—¶ï¼Œæ˜¯å‡è®¾é¢å¤–å¤šå¤„ç†å‡ ä¸ªå…ƒç´ ï¼Œå¹¶æ”¾å¼ƒä»»ä½•ä¸éœ€è¦çš„ç»“æœï¼Œè¿™äº›éƒ½ä¸ä¼šå½±å“æ€§èƒ½ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒæŸ¥æ‰¾æ¯ä¸ªæ¢…æ£®ç´ æ•°æ—¶ï¼Œæ‰€èŠ±è´¹çš„æ—¶é—´å¤§æ¦‚æ˜¯æŸ¥æ‰¾ä¹‹å‰å…ƒç´ çš„ä¸¤å€ã€‚å› è€Œï¼Œé¢å¤–å¤šè®¡ç®—ä¸€ä¸ªå…ƒç´ çš„æˆæœ¬ï¼Œå¤§æ¦‚ç›¸å½“äºè®¡ç®—æ‰€æœ‰ä¹‹å‰å…ƒç´ æ€»å’Œçš„æ—¶é—´ï¼Œè¿™ä¸ªè²Œä¼¼æ— ä¼¤å¤§é›…çš„ pipelineï¼Œå´ä½¿å¾—è‡ªåŠ¨å¹¶è¡Œç®—æ³•æ¿’ä¸´å´©æºƒã€‚è¿™ä¸ªæ•…äº‹çš„å¯“æ„å¾ˆç®€å•ï¼šåƒä¸‡ä¸è¦ä»»æ„åœ°å¹¶è¡Œ Stream pipelineã€‚å®ƒé€ æˆçš„æ€§èƒ½åæœæœ‰å¯èƒ½æ˜¯ç¾éš¾æ€§çš„ã€‚</p><p>æ€»ä¹‹ï¼Œåœ¨ Stream ä¸Šé€šè¿‡å¹¶è¡Œè·å¾—çš„æ€§èƒ½ï¼Œæœ€å¥½æ˜¯é€šè¿‡ ArrayListã€HashMapã€HashSet å’Œ ConcurrentHashMap å®ä¾‹ï¼Œæ•°ç»„ï¼Œint èŒƒå›´å’Œ long èŒƒå›´ç­‰ã€‚è¿™äº›æ•°æ®ç»“æ„çš„å…±æ€§æ˜¯ï¼Œéƒ½å¯ä»¥è¢«ç²¾ç¡®ã€è½»æ¾åœ°åˆ†æˆä»»æ„å¤§å°çš„å­èŒƒå›´ï¼Œä½¿å¹¶è¡Œçº¿ç¨‹ä¸­çš„åˆ†å·¥å˜å¾—æ›´åŠ è½»æ¾ã€‚Stream ç±»åº“ç”¨æ¥æ‰§è¡Œè¿™ä¸ªä»»åŠ¡çš„æŠ½è±¡æ˜¯åˆ†å‰²è¿­ä»£å™¨ï¼Œå®ƒæ˜¯ç”± Stream å’Œ Iterable ä¸­çš„ spliterator æ–¹æ³•è¿”å›çš„ã€‚</p><p>è¿™äº›æ•°æ®ç»“æ„å…±æœ‰çš„å¦ä¸€é¡¹é‡è¦ç‰¹æ€§æ˜¯ï¼Œåœ¨è¿›è¡Œé¡ºåºå¤„ç†æ—¶ï¼Œå®ƒä»¬æä¾›äº†ä¼˜å¼‚çš„å¼•ç”¨å±€éƒ¨æ€§ï¼šåºåˆ—åŒ–çš„å…ƒç´ å¼•ç”¨ä¸€èµ·ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚è¢«é‚£äº›å¼•ç”¨è®¿é—®åˆ°çš„å¯¹è±¡åœ¨å†…å­˜ä¸­å¯èƒ½ä¸æ˜¯ä¸€ä¸ªç´§æŒ¨ç€ä¸€ä¸ªï¼Œè¿™é™ä½äº†å¼•ç”¨çš„å±€éƒ¨æ€§ã€‚äº‹å®è¯æ˜ï¼Œå¼•ç”¨å±€éƒ¨æ€§å¯¹äºå¹¶è¡Œæ‰¹å¤„ç†æ¥è¯´è‡³å…³é‡è¦ï¼šæ²¡æœ‰å®ƒï¼Œçº¿ç¨‹å°±ä¼šå‡ºç°é—²ç½®ï¼Œéœ€è¦ç­‰å¾…æ•°æ®ä»å†…å­˜è½¬ç§»åˆ°å¤„ç†å™¨çš„ç¼“å­˜ã€‚å…·æœ‰æœ€ä½³å¼•ç”¨å±€éƒ¨æ€§çš„æ•°æ®ç»“æ„æ˜¯åŸºæœ¬ç±»å‹æ•°ç»„ï¼Œå› ä¸ºæ•°æ®æœ¬èº«æ˜¯ç›¸é‚»åœ°ä¿å­˜åœ¨å†…å­˜ä¸­çš„ã€‚</p><p>Stream pipeline çš„ç»ˆæ­¢æ“ä½œæœ¬è´¨ä¸Šä¹Ÿå½±å“äº†å¹¶å‘æ‰§è¡Œçš„æ•ˆç‡ã€‚å¦‚æœå¤§é‡çš„å·¥ä½œåœ¨ç»ˆæ­¢æ“ä½œä¸­å®Œæˆï¼Œè€Œä¸æ˜¯å…¨éƒ¨å·¥ä½œåœ¨ pipeline ä¸­å®Œæˆï¼Œå¹¶ä¸”è¿™ä¸ªæ“ä½œæ˜¯å›ºæœ‰çš„é¡ºåºï¼Œé‚£ä¹ˆå¹¶è¡Œ pipeline çš„æ•ˆç‡å°±ä¼šå—åˆ°é™åˆ¶ã€‚å¹¶è¡Œçš„æœ€ä½³ç»ˆæ­¢æ“ä½œæ˜¯åšå‡æ³•ï¼Œç”¨ä¸€ä¸ª Stream çš„ reduce æ–¹æ³•ï¼Œå°†æ‰€æœ‰ä» pipeline äº§ç”Ÿçš„å…ƒç´ éƒ½åˆå¹¶åœ¨ä¸€èµ·ï¼Œæˆ–è€…é¢„å…ˆæ‰“åŒ…åƒ minã€maxã€count å’Œ sum è¿™ç±»æ–¹æ³•ã€‚éª¤æ­»å¼æ“ä½œå¦‚ anyMatchã€allMatch å’Œ noneMatch ä¹Ÿéƒ½å¯ä»¥å¹¶è¡Œã€‚ç”± Stream çš„ collect æ–¹æ³•æ‰§è¡Œçš„æ“ä½œï¼Œéƒ½æ˜¯å¯å˜çš„å‡æ³•ï¼Œä¸æ˜¯å¹¶è¡Œçš„æœ€å¥½é€‰æ‹©ï¼Œå› ä¸ºåˆå¹¶é›†åˆçš„æˆæœ¬éå¸¸é«˜ã€‚</p><p>å¦‚æœæ˜¯è‡ªå·±ç¼–å†™ Streamã€Iterable æˆ–è€… Collection å®ç°ï¼Œå¹¶ä¸”æƒ³è¦å¾—åˆ°é€‚å½“çš„å¹¶è¡Œæ€§èƒ½ï¼Œå°±å¿…é¡»è¦†ç›– spliterator æ–¹æ³•ï¼Œå¹¶å¹¿æ³›åœ°æµ‹è¯•ç»“æœ Stream çš„å¹¶è¡Œæ€§èƒ½ã€‚ç¼–å†™é«˜è´¨é‡çš„åˆ†å‰²è¿­ä»£å™¨å¾ˆå›°éš¾ï¼Œå¹¶ä¸”è¶…å‡ºäº†æœ¬ä¹¦çš„è®¨è®ºèŒƒç•´ã€‚</p><p>å¹¶è¡Œ Stream ä¸ä»…å¯èƒ½é™ä½æ€§èƒ½ï¼ŒåŒ…æ‹¬æ´»æ€§å¤±è´¥ï¼Œè¿˜å¯èƒ½å¯¼è‡´ç»“æœå‡ºé”™ï¼Œä»¥åŠéš¾ä»¥é¢„è®¡çš„è¡Œä¸ºï¼ˆå¦‚å®‰å…¨æ€§å¤±è´¥ï¼‰ã€‚å®‰å…¨æ€§å¤±è´¥å¯èƒ½æ˜¯å› ä¸ºå¹¶è¡Œçš„ pipeline ä½¿ç”¨äº†æ˜ å°„ã€è¿‡æ»¤å™¨æˆ–è€…ç¨‹åºå‘˜è‡ªå·±ç¼–å†™çš„å…¶ä»–å‡½æ•°å¯¹è±¡ï¼Œå¹¶ä¸”æ²¡æœ‰éµå®ˆå®ƒä»¬çš„è§„èŒƒã€‚Stream è§„èŒƒå¯¹äºè¿™äº›å‡½æ•°å¯¹è±¡æœ‰ç€ä¸¥æ ¼çš„è¦æ±‚æ¡ä»¶ã€‚ä¾‹å¦‚ï¼Œä¼ åˆ° Stream çš„ reduce æ“ä½œçš„æ”¶é›†å™¨å‡½æ•°å’Œç»„åˆå™¨å‡½æ•°ï¼Œå¿…é¡»æ˜¯æœ‰å…³è”ã€äº’ä¸å¹²æ‰°ï¼Œå¹¶ä¸”æ˜¯æ— çŠ¶æ€çš„ã€‚å¦‚æœä¸æ»¡è¶³è¿™äº›æ¡ä»¶ï¼Œä½†æ˜¯æŒ‰åºåˆ—è¿è¡Œ pipelineï¼Œå¯èƒ½ä¼šå¾—åˆ°æ­£ç¡®çš„ç»“æœï¼›å¦‚æœå¹¶å‘è¿è¡Œï¼Œåˆ™å¯èƒ½ä¼šçªå‘æ€§å¤±è´¥ã€‚</p><p>ä»¥ä¸Šå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¹¶è¡Œçš„æ¢…æ£®ç´ æ•°ç¨‹åºè™½ç„¶è¿è¡Œå®Œæˆäº†ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æŒ‰æ­£ç¡®çš„é¡ºåºï¼ˆå‡åºï¼‰æ‰“å°å‡ºç´ æ•°ã€‚ä¸ºäº†ä¿å­˜åºåˆ—åŒ–ç‰ˆæœ¬ç¨‹åºæ˜¾ç¤ºçš„é¡ºåºï¼Œå¿…é¡»ç”¨ forEachOrdered ä»£æ›¿ç»ˆæ­¢æ“ä½œçš„ forEachï¼Œå®ƒå¯ä»¥ç¡®ä¿æŒ‰ encounter é¡ºåºéå†å¹¶è¡Œçš„ Streamã€‚</p><p>å‡å¦‚åœ¨ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªå¯ä»¥æœ‰æ•ˆåˆ†å‰²çš„æº Streamï¼Œä¸€ä¸ªå¯å¹¶è¡Œçš„æˆ–è€…ç®€å•çš„ç»ˆæ­¢æ“ä½œï¼Œä»¥åŠäº’ä¸å¹²æ‰°çš„å‡½æ•°å¯¹è±¡ï¼Œé‚£ä¹ˆå°†æ— æ³•è·å¾—é€šè¿‡å¹¶è¡Œå®ç°çš„æé€Ÿï¼Œé™¤é pipeline å®Œæˆäº†è¶³å¤Ÿçš„å®é™…å·¥ä½œï¼ŒæŠµæ¶ˆäº†ä¸å¹¶è¡Œç›¸å…³çš„æˆæœ¬ã€‚æ®ä¸å®Œå…¨ä¼°è®¡ï¼ŒStream ä¸­çš„å…ƒç´ æ•°é‡ï¼Œæ˜¯æ¯ä¸ªå…ƒç´ æ‰€æ‰§è¡Œçš„ä»£ç è¡Œæ•°çš„å¾ˆå¤šå€ï¼Œè‡³å°‘æ˜¯åä¸‡å€ã€‚</p><p>åˆ‡è®°ï¼šå¹¶è¡Œ Stream æ˜¯ä¸€é¡¹ä¸¥æ ¼çš„æ€§èƒ½ä¼˜åŒ–ã€‚å¯¹äºä»»ä½•ä¼˜åŒ–éƒ½å¿…é¡»åœ¨æ”¹å˜å‰åå¯¹æ€§èƒ½è¿›è¡Œæµ‹è¯•ï¼Œä»¥ç¡®ä¿å€¼å¾—è¿™ä¹ˆåšã€‚æœ€ç†æƒ³çš„æ˜¯åœ¨ç°å®çš„ç³»ç»Ÿè®¾ç½®ä¸­è¿›è¡Œæµ‹è¯•ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç¨‹åºä¸­æ‰€æœ‰çš„å¹¶è¡Œ Stream pipeline éƒ½æ˜¯åœ¨ä¸€ä¸ªé€šç”¨çš„ fork-join æ± ä¸­è¿è¡Œçš„ã€‚åªè¦æœ‰ä¸€ä¸ª pipeline è¿è¡Œå¼‚å¸¸ï¼Œéƒ½ä¼šæŸå®³åˆ°ç³»ç»Ÿä¸­å…¶ä»–ä¸ç›¸å…³éƒ¨åˆ†çš„æ€§èƒ½ã€‚</p><p>å¬èµ·æ¥è²Œä¼¼åœ¨å¹¶è¡Œ Stream pipeline æ—¶æ€ªäº‹è¿è¿ï¼Œå…¶å®æ­£æ˜¯å¦‚æ­¤ã€‚æˆ‘æœ‰ä¸ªæœ‹å‹ï¼Œä»–å‘ç°åœ¨å¤§é‡ä½¿ç”¨ Stream çš„å‡ ç™¾ä¸‡è¡Œä»£ç ä¸­ï¼Œåªæœ‰å°‘æ•°å‡ ä¸ªå¹¶è¡Œ Stream æ˜¯æœ‰æ•ˆçš„ã€‚è¿™å¹¶ä¸æ„å‘³ç€åº”è¯¥é¿å…ä½¿ç”¨å¹¶è¡Œ Streamã€‚åœ¨é€‚å½“çš„æ¡ä»¶ä¸‹ï¼Œç»™ Stream pipeline æ·»åŠ  parallel è°ƒç”¨ï¼Œç¡®å®å¯ä»¥åœ¨å¤šå¤„ç†å™¨æ ¸çš„æƒ…å†µä¸‹å®ç°è¿‘ä¹çº¿æ€§çš„å€å¢ã€‚æŸäº›åŸŸå¦‚æœºå™¨å­¦ä¹ å’Œæ•°æ®å¤„ç†ï¼Œå°¤å…¶é€‚ç”¨äºè¿™æ ·çš„æé€Ÿã€‚</p><p>ç®€å•ä¸¾ä¸€ä¸ªå¹¶è¡Œ Stream pipeline æœ‰æ•ˆçš„ä¾‹å­ã€‚å‡è®¾ä¸‹é¢è¿™ä¸ªå‡½æ•°æ˜¯ç”¨æ¥è®¡ç®— Ï€(n)ï¼Œç´ æ•°çš„æ•°é‡å°‘äºæˆ–è€…ç­‰äº nï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Prime-counting stream pipeline - benefits from parallelization</span>
<span class="token keyword">static</span> <span class="token keyword">long</span> <span class="token function">pi</span><span class="token punctuation">(</span><span class="token keyword">long</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token class-name">LongStream</span><span class="token punctuation">.</span><span class="token function">rangeClosed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">mapToObj</span><span class="token punctuation">(</span><span class="token class-name">BigInteger</span><span class="token operator">::</span><span class="token function">valueOf</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> i<span class="token punctuation">.</span><span class="token function">isProbablePnme</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨æˆ‘çš„æœºå™¨ä¸Šï¼Œè¿™ä¸ªå‡½æ•°èŠ± 31 ç§’å®Œæˆäº†è®¡ç®— Ï€(10<sup>8</sup>)ã€‚åªè¦æ·»åŠ ä¸€ä¸ª parallel() è°ƒç”¨ï¼Œå°±æŠŠè°ƒç”¨æ—¶é—´å‡å°‘åˆ°äº† 9.2 ç§’ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Prime-counting stream pipeline - parallel version</span>
<span class="token keyword">static</span> <span class="token keyword">long</span> <span class="token function">pi</span><span class="token punctuation">(</span><span class="token keyword">long</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token class-name">LongStream</span><span class="token punctuation">.</span><span class="token function">rangeClosed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">mapToObj</span><span class="token punctuation">(</span><span class="token class-name">BigInteger</span><span class="token operator">::</span><span class="token function">valueOf</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> i<span class="token punctuation">.</span><span class="token function">isProbablePrime</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¢å¥è¯è¯´ï¼Œå¹¶è¡Œè®¡ç®—åœ¨æˆ‘çš„å››æ ¸æœºå™¨ä¸Šæ·»åŠ äº† parallel() è°ƒç”¨åï¼Œé€Ÿåº¦åŠ å¿«äº† 3.7 å€ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™å¹¶ä¸æ˜¯åœ¨å®è·µä¸­è®¡ç®— n å€¼å¾ˆå¤§æ—¶çš„ Ï€(n) çš„æ–¹æ³•ã€‚è¿˜æœ‰æ›´åŠ é«˜æ•ˆçš„ç®—æ³•ï¼Œå¦‚è‘—åçš„ Lehmer å…¬å¼ã€‚</p><p>å¦‚æœè¦å¹¶è¡Œä¸€ä¸ªéšæœºæ•°çš„ Streamï¼Œåº”è¯¥ä» SplittableRandom å®ä¾‹å¼€å§‹ï¼Œè€Œä¸æ˜¯ä» ThreadLocalRandomï¼ˆæˆ–å®é™…ä¸Šå·²ç»è¿‡çš„ Randomï¼‰å¼€å§‹ã€‚SplittableRandom æ­£æ˜¯ä¸“é—¨ä¸ºæ­¤è®¾è®¡çš„ï¼Œè¿˜æœ‰çº¿æ€§æé€Ÿçš„å¯èƒ½ã€‚ThreadLocalRandom åˆ™åªç”¨äºå•çº¿ç¨‹ï¼Œå®ƒå°†è‡ªèº«å½“ä½œä¸€ä¸ªå¹¶è¡Œçš„ Stream æºè¿ç”¨åˆ°å‡½æ•°ä¸­ï¼Œä½†æ˜¯æ²¡æœ‰ SplittableRandom é‚£ä¹ˆå¿«ã€‚Random åœ¨æ¯ä¸ªæ“ä½œä¸Šéƒ½è¿›è¡ŒåŒæ­¥ï¼Œå› æ­¤ä¼šå¯¼è‡´æ»¥ç”¨ï¼Œæ‰¼æ€äº†å¹¶è¡Œçš„ä¼˜åŠ¿ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼Œå°½é‡ä¸è¦å¹¶è¡Œ Stream pipelineï¼Œé™¤éæœ‰è¶³å¤Ÿçš„ç†ç”±ç›¸ä¿¡å®ƒèƒ½ä¿è¯è®¡ç®—çš„æ­£ç¡®æ€§ï¼Œå¹¶ä¸”èƒ½åŠ å¿«ç¨‹åºçš„è¿è¡Œé€Ÿåº¦ã€‚å¦‚æœå¯¹ Stream è¿›è¡Œä¸æ°å½“çš„å¹¶è¡Œæ“ä½œï¼Œå¯èƒ½å¯¼è‡´ç¨‹åºè¿è¡Œå¤±è´¥ï¼Œæˆ–è€…é€ æˆæ€§èƒ½ç¾éš¾ã€‚å¦‚æœç¡®ä¿¡å¹¶è¡Œæ˜¯å¯è¡Œçš„ï¼Œå¹¶å‘è¿è¡Œæ—¶ä¸€å®šè¦ç¡®ä¿ä»£ç æ­£ç¡®ï¼Œå¹¶åœ¨çœŸå®ç¯å¢ƒä¸‹è®¤çœŸåœ°è¿›è¡Œæ€§èƒ½æµ‹é‡ã€‚å¦‚æœä»£ç æ­£ç¡®ï¼Œè¿™äº›å®éªŒä¹Ÿè¯æ˜å®ƒæœ‰åŠ©äºæå‡æ€§èƒ½ï¼Œåªæœ‰è¿™æ—¶å€™ï¼Œæ‰å¯ä»¥åœ¨ç¼–å†™ä»£ç æ—¶å¹¶è¡Œ Streamã€‚</p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://gitee.com/anansneaker/vuepress-theme-hope/edit/master/docs/reading-notes/Effective Java/ç¬¬7ç«  Lambdaå’ŒStream.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><span class="info">2022/8/16 ä¸‹åˆ7:56:17</span></div><div class="meta-item contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: cl55563@163.com">é˜¿æ¥ sneaker</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/reading-notes/Effective%20Java/%E7%AC%AC6%E7%AB%A0%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%B3%A8%E8%A7%A3.html" class="nav-link prev" aria-label="ç¬¬ 6 ç«  æšä¸¾å’Œæ³¨è§£"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->ç¬¬ 6 ç«  æšä¸¾å’Œæ³¨è§£</div></a><a href="/reading-notes/Effective%20Java/%E7%AC%AC8%E7%AB%A0%20%E6%96%B9%E6%B3%95.html" class="nav-link next" aria-label="ç¬¬ 8 ç« æ–¹æ³•"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">ç¬¬ 8 ç« æ–¹æ³•<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer"></div><div class="copyright">Copyright Â© 2022 é˜¿æ¥ sneaker</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.0d56c066.js" defer></script>
  </body>
</html>
