import{_ as t}from"./plugin-vue_export-helper.21dcd24c.js";import{r as i,o as l,c as p,a as n,b as s,e as o,d as e}from"./app.0d56c066.js";var r="/assets/\u56FE3-1.a0a59e90.png",c="/assets/\u56FE3-2.095d5b9c.png",d="/assets/\u56FE3-3.92d2cfb8.png",u="/assets/\u56FE3-4.3509f972.png",v="/assets/\u56FE3-5.bdbb92a8.png",f="/assets/\u88683-1.21a2670f.png",h="/assets/\u56FE3-6.7da1acce.png",m="/assets/\u56FE3-7.b92a0e53.png",g="/assets/\u56FE3-8.0e0678ed.png",k="/assets/\u56FE3-9.b8032772.png",b="/assets/\u56FE3-10.b4d499e7.png",C="/assets/\u56FE3-11.b8293db4.png",_="/assets/\u56FE3-12.36895a87.png",S="/assets/\u56FE3-13.088f8dfa.png",G="/assets/\u56FE3-14.2da9db84.png",x="/assets/\u56FE3-15.352bae76.png",M="/assets/\u56FE3-16.b3c0cc91.png",w="/assets/\u56FE3-17.56f92f77.png",K="/assets/\u56FE3-18.6cb12976.png",y="/assets/\u56FE3-19.480e3730.png",P="/assets/\u88683-2.05b669ca.png",R="/assets/\u56FE3-20.590f3e45.png",J="/assets/\u56FE3-21.c4331332.png",X="/assets/\u56FE3-22.144dbc51.png",B="/assets/\u56FE3-23.553cc861.png",E="/assets/\u56FE3-24.ad1cd0e5.png",D="/assets/\u56FE3-25.37c25482.png",T="/assets/\u88683-3.7929b37a.jpeg",O="/assets/\u88683-4-1.ec53cb5a.png",A="/assets/\u88683-4-2.63772b73.png";const H={},z=o(`<h1 id="\u7B2C-3-\u7AE0-\u5783\u573E\u6536\u96C6\u5668\u4E0E\u5185\u5B58\u5206\u914D\u7B56\u7565" tabindex="-1"><a class="header-anchor" href="#\u7B2C-3-\u7AE0-\u5783\u573E\u6536\u96C6\u5668\u4E0E\u5185\u5B58\u5206\u914D\u7B56\u7565" aria-hidden="true">#</a> \u7B2C 3 \u7AE0 \u5783\u573E\u6536\u96C6\u5668\u4E0E\u5185\u5B58\u5206\u914D\u7B56\u7565</h1><p>Java \u4E0E C++ \u4E4B\u95F4\u6709\u4E00\u5835\u7531\u5185\u5B58\u52A8\u6001\u5206\u914D\u548C\u5783\u573E\u6536\u96C6\u6280\u672F\u6240\u56F4\u6210\u7684\u9AD8\u5899\uFF0C\u5899\u5916\u9762\u7684\u4EBA\u60F3\u8FDB\u53BB\uFF0C\u5899\u91CC\u9762\u7684\u4EBA\u5374\u60F3\u51FA\u6765\u3002</p><h2 id="_3-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_3-1-\u6982\u8FF0" aria-hidden="true">#</a> 3.1 \u6982\u8FF0</h2><p>\u8BF4\u8D77\u5783\u573E\u6536\u96C6\uFF08Garbage Collection\uFF0C\u4E0B\u6587\u7B80\u79F0 GC\uFF09\uFF0C\u6709\u4E0D\u5C11\u4EBA\u628A\u8FD9\u9879\u6280\u672F\u5F53\u4F5CJava\u8BED\u8A00\u7684\u4F34\u751F\u4EA7\u7269\u3002\u4E8B\u5B9E\u4E0A\uFF0C\u5783\u573E\u6536\u96C6\u7684\u5386\u53F2\u8FDC\u8FDC\u6BD4 Java \u4E45\u8FDC\uFF0C\u5728 1960 \u5E74\u8BDE\u751F\u4E8E\u9EBB\u7701\u7406\u5DE5\u5B66\u9662\u7684 Lisp \u662F\u7B2C\u4E00\u95E8\u5F00\u59CB\u4F7F\u7528\u5185\u5B58\u52A8\u6001\u5206\u914D\u548C\u5783\u573E\u6536\u96C6\u6280\u672F\u7684\u8BED\u8A00\u3002\u5F53 Lisp \u8FD8\u5728\u80DA\u80CE\u65F6\u671F\u65F6\uFF0C\u5176\u4F5C\u8005 John McCarthy \u5C31\u601D\u8003\u8FC7\u5783\u573E\u6536\u96C6\u9700\u8981\u5B8C\u6210\u7684\u4E09\u4EF6\u4E8B\u60C5\uFF1A</p><ul><li>\u54EA\u4E9B\u5185\u5B58\u9700\u8981\u56DE\u6536\uFF1F</li><li>\u4EC0\u4E48\u65F6\u5019\u56DE\u6536\uFF1F</li><li>\u5982\u4F55\u56DE\u6536\uFF1F</li></ul><p>\u7ECF\u8FC7\u534A\u4E2A\u4E16\u7EAA\u7684\u53D1\u5C55\uFF0C\u4ECA\u5929\u7684\u5185\u5B58\u52A8\u6001\u5206\u914D\u4E0E\u5185\u5B58\u56DE\u6536\u6280\u672F\u5DF2\u7ECF\u76F8\u5F53\u6210\u719F\uFF0C\u4E00\u5207\u770B\u8D77\u6765\u90FD\u8FDB\u5165\u4E86 \u201C\u81EA\u52A8\u5316\u201D \u65F6\u4EE3\uFF0C\u90A3\u4E3A\u4EC0\u4E48\u6211\u4EEC\u8FD8\u8981\u53BB\u4E86\u89E3\u5783\u573E\u6536\u96C6\u548C\u5185\u5B58\u5206\u914D\uFF1F\u7B54\u6848\u5F88\u7B80\u5355\uFF1A\u5F53\u9700\u8981\u6392\u67E5\u5404\u79CD\u5185\u5B58\u6EA2\u51FA\u3001\u5185\u5B58\u6CC4\u6F0F\u95EE\u9898\u65F6\uFF0C\u5F53\u5783\u573E\u6536\u96C6\u6210\u4E3A\u7CFB\u7EDF\u8FBE\u5230\u66F4\u9AD8\u5E76\u53D1\u91CF\u7684\u74F6\u9888\u65F6\uFF0C\u6211\u4EEC\u5C31\u5FC5\u987B\u5BF9\u8FD9\u4E9B \u201C\u81EA\u52A8\u5316\u201D \u7684\u6280\u672F\u5B9E\u65BD\u5FC5\u8981\u7684\u76D1\u63A7\u548C\u8C03\u8282\u3002</p><p>\u628A\u65F6\u95F4\u4ECE\u5927\u534A\u4E2A\u4E16\u7EAA\u4EE5\u524D\u62E8\u56DE\u5230\u73B0\u5728\uFF0C\u821E\u53F0\u4E5F\u56DE\u5230\u6211\u4EEC\u719F\u6089\u7684 Java \u8BED\u8A00\u3002\u7B2C 2 \u7AE0\u4ECB\u7ECD\u4E86 Java \u5185\u5B58\u8FD0\u884C\u65F6\u533A\u57DF\u7684\u5404\u4E2A\u90E8\u5206\uFF0C\u5176\u4E2D\u7A0B\u5E8F\u8BA1\u6570\u5668\u3001\u865A\u62DF\u673A\u6808\u3001\u672C\u5730\u65B9\u6CD5\u6808 3 \u4E2A\u533A\u57DF\u968F\u7EBF\u7A0B\u800C\u751F\uFF0C\u968F\u7EBF\u7A0B\u800C\u706D\uFF0C\u6808\u4E2D\u7684\u6808\u5E27\u968F\u7740\u65B9\u6CD5\u7684\u8FDB\u5165\u548C\u9000\u51FA\u800C\u6709\u6761\u4E0D\u7D0A\u5730\u6267\u884C\u7740\u51FA\u6808\u548C\u5165\u6808\u64CD\u4F5C\u3002\u6BCF\u4E00\u4E2A\u6808\u5E27\u4E2D\u5206\u914D\u591A\u5C11\u5185\u5B58\u57FA\u672C\u4E0A\u662F\u5728\u7C7B\u7ED3\u6784\u786E\u5B9A\u4E0B\u6765\u65F6\u5C31\u5DF2\u77E5\u7684\uFF08\u5C3D\u7BA1\u5728\u8FD0\u884C\u671F\u4F1A\u7531\u5373\u65F6\u7F16\u8BD1\u5668\u8FDB\u884C\u4E00\u4E9B\u4F18\u5316\uFF0C\u4F46\u5728\u57FA\u4E8E\u6982\u5FF5\u6A21\u578B\u7684\u8BA8\u8BBA\u91CC\uFF0C\u5927\u4F53\u4E0A\u53EF\u4EE5\u8BA4\u4E3A\u662F\u7F16\u8BD1\u671F\u53EF\u77E5\u7684\uFF09\uFF0C\u56E0\u6B64\u8FD9\u51E0\u4E2A\u533A\u57DF\u7684\u5185\u5B58\u5206\u914D\u548C\u56DE\u6536\u90FD\u5177\u5907\u786E\u5B9A\u6027\uFF0C\u5728\u8FD9\u51E0\u4E2A\u533A\u57DF\u5185\u5C31\u4E0D\u9700\u8981\u8FC7\u591A\u8003\u8651\u5982\u4F55\u56DE\u6536\u7684\u95EE\u9898\uFF0C\u5F53\u65B9\u6CD5\u7ED3\u675F\u6216\u8005\u7EBF\u7A0B\u7ED3\u675F\u65F6\uFF0C\u5185\u5B58\u81EA\u7136\u5C31\u8DDF\u968F\u7740\u56DE\u6536\u4E86\u3002</p><p>\u800C Java \u5806\u548C\u65B9\u6CD5\u533A\u8FD9\u4E24\u4E2A\u533A\u57DF\u5219\u6709\u7740\u5F88\u663E\u8457\u7684\u4E0D\u786E\u5B9A\u6027\uFF1A\u4E00\u4E2A\u63A5\u53E3\u7684\u591A\u4E2A\u5B9E\u73B0\u7C7B\u9700\u8981\u7684\u5185\u5B58\u53EF\u80FD\u4F1A\u4E0D\u4E00\u6837\uFF0C\u4E00\u4E2A\u65B9\u6CD5\u6240\u6267\u884C\u7684\u4E0D\u540C\u6761\u4EF6\u5206\u652F\u6240\u9700\u8981\u7684\u5185\u5B58\u4E5F\u53EF\u80FD\u4E0D\u4E00\u6837\uFF0C\u53EA\u6709\u5904\u4E8E\u8FD0\u884C\u671F\u95F4\uFF0C\u6211\u4EEC\u624D\u80FD\u77E5\u9053\u7A0B\u5E8F\u7A76\u7ADF\u4F1A\u521B\u5EFA\u54EA\u4E9B\u5BF9\u8C61\uFF0C\u521B\u5EFA\u591A\u5C11\u4E2A\u5BF9\u8C61\uFF0C\u8FD9\u90E8\u5206\u5185\u5B58\u7684\u5206\u914D\u548C\u56DE\u6536\u662F\u52A8\u6001\u7684\u3002\u5783\u573E\u6536\u96C6\u5668\u6240\u5173\u6CE8\u7684\u6B63\u662F\u8FD9\u90E8\u5206\u5185\u5B58\u8BE5\u5982\u4F55\u7BA1\u7406\uFF0C\u672C\u6587\u540E\u7EED\u8BA8\u8BBA\u4E2D\u7684 \u201C\u5185\u5B58\u201D \u5206\u914D\u4E0E\u56DE\u6536\u4E5F\u4EC5\u4EC5\u7279\u6307\u8FD9\u4E00\u90E8\u5206\u5185\u5B58\u3002</p><h2 id="_3-2-\u5BF9\u8C61\u5DF2\u6B7B" tabindex="-1"><a class="header-anchor" href="#_3-2-\u5BF9\u8C61\u5DF2\u6B7B" aria-hidden="true">#</a> 3.2 \u5BF9\u8C61\u5DF2\u6B7B\uFF1F</h2><p>\u5728\u5806\u91CC\u9762\u5B58\u653E\u7740 Java \u4E16\u754C\u4E2D\u51E0\u4E4E\u6240\u6709\u7684\u5BF9\u8C61\u5B9E\u4F8B\uFF0C\u5783\u573E\u6536\u96C6\u5668\u5728\u5BF9\u5806\u8FDB\u884C\u56DE\u6536\u524D\uFF0C\u7B2C\u4E00\u4EF6\u4E8B\u60C5\u5C31\u662F\u8981\u786E\u5B9A\u8FD9\u4E9B\u5BF9\u8C61\u4E4B\u4E2D\u54EA\u4E9B\u8FD8 \u201C\u5B58\u6D3B\u201D \u7740\uFF0C\u54EA\u4E9B\u5DF2\u7ECF \u201C\u6B7B\u53BB\u201D\uFF08\u201C\u6B7B\u53BB\u201D \u5373\u4E0D\u53EF\u80FD\u518D\u88AB\u4EFB\u4F55\u9014\u5F84\u4F7F\u7528\u7684\u5BF9\u8C61\uFF09\u4E86\u3002</p><h3 id="_3-2-1-\u5F15\u7528\u8BA1\u6570\u7B97\u6CD5" tabindex="-1"><a class="header-anchor" href="#_3-2-1-\u5F15\u7528\u8BA1\u6570\u7B97\u6CD5" aria-hidden="true">#</a> 3.2.1 \u5F15\u7528\u8BA1\u6570\u7B97\u6CD5</h3><p>\u5F88\u591A\u6559\u79D1\u4E66\u5224\u65AD\u5BF9\u8C61\u662F\u5426\u5B58\u6D3B\u7684\u7B97\u6CD5\u662F\u8FD9\u6837\u7684\uFF1A\u5728\u5BF9\u8C61\u4E2D\u6DFB\u52A0\u4E00\u4E2A\u5F15\u7528\u8BA1\u6570\u5668\uFF0C\u6BCF\u5F53\u6709\u4E00\u4E2A\u5730\u65B9\u5F15\u7528\u5B83\u65F6\uFF0C\u8BA1\u6570\u5668\u503C\u5C31\u52A0\u4E00\uFF1B\u5F53\u5F15\u7528\u5931\u6548\u65F6\uFF0C\u8BA1\u6570\u5668\u503C\u5C31\u51CF\u4E00\uFF1B\u4EFB\u4F55\u65F6\u523B\u8BA1\u6570\u5668\u4E3A\u96F6\u7684\u5BF9\u8C61\u5C31\u662F\u4E0D\u53EF\u80FD\u518D\u88AB\u4F7F\u7528\u7684\u3002\u7B14\u8005\u9762\u8BD5\u8FC7\u5F88\u591A\u5E94\u5C4A\u751F\u548C\u4E00\u4E9B\u6709\u591A\u5E74\u5DE5\u4F5C\u7ECF\u9A8C\u7684\u5F00\u53D1\u4EBA\u5458\uFF0C\u4ED6\u4EEC\u5BF9\u4E8E\u8FD9\u4E2A\u95EE\u9898\u7ED9\u4E88\u7684\u90FD\u662F\u8FD9\u4E2A\u7B54\u6848\u3002</p><p>\u5BA2\u89C2\u5730\u8BF4\uFF0C\u5F15\u7528\u8BA1\u6570\u7B97\u6CD5\uFF08Reference Counting\uFF09\u867D\u7136\u5360\u7528\u4E86\u4E00\u4E9B\u989D\u5916\u7684\u5185\u5B58\u7A7A\u95F4\u6765\u8FDB\u884C\u8BA1\u6570\uFF0C\u4F46\u5B83\u7684\u539F\u7406\u7B80\u5355\uFF0C\u5224\u5B9A\u6548\u7387\u4E5F\u5F88\u9AD8\uFF0C\u5728\u5927\u591A\u6570\u60C5\u51B5\u4E0B\u5B83\u90FD\u662F\u4E00\u4E2A\u4E0D\u9519\u7684\u7B97\u6CD5\u3002\u4E5F\u6709\u4E00\u4E9B\u6BD4\u8F83\u8457\u540D\u7684\u5E94\u7528\u6848\u4F8B\uFF0C\u4F8B\u5982\u5FAE\u8F6F COM\uFF08Component Object Model\uFF09\u6280\u672F\u3001\u4F7F\u7528 ActionScript 3 \u7684 FlashPlayer\u3001Python \u8BED\u8A00\u4EE5\u53CA\u5728\u6E38\u620F\u811A\u672C\u9886\u57DF\u5F97\u5230\u8BB8\u591A\u5E94\u7528\u7684 Squirrel \u4E2D\u90FD\u4F7F\u7528\u4E86\u5F15\u7528\u8BA1\u6570\u7B97\u6CD5\u8FDB\u884C\u5185\u5B58\u7BA1\u7406\u3002\u4F46\u662F\uFF0C\u5728 Java \u9886\u57DF\uFF0C\u81F3\u5C11\u4E3B\u6D41\u7684 Java \u865A\u62DF\u673A\u91CC\u9762\u90FD\u6CA1\u6709\u9009\u7528\u5F15\u7528\u8BA1\u6570\u7B97\u6CD5\u6765\u7BA1\u7406\u5185\u5B58\uFF0C\u4E3B\u8981\u539F\u56E0\u662F\uFF0C\u8FD9\u4E2A\u770B\u4F3C\u7B80\u5355\u7684\u7B97\u6CD5\u6709\u5F88\u591A\u4F8B\u5916\u60C5\u51B5\u8981\u8003\u8651\uFF0C\u5FC5\u987B\u8981\u914D\u5408\u5927\u91CF\u989D\u5916\u5904\u7406\u624D\u80FD\u4FDD\u8BC1\u6B63\u786E\u5730\u5DE5\u4F5C\uFF0C\u8B6C\u5982\u5355\u7EAF\u7684\u5F15\u7528\u8BA1\u6570\u5C31\u5F88\u96BE\u89E3\u51B3\u5BF9\u8C61\u4E4B\u95F4\u76F8\u4E92\u5FAA\u73AF\u5F15\u7528\u7684\u95EE\u9898\u3002</p><p>\u4E3E\u4E2A\u7B80\u5355\u7684\u4F8B\u5B50\uFF0C\u8BF7\u770B\u4EE3\u7801\u6E05\u53553-1\u4E2D\u7684 testGC() \u65B9\u6CD5\uFF1A\u5BF9\u8C61 objA \u548C objB \u90FD\u6709\u5B57\u6BB5 instance\uFF0C\u8D4B\u503C\u4EE4 objA.instance = objB \u53CA objB.instance = objA\uFF0C\u9664\u6B64\u4E4B\u5916\uFF0C\u8FD9\u4E24\u4E2A\u5BF9\u8C61\u518D\u65E0\u4EFB\u4F55\u5F15\u7528\uFF0C\u5B9E\u9645\u4E0A\u8FD9\u4E24\u4E2A\u5BF9\u8C61\u5DF2\u7ECF\u4E0D\u53EF\u80FD\u518D\u88AB\u8BBF\u95EE\uFF0C\u4F46\u662F\u5B83\u4EEC\u56E0\u4E3A\u4E92\u76F8\u5F15\u7528\u7740\u5BF9\u65B9\uFF0C\u5BFC\u81F4\u5B83\u4EEC\u7684\u5F15\u7528\u8BA1\u6570\u90FD\u4E0D\u4E3A\u96F6\uFF0C\u5F15\u7528\u8BA1\u6570\u7B97\u6CD5\u4E5F\u5C31\u65E0\u6CD5\u56DE\u6536\u5B83\u4EEC\u3002</p><p>\u4EE3\u7801\u6E05\u53553-1 \u5F15\u7528\u8BA1\u6570\u7B97\u6CD5\u7684\u7F3A\u9677</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * testGC() \u65B9\u6CD5\u6267\u884C\u540E\uFF0CobjA \u548C objB \u4F1A\u4E0D\u4F1A\u88AB GC \u5462\uFF1F
 *
 * <span class="token keyword">@author</span> zzm
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReferenceCountingGC</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> instance <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> _1MB <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * \u8FD9\u4E2A\u6210\u5458\u5C5E\u6027\u7684\u552F\u4E00\u610F\u4E49\u5C31\u662F\u5360\u70B9\u5185\u5B58\uFF0C\u4EE5\u4FBF\u80FD\u5728 GC \u65E5\u5FD7\u4E2D\u770B\u6E05\u695A\u662F\u5426\u6709\u56DE\u6536\u8FC7
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bigSize <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> _1MB<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testGC</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ReferenceCountingGC</span> objA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReferenceCountingGC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ReferenceCountingGC</span> objB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReferenceCountingGC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        objA<span class="token punctuation">.</span>instance <span class="token operator">=</span> objB<span class="token punctuation">;</span>
        objB<span class="token punctuation">.</span>instance <span class="token operator">=</span> objA<span class="token punctuation">;</span>
        objA <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        objB <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token comment">// \u5047\u8BBE\u5728\u8FD9\u884C\u53D1\u751F GC\uFF0CobjA \u548C objB \u662F\u5426\u80FD\u88AB\u56DE\u6536\uFF1F</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[Full GC (System) [Tenured: 0K-&gt;210K(10240K), 0.0149142 secs] 4603K-&gt;210K(19456K), [Perm : 2999K-&gt;2999K(21248K)], 0.0150007 secs] [Times: user=0.01 sys=0.00, real=0.02 secs]
Heap
    def new generation   total 9216K, used 82K [0x00000000055e0000, 0x0000000005fe0000, 0x0000000005fe0000)
    Eden space 8192K,   1% used [0x00000000055e0000, 0x00000000055f4850, 0x0000000005de0000)
    from space 1024K,   0% used [0x0000000005de0000, 0x0000000005de0000, 0x0000000005ee0000)
    to   space 1024K,   0% used [0x0000000005ee0000, 0x0000000005ee0000, 0x0000000005fe0000)
    tenured generation   total 10240K, used 210K [0x0000000005fe0000, 0x00000000069e0000, 0x00000000069e0000)
    the space 10240K,   2% used [0x0000000005fe0000, 0x0000000006014a18, 0x0000000006014c00, 0x00000000069e0000)
    compacting perm gen  total 21248K, used 3016K [0x00000000069e0000, 0x0000000007ea0000, 0x000000000bde0000)
    the space 21248K,  14% used [0x00000000069e0000, 0x0000000006cd2398, 0x0000000006cd2400, 0x0000000007ea0000)
    No shared spaces configured.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u8FD0\u884C\u7ED3\u679C\u4E2D\u53EF\u4EE5\u6E05\u695A\u770B\u5230\u5185\u5B58\u56DE\u6536\u65E5\u5FD7\u4E2D\u5305\u542B &quot;4603K -&gt; 210K&quot;\uFF0C\u610F\u5473\u7740\u865A\u62DF\u673A\u5E76\u6CA1\u6709\u56E0\u4E3A\u8FD9\u4E24\u4E2A\u5BF9\u8C61\u4E92\u76F8\u5F15\u7528\u5C31\u653E\u5F03\u56DE\u6536\u5B83\u4EEC\uFF0C\u8FD9\u4E5F\u4ECE\u4FA7\u9762\u8BF4\u660E\u4E86 Java \u865A\u62DF\u673A\u5E76\u4E0D\u662F\u901A\u8FC7\u5F15\u7528\u8BA1\u6570\u7B97\u6CD5\u6765\u5224\u65AD\u5BF9\u8C61\u662F\u5426\u5B58\u6D3B\u7684\u3002</p><h3 id="_3-2-2-\u53EF\u8FBE\u6027\u5206\u6790\u7B97\u6CD5" tabindex="-1"><a class="header-anchor" href="#_3-2-2-\u53EF\u8FBE\u6027\u5206\u6790\u7B97\u6CD5" aria-hidden="true">#</a> 3.2.2 \u53EF\u8FBE\u6027\u5206\u6790\u7B97\u6CD5</h3><p>\u5F53\u524D\u4E3B\u6D41\u7684\u5546\u7528\u7A0B\u5E8F\u8BED\u8A00\uFF08Java\u3001C#\uFF0C\u4E0A\u6EAF\u81F3\u524D\u9762\u63D0\u5230\u7684\u53E4\u8001\u7684 Lisp\uFF09\u7684\u5185\u5B58\u7BA1\u7406\u5B50\u7CFB\u7EDF\uFF0C\u90FD\u662F\u901A\u8FC7\u53EF\u8FBE\u6027\u5206\u6790\uFF08Reachability Analysis\uFF09\u7B97\u6CD5\u6765\u5224\u5B9A\u5BF9\u8C61\u662F\u5426\u5B58\u6D3B\u7684\u3002\u8FD9\u4E2A\u7B97\u6CD5\u7684\u57FA\u672C\u601D\u8DEF\u5C31\u662F\u901A\u8FC7\u4E00\u7CFB\u5217\u79F0\u4E3A &quot;GC Roots&quot; \u7684\u6839\u5BF9\u8C61\u4F5C\u4E3A\u8D77\u59CB\u8282\u70B9\u96C6\uFF0C\u4ECE\u8FD9\u4E9B\u8282\u70B9\u5F00\u59CB\uFF0C\u6839\u636E\u5F15\u7528\u5173\u7CFB\u5411\u4E0B\u641C\u7D22\uFF0C\u641C\u7D22\u8FC7\u7A0B\u6240\u8D70\u8FC7\u7684\u8DEF\u5F84\u79F0\u4E3A \u201C\u5F15\u7528\u94FE\u201D\uFF08Reference Chain\uFF09\uFF0C\u5982\u679C\u67D0\u4E2A\u5BF9\u8C61\u5230 GC Roots \u95F4\u6CA1\u6709\u4EFB\u4F55\u5F15\u7528\u94FE\u76F8\u8FDE\uFF0C\u6216\u8005\u7528\u56FE\u8BBA\u7684\u8BDD\u6765\u8BF4\u5C31\u662F\u4ECE GC Roots \u5230\u8FD9\u4E2A\u5BF9\u8C61\u4E0D\u53EF\u8FBE\u65F6\uFF0C\u5219\u8BC1\u660E\u6B64\u5BF9\u8C61\u662F\u4E0D\u53EF\u80FD\u518D\u88AB\u4F7F\u7528\u7684\u3002</p><p>\u5982\u56FE3-1 \u6240\u793A\uFF0C\u5BF9\u8C61 object 5\u3001object 6\u3001object 7 \u867D\u7136\u4E92\u6709\u5173\u8054\uFF0C\u4F46\u662F\u5B83\u4EEC\u5230 GC Roots \u662F\u4E0D\u53EF\u8FBE\u7684\uFF0C\u56E0\u6B64\u5B83\u4EEC\u5C06\u4F1A\u88AB\u5224\u5B9A\u4E3A\u53EF\u56DE\u6536\u7684\u5BF9\u8C61\u3002</p><p><img src="`+r+`" alt="\u56FE3-1" loading="lazy"></p><p>\u56FE3-1 \u5229\u7528\u53EF\u8FBE\u6027\u5206\u6790\u7B97\u6CD5\u5224\u5B9A\u5BF9\u8C61\u662F\u5426\u53EF\u56DE\u6536\u5728 Java \u6280\u672F\u4F53\u7CFB\u91CC\u9762\uFF0C\u56FA\u5B9A\u53EF\u4F5C\u4E3A GC Roots \u7684\u5BF9\u8C61\u5305\u62EC\u4EE5\u4E0B\u51E0\u79CD\uFF1A</p><ul><li>\u5728\u865A\u62DF\u673A\u6808\uFF08\u6808\u5E27\u4E2D\u7684\u672C\u5730\u53D8\u91CF\u8868\uFF09\u4E2D\u5F15\u7528\u7684\u5BF9\u8C61\uFF0C\u8B6C\u5982\u5404\u4E2A\u7EBF\u7A0B\u88AB\u8C03\u7528\u7684\u65B9\u6CD5\u5806\u6808\u4E2D\u4F7F\u7528\u5230\u7684\u53C2\u6570\u3001\u5C40\u90E8\u53D8\u91CF\u3001\u4E34\u65F6\u53D8\u91CF\u7B49\u3002</li><li>\u5728\u65B9\u6CD5\u533A\u4E2D\u7C7B\u9759\u6001\u5C5E\u6027\u5F15\u7528\u7684\u5BF9\u8C61\uFF0C\u8B6C\u5982 Java \u7C7B\u7684\u5F15\u7528\u7C7B\u578B\u9759\u6001\u53D8\u91CF\u3002</li><li>\u5728\u65B9\u6CD5\u533A\u4E2D\u5E38\u91CF\u5F15\u7528\u7684\u5BF9\u8C61\uFF0C\u8B6C\u5982\u5B57\u7B26\u4E32\u5E38\u91CF\u6C60\uFF08String Table\uFF09\u91CC\u7684\u5F15\u7528\u3002</li><li>\u5728\u672C\u5730\u65B9\u6CD5\u6808\u4E2D JNI\uFF08\u5373\u901A\u5E38\u6240\u8BF4\u7684 Native \u65B9\u6CD5\uFF09\u5F15\u7528\u7684\u5BF9\u8C61\u3002</li><li>Java \u865A\u62DF\u673A\u5185\u90E8\u7684\u5F15\u7528\uFF0C\u5982\u57FA\u672C\u6570\u636E\u7C7B\u578B\u5BF9\u5E94\u7684 Class \u5BF9\u8C61\uFF0C\u4E00\u4E9B\u5E38\u9A7B\u7684\u5F02\u5E38\u5BF9\u8C61\uFF08\u6BD4\u5982 NullPointExcepiton\u3001OutOfMemoryError\uFF09\u7B49\uFF0C\u8FD8\u6709\u7CFB\u7EDF\u7C7B\u52A0\u8F7D\u5668\u3002</li><li>\u6240\u6709\u88AB\u540C\u6B65\u9501\uFF08synchronized \u5173\u952E\u5B57\uFF09\u6301\u6709\u7684\u5BF9\u8C61\u3002</li><li>\u53CD\u6620 Java \u865A\u62DF\u673A\u5185\u90E8\u60C5\u51B5\u7684 JMXBean\u3001JVMTI \u4E2D\u6CE8\u518C\u7684\u56DE\u8C03\u3001\u672C\u5730\u4EE3\u7801\u7F13\u5B58\u7B49\u3002</li></ul><p>\u9664\u4E86\u8FD9\u4E9B\u56FA\u5B9A\u7684 GC Roots \u96C6\u5408\u4EE5\u5916\uFF0C\u6839\u636E\u7528\u6237\u6240\u9009\u7528\u7684\u5783\u573E\u6536\u96C6\u5668\u4EE5\u53CA\u5F53\u524D\u56DE\u6536\u7684\u5185\u5B58\u533A\u57DF\u4E0D\u540C\uFF0C\u8FD8\u53EF\u4EE5\u6709\u5176\u4ED6\u5BF9\u8C61 \u201C\u4E34\u65F6\u6027\u201D \u5730\u52A0\u5165\uFF0C\u5171\u540C\u6784\u6210\u5B8C\u6574 GC Roots \u96C6\u5408\u3002\u8B6C\u5982\u540E\u6587\u5C06\u4F1A\u63D0\u5230\u7684\u5206\u4EE3\u6536\u96C6\u548C\u5C40\u90E8\u56DE\u6536\uFF08Partial GC\uFF09\uFF0C\u5982\u679C\u53EA\u9488\u5BF9 Java \u5806\u4E2D\u67D0\u4E00\u5757\u533A\u57DF\u53D1\u8D77\u5783\u573E\u6536\u96C6\u65F6\uFF08\u5982\u6700\u5178\u578B\u7684\u53EA\u9488\u5BF9\u65B0\u751F\u4EE3\u7684\u5783\u573E\u6536\u96C6\uFF09\uFF0C\u5FC5\u987B\u8003\u8651\u5230\u5185\u5B58\u533A\u57DF\u662F\u865A\u62DF\u673A\u81EA\u5DF1\u7684\u5B9E\u73B0\u7EC6\u8282\uFF08\u5728\u7528\u6237\u89C6\u89D2\u91CC\u4EFB\u4F55\u5185\u5B58\u533A\u57DF\u90FD\u662F\u4E0D\u53EF\u89C1\u7684\uFF09\uFF0C\u66F4\u4E0D\u662F\u5B64\u7ACB\u5C01\u95ED\u7684\uFF0C\u6240\u4EE5\u67D0\u4E2A\u533A\u57DF\u91CC\u7684\u5BF9\u8C61\u5B8C\u5168\u6709\u53EF\u80FD\u88AB\u4F4D\u4E8E\u5806\u4E2D\u5176\u4ED6\u533A\u57DF\u7684\u5BF9\u8C61\u6240\u5F15\u7528\uFF0C\u8FD9\u65F6\u5019\u5C31\u9700\u8981\u5C06\u8FD9\u4E9B\u5173\u8054\u533A\u57DF\u7684\u5BF9\u8C61\u4E5F\u4E00\u5E76\u52A0\u5165 GC Roots \u96C6\u5408\u4E2D\u53BB\uFF0C\u624D\u80FD\u4FDD\u8BC1\u53EF\u8FBE\u6027\u5206\u6790\u7684\u6B63\u786E\u6027\u3002</p><p>\u76EE\u524D\u6700\u65B0\u7684\u51E0\u6B3E\u5783\u573E\u6536\u96C6\u5668<sup class="footnote-ref"><a href="#footnote1">[1]</a><a class="footnote-anchor" id="footnote-ref1"></a></sup>\u65E0\u4E00\u4F8B\u5916\u90FD\u5177\u5907\u4E86\u5C40\u90E8\u56DE\u6536\u7684\u7279\u5F81\uFF0C\u4E3A\u4E86\u907F\u514D GC Roots \u5305\u542B\u8FC7\u591A\u5BF9\u8C61\u800C\u8FC7\u5EA6\u81A8\u80C0\uFF0C\u5B83\u4EEC\u5728\u5B9E\u73B0\u4E0A\u4E5F\u505A\u51FA\u4E86\u5404\u79CD\u4F18\u5316\u5904\u7406\u3002\u5173\u4E8E\u8FD9\u4E9B\u6982\u5FF5\u3001\u4F18\u5316\u6280\u5DE7\u4EE5\u53CA\u5404\u79CD\u4E0D\u540C\u6536\u96C6\u5668\u5B9E\u73B0\u7B49\u5185\u5BB9\uFF0C\u90FD\u5C06\u5728\u672C\u7AE0\u540E\u7EED\u5185\u5BB9\u4E2D\u4E00\u4E00\u4ECB\u7ECD\u3002</p><h3 id="_3-2-3-\u518D\u8C08\u5F15\u7528" tabindex="-1"><a class="header-anchor" href="#_3-2-3-\u518D\u8C08\u5F15\u7528" aria-hidden="true">#</a> 3.2.3 \u518D\u8C08\u5F15\u7528</h3><p>\u65E0\u8BBA\u662F\u901A\u8FC7\u5F15\u7528\u8BA1\u6570\u7B97\u6CD5\u5224\u65AD\u5BF9\u8C61\u7684\u5F15\u7528\u6570\u91CF\uFF0C\u8FD8\u662F\u901A\u8FC7\u53EF\u8FBE\u6027\u5206\u6790\u7B97\u6CD5\u5224\u65AD\u5BF9\u8C61\u662F\u5426\u5F15\u7528\u94FE\u53EF\u8FBE\uFF0C\u5224\u5B9A\u5BF9\u8C61\u662F\u5426\u5B58\u6D3B\u90FD\u548C \u201C\u5F15\u7528\u201D \u79BB\u4E0D\u5F00\u5173\u7CFB\u3002\u5728 JDK 1.2 \u7248\u4E4B\u524D\uFF0CJava \u91CC\u9762\u7684\u5F15\u7528\u662F\u5F88\u4F20\u7EDF\u7684\u5B9A\u4E49\uFF1A\u5982\u679C reference \u7C7B\u578B\u7684\u6570\u636E\u4E2D\u5B58\u50A8\u7684\u6570\u503C\u4EE3\u8868\u7684\u662F\u53E6\u5916\u4E00\u5757\u5185\u5B58\u7684\u8D77\u59CB\u5730\u5740\uFF0C\u5C31\u79F0\u8BE5 reference \u6570\u636E\u662F\u4EE3\u8868\u67D0\u5757\u5185\u5B58\u3001\u67D0\u4E2A\u5BF9\u8C61\u7684\u5F15\u7528\u3002\u8FD9\u79CD\u5B9A\u4E49\u5E76\u6CA1\u6709\u4EC0\u4E48\u4E0D\u5BF9\uFF0C\u53EA\u662F\u73B0\u5728\u770B\u6765\u6709\u4E9B\u8FC7\u4E8E\u72ED\u9698\u4E86\uFF0C\u4E00\u4E2A\u5BF9\u8C61\u5728\u8FD9\u79CD\u5B9A\u4E49\u4E0B\u53EA\u6709 \u201C\u88AB\u5F15\u7528\u201D \u6216\u8005 \u201C\u672A\u88AB\u5F15\u7528\u201D \u4E24\u79CD\u72B6\u6001\uFF0C\u5BF9\u4E8E\u63CF\u8FF0\u4E00\u4E9B \u201C\u98DF\u4E4B\u65E0\u5473\uFF0C\u5F03\u4E4B\u53EF\u60DC\u201D \u7684\u5BF9\u8C61\u5C31\u663E\u5F97\u65E0\u80FD\u4E3A\u529B\u3002\u8B6C\u5982\u6211\u4EEC\u5E0C\u671B\u80FD\u63CF\u8FF0\u4E00\u7C7B\u5BF9\u8C61\uFF1A\u5F53\u5185\u5B58\u7A7A\u95F4\u8FD8\u8DB3\u591F\u65F6\uFF0C\u80FD\u4FDD\u7559\u5728\u5185\u5B58\u4E4B\u4E2D\uFF0C\u5982\u679C\u5185\u5B58\u7A7A\u95F4\u5728\u8FDB\u884C\u5783\u573E\u6536\u96C6\u540E\u4ECD\u7136\u975E\u5E38\u7D27\u5F20\uFF0C\u90A3\u5C31\u53EF\u4EE5\u629B\u5F03\u8FD9\u4E9B\u5BF9\u8C61\u2014\u2014\u5F88\u591A\u7CFB\u7EDF\u7684\u7F13\u5B58\u529F\u80FD\u90FD\u7B26\u5408\u8FD9\u6837\u7684\u5E94\u7528\u573A\u666F\u3002</p><p>\u5728 JDK 1.2 \u7248\u4E4B\u540E\uFF0CJava \u5BF9\u5F15\u7528\u7684\u6982\u5FF5\u8FDB\u884C\u4E86\u6269\u5145\uFF0C\u5C06\u5F15\u7528\u5206\u4E3A\u5F3A\u5F15\u7528\uFF08Strongly Reference\uFF09\u3001\u8F6F\u5F15\u7528\uFF08Soft Reference\uFF09\u3001\u5F31\u5F15\u7528\uFF08Weak Reference\uFF09\u548C\u865A\u5F15\u7528\uFF08Phantom Reference\uFF094 \u79CD\uFF0C\u8FD9 4 \u79CD\u5F15\u7528\u5F3A\u5EA6\u4F9D\u6B21\u9010\u6E10\u51CF\u5F31\u3002</p><ul><li>\u5F3A\u5F15\u7528\u662F\u6700\u4F20\u7EDF\u7684 \u201C\u5F15\u7528\u201D \u7684\u5B9A\u4E49\uFF0C\u662F\u6307\u5728\u7A0B\u5E8F\u4EE3\u7801\u4E4B\u4E2D\u666E\u904D\u5B58\u5728\u7684\u5F15\u7528\u8D4B\u503C\uFF0C\u5373\u7C7B\u4F3C &quot;Object obj = new Object()&quot; \u8FD9\u79CD\u5F15\u7528\u5173\u7CFB\u3002\u65E0\u8BBA\u4EFB\u4F55\u60C5\u51B5\u4E0B\uFF0C\u53EA\u8981\u5F3A\u5F15\u7528\u5173\u7CFB\u8FD8\u5B58\u5728\uFF0C\u5783\u573E\u6536\u96C6\u5668\u5C31\u6C38\u8FDC\u4E0D\u4F1A\u56DE\u6536\u6389\u88AB\u5F15\u7528\u7684\u5BF9\u8C61\u3002</li><li>\u8F6F\u5F15\u7528\u662F\u7528\u6765\u63CF\u8FF0\u4E00\u4E9B\u8FD8\u6709\u7528\uFF0C\u4F46\u975E\u5FC5\u987B\u7684\u5BF9\u8C61\u3002\u53EA\u88AB\u8F6F\u5F15\u7528\u5173\u8054\u7740\u7684\u5BF9\u8C61\uFF0C\u5728\u7CFB\u7EDF\u5C06\u8981\u53D1\u751F\u5185\u5B58\u6EA2\u51FA\u5F02\u5E38\u524D\uFF0C\u4F1A\u628A\u8FD9\u4E9B\u5BF9\u8C61\u5217\u8FDB\u56DE\u6536\u8303\u56F4\u4E4B\u4E2D\u8FDB\u884C\u7B2C\u4E8C\u6B21\u56DE\u6536\uFF0C\u5982\u679C\u8FD9\u6B21\u56DE\u6536\u8FD8\u6CA1\u6709\u8DB3\u591F\u7684\u5185\u5B58\uFF0C\u624D\u4F1A\u629B\u51FA\u5185\u5B58\u6EA2\u51FA\u5F02\u5E38\u3002\u5728 JDK 1.2 \u7248\u4E4B\u540E\u63D0\u4F9B\u4E86 SoftReference \u7C7B\u6765\u5B9E\u73B0\u8F6F\u5F15\u7528\u3002</li><li>\u5F31\u5F15\u7528\u4E5F\u662F\u7528\u6765\u63CF\u8FF0\u90A3\u4E9B\u975E\u5FC5\u987B\u5BF9\u8C61\uFF0C\u4F46\u662F\u5B83\u7684\u5F3A\u5EA6\u6BD4\u8F6F\u5F15\u7528\u66F4\u5F31\u4E00\u4E9B\uFF0C\u88AB\u5F31\u5F15\u7528\u5173\u8054\u7684\u5BF9\u8C61\u53EA\u80FD\u751F\u5B58\u5230\u4E0B\u4E00\u6B21\u5783\u573E\u6536\u96C6\u53D1\u751F\u4E3A\u6B62\u3002\u5F53\u5783\u573E\u6536\u96C6\u5668\u5F00\u59CB\u5DE5\u4F5C\uFF0C\u65E0\u8BBA\u5F53\u524D\u5185\u5B58\u662F\u5426\u8DB3\u591F\uFF0C\u90FD\u4F1A\u56DE\u6536\u6389\u53EA\u88AB\u5F31\u5F15\u7528\u5173\u8054\u7684\u5BF9\u8C61\u3002\u5728 JDK 1.2 \u7248\u4E4B\u540E\u63D0\u4F9B\u4E86 WeakReference \u7C7B\u6765\u5B9E\u73B0\u5F31\u5F15\u7528\u3002</li><li>\u865A\u5F15\u7528\u4E5F\u79F0\u4E3A \u201C\u5E7D\u7075\u5F15\u7528\u201D \u6216\u8005 \u201C\u5E7B\u5F71\u5F15\u7528\u201D\uFF0C\u5B83\u662F\u6700\u5F31\u7684\u4E00\u79CD\u5F15\u7528\u5173\u7CFB\u3002\u4E00\u4E2A\u5BF9\u8C61\u662F\u5426\u6709\u865A\u5F15\u7528\u7684\u5B58\u5728\uFF0C\u5B8C\u5168\u4E0D\u4F1A\u5BF9\u5176\u751F\u5B58\u65F6\u95F4\u6784\u6210\u5F71\u54CD\uFF0C\u4E5F\u65E0\u6CD5\u901A\u8FC7\u865A\u5F15\u7528\u6765\u53D6\u5F97\u4E00\u4E2A\u5BF9\u8C61\u5B9E\u4F8B\u3002\u4E3A\u4E00\u4E2A\u5BF9\u8C61\u8BBE\u7F6E\u865A\u5F15\u7528\u5173\u8054\u7684\u552F\u4E00\u76EE\u7684\u53EA\u662F\u4E3A\u4E86\u80FD\u5728\u8FD9\u4E2A\u5BF9\u8C61\u88AB\u6536\u96C6\u5668\u56DE\u6536\u65F6\u6536\u5230\u4E00\u4E2A\u7CFB\u7EDF\u901A\u77E5\u3002\u5728 JDK 1.2 \u7248\u4E4B\u540E\u63D0\u4F9B\u4E86 PhantomReference \u7C7B\u6765\u5B9E\u73B0\u865A\u5F15\u7528\u3002</li></ul><h3 id="_3-2-4-\u751F\u5B58\u8FD8\u662F\u6B7B\u4EA1" tabindex="-1"><a class="header-anchor" href="#_3-2-4-\u751F\u5B58\u8FD8\u662F\u6B7B\u4EA1" aria-hidden="true">#</a> 3.2.4 \u751F\u5B58\u8FD8\u662F\u6B7B\u4EA1\uFF1F</h3><p>\u5373\u4F7F\u5728\u53EF\u8FBE\u6027\u5206\u6790\u7B97\u6CD5\u4E2D\u5224\u5B9A\u4E3A\u4E0D\u53EF\u8FBE\u7684\u5BF9\u8C61\uFF0C\u4E5F\u4E0D\u662F \u201C\u975E\u6B7B\u4E0D\u53EF\u201D \u7684\uFF0C\u8FD9\u65F6\u5019\u5B83\u4EEC\u6682\u65F6\u8FD8\u5904\u4E8E \u201C\u7F13\u5211\u201D \u9636\u6BB5\uFF0C\u8981\u771F\u6B63\u5BA3\u544A\u4E00\u4E2A\u5BF9\u8C61\u6B7B\u4EA1\uFF0C\u81F3\u5C11\u8981\u7ECF\u5386\u4E24\u6B21\u6807\u8BB0\u8FC7\u7A0B\uFF1A\u5982\u679C\u5BF9\u8C61\u5728\u8FDB\u884C\u53EF\u8FBE\u6027\u5206\u6790\u540E\u53D1\u73B0\u6CA1\u6709\u4E0E GC Roots \u76F8\u8FDE\u63A5\u7684\u5F15\u7528\u94FE\uFF0C\u90A3\u5B83\u5C06\u4F1A\u88AB\u7B2C\u4E00\u6B21\u6807\u8BB0\uFF0C\u968F\u540E\u8FDB\u884C\u4E00\u6B21\u7B5B\u9009\uFF0C\u7B5B\u9009\u7684\u6761\u4EF6\u662F\u6B64\u5BF9\u8C61\u662F\u5426\u6709\u5FC5\u8981\u6267\u884C finalize() \u65B9\u6CD5\u3002\u5047\u5982\u5BF9\u8C61\u6CA1\u6709\u8986\u76D6 finalize() \u65B9\u6CD5\uFF0C\u6216\u8005 finalize() \u65B9\u6CD5\u5DF2\u7ECF\u88AB\u865A\u62DF\u673A\u8C03\u7528\u8FC7\uFF0C\u90A3\u4E48\u865A\u62DF\u673A\u5C06\u8FD9\u4E24\u79CD\u60C5\u51B5\u90FD\u89C6\u4E3A \u201C\u6CA1\u6709\u5FC5\u8981\u6267\u884C\u201D\u3002</p><p>\u5982\u679C\u8FD9\u4E2A\u5BF9\u8C61\u88AB\u5224\u5B9A\u4E3A\u786E\u6709\u5FC5\u8981\u6267\u884C finalize() \u65B9\u6CD5\uFF0C\u90A3\u4E48\u8BE5\u5BF9\u8C61\u5C06\u4F1A\u88AB\u653E\u7F6E\u5728\u4E00\u4E2A\u540D\u4E3A F-Queue \u7684\u961F\u5217\u4E4B\u4E2D\uFF0C\u5E76\u5728\u7A0D\u540E\u7531\u4E00\u6761\u7531\u865A\u62DF\u673A\u81EA\u52A8\u5EFA\u7ACB\u7684\u3001\u4F4E\u8C03\u5EA6\u4F18\u5148\u7EA7\u7684 Finalizer \u7EBF\u7A0B\u53BB\u6267\u884C\u5B83\u4EEC\u7684 finalize() \u65B9\u6CD5\u3002\u8FD9\u91CC\u6240\u8BF4\u7684 \u201C\u6267\u884C\u201D \u662F\u6307\u865A\u62DF\u673A\u4F1A\u89E6\u53D1\u8FD9\u4E2A\u65B9\u6CD5\u5F00\u59CB\u8FD0\u884C\uFF0C\u4F46\u5E76\u4E0D\u627F\u8BFA\u4E00\u5B9A\u4F1A\u7B49\u5F85\u5B83\u8FD0\u884C\u7ED3\u675F\u3002\u8FD9\u6837\u505A\u7684\u539F\u56E0\u662F\uFF0C\u5982\u679C\u67D0\u4E2A\u5BF9\u8C61\u7684 finalize() \u65B9\u6CD5\u6267\u884C\u7F13\u6162\uFF0C\u6216\u8005\u66F4\u6781\u7AEF\u5730\u53D1\u751F\u4E86\u6B7B\u5FAA\u73AF\uFF0C\u5C06\u5F88\u53EF\u80FD\u5BFC\u81F4 F-Queue \u961F\u5217\u4E2D\u7684\u5176\u4ED6\u5BF9\u8C61\u6C38\u4E45\u5904\u4E8E\u7B49\u5F85\uFF0C\u751A\u81F3\u5BFC\u81F4\u6574\u4E2A\u5185\u5B58\u56DE\u6536\u5B50\u7CFB\u7EDF\u7684\u5D29\u6E83\u3002finalize() \u65B9\u6CD5\u662F\u5BF9\u8C61\u9003\u8131\u6B7B\u4EA1\u547D\u8FD0\u7684\u6700\u540E\u4E00\u6B21\u673A\u4F1A\uFF0C\u7A0D\u540E\u6536\u96C6\u5668\u5C06\u5BF9 F-Queue \u4E2D\u7684\u5BF9\u8C61\u8FDB\u884C\u7B2C\u4E8C\u6B21\u5C0F\u89C4\u6A21\u7684\u6807\u8BB0\uFF0C\u5982\u679C\u5BF9\u8C61\u8981\u5728 finalize() \u4E2D\u6210\u529F\u62EF\u6551\u81EA\u5DF1\u2014\u2014\u53EA\u8981\u91CD\u65B0\u4E0E\u5F15\u7528\u94FE\u4E0A\u7684\u4EFB\u4F55\u4E00\u4E2A\u5BF9\u8C61\u5EFA\u7ACB\u5173\u8054\u5373\u53EF\uFF0C\u8B6C\u5982\u628A\u81EA\u5DF1\uFF08this \u5173\u952E\u5B57\uFF09\u8D4B\u503C\u7ED9\u67D0\u4E2A\u7C7B\u53D8\u91CF\u6216\u8005\u5BF9\u8C61\u7684\u6210\u5458\u53D8\u91CF\uFF0C\u90A3\u5728\u7B2C\u4E8C\u6B21\u6807\u8BB0\u65F6\u5B83\u5C06\u88AB\u79FB\u51FA \u201C\u5373\u5C06\u56DE\u6536\u201D \u7684\u96C6\u5408\uFF1B\u5982\u679C\u5BF9\u8C61\u8FD9\u65F6\u5019\u8FD8\u6CA1\u6709\u9003\u8131\uFF0C\u90A3\u57FA\u672C\u4E0A\u5B83\u5C31\u771F\u7684\u8981\u88AB\u56DE\u6536\u4E86\u3002\u4ECE\u4EE3\u7801\u6E05\u53553-2 \u4E2D\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u4E00\u4E2A\u5BF9\u8C61\u7684 finalize() \u88AB\u6267\u884C\uFF0C\u4F46\u662F\u5B83\u4ECD\u7136\u53EF\u4EE5\u5B58\u6D3B\u3002</p><p>\u4EE3\u7801\u6E05\u53553-2 \u4E00\u6B21\u5BF9\u8C61\u81EA\u6211\u62EF\u6551\u7684\u6F14\u793A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u6B64\u4EE3\u7801\u6F14\u793A\u4E86\u4E24\u70B9\uFF1A
 * 1.\u5BF9\u8C61\u53EF\u4EE5\u5728\u88AB GC \u65F6\u81EA\u6211\u62EF\u6551\u3002
 * 2.\u8FD9\u79CD\u81EA\u6551\u7684\u673A\u4F1A\u53EA\u6709\u4E00\u6B21\uFF0C\u56E0\u4E3A\u4E00\u4E2A\u5BF9\u8C61\u7684 finalize() \u65B9\u6CD5\u6700\u591A\u53EA\u4F1A\u88AB\u7CFB\u7EDF\u81EA\u52A8\u8C03\u7528\u4E00\u6B21
 *
 * <span class="token keyword">@author</span> zzm
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FinalizeEscapeGC</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">FinalizeEscapeGC</span> SAVE_HOOK <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">isAlive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;yes, i am still alive :)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;finalize method executed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">FinalizeEscapeGC</span><span class="token punctuation">.</span>SAVE_HOOK <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        SAVE_HOOK <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FinalizeEscapeGC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// \u5BF9\u8C61\u7B2C\u4E00\u6B21\u6210\u529F\u62EF\u6551\u81EA\u5DF1</span>
        SAVE_HOOK <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u56E0\u4E3A Finalizer \u65B9\u6CD5\u4F18\u5148\u7EA7\u5F88\u4F4E\uFF0C\u6682\u505C 0.5 \u79D2\uFF0C\u4EE5\u7B49\u5F85\u5B83</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>SAVE_HOOK <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            SAVE_HOOK<span class="token punctuation">.</span><span class="token function">isAlive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;no, i am dead :(&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// \u4E0B\u9762\u8FD9\u6BB5\u4EE3\u7801\u4E0E\u4E0A\u9762\u7684\u5B8C\u5168\u76F8\u540C\uFF0C\u4F46\u662F\u8FD9\u6B21\u81EA\u6551\u5374\u5931\u8D25\u4E86</span>
        SAVE_HOOK <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u56E0\u4E3A Finalizer \u65B9\u6CD5\u4F18\u5148\u7EA7\u5F88\u4F4E\uFF0C\u6682\u505C 0.5 \u79D2\uFF0C\u4EE5\u7B49\u5F85\u5B83</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>SAVE_HOOK <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            SAVE_HOOK<span class="token punctuation">.</span><span class="token function">isAlive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;no, i am dead :(&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>finalize method executed!
yes, i am still alive :)
no, i am dead :(
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4EE3\u7801\u6E05\u53553-2 \u7684\u8FD0\u884C\u7ED3\u679C\u53EF\u4EE5\u770B\u5230\uFF0CSAVE_HOOK \u5BF9\u8C61\u7684 finalize() \u65B9\u6CD5\u786E\u5B9E\u88AB\u5783\u573E\u6536\u96C6\u5668\u89E6\u53D1\u8FC7\uFF0C\u5E76\u4E14\u5728\u88AB\u6536\u96C6\u524D\u6210\u529F\u9003\u8131\u4E86\u3002</p><p>\u53E6\u5916\u4E00\u4E2A\u503C\u5F97\u6CE8\u610F\u7684\u5730\u65B9\u5C31\u662F\uFF0C\u4EE3\u7801\u4E2D\u6709\u4E24\u6BB5\u5B8C\u5168\u4E00\u6837\u7684\u4EE3\u7801\u7247\u6BB5\uFF0C\u6267\u884C\u7ED3\u679C\u5374\u662F\u4E00\u6B21\u9003\u8131\u6210\u529F\uFF0C\u4E00\u6B21\u5931\u8D25\u4E86\u3002\u8FD9\u662F\u56E0\u4E3A\u4EFB\u4F55\u4E00\u4E2A\u5BF9\u8C61\u7684 finalize() \u65B9\u6CD5\u90FD\u53EA\u4F1A\u88AB\u7CFB\u7EDF\u81EA\u52A8\u8C03\u7528\u4E00\u6B21\uFF0C\u5982\u679C\u5BF9\u8C61\u9762\u4E34\u4E0B\u4E00\u6B21\u56DE\u6536\uFF0C\u5B83\u7684 finalize() \u65B9\u6CD5\u4E0D\u4F1A\u88AB\u518D\u6B21\u6267\u884C\uFF0C\u56E0\u6B64\u7B2C\u4E8C\u6BB5\u4EE3\u7801\u7684\u81EA\u6551\u884C\u52A8\u5931\u8D25\u4E86\u3002</p><p>\u8FD8\u6709\u4E00\u70B9\u9700\u8981\u7279\u522B\u8BF4\u660E\uFF0C\u4E0A\u9762\u5173\u4E8E\u5BF9\u8C61\u6B7B\u4EA1\u65F6 finalize() \u65B9\u6CD5\u7684\u63CF\u8FF0\u53EF\u80FD\u5E26\u70B9\u60B2\u60C5\u7684\u827A\u672F\u52A0\u5DE5\uFF0C\u7B14\u8005\u5E76\u4E0D\u9F13\u52B1\u5927\u5BB6\u4F7F\u7528\u8FD9\u4E2A\u65B9\u6CD5\u6765\u62EF\u6551\u5BF9\u8C61\u3002\u76F8\u53CD\uFF0C\u7B14\u8005\u5EFA\u8BAE\u5927\u5BB6\u5C3D\u91CF\u907F\u514D\u4F7F\u7528\u5B83\uFF0C\u56E0\u4E3A\u5B83\u5E76\u4E0D\u80FD\u7B49\u540C\u4E8E C \u548C C++ \u8BED\u8A00\u4E2D\u7684\u6790\u6784\u51FD\u6570\uFF0C\u800C\u662F Java \u521A\u8BDE\u751F\u65F6\u4E3A\u4E86\u4F7F\u4F20\u7EDF C\u3001C++ \u7A0B\u5E8F\u5458\u66F4\u5BB9\u6613\u63A5\u53D7 Java \u6240\u505A\u51FA\u7684\u4E00\u9879\u59A5\u534F\u3002\u5B83\u7684\u8FD0\u884C\u4EE3\u4EF7\u9AD8\u6602\uFF0C\u4E0D\u786E\u5B9A\u6027\u5927\uFF0C\u65E0\u6CD5\u4FDD\u8BC1\u5404\u4E2A\u5BF9\u8C61\u7684\u8C03\u7528\u987A\u5E8F\uFF0C\u5982\u4ECA\u5DF2\u88AB\u5B98\u65B9\u660E\u786E\u58F0\u660E\u4E3A\u4E0D\u63A8\u8350\u4F7F\u7528\u7684\u8BED\u6CD5\u3002\u6709\u4E9B\u6559\u6750\u4E2D\u63CF\u8FF0\u5B83\u9002\u5408\u505A \u201C\u5173\u95ED\u5916\u90E8\u8D44\u6E90\u201D \u4E4B\u7C7B\u7684\u6E05\u7406\u6027\u5DE5\u4F5C\uFF0C\u8FD9\u5B8C\u5168\u662F\u5BF9 finalize() \u65B9\u6CD5\u7528\u9014\u7684\u4E00\u79CD\u81EA\u6211\u5B89\u6170\u3002finalize() \u80FD\u505A\u7684\u6240\u6709\u5DE5\u4F5C\uFF0C\u4F7F\u7528 try-finally \u6216\u8005\u5176\u4ED6\u65B9\u5F0F\u90FD\u53EF\u4EE5\u505A\u5F97\u66F4\u597D\u3001\u66F4\u53CA\u65F6\uFF0C\u6240\u4EE5\u7B14\u8005\u5EFA\u8BAE\u5927\u5BB6\u5B8C\u5168\u53EF\u4EE5\u5FD8\u6389 Java \u8BED\u8A00\u91CC\u9762\u7684\u8FD9\u4E2A\u65B9\u6CD5\u3002</p><h3 id="_3-2-5-\u56DE\u6536\u65B9\u6CD5\u533A" tabindex="-1"><a class="header-anchor" href="#_3-2-5-\u56DE\u6536\u65B9\u6CD5\u533A" aria-hidden="true">#</a> 3.2.5 \u56DE\u6536\u65B9\u6CD5\u533A</h3><p>\u6709\u4E9B\u4EBA\u8BA4\u4E3A\u65B9\u6CD5\u533A\uFF08\u5982 HotSpot \u865A\u62DF\u673A\u4E2D\u7684\u5143\u7A7A\u95F4\u6216\u8005\u6C38\u4E45\u4EE3\uFF09\u662F\u6CA1\u6709\u5783\u573E\u6536\u96C6\u884C\u4E3A\u7684\uFF0C\u300AJava \u865A\u62DF\u673A\u89C4\u8303\u300B\u4E2D\u63D0\u5230\u8FC7\u53EF\u4EE5\u4E0D\u8981\u6C42\u865A\u62DF\u673A\u5728\u65B9\u6CD5\u533A\u4E2D\u5B9E\u73B0\u5783\u573E\u6536\u96C6\uFF0C\u4E8B\u5B9E\u4E0A\u4E5F\u786E\u5B9E\u6709\u672A\u5B9E\u73B0\u6216\u672A\u80FD\u5B8C\u6574\u5B9E\u73B0\u65B9\u6CD5\u533A\u7C7B\u578B\u5378\u8F7D\u7684\u6536\u96C6\u5668\u5B58\u5728\uFF08\u5982 JDK 11 \u65F6\u671F\u7684 ZGC \u6536\u96C6\u5668\u5C31\u4E0D\u652F\u6301\u7C7B\u5378\u8F7D\uFF09\uFF0C\u65B9\u6CD5\u533A\u5783\u573E\u6536\u96C6\u7684 \u201C\u6027\u4EF7\u6BD4\u201D \u901A\u5E38\u4E5F\u662F\u6BD4\u8F83\u4F4E\u7684\uFF1A\u5728 Java \u5806\u4E2D\uFF0C\u5C24\u5176\u662F\u5728\u65B0\u751F\u4EE3\u4E2D\uFF0C\u5BF9\u5E38\u89C4\u5E94\u7528\u8FDB\u884C\u4E00\u6B21\u5783\u573E\u6536\u96C6\u901A\u5E38\u53EF\u4EE5\u56DE\u6536 70% \u81F3 99% \u7684\u5185\u5B58\u7A7A\u95F4\uFF0C\u76F8\u6BD4\u4E4B\u4E0B\uFF0C\u65B9\u6CD5\u533A\u56DE\u6536\u56FF\u4E8E\u82DB\u523B\u7684\u5224\u5B9A\u6761\u4EF6\uFF0C\u5176\u533A\u57DF\u5783\u573E\u6536\u96C6\u7684\u56DE\u6536\u6210\u679C\u5F80\u5F80\u8FDC\u4F4E\u4E8E\u6B64\u3002</p><p>\u65B9\u6CD5\u533A\u7684\u5783\u573E\u6536\u96C6\u4E3B\u8981\u56DE\u6536\u4E24\u90E8\u5206\u5185\u5BB9\uFF1A\u5E9F\u5F03\u7684\u5E38\u91CF\u548C\u4E0D\u518D\u4F7F\u7528\u7684\u7C7B\u578B\u3002\u56DE\u6536\u5E9F\u5F03\u5E38\u91CF\u4E0E\u56DE\u6536 Java \u5806\u4E2D\u7684\u5BF9\u8C61\u975E\u5E38\u7C7B\u4F3C\u3002\u4E3E\u4E2A\u5E38\u91CF\u6C60\u4E2D\u5B57\u9762\u91CF\u56DE\u6536\u7684\u4F8B\u5B50\uFF0C\u5047\u5982\u4E00\u4E2A\u5B57\u7B26\u4E32 &quot;java&quot; \u66FE\u7ECF\u8FDB\u5165\u5E38\u91CF\u6C60\u4E2D\uFF0C\u4F46\u662F\u5F53\u524D\u7CFB\u7EDF\u53C8\u6CA1\u6709\u4EFB\u4F55\u4E00\u4E2A\u5B57\u7B26\u4E32\u5BF9\u8C61\u7684\u503C\u662F &quot;java&quot;\uFF0C\u6362\u53E5\u8BDD\u8BF4\uFF0C\u5DF2\u7ECF\u6CA1\u6709\u4EFB\u4F55\u5B57\u7B26\u4E32\u5BF9\u8C61\u5F15\u7528\u5E38\u91CF\u6C60\u4E2D\u7684 &quot;java&quot; \u5E38\u91CF\uFF0C\u4E14\u865A\u62DF\u673A\u4E2D\u4E5F\u6CA1\u6709\u5176\u4ED6\u5730\u65B9\u5F15\u7528\u8FD9\u4E2A\u5B57\u9762\u91CF\u3002\u5982\u679C\u5728\u8FD9\u65F6\u53D1\u751F\u5185\u5B58\u56DE\u6536\uFF0C\u800C\u4E14\u5783\u573E\u6536\u96C6\u5668\u5224\u65AD\u786E\u6709\u5FC5\u8981\u7684\u8BDD\uFF0C\u8FD9\u4E2A &quot;java&quot; \u5E38\u91CF\u5C31\u5C06\u4F1A\u88AB\u7CFB\u7EDF\u6E05\u7406\u51FA\u5E38\u91CF\u6C60\u3002\u5E38\u91CF\u6C60\u4E2D\u5176\u4ED6\u7C7B\uFF08\u63A5\u53E3\uFF09\u3001\u65B9\u6CD5\u3001\u5B57\u6BB5\u7684\u7B26\u53F7\u5F15\u7528\u4E5F\u4E0E\u6B64\u7C7B\u4F3C\u3002</p><p>\u5224\u5B9A\u4E00\u4E2A\u5E38\u91CF\u662F\u5426 \u201C\u5E9F\u5F03\u201D \u8FD8\u662F\u76F8\u5BF9\u7B80\u5355\uFF0C\u800C\u8981\u5224\u5B9A\u4E00\u4E2A\u7C7B\u578B\u662F\u5426\u5C5E\u4E8E \u201C\u4E0D\u518D\u88AB\u4F7F\u7528\u7684\u7C7B\u201D \u7684\u6761\u4EF6\u5C31\u6BD4\u8F83\u82DB\u523B\u4E86\u3002\u9700\u8981\u540C\u65F6\u6EE1\u8DB3\u4E0B\u9762\u4E09\u4E2A\u6761\u4EF6\uFF1A</p><ul><li>\u8BE5\u7C7B\u6240\u6709\u7684\u5B9E\u4F8B\u90FD\u5DF2\u7ECF\u88AB\u56DE\u6536\uFF0C\u4E5F\u5C31\u662F Java \u5806\u4E2D\u4E0D\u5B58\u5728\u8BE5\u7C7B\u53CA\u5176\u4EFB\u4F55\u6D3E\u751F\u5B50\u7C7B\u7684\u5B9E\u4F8B\u3002</li><li>\u52A0\u8F7D\u8BE5\u7C7B\u7684\u7C7B\u52A0\u8F7D\u5668\u5DF2\u7ECF\u88AB\u56DE\u6536\uFF0C\u8FD9\u4E2A\u6761\u4EF6\u9664\u975E\u662F\u7ECF\u8FC7\u7CBE\u5FC3\u8BBE\u8BA1\u7684\u53EF\u66FF\u6362\u7C7B\u52A0\u8F7D\u5668\u7684\u573A\u666F\uFF0C\u5982 OSGi\u3001JSP \u7684\u91CD\u52A0\u8F7D\u7B49\uFF0C\u5426\u5219\u901A\u5E38\u662F\u5F88\u96BE\u8FBE\u6210\u7684\u3002</li><li>\u8BE5\u7C7B\u5BF9\u5E94\u7684 java.lang.Class \u5BF9\u8C61\u6CA1\u6709\u5728\u4EFB\u4F55\u5730\u65B9\u88AB\u5F15\u7528\uFF0C\u65E0\u6CD5\u5728\u4EFB\u4F55\u5730\u65B9\u901A\u8FC7\u53CD\u5C04\u8BBF\u95EE\u8BE5\u7C7B\u7684\u65B9\u6CD5\u3002</li></ul><p>Java \u865A\u62DF\u673A\u88AB\u5141\u8BB8\u5BF9\u6EE1\u8DB3\u4E0A\u8FF0\u4E09\u4E2A\u6761\u4EF6\u7684\u65E0\u7528\u7C7B\u8FDB\u884C\u56DE\u6536\uFF0C\u8FD9\u91CC\u8BF4\u7684\u4EC5\u4EC5\u662F \u201C\u88AB\u5141\u8BB8\u201D\uFF0C\u800C\u5E76\u4E0D\u662F\u548C\u5BF9\u8C61\u4E00\u6837\uFF0C\u6CA1\u6709\u5F15\u7528\u4E86\u5C31\u5FC5\u7136\u4F1A\u56DE\u6536\u3002\u5173\u4E8E\u662F\u5426\u8981\u5BF9\u7C7B\u578B\u8FDB\u884C\u56DE\u6536\uFF0CHotSpot \u865A\u62DF\u673A\u63D0\u4F9B\u4E86-Xnoclassgc \u53C2\u6570\u8FDB\u884C\u63A7\u5236\uFF0C\u8FD8\u53EF\u4EE5\u4F7F\u7528 -verbose:class\u4EE5\u53CA -XX:+TraceClass-Loading\u3001-XX:</p><p>+TraceClassUnLoading \u67E5\u770B\u7C7B\u52A0\u8F7D\u548C\u5378\u8F7D\u4FE1\u606F\uFF0C\u5176\u4E2D -verbose:class \u548C -XX:+TraceClassLoading \u53EF\u4EE5\u5728 Product \u7248\u7684\u865A\u62DF\u673A\u4E2D\u4F7F\u7528\uFF0C-XX:+TraceClassUnLoading \u53C2\u6570\u9700\u8981 FastDebug \u7248<sup class="footnote-ref"><a href="#footnote2">[2]</a><a class="footnote-anchor" id="footnote-ref2"></a></sup>\u7684\u865A\u62DF\u673A\u652F\u6301\u3002</p><p>\u5728\u5927\u91CF\u4F7F\u7528\u53CD\u5C04\u3001\u52A8\u6001\u4EE3\u7406\u3001CGLib \u7B49\u5B57\u8282\u7801\u6846\u67B6\uFF0C\u52A8\u6001\u751F\u6210 JSP \u4EE5\u53CA OSGi \u8FD9\u7C7B\u9891\u7E41\u81EA\u5B9A\u4E49\u7C7B\u52A0\u8F7D\u5668\u7684\u573A\u666F\u4E2D\uFF0C\u901A\u5E38\u90FD\u9700\u8981 Java \u865A\u62DF\u673A\u5177\u5907\u7C7B\u578B\u5378\u8F7D\u7684\u80FD\u529B\uFF0C\u4EE5\u4FDD\u8BC1\u4E0D\u4F1A\u5BF9\u65B9\u6CD5\u533A\u9020\u6210\u8FC7\u5927\u7684\u5185\u5B58\u538B\u529B\u3002</p><h2 id="_3-3-\u5783\u573E\u6536\u96C6\u7B97\u6CD5" tabindex="-1"><a class="header-anchor" href="#_3-3-\u5783\u573E\u6536\u96C6\u7B97\u6CD5" aria-hidden="true">#</a> 3.3 \u5783\u573E\u6536\u96C6\u7B97\u6CD5</h2><p>\u5783\u573E\u6536\u96C6\u7B97\u6CD5\u7684\u5B9E\u73B0\u6D89\u53CA\u5927\u91CF\u7684\u7A0B\u5E8F\u7EC6\u8282\uFF0C\u4E14\u5404\u4E2A\u5E73\u53F0\u7684\u865A\u62DF\u673A\u64CD\u4F5C\u5185\u5B58\u7684\u65B9\u6CD5\u90FD\u6709\u5DEE\u5F02\uFF0C\u5728\u672C\u8282\u4E2D\u6211\u4EEC\u6682\u4E0D\u8FC7\u591A\u8BA8\u8BBA\u7B97\u6CD5\u5B9E\u73B0\uFF0C\u53EA\u91CD\u70B9\u4ECB\u7ECD\u5206\u4EE3\u6536\u96C6\u7406\u8BBA\u548C\u51E0\u79CD\u7B97\u6CD5\u601D\u60F3\u53CA\u5176\u53D1\u5C55\u8FC7\u7A0B\u3002\u5982\u679C\u8BFB\u8005\u5BF9\u5176\u4E2D\u7684\u7406\u8BBA\u7EC6\u8282\u611F\u5174\u8DA3\uFF0C\u63A8\u8350\u9605\u8BFB Richard Jones \u64B0\u5199\u7684\u300A\u5783\u573E\u56DE\u6536\u7B97\u6CD5\u624B\u518C\u300B<sup class="footnote-ref"><a href="#footnote3">[3]</a><a class="footnote-anchor" id="footnote-ref3"></a></sup>\u7684\u7B2C 2 ~ 4 \u7AE0\u7684\u76F8\u5173\u5185\u5BB9\u3002</p><p>\u4ECE\u5982\u4F55\u5224\u5B9A\u5BF9\u8C61\u6D88\u4EA1\u7684\u89D2\u5EA6\u51FA\u53D1\uFF0C\u5783\u573E\u6536\u96C6\u7B97\u6CD5\u53EF\u4EE5\u5212\u5206\u4E3A \u201C\u5F15\u7528\u8BA1\u6570\u5F0F\u5783\u573E\u6536\u96C6\u201D\uFF08Reference Counting GC\uFF09\u548C \u201C\u8FFD\u8E2A\u5F0F\u5783\u573E\u6536\u96C6\u201D\uFF08Tracing GC\uFF09\u4E24\u5927\u7C7B\uFF0C\u8FD9\u4E24\u7C7B\u4E5F\u5E38\u88AB\u79F0\u4F5C \u201C\u76F4\u63A5\u5783\u573E\u6536\u96C6\u201D \u548C \u201C\u95F4\u63A5\u5783\u573E\u6536\u96C6\u201D\u3002\u7531\u4E8E\u5F15\u7528\u8BA1\u6570\u5F0F\u5783\u573E\u6536\u96C6\u7B97\u6CD5\u5728\u672C\u4E66\u8BA8\u8BBA\u5230\u7684\u4E3B\u6D41 Java \u865A\u62DF\u673A\u4E2D\u5747\u672A\u6D89\u53CA\uFF0C\u6240\u4EE5\u6211\u4EEC\u6682\u4E0D\u628A\u5B83\u4F5C\u4E3A\u6B63\u6587\u4E3B\u8981\u5185\u5BB9\u6765\u8BB2\u89E3\uFF0C\u672C\u8282\u4ECB\u7ECD\u7684\u6240\u6709\u7B97\u6CD5\u5747\u5C5E\u4E8E\u8FFD\u8E2A\u5F0F\u5783\u573E\u6536\u96C6\u7684\u8303\u7574\u3002</p><h3 id="_3-3-1-\u5206\u4EE3\u6536\u96C6\u7406\u8BBA" tabindex="-1"><a class="header-anchor" href="#_3-3-1-\u5206\u4EE3\u6536\u96C6\u7406\u8BBA" aria-hidden="true">#</a> 3.3.1 \u5206\u4EE3\u6536\u96C6\u7406\u8BBA</h3><p>\u5F53\u524D\u5546\u4E1A\u865A\u62DF\u673A\u7684\u5783\u573E\u6536\u96C6\u5668\uFF0C\u5927\u591A\u6570\u90FD\u9075\u5FAA\u4E86 \u201C\u5206\u4EE3\u6536\u96C6\u201D\uFF08Generational Collection\uFF09<sup class="footnote-ref"><a href="#footnote4">[4]</a><a class="footnote-anchor" id="footnote-ref4"></a></sup>\u7684\u7406\u8BBA\u8FDB\u884C\u8BBE\u8BA1\uFF0C\u5206\u4EE3\u6536\u96C6\u540D\u4E3A\u7406\u8BBA\uFF0C\u5B9E\u8D28\u662F\u4E00\u5957\u7B26\u5408\u5927\u591A\u6570\u7A0B\u5E8F\u8FD0\u884C\u5B9E\u9645\u60C5\u51B5\u7684\u7ECF\u9A8C\u6CD5\u5219\uFF0C\u5B83\u5EFA\u7ACB\u5728\u4E24\u4E2A\u5206\u4EE3\u5047\u8BF4\u4E4B\u4E0A\uFF1A</p><ol><li><p>\u5F31\u5206\u4EE3\u5047\u8BF4\uFF08Weak Generational Hypothesis\uFF09\uFF1A\u7EDD\u5927\u591A\u6570\u5BF9\u8C61\u90FD\u662F\u671D\u751F\u5915\u706D\u7684\u3002</p></li><li><p>\u5F3A\u5206\u4EE3\u5047\u8BF4\uFF08Strong Generational Hypothesis\uFF09\uFF1A\u71AC\u8FC7\u8D8A\u591A\u6B21\u5783\u573E\u6536\u96C6\u8FC7\u7A0B\u7684\u5BF9\u8C61\u5C31\u8D8A\u96BE\u4EE5\u6D88\u4EA1\u3002</p></li></ol><p>\u8FD9\u4E24\u4E2A\u5206\u4EE3\u5047\u8BF4\u5171\u540C\u5960\u5B9A\u4E86\u591A\u6B3E\u5E38\u7528\u7684\u5783\u573E\u6536\u96C6\u5668\u7684\u4E00\u81F4\u7684\u8BBE\u8BA1\u539F\u5219\uFF1A\u6536\u96C6\u5668\u5E94\u8BE5\u5C06 Java \u5806\u5212\u5206\u51FA\u4E0D\u540C\u7684\u533A\u57DF\uFF0C\u7136\u540E\u5C06\u56DE\u6536\u5BF9\u8C61\u4F9D\u636E\u5176\u5E74\u9F84\uFF08\u5E74\u9F84\u5373\u5BF9\u8C61\u71AC\u8FC7\u5783\u573E\u6536\u96C6\u8FC7\u7A0B\u7684\u6B21\u6570\uFF09\u5206\u914D\u5230\u4E0D\u540C\u7684\u533A\u57DF\u4E4B\u4E2D\u5B58\u50A8\u3002\u663E\u800C\u6613\u89C1\uFF0C\u5982\u679C\u4E00\u4E2A\u533A\u57DF\u4E2D\u5927\u591A\u6570\u5BF9\u8C61\u90FD\u662F\u671D\u751F\u5915\u706D\uFF0C\u96BE\u4EE5\u71AC\u8FC7\u5783\u573E\u6536\u96C6\u8FC7\u7A0B\u7684\u8BDD\uFF0C\u90A3\u4E48\u628A\u5B83\u4EEC\u96C6\u4E2D\u653E\u5728\u4E00\u8D77\uFF0C\u6BCF\u6B21\u56DE\u6536\u65F6\u53EA\u5173\u6CE8\u5982\u4F55\u4FDD\u7559\u5C11\u91CF\u5B58\u6D3B\u800C\u4E0D\u662F\u53BB\u6807\u8BB0\u90A3\u4E9B\u5927\u91CF\u5C06\u8981\u88AB\u56DE\u6536\u7684\u5BF9\u8C61\uFF0C\u5C31\u80FD\u4EE5\u8F83\u4F4E\u4EE3\u4EF7\u56DE\u6536\u5230\u5927\u91CF\u7684\u7A7A\u95F4\uFF1B\u5982\u679C\u5269\u4E0B\u7684\u90FD\u662F\u96BE\u4EE5\u6D88\u4EA1\u7684\u5BF9\u8C61\uFF0C\u90A3\u628A\u5B83\u4EEC\u96C6\u4E2D\u653E\u5728\u4E00\u5757\uFF0C\u865A\u62DF\u673A\u4FBF\u53EF\u4EE5\u4F7F\u7528\u8F83\u4F4E\u7684\u9891\u7387\u6765\u56DE\u6536\u8FD9\u4E2A\u533A\u57DF\uFF0C\u8FD9\u5C31\u540C\u65F6\u517C\u987E\u4E86\u5783\u573E\u6536\u96C6\u7684\u65F6\u95F4\u5F00\u9500\u548C\u5185\u5B58\u7684\u7A7A\u95F4\u6709\u6548\u5229\u7528\u3002</p><p>\u5728 Java \u5806\u5212\u5206\u51FA\u4E0D\u540C\u7684\u533A\u57DF\u4E4B\u540E\uFF0C\u5783\u573E\u6536\u96C6\u5668\u624D\u53EF\u4EE5\u6BCF\u6B21\u53EA\u56DE\u6536\u5176\u4E2D\u67D0\u4E00\u4E2A\u6216\u8005\u67D0\u4E9B\u90E8\u5206\u7684\u533A\u57DF\u2014\u2014\u56E0\u800C\u624D\u6709\u4E86 &quot;Minor GC&quot;\u3001&quot;Major GC&quot;\u3001&quot;Full GC&quot; \u8FD9\u6837\u7684\u56DE\u6536\u7C7B\u578B\u7684\u5212\u5206\uFF1B\u4E5F\u624D\u80FD\u591F\u9488\u5BF9\u4E0D\u540C\u7684\u533A\u57DF\u5B89\u6392\u4E0E\u91CC\u9762\u5B58\u50A8\u5BF9\u8C61\u5B58\u4EA1\u7279\u5F81\u76F8\u5339\u914D\u7684\u5783\u573E\u6536\u96C6\u7B97\u6CD5\u2014\u2014\u56E0\u800C\u53D1\u5C55\u51FA\u4E86 \u201C\u6807\u8BB0-\u590D\u5236\u7B97\u6CD5\u201D\u3001\u201C\u6807\u8BB0-\u6E05\u9664\u7B97\u6CD5\u201D\u3001\u201C\u6807\u8BB0-\u6574\u7406\u7B97\u6CD5\u201D \u7B49\u9488\u5BF9\u6027\u7684\u5783\u573E\u6536\u96C6\u7B97\u6CD5\u3002\u8FD9\u91CC\u7B14\u8005\u63D0\u524D\u63D0\u53CA\u4E86\u4E00\u4E9B\u65B0\u7684\u540D\u8BCD\uFF0C\u5B83\u4EEC\u90FD\u662F\u672C\u7AE0\u7684\u91CD\u8981\u89D2\u8272\uFF0C\u7A0D\u540E\u90FD\u4F1A\u9010\u4E00\u767B\u573A\uFF0C\u73B0\u5728\u8BFB\u8005\u53EA\u9700\u8981\u77E5\u9053\uFF0C\u8FD9\u4E00\u5207\u7684\u51FA\u73B0\u90FD\u59CB\u4E8E\u5206\u4EE3\u6536\u96C6\u7406\u8BBA\u3002</p><p>\u628A\u5206\u4EE3\u6536\u96C6\u7406\u8BBA\u5177\u4F53\u653E\u5230\u73B0\u5728\u7684\u5546\u7528 Java \u865A\u62DF\u673A\u91CC\uFF0C\u8BBE\u8BA1\u8005\u4E00\u822C\u81F3\u5C11\u4F1A\u628A Java \u5806\u5212\u5206\u4E3A\u65B0\u751F\u4EE3\uFF08Young Generation\uFF09\u548C\u8001\u5E74\u4EE3\uFF08Old Generation\uFF09\u4E24\u4E2A\u533A\u57DF<sup class="footnote-ref"><a href="#footnote5">[5]</a><a class="footnote-anchor" id="footnote-ref5"></a></sup>\u3002\u987E\u540D\u601D\u4E49\uFF0C\u5728\u65B0\u751F\u4EE3\u4E2D\uFF0C\u6BCF\u6B21\u5783\u573E\u6536\u96C6\u65F6\u90FD\u53D1\u73B0\u6709\u5927\u6279\u5BF9\u8C61\u6B7B\u53BB\uFF0C\u800C\u6BCF\u6B21\u56DE\u6536\u540E\u5B58\u6D3B\u7684\u5C11\u91CF\u5BF9\u8C61\uFF0C\u5C06\u4F1A\u9010\u6B65\u664B\u5347\u5230\u8001\u5E74\u4EE3\u4E2D\u5B58\u653E\u3002\u5982\u679C\u8BFB\u8005\u6709\u5174\u8DA3\u9605\u8BFB HotSpot \u865A\u62DF\u673A\u6E90\u7801\u7684\u8BDD\uFF0C\u4F1A\u53D1\u73B0\u91CC\u9762\u5B58\u5728\u7740\u4E00\u4E9B\u540D\u4E3A &quot;*Generation&quot; \u7684\u5B9E\u73B0\uFF0C\u5982 &quot;DefNewGeneration&quot; \u548C &quot;ParNewGeneration&quot; \u7B49\uFF0C\u8FD9\u4E9B\u5C31\u662F HotSpot \u7684 \u201C\u5206\u4EE3\u5F0F\u5783\u573E\u6536\u96C6\u5668\u6846\u67B6\u201D\u3002\u539F\u672C HotSpot \u9F13\u52B1\u5F00\u53D1\u8005\u5C3D\u91CF\u5728\u8FD9\u4E2A\u6846\u67B6\u5185\u5F00\u53D1\u65B0\u7684\u5783\u573E\u6536\u96C6\u5668\uFF0C\u4F46\u9664\u4E86\u6700\u65E9\u671F\u7684\u4E24\u7EC4\u56DB\u6B3E\u6536\u96C6\u5668\u4E4B\u5916\uFF0C\u540E\u6765\u7684\u5F00\u53D1\u8005\u5E76\u6CA1\u6709\u7EE7\u7EED\u9075\u5FAA\u3002\u5BFC\u81F4\u6B64\u4E8B\u7684\u539F\u56E0\u6709\u5F88\u591A\uFF0C\u6700\u6839\u672C\u7684\u662F\u5206\u4EE3\u6536\u96C6\u7406\u8BBA\u4ECD\u5728\u4E0D\u65AD\u53D1\u5C55\u4E4B\u4E2D\uFF0C\u5982\u4F55\u5B9E\u73B0\u4E5F\u6709\u8BB8\u591A\u7EC6\u8282\u53EF\u4EE5\u6539\u8FDB\uFF0C\u88AB\u65E2\u5B9A\u7684\u4EE3\u7801\u6846\u67B6\u7EA6\u675F\u53CD\u800C\u4E0D\u4FBF\u3002\u5176\u5B9E\u6211\u4EEC\u53EA\u8981\u4ED4\u7EC6\u601D\u8003\u4E00\u4E0B\uFF0C\u4E5F\u5F88\u5BB9\u6613\u53D1\u73B0\u5206\u4EE3\u6536\u96C6\u5E76\u975E\u53EA\u662F\u7B80\u5355\u5212\u5206\u4E00\u4E0B\u5185\u5B58\u533A\u57DF\u90A3\u4E48\u5BB9\u6613\uFF0C\u5B83\u81F3\u5C11\u5B58\u5728\u4E00\u4E2A\u660E\u663E\u7684\u56F0\u96BE\uFF1A\u5BF9\u8C61\u4E0D\u662F\u5B64\u7ACB\u7684\uFF0C\u5BF9\u8C61\u4E4B\u95F4\u4F1A\u5B58\u5728\u8DE8\u4EE3\u5F15\u7528\u3002</p><p>\u5047\u5982\u8981\u73B0\u5728\u8FDB\u884C\u4E00\u6B21\u53EA\u5C40\u9650\u4E8E\u65B0\u751F\u4EE3\u533A\u57DF\u5185\u7684\u6536\u96C6\uFF08Minor GC\uFF09\uFF0C\u4F46\u65B0\u751F\u4EE3\u4E2D\u7684\u5BF9\u8C61\u662F\u5B8C\u5168\u6709\u53EF\u80FD\u88AB\u8001\u5E74\u4EE3\u6240\u5F15\u7528\u7684\uFF0C\u4E3A\u4E86\u627E\u51FA\u8BE5\u533A\u57DF\u4E2D\u7684\u5B58\u6D3B\u5BF9\u8C61\uFF0C\u4E0D\u5F97\u4E0D\u5728\u56FA\u5B9A\u7684 GC Roots \u4E4B\u5916\uFF0C\u518D\u989D\u5916\u904D\u5386\u6574\u4E2A\u8001\u5E74\u4EE3\u4E2D\u6240\u6709\u5BF9\u8C61\u6765\u786E\u4FDD\u53EF\u8FBE\u6027\u5206\u6790\u7ED3\u679C\u7684\u6B63\u786E\u6027\uFF0C\u53CD\u8FC7\u6765\u4E5F\u662F\u4E00\u6837<sup class="footnote-ref"><a href="#footnote6">[6]</a><a class="footnote-anchor" id="footnote-ref6"></a></sup>\u3002\u904D\u5386\u6574\u4E2A\u8001\u5E74\u4EE3\u6240\u6709\u5BF9\u8C61\u7684\u65B9\u6848\u867D\u7136\u7406\u8BBA\u4E0A\u53EF\u884C\uFF0C\u4F46\u65E0\u7591\u4F1A\u4E3A\u5185\u5B58\u56DE\u6536\u5E26\u6765\u5F88\u5927\u7684\u6027\u80FD\u8D1F\u62C5\u3002\u4E3A\u4E86\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\uFF0C\u5C31\u9700\u8981\u5BF9\u5206\u4EE3\u6536\u96C6\u7406\u8BBA\u6DFB\u52A0\u7B2C\u4E09\u6761\u7ECF\u9A8C\u6CD5\u5219\uFF1A</p><ol start="3"><li>\u8DE8\u4EE3\u5F15\u7528\u5047\u8BF4\uFF08Intergenerational Reference Hypothesis\uFF09\uFF1A\u8DE8\u4EE3\u5F15\u7528\u76F8\u5BF9\u4E8E\u540C\u4EE3\u5F15\u7528\u6765\u8BF4\u4EC5\u5360\u6781\u5C11\u6570\u3002</li></ol><p>\u8FD9\u5176\u5B9E\u662F\u53EF\u6839\u636E\u524D\u4E24\u6761\u5047\u8BF4\u903B\u8F91\u63A8\u7406\u5F97\u51FA\u7684\u9690\u542B\u63A8\u8BBA\uFF1A\u5B58\u5728\u4E92\u76F8\u5F15\u7528\u5173\u7CFB\u7684\u4E24\u4E2A\u5BF9\u8C61\uFF0C\u662F\u5E94\u8BE5\u503E\u5411\u4E8E\u540C\u65F6\u751F\u5B58\u6216\u8005\u540C\u65F6\u6D88\u4EA1\u7684\u3002\u4E3E\u4E2A\u4F8B\u5B50\uFF0C\u5982\u679C\u67D0\u4E2A\u65B0\u751F\u4EE3\u5BF9\u8C61\u5B58\u5728\u8DE8\u4EE3\u5F15\u7528\uFF0C\u7531\u4E8E\u8001\u5E74\u4EE3\u5BF9\u8C61\u96BE\u4EE5\u6D88\u4EA1\uFF0C\u8BE5\u5F15\u7528\u4F1A\u4F7F\u5F97\u65B0\u751F\u4EE3\u5BF9\u8C61\u5728\u6536\u96C6\u65F6\u540C\u6837\u5F97\u4EE5\u5B58\u6D3B\uFF0C\u8FDB\u800C\u5728\u5E74\u9F84\u589E\u957F\u4E4B\u540E\u664B\u5347\u5230\u8001\u5E74\u4EE3\u4E2D\uFF0C\u8FD9\u65F6\u8DE8\u4EE3\u5F15\u7528\u4E5F\u968F\u5373\u88AB\u6D88\u9664\u4E86\u3002</p><p>\u4F9D\u636E\u8FD9\u6761\u5047\u8BF4\uFF0C\u6211\u4EEC\u5C31\u4E0D\u5E94\u518D\u4E3A\u4E86\u5C11\u91CF\u7684\u8DE8\u4EE3\u5F15\u7528\u53BB\u626B\u63CF\u6574\u4E2A\u8001\u5E74\u4EE3\uFF0C\u4E5F\u4E0D\u5FC5\u6D6A\u8D39\u7A7A\u95F4\u4E13\u95E8\u8BB0\u5F55\u6BCF\u4E00\u4E2A\u5BF9\u8C61\u662F\u5426\u5B58\u5728\u53CA\u5B58\u5728\u54EA\u4E9B\u8DE8\u4EE3\u5F15\u7528\uFF0C\u53EA\u9700\u5728\u65B0\u751F\u4EE3\u4E0A\u5EFA\u7ACB\u4E00\u4E2A\u5168\u5C40\u7684\u6570\u636E\u7ED3\u6784\uFF08\u8BE5\u7ED3\u6784\u88AB\u79F0\u4E3A \u201C\u8BB0\u5FC6\u96C6\u201D\uFF0CRemembered Set\uFF09\uFF0C\u8FD9\u4E2A\u7ED3\u6784\u628A\u8001\u5E74\u4EE3\u5212\u5206\u6210\u82E5\u5E72\u5C0F\u5757\uFF0C\u6807\u8BC6\u51FA\u8001\u5E74\u4EE3\u7684\u54EA\u4E00\u5757\u5185\u5B58\u4F1A\u5B58\u5728\u8DE8\u4EE3\u5F15\u7528\u3002\u6B64\u540E\u5F53\u53D1\u751F Minor GC \u65F6\uFF0C\u53EA\u6709\u5305\u542B\u4E86\u8DE8\u4EE3\u5F15\u7528\u7684\u5C0F\u5757\u5185\u5B58\u91CC\u7684\u5BF9\u8C61\u624D\u4F1A\u88AB\u52A0\u5165\u5230 GC Roots \u8FDB\u884C\u626B\u63CF\u3002\u867D\u7136\u8FD9\u79CD\u65B9\u6CD5\u9700\u8981\u5728\u5BF9\u8C61\u6539\u53D8\u5F15\u7528\u5173\u7CFB\uFF08\u5982\u5C06\u81EA\u5DF1\u6216\u8005\u67D0\u4E2A\u5C5E\u6027\u8D4B\u503C\uFF09\u65F6\u7EF4\u62A4\u8BB0\u5F55\u6570\u636E\u7684\u6B63\u786E\u6027\uFF0C\u4F1A\u589E\u52A0\u4E00\u4E9B\u8FD0\u884C\u65F6\u7684\u5F00\u9500\uFF0C\u4F46\u6BD4\u8D77\u6536\u96C6\u65F6\u626B\u63CF\u6574\u4E2A\u8001\u5E74\u4EE3\u6765\u8BF4\u4ECD\u7136\u662F\u5212\u7B97\u7684\u3002</p><p><strong>\u6CE8\u610F</strong>\uFF1A\u521A\u624D\u6211\u4EEC\u5DF2\u7ECF\u63D0\u5230\u4E86 &quot;Minor GC&quot;\uFF0C\u540E\u7EED\u6587\u4E2D\u8FD8\u4F1A\u51FA\u73B0\u5176\u4ED6\u9488\u5BF9\u4E0D\u540C\u5206\u4EE3\u7684\u7C7B\u4F3C\u540D\u8BCD\uFF0C\u4E3A\u907F\u514D\u8BFB\u8005\u4EA7\u751F\u6DF7\u6DC6\uFF0C\u5728\u8FD9\u91CC\u7EDF\u4E00\u5B9A\u4E49\uFF1A</p><ul><li>\u90E8\u5206\u6536\u96C6\uFF08Partial GC\uFF09\uFF1A\u6307\u76EE\u6807\u4E0D\u662F\u5B8C\u6574\u6536\u96C6\u6574\u4E2AJava\u5806\u7684\u5783\u573E\u6536\u96C6\uFF0C\u5176\u4E2D\u53C8\u5206\u4E3A\uFF1A <ul><li>\u65B0\u751F\u4EE3\u6536\u96C6\uFF08Minor GC / Young GC\uFF09\uFF1A\u6307\u76EE\u6807\u53EA\u662F\u65B0\u751F\u4EE3\u7684\u5783\u573E\u6536\u96C6\u3002</li><li>\u8001\u5E74\u4EE3\u6536\u96C6\uFF08Major GC / Old GC\uFF09\uFF1A\u6307\u76EE\u6807\u53EA\u662F\u8001\u5E74\u4EE3\u7684\u5783\u573E\u6536\u96C6\u3002\u76EE\u524D\u53EA\u6709 CMS \u6536\u96C6\u5668\u4F1A\u6709\u5355\u72EC\u6536\u96C6\u8001\u5E74\u4EE3\u7684\u884C\u4E3A\u3002\u53E6\u5916\u8BF7\u6CE8\u610F &quot;Major GC&quot; \u8FD9\u4E2A\u8BF4\u6CD5\u73B0\u5728\u6709\u70B9\u6DF7\u6DC6\uFF0C\u5728\u4E0D\u540C\u8D44\u6599\u4E0A\u5E38\u6709\u4E0D\u540C\u6240\u6307\uFF0C\u8BFB\u8005\u9700\u6309\u4E0A\u4E0B\u6587\u533A\u5206\u5230\u5E95\u662F\u6307\u8001\u5E74\u4EE3\u7684\u6536\u96C6\u8FD8\u662F\u6574\u5806\u6536\u96C6\u3002</li><li>\u6DF7\u5408\u6536\u96C6\uFF08Mixed GC\uFF09\uFF1A\u6307\u76EE\u6807\u662F\u6536\u96C6\u6574\u4E2A\u65B0\u751F\u4EE3\u4EE5\u53CA\u90E8\u5206\u8001\u5E74\u4EE3\u7684\u5783\u573E\u6536\u96C6\u3002\u76EE\u524D\u53EA\u6709 G1 \u6536\u96C6\u5668\u4F1A\u6709\u8FD9\u79CD\u884C\u4E3A\u3002</li></ul></li><li>\u6574\u5806\u6536\u96C6\uFF08Full GC\uFF09\uFF1A\u6536\u96C6\u6574\u4E2A Java \u5806\u548C\u65B9\u6CD5\u533A\u7684\u5783\u573E\u6536\u96C6\u3002</li></ul><h3 id="_3-3-2-\u6807\u8BB0-\u6E05\u9664\u7B97\u6CD5" tabindex="-1"><a class="header-anchor" href="#_3-3-2-\u6807\u8BB0-\u6E05\u9664\u7B97\u6CD5" aria-hidden="true">#</a> 3.3.2 \u6807\u8BB0-\u6E05\u9664\u7B97\u6CD5</h3><p>\u6700\u65E9\u51FA\u73B0\u4E5F\u662F\u6700\u57FA\u7840\u7684\u5783\u573E\u6536\u96C6\u7B97\u6CD5\u662F \u201C\u6807\u8BB0-\u6E05\u9664\u201D\uFF08Mark-Sweep\uFF09\u7B97\u6CD5\uFF0C\u5728 1960 \u5E74\u7531 Lisp \u4E4B\u7236 John McCarthy \u6240\u63D0\u51FA\u3002\u5982\u5B83\u7684\u540D\u5B57\u4E00\u6837\uFF0C\u7B97\u6CD5\u5206\u4E3A \u201C\u6807\u8BB0\u201D \u548C \u201C\u6E05\u9664\u201D \u4E24\u4E2A\u9636\u6BB5\uFF1A\u9996\u5148\u6807\u8BB0\u51FA\u6240\u6709\u9700\u8981\u56DE\u6536\u7684\u5BF9\u8C61\uFF0C\u5728\u6807\u8BB0\u5B8C\u6210\u540E\uFF0C\u7EDF\u4E00\u56DE\u6536\u6389\u6240\u6709\u88AB\u6807\u8BB0\u7684\u5BF9\u8C61\uFF0C\u4E5F\u53EF\u4EE5\u53CD\u8FC7\u6765\uFF0C\u6807\u8BB0\u5B58\u6D3B\u7684\u5BF9\u8C61\uFF0C\u7EDF\u4E00\u56DE\u6536\u6240\u6709\u672A\u88AB\u6807\u8BB0\u7684\u5BF9\u8C61\u3002\u6807\u8BB0\u8FC7\u7A0B\u5C31\u662F\u5BF9\u8C61\u662F\u5426\u5C5E\u4E8E\u5783\u573E\u7684\u5224\u5B9A\u8FC7\u7A0B\uFF0C\u8FD9\u5728\u524D\u4E00\u8282\u8BB2\u8FF0\u5783\u573E\u5BF9\u8C61\u6807\u8BB0\u5224\u5B9A\u7B97\u6CD5\u65F6\u5176\u5B9E\u5DF2\u7ECF\u4ECB\u7ECD\u8FC7\u4E86\u3002</p><p>\u4E4B\u6240\u4EE5\u8BF4\u5B83\u662F\u6700\u57FA\u7840\u7684\u6536\u96C6\u7B97\u6CD5\uFF0C\u662F\u56E0\u4E3A\u540E\u7EED\u7684\u6536\u96C6\u7B97\u6CD5\u5927\u591A\u90FD\u662F\u4EE5\u6807\u8BB0-\u6E05\u9664\u7B97\u6CD5\u4E3A\u57FA\u7840\uFF0C\u5BF9\u5176\u7F3A\u70B9\u8FDB\u884C\u6539\u8FDB\u800C\u5F97\u5230\u7684\u3002\u5B83\u7684\u4E3B\u8981\u7F3A\u70B9\u6709\u4E24\u4E2A\uFF1A\u7B2C\u4E00\u4E2A\u662F\u6267\u884C\u6548\u7387\u4E0D\u7A33\u5B9A\uFF0C\u5982\u679C Java \u5806\u4E2D\u5305\u542B\u5927\u91CF\u5BF9\u8C61\uFF0C\u800C\u4E14\u5176\u4E2D\u5927\u90E8\u5206\u662F\u9700\u8981\u88AB\u56DE\u6536\u7684\uFF0C\u8FD9\u65F6\u5FC5\u987B\u8FDB\u884C\u5927\u91CF\u6807\u8BB0\u548C\u6E05\u9664\u7684\u52A8\u4F5C\uFF0C\u5BFC\u81F4\u6807\u8BB0\u548C\u6E05\u9664\u4E24\u4E2A\u8FC7\u7A0B\u7684\u6267\u884C\u6548\u7387\u90FD\u968F\u5BF9\u8C61\u6570\u91CF\u589E\u957F\u800C\u964D\u4F4E\uFF1B\u7B2C\u4E8C\u4E2A\u662F\u5185\u5B58\u7A7A\u95F4\u7684\u788E\u7247\u5316\u95EE\u9898\uFF0C\u6807\u8BB0\u3001\u6E05\u9664\u4E4B\u540E\u4F1A\u4EA7\u751F\u5927\u91CF\u4E0D\u8FDE\u7EED\u7684\u5185\u5B58\u788E\u7247\uFF0C\u7A7A\u95F4\u788E\u7247\u592A\u591A\u53EF\u80FD\u4F1A\u5BFC\u81F4\u5F53\u4EE5\u540E\u5728\u7A0B\u5E8F\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u9700\u8981\u5206\u914D\u8F83\u5927\u5BF9\u8C61\u65F6\u65E0\u6CD5\u627E\u5230\u8DB3\u591F\u7684\u8FDE\u7EED\u5185\u5B58\u800C\u4E0D\u5F97\u4E0D\u63D0\u524D\u89E6\u53D1\u53E6\u4E00\u6B21\u5783\u573E\u6536\u96C6\u52A8\u4F5C\u3002\u6807\u8BB0-\u6E05\u9664\u7B97\u6CD5\u7684\u6267\u884C\u8FC7\u7A0B\u5982\u56FE3-2 \u6240\u793A\u3002</p><p><img src="`+c+'" alt="\u56FE3-2" loading="lazy"></p><p>\u56FE3-2 \u201C\u6807\u8BB0-\u6E05\u9664\u201D \u7B97\u6CD5\u793A\u610F\u56FE</p><h3 id="_3-3-3-\u6807\u8BB0-\u590D\u5236\u7B97\u6CD5" tabindex="-1"><a class="header-anchor" href="#_3-3-3-\u6807\u8BB0-\u590D\u5236\u7B97\u6CD5" aria-hidden="true">#</a> 3.3.3 \u6807\u8BB0-\u590D\u5236\u7B97\u6CD5</h3><p>\u6807\u8BB0-\u590D\u5236\u7B97\u6CD5\u5E38\u88AB\u7B80\u79F0\u4E3A\u590D\u5236\u7B97\u6CD5\u3002\u4E3A\u4E86\u89E3\u51B3\u6807\u8BB0-\u6E05\u9664\u7B97\u6CD5\u9762\u5BF9\u5927\u91CF\u53EF\u56DE\u6536\u5BF9\u8C61\u65F6\u6267\u884C\u6548\u7387\u4F4E\u7684\u95EE\u9898\uFF0C1969 \u5E74 Fenichel \u63D0\u51FA\u4E86\u4E00\u79CD\u79F0\u4E3A \u201C\u534A\u533A\u590D\u5236\u201D\uFF08Semispace Copying\uFF09\u7684\u5783\u573E\u6536\u96C6\u7B97\u6CD5\uFF0C\u5B83\u5C06\u53EF\u7528\u5185\u5B58\u6309\u5BB9\u91CF\u5212\u5206\u4E3A\u5927\u5C0F\u76F8\u7B49\u7684\u4E24\u5757\uFF0C\u6BCF\u6B21\u53EA\u4F7F\u7528\u5176\u4E2D\u7684\u4E00\u5757\u3002\u5F53\u8FD9\u4E00\u5757\u7684\u5185\u5B58\u7528\u5B8C\u4E86\uFF0C\u5C31\u5C06\u8FD8\u5B58\u6D3B\u7740\u7684\u5BF9\u8C61\u590D\u5236\u5230\u53E6\u5916\u4E00\u5757\u4E0A\u9762\uFF0C\u7136\u540E\u518D\u628A\u5DF2\u4F7F\u7528\u8FC7\u7684\u5185\u5B58\u7A7A\u95F4\u4E00\u6B21\u6E05\u7406\u6389\u3002\u5982\u679C\u5185\u5B58\u4E2D\u591A\u6570\u5BF9\u8C61\u90FD\u662F\u5B58\u6D3B\u7684\uFF0C\u8FD9\u79CD\u7B97\u6CD5\u5C06\u4F1A\u4EA7\u751F\u5927\u91CF\u7684\u5185\u5B58\u95F4\u590D\u5236\u7684\u5F00\u9500\uFF0C\u4F46\u5BF9\u4E8E\u591A\u6570\u5BF9\u8C61\u90FD\u662F\u53EF\u56DE\u6536\u7684\u60C5\u51B5\uFF0C\u7B97\u6CD5\u9700\u8981\u590D\u5236\u7684\u5C31\u662F\u5360\u5C11\u6570\u7684\u5B58\u6D3B\u5BF9\u8C61\uFF0C\u800C\u4E14\u6BCF\u6B21\u90FD\u662F\u9488\u5BF9\u6574\u4E2A\u534A\u533A\u8FDB\u884C\u5185\u5B58\u56DE\u6536\uFF0C\u5206\u914D\u5185\u5B58\u65F6\u4E5F\u5C31\u4E0D\u7528\u8003\u8651\u6709\u7A7A\u95F4\u788E\u7247\u7684\u590D\u6742\u60C5\u51B5\uFF0C\u53EA\u8981\u79FB\u52A8\u5806\u9876\u6307\u9488\uFF0C\u6309\u987A\u5E8F\u5206\u914D\u5373\u53EF\u3002\u8FD9\u6837\u5B9E\u73B0\u7B80\u5355\uFF0C\u8FD0\u884C\u9AD8\u6548\uFF0C\u4E0D\u8FC7\u5176\u7F3A\u9677\u4E5F\u663E\u800C\u6613\u89C1\uFF0C\u8FD9\u79CD\u590D\u5236\u56DE\u6536\u7B97\u6CD5\u7684\u4EE3\u4EF7\u662F\u5C06\u53EF\u7528\u5185\u5B58\u7F29\u5C0F\u4E3A\u4E86\u539F\u6765\u7684\u4E00\u534A\uFF0C\u7A7A\u95F4\u6D6A\u8D39\u672A\u514D\u592A\u591A\u4E86\u4E00\u70B9\u3002\u6807\u8BB0-\u590D\u5236\u7B97\u6CD5\u7684\u6267\u884C\u8FC7\u7A0B\u5982\u56FE3-3 \u6240\u793A\u3002</p><p><img src="'+d+'" alt="\u56FE3-3" loading="lazy"></p><p>\u56FE3-3 \u6807\u8BB0-\u590D\u5236\u7B97\u6CD5\u793A\u610F\u56FE</p><p>\u73B0\u5728\u7684\u5546\u7528 Java \u865A\u62DF\u673A\u5927\u591A\u90FD\u4F18\u5148\u91C7\u7528\u4E86\u8FD9\u79CD\u6536\u96C6\u7B97\u6CD5\u53BB\u56DE\u6536\u65B0\u751F\u4EE3\uFF0CIBM \u516C\u53F8\u66FE\u6709\u4E00\u9879\u4E13\u95E8\u7814\u7A76\u5BF9\u65B0\u751F\u4EE3 \u201C\u671D\u751F\u5915\u706D\u201D \u7684\u7279\u70B9\u505A\u4E86\u66F4\u91CF\u5316\u7684\u8BE0\u91CA\u2014\u2014\u65B0\u751F\u4EE3\u4E2D\u7684\u5BF9\u8C61\u6709 98% \u71AC\u4E0D\u8FC7\u7B2C\u4E00\u8F6E\u6536\u96C6\u3002\u56E0\u6B64\u5E76\u4E0D\u9700\u8981\u6309\u7167 1\u22361 \u7684\u6BD4\u4F8B\u6765\u5212\u5206\u65B0\u751F\u4EE3\u7684\u5185\u5B58\u7A7A\u95F4\u3002</p><p>\u5728 1989 \u5E74\uFF0CAndrew Appel \u9488\u5BF9\u5177\u5907 \u201C\u671D\u751F\u5915\u706D\u201D \u7279\u70B9\u7684\u5BF9\u8C61\uFF0C\u63D0\u51FA\u4E86\u4E00\u79CD\u66F4\u4F18\u5316\u7684\u534A\u533A\u590D\u5236\u5206\u4EE3\u7B56\u7565\uFF0C\u73B0\u5728\u79F0\u4E3A \u201CAppel \u5F0F\u56DE\u6536\u201D\u3002HotSpot \u865A\u62DF\u673A\u7684 Serial\u3001ParNew \u7B49\u65B0\u751F\u4EE3\u6536\u96C6\u5668\u5747\u91C7\u7528\u4E86\u8FD9\u79CD\u7B56\u7565\u6765\u8BBE\u8BA1\u65B0\u751F\u4EE3\u7684\u5185\u5B58\u5E03\u5C40<sup class="footnote-ref"><a href="#footnote7">[7]</a><a class="footnote-anchor" id="footnote-ref7"></a></sup>\u3002Appel \u5F0F\u56DE\u6536\u7684\u5177\u4F53\u505A\u6CD5\u662F\u628A\u65B0\u751F\u4EE3\u5206\u4E3A\u4E00\u5757\u8F83\u5927\u7684 Eden \u7A7A\u95F4\u548C\u4E24\u5757\u8F83\u5C0F\u7684 Survivor \u7A7A\u95F4\uFF0C\u6BCF\u6B21\u5206\u914D\u5185\u5B58\u53EA\u4F7F\u7528 Eden \u548C\u5176\u4E2D\u4E00\u5757 Survivor\u3002\u53D1\u751F\u5783\u573E\u641C\u96C6\u65F6\uFF0C\u5C06 Eden \u548C Survivor \u4E2D\u4ECD\u7136\u5B58\u6D3B\u7684\u5BF9\u8C61\u4E00\u6B21\u6027\u590D\u5236\u5230\u53E6\u5916\u4E00\u5757 Survivor \u7A7A\u95F4\u4E0A\uFF0C\u7136\u540E\u76F4\u63A5\u6E05\u7406\u6389 Eden \u548C\u5DF2\u7528\u8FC7\u7684\u90A3\u5757 Survivor \u7A7A\u95F4\u3002HotSpot \u865A\u62DF\u673A\u9ED8\u8BA4 Eden \u548C Survivor \u7684\u5927\u5C0F\u6BD4\u4F8B\u662F 8\u22361\uFF0C\u4E5F\u5373\u6BCF\u6B21\u65B0\u751F\u4EE3\u4E2D\u53EF\u7528\u5185\u5B58\u7A7A\u95F4\u4E3A\u6574\u4E2A\u65B0\u751F\u4EE3\u5BB9\u91CF\u7684 90%\uFF08Eden \u7684 80% \u52A0\u4E0A\u4E00\u4E2A Survivor \u7684 10%\uFF09\uFF0C\u53EA\u6709\u4E00\u4E2A Survivor \u7A7A\u95F4\uFF0C\u5373 10% \u7684\u65B0\u751F\u4EE3\u662F\u4F1A\u88AB \u201C\u6D6A\u8D39\u201D \u7684\u3002\u5F53\u7136\uFF0C98% \u7684\u5BF9\u8C61\u53EF\u88AB\u56DE\u6536\u4EC5\u4EC5\u662F \u201C\u666E\u901A\u573A\u666F\u201D \u4E0B\u6D4B\u5F97\u7684\u6570\u636E\uFF0C\u4EFB\u4F55\u4EBA\u90FD\u6CA1\u6709\u529E\u6CD5\u767E\u5206\u767E\u4FDD\u8BC1\u6BCF\u6B21\u56DE\u6536\u90FD\u53EA\u6709\u4E0D\u591A\u4E8E 10% \u7684\u5BF9\u8C61\u5B58\u6D3B\uFF0C\u56E0\u6B64 Appel \u5F0F\u56DE\u6536\u8FD8\u6709\u4E00\u4E2A\u5145\u5F53\u7F55\u89C1\u60C5\u51B5\u7684 \u201C\u9003\u751F\u95E8\u201D \u7684\u5B89\u5168\u8BBE\u8BA1\uFF0C\u5F53 Survivor \u7A7A\u95F4\u4E0D\u8DB3\u4EE5\u5BB9\u7EB3\u4E00\u6B21 Minor GC \u4E4B\u540E\u5B58\u6D3B\u7684\u5BF9\u8C61\u65F6\uFF0C\u5C31\u9700\u8981\u4F9D\u8D56\u5176\u4ED6\u5185\u5B58\u533A\u57DF\uFF08\u5B9E\u9645\u4E0A\u5927\u591A\u5C31\u662F\u8001\u5E74\u4EE3\uFF09\u8FDB\u884C\u5206\u914D\u62C5\u4FDD\uFF08Handle Promotion\uFF09\u3002</p><p>\u5185\u5B58\u7684\u5206\u914D\u62C5\u4FDD\u597D\u6BD4\u6211\u4EEC\u53BB\u94F6\u884C\u501F\u6B3E\uFF0C\u5982\u679C\u6211\u4EEC\u4FE1\u8A89\u5F88\u597D\uFF0C\u5728 98% \u7684\u60C5\u51B5\u4E0B\u90FD\u80FD\u6309\u65F6\u507F\u8FD8\uFF0C\u4E8E\u662F\u94F6\u884C\u53EF\u80FD\u4F1A\u9ED8\u8BA4\u6211\u4EEC\u4E0B\u4E00\u6B21\u4E5F\u80FD\u6309\u65F6\u6309\u91CF\u5730\u507F\u8FD8\u8D37\u6B3E\uFF0C\u53EA\u9700\u8981\u6709\u4E00\u4E2A\u62C5\u4FDD\u4EBA\u80FD\u4FDD\u8BC1\u5982\u679C\u6211\u4E0D\u80FD\u8FD8\u6B3E\u65F6\uFF0C\u53EF\u4EE5\u4ECE\u4ED6\u7684\u8D26\u6237\u6263\u94B1\uFF0C\u90A3\u94F6\u884C\u5C31\u8BA4\u4E3A\u6CA1\u6709\u4EC0\u4E48\u98CE\u9669\u4E86\u3002\u5185\u5B58\u7684\u5206\u914D\u62C5\u4FDD\u4E5F\u4E00\u6837\uFF0C\u5982\u679C\u53E6\u5916\u4E00\u5757 Survivor \u7A7A\u95F4\u6CA1\u6709\u8DB3\u591F\u7A7A\u95F4\u5B58\u653E\u4E0A\u4E00\u6B21\u65B0\u751F\u4EE3\u6536\u96C6\u4E0B\u6765\u7684\u5B58\u6D3B\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u4FBF\u5C06\u901A\u8FC7\u5206\u914D\u62C5\u4FDD\u673A\u5236\u76F4\u63A5\u8FDB\u5165\u8001\u5E74\u4EE3\uFF0C\u8FD9\u5BF9\u865A\u62DF\u673A\u6765\u8BF4\u5C31\u662F\u5B89\u5168\u7684\u3002\u5173\u4E8E\u5BF9\u65B0\u751F\u4EE3\u8FDB\u884C\u5206\u914D\u62C5\u4FDD\u7684\u5185\u5BB9\uFF0C\u5728\u7A0D\u540E\u7684 3.8.5 \u8282\u4ECB\u7ECD\u5783\u573E\u6536\u96C6\u5668\u6267\u884C\u89C4\u5219\u65F6\u8FD8\u4F1A\u518D\u8FDB\u884C\u8BB2\u89E3\u3002</p><h3 id="_3-3-4-\u6807\u8BB0-\u6574\u7406\u7B97\u6CD5" tabindex="-1"><a class="header-anchor" href="#_3-3-4-\u6807\u8BB0-\u6574\u7406\u7B97\u6CD5" aria-hidden="true">#</a> 3.3.4 \u6807\u8BB0-\u6574\u7406\u7B97\u6CD5</h3><p>\u6807\u8BB0-\u590D\u5236\u7B97\u6CD5\u5728\u5BF9\u8C61\u5B58\u6D3B\u7387\u8F83\u9AD8\u65F6\u5C31\u8981\u8FDB\u884C\u8F83\u591A\u7684\u590D\u5236\u64CD\u4F5C\uFF0C\u6548\u7387\u5C06\u4F1A\u964D\u4F4E\u3002\u66F4\u5173\u952E\u7684\u662F\uFF0C\u5982\u679C\u4E0D\u60F3\u6D6A\u8D39 50% \u7684\u7A7A\u95F4\uFF0C\u5C31\u9700\u8981\u6709\u989D\u5916\u7684\u7A7A\u95F4\u8FDB\u884C\u5206\u914D\u62C5\u4FDD\uFF0C\u4EE5\u5E94\u5BF9\u88AB\u4F7F\u7528\u7684\u5185\u5B58\u4E2D\u6240\u6709\u5BF9\u8C61\u90FD 100% \u5B58\u6D3B\u7684\u6781\u7AEF\u60C5\u51B5\uFF0C\u6240\u4EE5\u5728\u8001\u5E74\u4EE3\u4E00\u822C\u4E0D\u80FD\u76F4\u63A5\u9009\u7528\u8FD9\u79CD\u7B97\u6CD5\u3002</p><p>\u9488\u5BF9\u8001\u5E74\u4EE3\u5BF9\u8C61\u7684\u5B58\u4EA1\u7279\u5F81\uFF0C1974 \u5E74 Edward Lueders \u63D0\u51FA\u4E86\u53E6\u5916\u4E00\u79CD\u6709\u9488\u5BF9\u6027\u7684 \u201C\u6807\u8BB0-\u6574\u7406\u201D\uFF08Mark-Compact\uFF09\u7B97\u6CD5\uFF0C\u5176\u4E2D\u7684\u6807\u8BB0\u8FC7\u7A0B\u4ECD\u7136\u4E0E \u201C\u6807\u8BB0-\u6E05\u9664\u201D \u7B97\u6CD5\u4E00\u6837\uFF0C\u4F46\u540E\u7EED\u6B65\u9AA4\u4E0D\u662F\u76F4\u63A5\u5BF9\u53EF\u56DE\u6536\u5BF9\u8C61\u8FDB\u884C\u6E05\u7406\uFF0C\u800C\u662F\u8BA9\u6240\u6709\u5B58\u6D3B\u7684\u5BF9\u8C61\u90FD\u5411\u5185\u5B58\u7A7A\u95F4\u4E00\u7AEF\u79FB\u52A8\uFF0C\u7136\u540E\u76F4\u63A5\u6E05\u7406\u6389\u8FB9\u754C\u4EE5\u5916\u7684\u5185\u5B58\uFF0C\u201C\u6807\u8BB0-\u6574\u7406\u201D \u7B97\u6CD5\u7684\u793A\u610F\u56FE\u5982\u56FE3-4 \u6240\u793A\u3002</p><p><img src="'+u+`" alt="\u56FE3-4" loading="lazy"></p><p>\u56FE3-4 \u201C\u6807\u8BB0-\u6574\u7406\u201D \u7B97\u6CD5\u793A\u610F\u56FE</p><p>\u6807\u8BB0-\u6E05\u9664\u7B97\u6CD5\u4E0E\u6807\u8BB0-\u6574\u7406\u7B97\u6CD5\u7684\u672C\u8D28\u5DEE\u5F02\u5728\u4E8E\u524D\u8005\u662F\u4E00\u79CD\u975E\u79FB\u52A8\u5F0F\u7684\u56DE\u6536\u7B97\u6CD5\uFF0C\u800C\u540E\u8005\u662F\u79FB\u52A8\u5F0F\u7684\u3002\u662F\u5426\u79FB\u52A8\u56DE\u6536\u540E\u7684\u5B58\u6D3B\u5BF9\u8C61\u662F\u4E00\u9879\u4F18\u7F3A\u70B9\u5E76\u5B58\u7684\u98CE\u9669\u51B3\u7B56\uFF1A</p><p>\u5982\u679C\u79FB\u52A8\u5B58\u6D3B\u5BF9\u8C61\uFF0C\u5C24\u5176\u662F\u5728\u8001\u5E74\u4EE3\u8FD9\u79CD\u6BCF\u6B21\u56DE\u6536\u90FD\u6709\u5927\u91CF\u5BF9\u8C61\u5B58\u6D3B\u533A\u57DF\uFF0C\u79FB\u52A8\u5B58\u6D3B\u5BF9\u8C61\u5E76\u66F4\u65B0\u6240\u6709\u5F15\u7528\u8FD9\u4E9B\u5BF9\u8C61\u7684\u5730\u65B9\u5C06\u4F1A\u662F\u4E00\u79CD\u6781\u4E3A\u8D1F\u91CD\u7684\u64CD\u4F5C\uFF0C\u800C\u4E14\u8FD9\u79CD\u5BF9\u8C61\u79FB\u52A8\u64CD\u4F5C\u5FC5\u987B\u5168\u7A0B\u6682\u505C\u7528\u6237\u5E94\u7528\u7A0B\u5E8F\u624D\u80FD\u8FDB\u884C<sup class="footnote-ref"><a href="#footnote8">[8]</a><a class="footnote-anchor" id="footnote-ref8"></a></sup>\uFF0C\u8FD9\u5C31\u66F4\u52A0\u8BA9\u4F7F\u7528\u8005\u4E0D\u5F97\u4E0D\u5C0F\u5FC3\u7FFC\u7FFC\u5730\u6743\u8861\u5176\u5F0A\u7AEF\u4E86\uFF0C\u50CF\u8FD9\u6837\u7684\u505C\u987F\u88AB\u6700\u521D\u7684\u865A\u62DF\u673A\u8BBE\u8BA1\u8005\u5F62\u8C61\u5730\u63CF\u8FF0\u4E3A &quot;Stop The World&quot;<sup class="footnote-ref"><a href="#footnote9">[9]</a><a class="footnote-anchor" id="footnote-ref9"></a></sup>\u3002</p><p>\u4F46\u5982\u679C\u8DDF\u6807\u8BB0-\u6E05\u9664\u7B97\u6CD5\u90A3\u6837\u5B8C\u5168\u4E0D\u8003\u8651\u79FB\u52A8\u548C\u6574\u7406\u5B58\u6D3B\u5BF9\u8C61\u7684\u8BDD\uFF0C\u5F25\u6563\u4E8E\u5806\u4E2D\u7684\u5B58\u6D3B\u5BF9\u8C61\u5BFC\u81F4\u7684\u7A7A\u95F4\u788E\u7247\u5316\u95EE\u9898\u5C31\u53EA\u80FD\u4F9D\u8D56\u66F4\u4E3A\u590D\u6742\u7684\u5185\u5B58\u5206\u914D\u5668\u548C\u5185\u5B58\u8BBF\u95EE\u5668\u6765\u89E3\u51B3\u3002\u8B6C\u5982\u901A\u8FC7 \u201C\u5206\u533A\u7A7A\u95F2\u5206\u914D\u94FE\u8868\u201D \u6765\u89E3\u51B3\u5185\u5B58\u5206\u914D\u95EE\u9898\uFF08\u8BA1\u7B97\u673A\u786C\u76D8\u5B58\u50A8\u5927\u6587\u4EF6\u5C31\u4E0D\u8981\u6C42\u7269\u7406\u8FDE\u7EED\u7684\u78C1\u76D8\u7A7A\u95F4\uFF0C\u80FD\u591F\u5728\u788E\u7247\u5316\u7684\u786C\u76D8\u4E0A\u5B58\u50A8\u548C\u8BBF\u95EE\u5C31\u662F\u901A\u8FC7\u786C\u76D8\u5206\u533A\u8868\u5B9E\u73B0\u7684\uFF09\u3002\u5185\u5B58\u7684\u8BBF\u95EE\u662F\u7528\u6237\u7A0B\u5E8F\u6700\u9891\u7E41\u7684\u64CD\u4F5C\uFF0C\u751A\u81F3\u90FD\u6CA1\u6709\u4E4B\u4E00\uFF0C\u5047\u5982\u5728\u8FD9\u4E2A\u73AF\u8282\u4E0A\u589E\u52A0\u4E86\u989D\u5916\u7684\u8D1F\u62C5\uFF0C\u52BF\u5FC5\u4F1A\u76F4\u63A5\u5F71\u54CD\u5E94\u7528\u7A0B\u5E8F\u7684\u541E\u5410\u91CF\u3002</p><p>\u57FA\u4E8E\u4EE5\u4E0A\u4E24\u70B9\uFF0C\u662F\u5426\u79FB\u52A8\u5BF9\u8C61\u90FD\u5B58\u5728\u5F0A\u7AEF\uFF0C\u79FB\u52A8\u5219\u5185\u5B58\u56DE\u6536\u65F6\u4F1A\u66F4\u590D\u6742\uFF0C\u4E0D\u79FB\u52A8\u5219\u5185\u5B58\u5206\u914D\u65F6\u4F1A\u66F4\u590D\u6742\u3002\u4ECE\u5783\u573E\u6536\u96C6\u7684\u505C\u987F\u65F6\u95F4\u6765\u770B\uFF0C\u4E0D\u79FB\u52A8\u5BF9\u8C61\u505C\u987F\u65F6\u95F4\u4F1A\u66F4\u77ED\uFF0C\u751A\u81F3\u53EF\u4EE5\u4E0D\u9700\u8981\u505C\u987F\uFF0C\u4F46\u662F\u4ECE\u6574\u4E2A\u7A0B\u5E8F\u7684\u541E\u5410\u91CF\u6765\u770B\uFF0C\u79FB\u52A8\u5BF9\u8C61\u4F1A\u66F4\u5212\u7B97\u3002\u6B64\u8BED\u5883\u4E2D\uFF0C\u541E\u5410\u91CF\u7684\u5B9E\u8D28\u662F\u8D4B\u503C\u5668\uFF08Mutator\uFF0C\u53EF\u4EE5\u7406\u89E3\u4E3A\u4F7F\u7528\u5783\u573E\u6536\u96C6\u7684\u7528\u6237\u7A0B\u5E8F\uFF0C\u672C\u4E66\u4E3A\u4FBF\u4E8E\u7406\u89E3\uFF0C\u591A\u6570\u5730\u65B9\u7528 \u201C\u7528\u6237\u7A0B\u5E8F\u201D \u6216 \u201C\u7528\u6237\u7EBF\u7A0B\u201D \u4EE3\u66FF\uFF09\u4E0E\u6536\u96C6\u5668\u7684\u6548\u7387\u603B\u548C\u3002\u5373\u4F7F\u4E0D\u79FB\u52A8\u5BF9\u8C61\u4F1A\u4F7F\u5F97\u6536\u96C6\u5668\u7684\u6548\u7387\u63D0\u5347\u4E00\u4E9B\uFF0C\u4F46\u56E0\u5185\u5B58\u5206\u914D\u548C\u8BBF\u95EE\u76F8\u6BD4\u5783\u573E\u6536\u96C6\u9891\u7387\u8981\u9AD8\u5F97\u591A\uFF0C\u8FD9\u90E8\u5206\u7684\u8017\u65F6\u589E\u52A0\uFF0C\u603B\u541E\u5410\u91CF\u4ECD\u7136\u662F\u4E0B\u964D\u7684\u3002HotSpot \u865A\u62DF\u673A\u91CC\u9762\u5173\u6CE8\u541E\u5410\u91CF\u7684 Parallel Scavenge \u6536\u96C6\u5668\u662F\u57FA\u4E8E\u6807\u8BB0-\u6574\u7406\u7B97\u6CD5\u7684\uFF0C\u800C\u5173\u6CE8\u5EF6\u8FDF\u7684 CMS \u6536\u96C6\u5668\u5219\u662F\u57FA\u4E8E\u6807\u8BB0-\u6E05\u9664\u7B97\u6CD5\u7684\uFF0C\u8FD9\u4E5F\u4ECE\u4FA7\u9762\u5370\u8BC1\u8FD9\u70B9\u3002</p><p>\u53E6\u5916\uFF0C\u8FD8\u6709\u4E00\u79CD \u201C\u548C\u7A00\u6CE5\u5F0F\u201D \u89E3\u51B3\u65B9\u6848\u53EF\u4EE5\u4E0D\u5728\u5185\u5B58\u5206\u914D\u548C\u8BBF\u95EE\u4E0A\u589E\u52A0\u592A\u5927\u989D\u5916\u8D1F\u62C5\uFF0C\u505A\u6CD5\u662F\u8BA9\u865A\u62DF\u673A\u5E73\u65F6\u591A\u6570\u65F6\u95F4\u90FD\u91C7\u7528\u6807\u8BB0-\u6E05\u9664\u7B97\u6CD5\uFF0C\u6682\u65F6\u5BB9\u5FCD\u5185\u5B58\u788E\u7247\u7684\u5B58\u5728\uFF0C\u76F4\u5230\u5185\u5B58\u7A7A\u95F4\u7684\u788E\u7247\u5316\u7A0B\u5EA6\u5DF2\u7ECF\u5927\u5230\u5F71\u54CD\u5BF9\u8C61\u5206\u914D\u65F6\uFF0C\u518D\u91C7\u7528\u6807\u8BB0-\u6574\u7406\u7B97\u6CD5\u6536\u96C6\u4E00\u6B21\uFF0C\u4EE5\u83B7\u5F97\u89C4\u6574\u7684\u5185\u5B58\u7A7A\u95F4\u3002\u524D\u9762\u63D0\u5230\u7684\u57FA\u4E8E\u6807\u8BB0-\u6E05\u9664\u7B97\u6CD5\u7684 CMS \u6536\u96C6\u5668\u9762\u4E34\u7A7A\u95F4\u788E\u7247\u8FC7\u591A\u65F6\u91C7\u7528\u7684\u5C31\u662F\u8FD9\u79CD\u5904\u7406\u529E\u6CD5\u3002</p><h2 id="_3-4-hotspot-\u7684\u7B97\u6CD5\u7EC6\u8282\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_3-4-hotspot-\u7684\u7B97\u6CD5\u7EC6\u8282\u5B9E\u73B0" aria-hidden="true">#</a> 3.4 HotSpot \u7684\u7B97\u6CD5\u7EC6\u8282\u5B9E\u73B0</h2><p>3.2\u30013.3 \u8282\u4ECE\u7406\u8BBA\u539F\u7406\u4E0A\u4ECB\u7ECD\u4E86\u5E38\u89C1\u7684\u5BF9\u8C61\u5B58\u6D3B\u5224\u5B9A\u7B97\u6CD5\u548C\u5783\u573E\u6536\u96C6\u7B97\u6CD5\uFF0CJava \u865A\u62DF\u673A\u5B9E\u73B0\u8FD9\u4E9B\u7B97\u6CD5\u65F6\uFF0C\u5FC5\u987B\u5BF9\u7B97\u6CD5\u7684\u6267\u884C\u6548\u7387\u6709\u4E25\u683C\u7684\u8003\u91CF\uFF0C\u624D\u80FD\u4FDD\u8BC1\u865A\u62DF\u673A\u9AD8\u6548\u8FD0\u884C\u3002\u672C\u7AE0\u8BBE\u7F6E\u8FD9\u90E8\u5206\u5185\u5BB9\u4E3B\u8981\u662F\u4E3A\u4E86\u7A0D\u540E\u4ECB\u7ECD\u5404\u6B3E\u5783\u573E\u6536\u96C6\u5668\u65F6\u505A\u524D\u7F6E\u77E5\u8BC6\u94FA\u57AB\uFF0C\u5982\u679C\u8BFB\u8005\u5BF9\u8FD9\u90E8\u5206\u5185\u5BB9\u611F\u5230\u67AF\u71E5\u6216\u8005\u7591\u60D1\uFF0C\u4E0D\u59A8\u5148\u8DF3\u8FC7\u53BB\uFF0C\u7B49\u540E\u7EED\u9047\u5230\u8981\u4F7F\u7528\u5B83\u4EEC\u7684\u5B9E\u9645\u573A\u666F\u3001\u5B9E\u9645\u95EE\u9898\u65F6\u518D\u7ED3\u5408\u95EE\u9898\uFF0C\u91CD\u65B0\u7FFB\u9605\u548C\u7406\u89E3\u3002</p><h3 id="_3-4-1-\u6839\u8282\u70B9\u679A\u4E3E" tabindex="-1"><a class="header-anchor" href="#_3-4-1-\u6839\u8282\u70B9\u679A\u4E3E" aria-hidden="true">#</a> 3.4.1 \u6839\u8282\u70B9\u679A\u4E3E</h3><p>\u6211\u4EEC\u4EE5\u53EF\u8FBE\u6027\u5206\u6790\u7B97\u6CD5\u4E2D\u4ECE GC Roots \u96C6\u5408\u627E\u5F15\u7528\u94FE\u8FD9\u4E2A\u64CD\u4F5C\u4F5C\u4E3A\u4ECB\u7ECD\u865A\u62DF\u673A\u9AD8\u6548\u5B9E\u73B0\u7684\u7B2C\u4E00\u4E2A\u4F8B\u5B50\u3002\u56FA\u5B9A\u53EF\u4F5C\u4E3A GC Roots \u7684\u8282\u70B9\u4E3B\u8981\u5728\u5168\u5C40\u6027\u7684\u5F15\u7528\uFF08\u4F8B\u5982\u5E38\u91CF\u6216\u7C7B\u9759\u6001\u5C5E\u6027\uFF09\u4E0E\u6267\u884C\u4E0A\u4E0B\u6587\uFF08\u4F8B\u5982\u6808\u5E27\u4E2D\u7684\u672C\u5730\u53D8\u91CF\u8868\uFF09\u4E2D\uFF0C\u5C3D\u7BA1\u76EE\u6807\u660E\u786E\uFF0C\u4F46\u67E5\u627E\u8FC7\u7A0B\u8981\u505A\u5230\u9AD8\u6548\u5E76\u975E\u4E00\u4EF6\u5BB9\u6613\u7684\u4E8B\u60C5\uFF0C\u73B0\u5728 Java \u5E94\u7528\u8D8A\u505A\u8D8A\u5E9E\u5927\uFF0C\u5149\u662F\u65B9\u6CD5\u533A\u7684\u5927\u5C0F\u5C31\u5E38\u6709\u6570\u767E\u4E0A\u5343\u5146\uFF0C\u91CC\u9762\u7684\u7C7B\u3001\u5E38\u91CF\u7B49\u66F4\u662F\u6052\u6CB3\u6C99\u6570\uFF0C\u82E5\u8981\u9010\u4E2A\u68C0\u67E5\u4EE5\u8FD9\u91CC\u4E3A\u8D77\u6E90\u7684\u5F15\u7528\u80AF\u5B9A\u5F97\u6D88\u8017\u4E0D\u5C11\u65F6\u95F4\u3002</p><p>\u8FC4\u4ECA\u4E3A\u6B62\uFF0C\u6240\u6709\u6536\u96C6\u5668\u5728\u6839\u8282\u70B9\u679A\u4E3E\u8FD9\u4E00\u6B65\u9AA4\u65F6\u90FD\u662F\u5FC5\u987B\u6682\u505C\u7528\u6237\u7EBF\u7A0B\u7684\uFF0C\u56E0\u6B64\u6BEB\u65E0\u7591\u95EE\u6839\u8282\u70B9\u679A\u4E3E\u4E0E\u4E4B\u524D\u63D0\u53CA\u7684\u6574\u7406\u5185\u5B58\u788E\u7247\u4E00\u6837\u4F1A\u9762\u4E34\u76F8\u4F3C\u7684 &quot;Stop The World&quot; \u7684\u56F0\u6270\u3002\u73B0\u5728\u53EF\u8FBE\u6027\u5206\u6790\u7B97\u6CD5\u8017\u65F6\u6700\u957F\u7684\u67E5\u627E\u5F15\u7528\u94FE\u7684\u8FC7\u7A0B\u5DF2\u7ECF\u53EF\u4EE5\u505A\u5230\u4E0E\u7528\u6237\u7EBF\u7A0B\u4E00\u8D77\u5E76\u53D1\uFF08\u5177\u4F53\u89C1 3.4.6 \u8282\uFF09\uFF0C\u4F46\u6839\u8282\u70B9\u679A\u4E3E\u59CB\u7EC8\u8FD8\u662F\u5FC5\u987B\u5728\u4E00\u4E2A\u80FD\u4FDD\u969C\u4E00\u81F4\u6027\u7684\u5FEB\u7167\u4E2D\u624D\u5F97\u4EE5\u8FDB\u884C\u2014\u2014\u8FD9\u91CC \u201C\u4E00\u81F4\u6027\u201D \u7684\u610F\u601D\u662F\u6574\u4E2A\u679A\u4E3E\u671F\u95F4\u6267\u884C\u5B50\u7CFB\u7EDF\u770B\u8D77\u6765\u5C31\u50CF\u88AB\u51BB\u7ED3\u5728\u67D0\u4E2A\u65F6\u95F4\u70B9\u4E0A\uFF0C\u4E0D\u4F1A\u51FA\u73B0\u5206\u6790\u8FC7\u7A0B\u4E2D\uFF0C\u6839\u8282\u70B9\u96C6\u5408\u7684\u5BF9\u8C61\u5F15\u7528\u5173\u7CFB\u8FD8\u5728\u4E0D\u65AD\u53D8\u5316\u7684\u60C5\u51B5\uFF0C\u82E5\u8FD9\u70B9\u4E0D\u80FD\u6EE1\u8DB3\u7684\u8BDD\uFF0C\u5206\u6790\u7ED3\u679C\u51C6\u786E\u6027\u4E5F\u5C31\u65E0\u6CD5\u4FDD\u8BC1\u3002\u8FD9\u662F\u5BFC\u81F4\u5783\u573E\u6536\u96C6\u8FC7\u7A0B\u5FC5\u987B\u505C\u987F\u6240\u6709\u7528\u6237\u7EBF\u7A0B\u7684\u5176\u4E2D\u4E00\u4E2A\u91CD\u8981\u539F\u56E0\uFF0C\u5373\u4F7F\u662F\u53F7\u79F0\u505C\u987F\u65F6\u95F4\u53EF\u63A7\uFF0C\u6216\u8005\uFF08\u51E0\u4E4E\uFF09\u4E0D\u4F1A\u53D1\u751F\u505C\u987F\u7684 CMS\u3001G1\u3001ZGC \u7B49\u6536\u96C6\u5668\uFF0C\u679A\u4E3E\u6839\u8282\u70B9\u65F6\u4E5F\u662F\u5FC5\u987B\u8981\u505C\u987F\u7684\u3002</p><p>\u7531\u4E8E\u76EE\u524D\u4E3B\u6D41 Java \u865A\u62DF\u673A\u4F7F\u7528\u7684\u90FD\u662F\u51C6\u786E\u5F0F\u5783\u573E\u6536\u96C6\uFF08\u8FD9\u4E2A\u6982\u5FF5\u5728\u7B2C 1 \u7AE0\u4ECB\u7ECD Exact VM \u76F8\u5BF9\u4E8E Classic VM \u7684\u6539\u8FDB\u65F6\u4ECB\u7ECD\u8FC7\uFF09\uFF0C\u6240\u4EE5\u5F53\u7528\u6237\u7EBF\u7A0B\u505C\u987F\u4E0B\u6765\u4E4B\u540E\uFF0C\u5176\u5B9E\u5E76\u4E0D\u9700\u8981\u4E00\u4E2A\u4E0D\u6F0F\u5730\u68C0\u67E5\u5B8C\u6240\u6709\u6267\u884C\u4E0A\u4E0B\u6587\u548C\u5168\u5C40\u7684\u5F15\u7528\u4F4D\u7F6E\uFF0C\u865A\u62DF\u673A\u5E94\u5F53\u662F\u6709\u529E\u6CD5\u76F4\u63A5\u5F97\u5230\u54EA\u4E9B\u5730\u65B9\u5B58\u653E\u7740\u5BF9\u8C61\u5F15\u7528\u7684\u3002\u5728 HotSpot \u7684\u89E3\u51B3\u65B9\u6848\u91CC\uFF0C\u662F\u4F7F\u7528\u4E00\u7EC4\u79F0\u4E3A OopMap \u7684\u6570\u636E\u7ED3\u6784\u6765\u8FBE\u5230\u8FD9\u4E2A\u76EE\u7684\u3002\u4E00\u65E6\u7C7B\u52A0\u8F7D\u52A8\u4F5C\u5B8C\u6210\u7684\u65F6\u5019\uFF0CHotSpot \u5C31\u4F1A\u628A\u5BF9\u8C61\u5185\u4EC0\u4E48\u504F\u79FB\u91CF\u4E0A\u662F\u4EC0\u4E48\u7C7B\u578B\u7684\u6570\u636E\u8BA1\u7B97\u51FA\u6765\uFF0C\u5728\u5373\u65F6\u7F16\u8BD1\uFF08\u89C1\u7B2C 11 \u7AE0\uFF09\u8FC7\u7A0B\u4E2D\uFF0C\u4E5F\u4F1A\u5728\u7279\u5B9A\u7684\u4F4D\u7F6E\u8BB0\u5F55\u4E0B\u6808\u91CC\u548C\u5BC4\u5B58\u5668\u91CC\u54EA\u4E9B\u4F4D\u7F6E\u662F\u5F15\u7528\u3002\u8FD9\u6837\u6536\u96C6\u5668\u5728\u626B\u63CF\u65F6\u5C31\u53EF\u4EE5\u76F4\u63A5\u5F97\u77E5\u8FD9\u4E9B\u4FE1\u606F\u4E86\uFF0C\u5E76\u4E0D\u9700\u8981\u771F\u6B63\u4E00\u4E2A\u4E0D\u6F0F\u5730\u4ECE\u65B9\u6CD5\u533A\u7B49 GC Roots \u5F00\u59CB\u67E5\u627E\u3002</p><p>\u4E0B\u9762\u4EE3\u7801\u6E05\u53553-3 \u662F HotSpot \u865A\u62DF\u673A\u5BA2\u6237\u7AEF\u6A21\u5F0F\u4E0B\u751F\u6210\u7684\u4E00\u6BB5 String::hashCode() \u65B9\u6CD5\u7684\u672C\u5730\u4EE3\u7801\uFF0C\u53EF\u4EE5\u770B\u5230\u5728 0x026eb7a9 \u5904\u7684 call \u6307\u4EE4\u6709 OopMap \u8BB0\u5F55\uFF0C\u5B83\u6307\u660E\u4E86 EBX \u5BC4\u5B58\u5668\u548C\u6808\u4E2D\u504F\u79FB\u91CF\u4E3A 16 \u7684\u5185\u5B58\u533A\u57DF\u4E2D\u5404\u6709\u4E00\u4E2A\u666E\u901A\u5BF9\u8C61\u6307\u9488\uFF08Ordinary Object Pointer\uFF0COOP\uFF09\u7684\u5F15\u7528\uFF0C\u6709\u6548\u8303\u56F4\u4E3A\u4ECE call \u6307\u4EE4\u5F00\u59CB\u76F4\u5230 0x026eb730\uFF08\u6307\u4EE4\u6D41\u7684\u8D77\u59CB\u4F4D\u7F6E\uFF09+ 142\uFF08OopMap \u8BB0\u5F55\u7684\u504F\u79FB\u91CF\uFF09= 0x026eb7be\uFF0C\u5373 hlt \u6307\u4EE4\u4E3A\u6B62\u3002</p><p>\u4EE3\u7801\u6E05\u53553-3 String.hashCode() \u65B9\u6CD5\u7F16\u8BD1\u540E\u7684\u672C\u5730\u4EE3\u7801</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[Verified Entry Point]
0x026eb730: mov    %eax,-0x8000(%esp)
......
;; ImplicitNullCheckStub slow case
0x026eb7a9: call   0x026e83e0       ; OopMap{ebx=Oop [16]=Oop off=142}
                                    ; *caload
                                    ; - java.lang.String::hashCode@48 (line 1489)
                                    ;   {runtime_call}
    0x026eb7ae: push   $0x83c5c18   ;   {external_word}
    0x026eb7b3: call   0x026eb7b8
    0x026eb7b8: pusha
    0x026eb7b9: call   0x0822bec0   ;   {runtime_call}
    0x026eb7be: hlt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-4-2-\u5B89\u5168\u70B9" tabindex="-1"><a class="header-anchor" href="#_3-4-2-\u5B89\u5168\u70B9" aria-hidden="true">#</a> 3.4.2 \u5B89\u5168\u70B9</h3><p>\u5728 OopMap \u7684\u534F\u52A9\u4E0B\uFF0CHotSpot \u53EF\u4EE5\u5FEB\u901F\u51C6\u786E\u5730\u5B8C\u6210 GC Roots \u679A\u4E3E\uFF0C\u4F46\u4E00\u4E2A\u5F88\u73B0\u5B9E\u7684\u95EE\u9898\u968F\u4E4B\u800C\u6765\uFF1A\u53EF\u80FD\u5BFC\u81F4\u5F15\u7528\u5173\u7CFB\u53D8\u5316\uFF0C\u6216\u8005\u8BF4\u5BFC\u81F4 OopMap \u5185\u5BB9\u53D8\u5316\u7684\u6307\u4EE4\u975E\u5E38\u591A\uFF0C\u5982\u679C\u4E3A\u6BCF\u4E00\u6761\u6307\u4EE4\u90FD\u751F\u6210\u5BF9\u5E94\u7684 OopMap\uFF0C\u90A3\u5C06\u4F1A\u9700\u8981\u5927\u91CF\u7684\u989D\u5916\u5B58\u50A8\u7A7A\u95F4\uFF0C\u8FD9\u6837\u5783\u573E\u6536\u96C6\u4F34\u968F\u800C\u6765\u7684\u7A7A\u95F4\u6210\u672C\u5C31\u4F1A\u53D8\u5F97\u65E0\u6CD5\u5FCD\u53D7\u7684\u9AD8\u6602\u3002</p><p>\u5B9E\u9645\u4E0A HotSpot \u4E5F\u7684\u786E\u6CA1\u6709\u4E3A\u6BCF\u6761\u6307\u4EE4\u90FD\u751F\u6210 OopMap\uFF0C\u524D\u9762\u5DF2\u7ECF\u63D0\u5230\uFF0C\u53EA\u662F\u5728 \u201C\u7279\u5B9A\u7684\u4F4D\u7F6E\u201D \u8BB0\u5F55\u4E86\u8FD9\u4E9B\u4FE1\u606F\uFF0C\u8FD9\u4E9B\u4F4D\u7F6E\u88AB\u79F0\u4E3A\u5B89\u5168\u70B9\uFF08Safepoint\uFF09\u3002\u6709\u4E86\u5B89\u5168\u70B9\u7684\u8BBE\u5B9A\uFF0C\u4E5F\u5C31\u51B3\u5B9A\u4E86\u7528\u6237\u7A0B\u5E8F\u6267\u884C\u65F6\u5E76\u975E\u5728\u4EE3\u7801\u6307\u4EE4\u6D41\u7684\u4EFB\u610F\u4F4D\u7F6E\u90FD\u80FD\u591F\u505C\u987F\u4E0B\u6765\u5F00\u59CB\u5783\u573E\u6536\u96C6\uFF0C\u800C\u662F\u5F3A\u5236\u8981\u6C42\u5FC5\u987B\u6267\u884C\u5230\u8FBE\u5B89\u5168\u70B9\u540E\u624D\u80FD\u591F\u6682\u505C\u3002\u56E0\u6B64\uFF0C\u5B89\u5168\u70B9\u7684\u9009\u5B9A\u65E2\u4E0D\u80FD\u592A\u5C11\u4EE5\u81F3\u4E8E\u8BA9\u6536\u96C6\u5668\u7B49\u5F85\u65F6\u95F4\u8FC7\u957F\uFF0C\u4E5F\u4E0D\u80FD\u592A\u8FC7\u9891\u7E41\u4EE5\u81F3\u4E8E\u8FC7\u5206\u589E\u5927\u8FD0\u884C\u65F6\u7684\u5185\u5B58\u8D1F\u8377\u3002\u5B89\u5168\u70B9\u4F4D\u7F6E\u7684\u9009\u53D6\u57FA\u672C\u4E0A\u662F\u4EE5 \u201C\u662F\u5426\u5177\u6709\u8BA9\u7A0B\u5E8F\u957F\u65F6\u95F4\u6267\u884C\u7684\u7279\u5F81\u201D \u4E3A\u6807\u51C6\u8FDB\u884C\u9009\u5B9A\u7684\uFF0C\u56E0\u4E3A\u6BCF\u6761\u6307\u4EE4\u6267\u884C\u7684\u65F6\u95F4\u90FD\u975E\u5E38\u77ED\u6682\uFF0C\u7A0B\u5E8F\u4E0D\u592A\u53EF\u80FD\u56E0\u4E3A\u6307\u4EE4\u6D41\u957F\u5EA6\u592A\u957F\u8FD9\u6837\u7684\u539F\u56E0\u800C\u957F\u65F6\u95F4\u6267\u884C\uFF0C\u201C\u957F\u65F6\u95F4\u6267\u884C\u201D \u7684\u6700\u660E\u663E\u7279\u5F81\u5C31\u662F\u6307\u4EE4\u5E8F\u5217\u7684\u590D\u7528\uFF0C\u4F8B\u5982\u65B9\u6CD5\u8C03\u7528\u3001\u5FAA\u73AF\u8DF3\u8F6C\u3001\u5F02\u5E38\u8DF3\u8F6C\u7B49\u90FD\u5C5E\u4E8E\u6307\u4EE4\u5E8F\u5217\u590D\u7528\uFF0C\u6240\u4EE5\u53EA\u6709\u5177\u6709\u8FD9\u4E9B\u529F\u80FD\u7684\u6307\u4EE4\u624D\u4F1A\u4EA7\u751F\u5B89\u5168\u70B9\u3002</p><p>\u5BF9\u4E8E\u5B89\u5168\u70B9\uFF0C\u53E6\u5916\u4E00\u4E2A\u9700\u8981\u8003\u8651\u7684\u95EE\u9898\u662F\uFF0C\u5982\u4F55\u5728\u5783\u573E\u6536\u96C6\u53D1\u751F\u65F6\u8BA9\u6240\u6709\u7EBF\u7A0B\uFF08\u8FD9\u91CC\u5176\u5B9E\u4E0D\u5305\u62EC\u6267\u884C JNI \u8C03\u7528\u7684\u7EBF\u7A0B\uFF09\u90FD\u8DD1\u5230\u6700\u8FD1\u7684\u5B89\u5168\u70B9\uFF0C\u7136\u540E\u505C\u987F\u4E0B\u6765\u3002\u8FD9\u91CC\u6709\u4E24\u79CD\u65B9\u6848\u53EF\u4F9B\u9009\u62E9\uFF1A\u62A2\u5148\u5F0F\u4E2D\u65AD\uFF08Preemptive Suspension\uFF09\u548C\u4E3B\u52A8\u5F0F\u4E2D\u65AD\uFF08Voluntary Suspension\uFF09\uFF0C\u62A2\u5148\u5F0F\u4E2D\u65AD\u4E0D\u9700\u8981\u7EBF\u7A0B\u7684\u6267\u884C\u4EE3\u7801\u4E3B\u52A8\u53BB\u914D\u5408\uFF0C\u5728\u5783\u573E\u6536\u96C6\u53D1\u751F\u65F6\uFF0C\u7CFB\u7EDF\u9996\u5148\u628A\u6240\u6709\u7528\u6237\u7EBF\u7A0B\u5168\u90E8\u4E2D\u65AD\uFF0C\u5982\u679C\u53D1\u73B0\u6709\u7528\u6237\u7EBF\u7A0B\u4E2D\u65AD\u7684\u5730\u65B9\u4E0D\u5728\u5B89\u5168\u70B9\u4E0A\uFF0C\u5C31\u6062\u590D\u8FD9\u6761\u7EBF\u7A0B\u6267\u884C\uFF0C\u8BA9\u5B83\u4E00\u4F1A\u518D\u91CD\u65B0\u4E2D\u65AD\uFF0C\u76F4\u5230\u8DD1\u5230\u5B89\u5168\u70B9\u4E0A\u3002\u73B0\u5728\u51E0\u4E4E\u6CA1\u6709\u865A\u62DF\u673A\u5B9E\u73B0\u91C7\u7528\u62A2\u5148\u5F0F\u4E2D\u65AD\u6765\u6682\u505C\u7EBF\u7A0B\u54CD\u5E94 GC \u4E8B\u4EF6\u3002</p><p>\u800C\u4E3B\u52A8\u5F0F\u4E2D\u65AD\u7684\u601D\u60F3\u662F\u5F53\u5783\u573E\u6536\u96C6\u9700\u8981\u4E2D\u65AD\u7EBF\u7A0B\u7684\u65F6\u5019\uFF0C\u4E0D\u76F4\u63A5\u5BF9\u7EBF\u7A0B\u64CD\u4F5C\uFF0C\u4EC5\u4EC5\u7B80\u5355\u5730\u8BBE\u7F6E\u4E00\u4E2A\u6807\u5FD7\u4F4D\uFF0C\u5404\u4E2A\u7EBF\u7A0B\u6267\u884C\u8FC7\u7A0B\u65F6\u4F1A\u4E0D\u505C\u5730\u4E3B\u52A8\u53BB\u8F6E\u8BE2\u8FD9\u4E2A\u6807\u5FD7\uFF0C\u4E00\u65E6\u53D1\u73B0\u4E2D\u65AD\u6807\u5FD7\u4E3A\u771F\u65F6\u5C31\u81EA\u5DF1\u5728\u6700\u8FD1\u7684\u5B89\u5168\u70B9\u4E0A\u4E3B\u52A8\u4E2D\u65AD\u6302\u8D77\u3002\u8F6E\u8BE2\u6807\u5FD7\u7684\u5730\u65B9\u548C\u5B89\u5168\u70B9\u662F\u91CD\u5408\u7684\uFF0C\u53E6\u5916\u8FD8\u8981\u52A0\u4E0A\u6240\u6709\u521B\u5EFA\u5BF9\u8C61\u548C\u5176\u4ED6\u9700\u8981\u5728 Java \u5806\u4E0A\u5206\u914D\u5185\u5B58\u7684\u5730\u65B9\uFF0C\u8FD9\u662F\u4E3A\u4E86\u68C0\u67E5\u662F\u5426\u5373\u5C06\u8981\u53D1\u751F\u5783\u573E\u6536\u96C6\uFF0C\u907F\u514D\u6CA1\u6709\u8DB3\u591F\u5185\u5B58\u5206\u914D\u65B0\u5BF9\u8C61\u3002</p><p>\u7531\u4E8E\u8F6E\u8BE2\u64CD\u4F5C\u5728\u4EE3\u7801\u4E2D\u4F1A\u9891\u7E41\u51FA\u73B0\uFF0C\u8FD9\u8981\u6C42\u5B83\u5FC5\u987B\u8DB3\u591F\u9AD8\u6548\u3002HotSpot \u4F7F\u7528\u5185\u5B58\u4FDD\u62A4\u9677\u9631\u7684\u65B9\u5F0F\uFF0C\u628A\u8F6E\u8BE2\u64CD\u4F5C\u7CBE\u7B80\u81F3\u53EA\u6709\u4E00\u6761\u6C47\u7F16\u6307\u4EE4\u7684\u7A0B\u5EA6\u3002\u4E0B\u9762\u4EE3\u7801\u6E05\u53553-4 \u4E2D\u7684 test \u6307\u4EE4\u5C31\u662F HotSpot \u751F\u6210\u7684\u8F6E\u8BE2\u6307\u4EE4\uFF0C\u5F53\u9700\u8981\u6682\u505C\u7528\u6237\u7EBF\u7A0B\u65F6\uFF0C\u865A\u62DF\u673A\u628A 0x160100 \u7684\u5185\u5B58\u9875\u8BBE\u7F6E\u4E3A\u4E0D\u53EF\u8BFB\uFF0C\u90A3\u7EBF\u7A0B\u6267\u884C\u5230 test \u6307\u4EE4\u65F6\u5C31\u4F1A\u4EA7\u751F\u4E00\u4E2A\u81EA\u9677\u5F02\u5E38\u4FE1\u53F7\uFF0C\u7136\u540E\u5728\u9884\u5148\u6CE8\u518C\u7684\u5F02\u5E38\u5904\u7406\u5668\u4E2D\u6302\u8D77\u7EBF\u7A0B\u5B9E\u73B0\u7B49\u5F85\uFF0C\u8FD9\u6837\u4EC5\u901A\u8FC7\u4E00\u6761\u6C47\u7F16\u6307\u4EE4\u4FBF\u5B8C\u6210\u5B89\u5168\u70B9\u8F6E\u8BE2\u548C\u89E6\u53D1\u7EBF\u7A0B\u4E2D\u65AD\u4E86\u3002</p><p>\u4EE3\u7801\u6E05\u53553-4 \u8F6E\u8BE2\u6307\u4EE4</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>0x01b6d627: call   0x01b2b210          ; OopMap{[60]=Oop off=460}
                                       ; *invokeinterface size
                                       ; - Client1::main@113 (line 23)
                                       ;   {virtual_call}
    0x01b6d62c: nop                    ; OopMap{[60]=Oop off=461}
                                       ; *if_icmplt
                                       ; - Client1::main@118 (line 23)
    0x01b6d62d: test   %eax,0x160100   ;   {poll}
    0x01b6d633: mov    0x50(%esp),%esi
    0x01b6d637: cmp    %eax,%esi
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-4-3-\u5B89\u5168\u533A\u57DF" tabindex="-1"><a class="header-anchor" href="#_3-4-3-\u5B89\u5168\u533A\u57DF" aria-hidden="true">#</a> 3.4.3 \u5B89\u5168\u533A\u57DF</h3><p>\u4F7F\u7528\u5B89\u5168\u70B9\u7684\u8BBE\u8BA1\u4F3C\u4E4E\u5DF2\u7ECF\u5B8C\u7F8E\u89E3\u51B3\u5982\u4F55\u505C\u987F\u7528\u6237\u7EBF\u7A0B\uFF0C\u8BA9\u865A\u62DF\u673A\u8FDB\u5165\u5783\u573E\u56DE\u6536\u72B6\u6001\u7684\u95EE\u9898\u4E86\uFF0C\u4F46\u5B9E\u9645\u60C5\u51B5\u5374\u5E76\u4E0D\u4E00\u5B9A\u3002\u5B89\u5168\u70B9\u673A\u5236\u4FDD\u8BC1\u4E86\u7A0B\u5E8F\u6267\u884C\u65F6\uFF0C\u5728\u4E0D\u592A\u957F\u7684\u65F6\u95F4\u5185\u5C31\u4F1A\u9047\u5230\u53EF\u8FDB\u5165\u5783\u573E\u6536\u96C6\u8FC7\u7A0B\u7684\u5B89\u5168\u70B9\u3002\u4F46\u662F\uFF0C\u7A0B\u5E8F \u201C\u4E0D\u6267\u884C\u201D \u7684\u65F6\u5019\u5462\uFF1F\u6240\u8C13\u7684\u7A0B\u5E8F\u4E0D\u6267\u884C\u5C31\u662F\u6CA1\u6709\u5206\u914D\u5904\u7406\u5668\u65F6\u95F4\uFF0C\u5178\u578B\u7684\u573A\u666F\u4FBF\u662F\u7528\u6237\u7EBF\u7A0B\u5904\u4E8E Sleep \u72B6\u6001\u6216\u8005 Blocked \u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7EBF\u7A0B\u65E0\u6CD5\u54CD\u5E94\u865A\u62DF\u673A\u7684\u4E2D\u65AD\u8BF7\u6C42\uFF0C\u4E0D\u80FD\u518D\u8D70\u5230\u5B89\u5168\u7684\u5730\u65B9\u53BB\u4E2D\u65AD\u6302\u8D77\u81EA\u5DF1\uFF0C\u865A\u62DF\u673A\u4E5F\u663E\u7136\u4E0D\u53EF\u80FD\u6301\u7EED\u7B49\u5F85\u7EBF\u7A0B\u91CD\u65B0\u88AB\u6FC0\u6D3B\u5206\u914D\u5904\u7406\u5668\u65F6\u95F4\u3002\u5BF9\u4E8E\u8FD9\u79CD\u60C5\u51B5\uFF0C\u5C31\u5FC5\u987B\u5F15\u5165\u5B89\u5168\u533A\u57DF\uFF08Safe Region\uFF09\u6765\u89E3\u51B3\u3002</p><p>\u5B89\u5168\u533A\u57DF\u662F\u6307\u80FD\u591F\u786E\u4FDD\u5728\u67D0\u4E00\u6BB5\u4EE3\u7801\u7247\u6BB5\u4E4B\u4E2D\uFF0C\u5F15\u7528\u5173\u7CFB\u4E0D\u4F1A\u53D1\u751F\u53D8\u5316\uFF0C\u56E0\u6B64\uFF0C\u5728\u8FD9\u4E2A\u533A\u57DF\u4E2D\u4EFB\u610F\u5730\u65B9\u5F00\u59CB\u5783\u573E\u6536\u96C6\u90FD\u662F\u5B89\u5168\u7684\u3002\u6211\u4EEC\u4E5F\u53EF\u4EE5\u628A\u5B89\u5168\u533A\u57DF\u770B\u4F5C\u88AB\u6269\u5C55\u62C9\u4F38\u4E86\u7684\u5B89\u5168\u70B9\u3002</p><p>\u5F53\u7528\u6237\u7EBF\u7A0B\u6267\u884C\u5230\u5B89\u5168\u533A\u57DF\u91CC\u9762\u7684\u4EE3\u7801\u65F6\uFF0C\u9996\u5148\u4F1A\u6807\u8BC6\u81EA\u5DF1\u5DF2\u7ECF\u8FDB\u5165\u4E86\u5B89\u5168\u533A\u57DF\uFF0C\u90A3\u6837\u5F53\u8FD9\u6BB5\u65F6\u95F4\u91CC\u865A\u62DF\u673A\u8981\u53D1\u8D77\u5783\u573E\u6536\u96C6\u65F6\u5C31\u4E0D\u5FC5\u53BB\u7BA1\u8FD9\u4E9B\u5DF2\u58F0\u660E\u81EA\u5DF1\u5728\u5B89\u5168\u533A\u57DF\u5185\u7684\u7EBF\u7A0B\u4E86\u3002\u5F53\u7EBF\u7A0B\u8981\u79BB\u5F00\u5B89\u5168\u533A\u57DF\u65F6\uFF0C\u5B83\u8981\u68C0\u67E5\u865A\u62DF\u673A\u662F\u5426\u5DF2\u7ECF\u5B8C\u6210\u4E86\u6839\u8282\u70B9\u679A\u4E3E\uFF08\u6216\u8005\u5783\u573E\u6536\u96C6\u8FC7\u7A0B\u4E2D\u5176\u4ED6\u9700\u8981\u6682\u505C\u7528\u6237\u7EBF\u7A0B\u7684\u9636\u6BB5\uFF09\uFF0C\u5982\u679C\u5B8C\u6210\u4E86\uFF0C\u90A3\u7EBF\u7A0B\u5C31\u5F53\u4F5C\u6CA1\u4E8B\u53D1\u751F\u8FC7\uFF0C\u7EE7\u7EED\u6267\u884C\uFF1B\u5426\u5219\u5B83\u5C31\u5FC5\u987B\u4E00\u76F4\u7B49\u5F85\uFF0C\u76F4\u5230\u6536\u5230\u53EF\u4EE5\u79BB\u5F00\u5B89\u5168\u533A\u57DF\u7684\u4FE1\u53F7\u4E3A\u6B62\u3002</p><h3 id="_3-4-4-\u8BB0\u5FC6\u96C6\u4E0E\u5361\u8868" tabindex="-1"><a class="header-anchor" href="#_3-4-4-\u8BB0\u5FC6\u96C6\u4E0E\u5361\u8868" aria-hidden="true">#</a> 3.4.4 \u8BB0\u5FC6\u96C6\u4E0E\u5361\u8868</h3><p>\u8BB2\u89E3\u5206\u4EE3\u6536\u96C6\u7406\u8BBA\u7684\u65F6\u5019\uFF0C\u63D0\u5230\u4E86\u4E3A\u89E3\u51B3\u5BF9\u8C61\u8DE8\u4EE3\u5F15\u7528\u6240\u5E26\u6765\u7684\u95EE\u9898\uFF0C\u5783\u573E\u6536\u96C6\u5668\u5728\u65B0\u751F\u4EE3\u4E2D\u5EFA\u7ACB\u4E86\u540D\u4E3A\u8BB0\u5FC6\u96C6\uFF08Remembered Set\uFF09\u7684\u6570\u636E\u7ED3\u6784\uFF0C\u7528\u4EE5\u907F\u514D\u628A\u6574\u4E2A\u8001\u5E74\u4EE3\u52A0\u8FDB GC Roots \u626B\u63CF\u8303\u56F4\u3002\u4E8B\u5B9E\u4E0A\u5E76\u4E0D\u53EA\u662F\u65B0\u751F\u4EE3\u3001\u8001\u5E74\u4EE3\u4E4B\u95F4\u624D\u6709\u8DE8\u4EE3\u5F15\u7528\u7684\u95EE\u9898\uFF0C\u6240\u6709\u6D89\u53CA\u90E8\u5206\u533A\u57DF\u6536\u96C6\uFF08Partial GC\uFF09\u884C\u4E3A\u7684\u5783\u573E\u6536\u96C6\u5668\uFF0C\u5178\u578B\u7684\u5982 G1\u3001ZGC \u548C Shenandoah \u6536\u96C6\u5668\uFF0C\u90FD\u4F1A\u9762\u4E34\u76F8\u540C\u7684\u95EE\u9898\uFF0C\u56E0\u6B64\u6211\u4EEC\u6709\u5FC5\u8981\u8FDB\u4E00\u6B65\u7406\u6E05\u8BB0\u5FC6\u96C6\u7684\u539F\u7406\u548C\u5B9E\u73B0\u65B9\u5F0F\uFF0C\u4EE5\u4FBF\u5728\u540E\u7EED\u7AE0\u8282\u91CC\u4ECB\u7ECD\u51E0\u6B3E\u6700\u65B0\u7684\u6536\u96C6\u5668\u76F8\u5173\u77E5\u8BC6\u65F6\u80FD\u66F4\u597D\u5730\u7406\u89E3\u3002</p><p>\u8BB0\u5FC6\u96C6\u662F\u4E00\u79CD\u7528\u4E8E\u8BB0\u5F55\u4ECE\u975E\u6536\u96C6\u533A\u57DF\u6307\u5411\u6536\u96C6\u533A\u57DF\u7684\u6307\u9488\u96C6\u5408\u7684\u62BD\u8C61\u6570\u636E\u7ED3\u6784\u3002\u5982\u679C\u6211\u4EEC\u4E0D\u8003\u8651\u6548\u7387\u548C\u6210\u672C\u7684\u8BDD\uFF0C\u6700\u7B80\u5355\u7684\u5B9E\u73B0\u53EF\u4EE5\u7528\u975E\u6536\u96C6\u533A\u57DF\u4E2D\u6240\u6709\u542B\u8DE8\u4EE3\u5F15\u7528\u7684\u5BF9\u8C61\u6570\u7EC4\u6765\u5B9E\u73B0\u8FD9\u4E2A\u6570\u636E\u7ED3\u6784\uFF0C\u5982\u4EE3\u7801\u6E05\u53553-5 \u6240\u793A\uFF1A</p><p>\u4EE3\u7801\u6E05\u53553-5 \u4EE5\u5BF9\u8C61\u6307\u9488\u6765\u5B9E\u73B0\u8BB0\u5FC6\u96C6\u7684\u4F2A\u4EE3\u7801</p><div class="language-c++ ext-c++ line-numbers-mode"><pre class="language-c++"><code>Class RememberedSet {
    Object[] set[OBJECT_INTERGENERATIONAL_REFERENCE_SIZE];
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u79CD\u8BB0\u5F55\u5168\u90E8\u542B\u8DE8\u4EE3\u5F15\u7528\u5BF9\u8C61\u7684\u5B9E\u73B0\u65B9\u6848\uFF0C\u65E0\u8BBA\u662F\u7A7A\u95F4\u5360\u7528\u8FD8\u662F\u7EF4\u62A4\u6210\u672C\u90FD\u76F8\u5F53\u9AD8\u6602\u3002\u800C\u5728\u5783\u573E\u6536\u96C6\u7684\u573A\u666F\u4E2D\uFF0C\u6536\u96C6\u5668\u53EA\u9700\u8981\u901A\u8FC7\u8BB0\u5FC6\u96C6\u5224\u65AD\u51FA\u67D0\u4E00\u5757\u975E\u6536\u96C6\u533A\u57DF\u662F\u5426\u5B58\u5728\u6709\u6307\u5411\u4E86\u6536\u96C6\u533A\u57DF\u7684\u6307\u9488\u5C31\u53EF\u4EE5\u4E86\uFF0C\u5E76\u4E0D\u9700\u8981\u4E86\u89E3\u8FD9\u4E9B\u8DE8\u4EE3\u6307\u9488\u7684\u5168\u90E8\u7EC6\u8282\u3002\u90A3\u8BBE\u8BA1\u8005\u5728\u5B9E\u73B0\u8BB0\u5FC6\u96C6\u7684\u65F6\u5019\uFF0C\u4FBF\u53EF\u4EE5\u9009\u62E9\u66F4\u4E3A\u7C97\u72B7\u7684\u8BB0\u5F55\u7C92\u5EA6\u6765\u8282\u7701\u8BB0\u5FC6\u96C6\u7684\u5B58\u50A8\u548C\u7EF4\u62A4\u6210\u672C\uFF0C\u4E0B\u9762\u5217\u4E3E\u4E86\u4E00\u4E9B\u53EF\u4F9B\u9009\u62E9\uFF08\u5F53\u7136\u4E5F\u53EF\u4EE5\u9009\u62E9\u8FD9\u4E2A\u8303\u56F4\u4EE5\u5916\u7684\uFF09\u7684\u8BB0\u5F55\u7CBE\u5EA6\uFF1A</p><ul><li>\u5B57\u957F\u7CBE\u5EA6\uFF1A\u6BCF\u4E2A\u8BB0\u5F55\u7CBE\u786E\u5230\u4E00\u4E2A\u673A\u5668\u5B57\u957F\uFF08\u5C31\u662F\u5904\u7406\u5668\u7684\u5BFB\u5740\u4F4D\u6570\uFF0C\u5982\u5E38\u89C1\u7684 32 \u4F4D\u6216 64 \u4F4D\uFF0C\u8FD9\u4E2A\u7CBE\u5EA6\u51B3\u5B9A\u4E86\u673A\u5668\u8BBF\u95EE\u7269\u7406\u5185\u5B58\u5730\u5740\u7684\u6307\u9488\u957F\u5EA6\uFF09\uFF0C\u8BE5\u5B57\u5305\u542B\u8DE8\u4EE3\u6307\u9488\u3002</li><li>\u5BF9\u8C61\u7CBE\u5EA6\uFF1A\u6BCF\u4E2A\u8BB0\u5F55\u7CBE\u786E\u5230\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u8BE5\u5BF9\u8C61\u91CC\u6709\u5B57\u6BB5\u542B\u6709\u8DE8\u4EE3\u6307\u9488\u3002</li><li>\u5361\u7CBE\u5EA6\uFF1A\u6BCF\u4E2A\u8BB0\u5F55\u7CBE\u786E\u5230\u4E00\u5757\u5185\u5B58\u533A\u57DF\uFF0C\u8BE5\u533A\u57DF\u5185\u6709\u5BF9\u8C61\u542B\u6709\u8DE8\u4EE3\u6307\u9488\u3002</li></ul><p>\u5176\u4E2D\uFF0C\u7B2C\u4E09\u79CD \u201C\u5361\u7CBE\u5EA6\u201D \u6240\u6307\u7684\u662F\u7528\u4E00\u79CD\u79F0\u4E3A \u201C\u5361\u8868\u201D\uFF08Card Table\uFF09\u7684\u65B9\u5F0F\u53BB\u5B9E\u73B0\u8BB0\u5FC6\u96C6<sup class="footnote-ref"><a href="#footnote10">[10]</a><a class="footnote-anchor" id="footnote-ref10"></a></sup>\uFF0C\u8FD9\u4E5F\u662F\u76EE\u524D\u6700\u5E38\u7528\u7684\u4E00\u79CD\u8BB0\u5FC6\u96C6\u5B9E\u73B0\u5F62\u5F0F\uFF0C\u4E00\u4E9B\u8D44\u6599\u4E2D\u751A\u81F3\u76F4\u63A5\u628A\u5B83\u548C\u8BB0\u5FC6\u96C6\u6DF7\u4E3A\u4E00\u8C08\u3002\u524D\u9762\u5B9A\u4E49\u4E2D\u63D0\u5230\u8BB0\u5FC6\u96C6\u5176\u5B9E\u662F\u4E00\u79CD \u201C\u62BD\u8C61\u201D \u7684\u6570\u636E\u7ED3\u6784\uFF0C\u62BD\u8C61\u7684\u610F\u601D\u662F\u53EA\u5B9A\u4E49\u4E86\u8BB0\u5FC6\u96C6\u7684\u884C\u4E3A\u610F\u56FE\uFF0C\u5E76\u6CA1\u6709\u5B9A\u4E49\u5176\u884C\u4E3A\u7684\u5177\u4F53\u5B9E\u73B0\u3002\u5361\u8868\u5C31\u662F\u8BB0\u5FC6\u96C6\u7684\u4E00\u79CD\u5177\u4F53\u5B9E\u73B0\uFF0C\u5B83\u5B9A\u4E49\u4E86\u8BB0\u5FC6\u96C6\u7684\u8BB0\u5F55\u7CBE\u5EA6\u3001\u4E0E\u5806\u5185\u5B58\u7684\u6620\u5C04\u5173\u7CFB\u7B49\u3002\u5173\u4E8E\u5361\u8868\u4E0E\u8BB0\u5FC6\u96C6\u7684\u5173\u7CFB\uFF0C\u8BFB\u8005\u4E0D\u59A8\u6309\u7167 Java \u8BED\u8A00\u4E2D HashMap \u4E0E Map \u7684\u5173\u7CFB\u6765\u7C7B\u6BD4\u7406\u89E3\u3002</p><p>\u5361\u8868\u6700\u7B80\u5355\u7684\u5F62\u5F0F\u53EF\u4EE5\u53EA\u662F\u4E00\u4E2A\u5B57\u8282\u6570\u7EC4<sup class="footnote-ref"><a href="#footnote11">[11]</a><a class="footnote-anchor" id="footnote-ref11"></a></sup>\uFF0C\u800C HotSpot \u865A\u62DF\u673A\u786E\u5B9E\u4E5F\u662F\u8FD9\u6837\u505A\u7684\u3002\u4EE5\u4E0B\u8FD9\u884C\u4EE3\u7801\u662F HotSpot \u9ED8\u8BA4\u7684\u5361\u8868\u6807\u8BB0\u903B\u8F91<sup class="footnote-ref"><a href="#footnote12">[12]</a><a class="footnote-anchor" id="footnote-ref12"></a></sup>\uFF1A</p><div class="language-c++ ext-c++ line-numbers-mode"><pre class="language-c++"><code>CARD_TABLE [this address &gt;&gt; 9] = 0;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5B57\u8282\u6570\u7EC4 CARD_TABLE \u7684\u6BCF\u4E00\u4E2A\u5143\u7D20\u90FD\u5BF9\u5E94\u7740\u5176\u6807\u8BC6\u7684\u5185\u5B58\u533A\u57DF\u4E2D\u4E00\u5757\u7279\u5B9A\u5927\u5C0F\u7684\u5185\u5B58\u5757\uFF0C\u8FD9\u4E2A\u5185\u5B58\u5757\u88AB\u79F0\u4F5C \u201C\u5361\u9875\u201D\uFF08Card Page\uFF09\u3002\u4E00\u822C\u6765\u8BF4\uFF0C\u5361\u9875\u5927\u5C0F\u90FD\u662F\u4EE5 2 \u7684 N \u6B21\u5E42\u7684\u5B57\u8282\u6570\uFF0C\u901A\u8FC7\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u51FA HotSpot \u4E2D\u4F7F\u7528\u7684\u5361\u9875\u662F 2 \u7684 9 \u6B21\u5E42\uFF0C\u5373 512 \u5B57\u8282\uFF08\u5730\u5740\u53F3\u79FB 9 \u4F4D\uFF0C\u76F8\u5F53\u4E8E\u7528\u5730\u5740\u9664\u4EE5 512\uFF09\u3002\u90A3\u5982\u679C\u5361\u8868\u6807\u8BC6\u5185\u5B58\u533A\u57DF\u7684\u8D77\u59CB\u5730\u5740\u662F 0x0000 \u7684\u8BDD\uFF0C\u6570\u7EC4 CARD_TABLE \u7684\u7B2C 0\u30011\u30012 \u53F7\u5143\u7D20\uFF0C\u5206\u522B\u5BF9\u5E94\u4E86\u5730\u5740\u8303\u56F4\u4E3A 0x0000 ~ 0x01FF\u30010x0200 ~ 0x03FF\u30010x0400 ~ 0x05FF \u7684\u5361\u9875\u5185\u5B58\u5757<sup class="footnote-ref"><a href="#footnote13">[13]</a><a class="footnote-anchor" id="footnote-ref13"></a></sup>\uFF0C\u5982\u56FE3-5 \u6240\u793A\u3002</p><p><img src="`+v+`" alt="\u56FE3-5" loading="lazy"></p><p>\u56FE3-5 \u5361\u8868\u4E0E\u5361\u9875\u5BF9\u5E94\u793A\u610F\u56FE</p><p>\u4E00\u4E2A\u5361\u9875\u7684\u5185\u5B58\u4E2D\u901A\u5E38\u5305\u542B\u4E0D\u6B62\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u53EA\u8981\u5361\u9875\u5185\u6709\u4E00\u4E2A\uFF08\u6216\u66F4\u591A\uFF09\u5BF9\u8C61\u7684\u5B57\u6BB5\u5B58\u5728\u7740\u8DE8\u4EE3\u6307\u9488\uFF0C\u90A3\u5C31\u5C06\u5BF9\u5E94\u5361\u8868\u7684\u6570\u7EC4\u5143\u7D20\u7684\u503C\u6807\u8BC6\u4E3A 1\uFF0C\u79F0\u4E3A\u8FD9\u4E2A\u5143\u7D20\u53D8\u810F\uFF08Dirty\uFF09\uFF0C\u6CA1\u6709\u5219\u6807\u8BC6\u4E3A 0\u3002\u5728\u5783\u573E\u6536\u96C6\u53D1\u751F\u65F6\uFF0C\u53EA\u8981\u7B5B\u9009\u51FA\u5361\u8868\u4E2D\u53D8\u810F\u7684\u5143\u7D20\uFF0C\u5C31\u80FD\u8F7B\u6613\u5F97\u51FA\u54EA\u4E9B\u5361\u9875\u5185\u5B58\u5757\u4E2D\u5305\u542B\u8DE8\u4EE3\u6307\u9488\uFF0C\u628A\u5B83\u4EEC\u52A0\u5165 GC Roots \u4E2D\u4E00\u5E76\u626B\u63CF\u3002</p><h3 id="_3-4-5-\u5199\u5C4F\u969C" tabindex="-1"><a class="header-anchor" href="#_3-4-5-\u5199\u5C4F\u969C" aria-hidden="true">#</a> 3.4.5 \u5199\u5C4F\u969C</h3><p>\u6211\u4EEC\u5DF2\u7ECF\u89E3\u51B3\u4E86\u5982\u4F55\u4F7F\u7528\u8BB0\u5FC6\u96C6\u6765\u7F29\u51CF GC Roots \u626B\u63CF\u8303\u56F4\u7684\u95EE\u9898\uFF0C\u4F46\u8FD8\u6CA1\u6709\u89E3\u51B3\u5361\u8868\u5143\u7D20\u5982\u4F55\u7EF4\u62A4\u7684\u95EE\u9898\uFF0C\u4F8B\u5982\u5B83\u4EEC\u4F55\u65F6\u53D8\u810F\u3001\u8C01\u6765\u628A\u5B83\u4EEC\u53D8\u810F\u7B49\u3002</p><p>\u5361\u8868\u5143\u7D20\u4F55\u65F6\u53D8\u810F\u7684\u7B54\u6848\u662F\u5F88\u660E\u786E\u7684\u2014\u2014\u6709\u5176\u4ED6\u5206\u4EE3\u533A\u57DF\u4E2D\u5BF9\u8C61\u5F15\u7528\u4E86\u672C\u533A\u57DF\u5BF9\u8C61\u65F6\uFF0C\u5176\u5BF9\u5E94\u7684\u5361\u8868\u5143\u7D20\u5C31\u5E94\u8BE5\u53D8\u810F\uFF0C\u53D8\u810F\u65F6\u95F4\u70B9\u539F\u5219\u4E0A\u5E94\u8BE5\u53D1\u751F\u5728\u5F15\u7528\u7C7B\u578B\u5B57\u6BB5\u8D4B\u503C\u7684\u90A3\u4E00\u523B\u3002\u4F46\u95EE\u9898\u662F\u5982\u4F55\u53D8\u810F\uFF0C\u5373\u5982\u4F55\u5728\u5BF9\u8C61\u8D4B\u503C\u7684\u90A3\u4E00\u523B\u53BB\u66F4\u65B0\u7EF4\u62A4\u5361\u8868\u5462\uFF1F\u5047\u5982\u662F\u89E3\u91CA\u6267\u884C\u7684\u5B57\u8282\u7801\uFF0C\u90A3\u76F8\u5BF9\u597D\u5904\u7406\uFF0C\u865A\u62DF\u673A\u8D1F\u8D23\u6BCF\u6761\u5B57\u8282\u7801\u6307\u4EE4\u7684\u6267\u884C\uFF0C\u6709\u5145\u5206\u7684\u4ECB\u5165\u7A7A\u95F4\uFF1B\u4F46\u5728\u7F16\u8BD1\u6267\u884C\u7684\u573A\u666F\u4E2D\u5462\uFF1F\u7ECF\u8FC7\u5373\u65F6\u7F16\u8BD1\u540E\u7684\u4EE3\u7801\u5DF2\u7ECF\u662F\u7EAF\u7CB9\u7684\u673A\u5668\u6307\u4EE4\u6D41\u4E86\uFF0C\u8FD9\u5C31\u5FC5\u987B\u627E\u5230\u4E00\u4E2A\u5728\u673A\u5668\u7801\u5C42\u9762\u7684\u624B\u6BB5\uFF0C\u628A\u7EF4\u62A4\u5361\u8868\u7684\u52A8\u4F5C\u653E\u5230\u6BCF\u4E00\u4E2A\u8D4B\u503C\u64CD\u4F5C\u4E4B\u4E2D\u3002</p><p>\u5728 HotSpot \u865A\u62DF\u673A\u91CC\u662F\u901A\u8FC7\u5199\u5C4F\u969C\uFF08Write Barrier\uFF09\u6280\u672F\u7EF4\u62A4\u5361\u8868\u72B6\u6001\u7684\u3002\u5148\u8BF7\u8BFB\u8005\u6CE8\u610F\u5C06\u8FD9\u91CC\u63D0\u5230\u7684 \u201C\u5199\u5C4F\u969C\u201D\uFF0C\u4EE5\u53CA\u540E\u9762\u5728\u4F4E\u5EF6\u8FDF\u6536\u96C6\u5668\u4E2D\u4F1A\u63D0\u5230\u7684 \u201C\u8BFB\u5C4F\u969C\u201D \u4E0E\u89E3\u51B3\u5E76\u53D1\u4E71\u5E8F\u6267\u884C\u95EE\u9898\u4E2D\u7684 \u201C\u5185\u5B58\u5C4F\u969C\u201D<sup class="footnote-ref"><a href="#footnote14">[14]</a><a class="footnote-anchor" id="footnote-ref14"></a></sup>\u533A\u5206\u5F00\u6765\uFF0C\u907F\u514D\u6DF7\u6DC6\u3002\u5199\u5C4F\u969C\u53EF\u4EE5\u770B\u4F5C\u5728\u865A\u62DF\u673A\u5C42\u9762\u5BF9 \u201C\u5F15\u7528\u7C7B\u578B\u5B57\u6BB5\u8D4B\u503C\u201D \u8FD9\u4E2A\u52A8\u4F5C\u7684 AOP \u5207\u9762<sup class="footnote-ref"><a href="#footnote15">[15]</a><a class="footnote-anchor" id="footnote-ref15"></a></sup>\uFF0C\u5728\u5F15\u7528\u5BF9\u8C61\u8D4B\u503C\u65F6\u4F1A\u4EA7\u751F\u4E00\u4E2A\u73AF\u5F62\uFF08Around\uFF09\u901A\u77E5\uFF0C\u4F9B\u7A0B\u5E8F\u6267\u884C\u989D\u5916\u7684\u52A8\u4F5C\uFF0C\u4E5F\u5C31\u662F\u8BF4\u8D4B\u503C\u7684\u524D\u540E\u90FD\u5728\u5199\u5C4F\u969C\u7684\u8986\u76D6\u8303\u7574\u5185\u3002\u5728\u8D4B\u503C\u524D\u7684\u90E8\u5206\u7684\u5199\u5C4F\u969C\u53EB\u4F5C\u5199\u524D\u5C4F\u969C\uFF08Pre-Write Barrier\uFF09\uFF0C\u5728\u8D4B\u503C\u540E\u7684\u5219\u53EB\u4F5C\u5199\u540E\u5C4F\u969C\uFF08Post-Write Barrier\uFF09\u3002HotSpot \u865A\u62DF\u673A\u7684\u8BB8\u591A\u6536\u96C6\u5668\u4E2D\u90FD\u6709\u4F7F\u7528\u5230\u5199\u5C4F\u969C\uFF0C\u4F46\u76F4\u81F3 G1 \u6536\u96C6\u5668\u51FA\u73B0\u4E4B\u524D\uFF0C\u5176\u4ED6\u6536\u96C6\u5668\u90FD\u53EA\u7528\u5230\u4E86\u5199\u540E\u5C4F\u969C\u3002\u4E0B\u9762\u8FD9\u6BB5\u4EE3\u7801\u6E05\u53553-6 \u662F\u4E00\u6BB5\u66F4\u65B0\u5361\u8868\u72B6\u6001\u7684\u7B80\u5316\u903B\u8F91\uFF1A</p><p>\u4EE3\u7801\u6E05\u53553-6 \u5199\u540E\u5C4F\u969C\u66F4\u65B0\u5361\u8868</p><div class="language-c++ ext-c++ line-numbers-mode"><pre class="language-c++"><code>void oop_field_store(oop* field, oop new_value) {
    // \u5F15\u7528\u5B57\u6BB5\u8D4B\u503C\u64CD\u4F5C
    *field = new_value;
    // \u5199\u540E\u5C4F\u969C\uFF0C\u5728\u8FD9\u91CC\u5B8C\u6210\u5361\u8868\u72B6\u6001\u66F4\u65B0
    post_write_barrier(field, new_value);
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5E94\u7528\u5199\u5C4F\u969C\u540E\uFF0C\u865A\u62DF\u673A\u5C31\u4F1A\u4E3A\u6240\u6709\u8D4B\u503C\u64CD\u4F5C\u751F\u6210\u76F8\u5E94\u7684\u6307\u4EE4\uFF0C\u4E00\u65E6\u6536\u96C6\u5668\u5728\u5199\u5C4F\u969C\u4E2D\u589E\u52A0\u4E86\u66F4\u65B0\u5361\u8868\u64CD\u4F5C\uFF0C\u65E0\u8BBA\u66F4\u65B0\u7684\u662F\u4E0D\u662F\u8001\u5E74\u4EE3\u5BF9\u65B0\u751F\u4EE3\u5BF9\u8C61\u7684\u5F15\u7528\uFF0C\u6BCF\u6B21\u53EA\u8981\u5BF9\u5F15\u7528\u8FDB\u884C\u66F4\u65B0\uFF0C\u5C31\u4F1A\u4EA7\u751F\u989D\u5916\u7684\u5F00\u9500\uFF0C\u4E0D\u8FC7\u8FD9\u4E2A\u5F00\u9500\u4E0E Minor GC \u65F6\u626B\u63CF\u6574\u4E2A\u8001\u5E74\u4EE3\u7684\u4EE3\u4EF7\u76F8\u6BD4\u8FD8\u662F\u4F4E\u5F97\u591A\u7684\u3002</p><p>\u9664\u4E86\u5199\u5C4F\u969C\u7684\u5F00\u9500\u5916\uFF0C\u5361\u8868\u5728\u9AD8\u5E76\u53D1\u573A\u666F\u4E0B\u8FD8\u9762\u4E34\u7740 \u201C\u4F2A\u5171\u4EAB\u201D\uFF08False Sharing\uFF09\u95EE\u9898\u3002\u4F2A\u5171\u4EAB\u662F\u5904\u7406\u5E76\u53D1\u5E95\u5C42\u7EC6\u8282\u65F6\u4E00\u79CD\u7ECF\u5E38\u9700\u8981\u8003\u8651\u7684\u95EE\u9898\uFF0C\u73B0\u4EE3\u4E2D\u592E\u5904\u7406\u5668\u7684\u7F13\u5B58\u7CFB\u7EDF\u4E2D\u662F\u4EE5\u7F13\u5B58\u884C\uFF08Cache Line\uFF09\u4E3A\u5355\u4F4D\u5B58\u50A8\u7684\uFF0C\u5F53\u591A\u7EBF\u7A0B\u4FEE\u6539\u4E92\u76F8\u72EC\u7ACB\u7684\u53D8\u91CF\u65F6\uFF0C\u5982\u679C\u8FD9\u4E9B\u53D8\u91CF\u6070\u597D\u5171\u4EAB\u540C\u4E00\u4E2A\u7F13\u5B58\u884C\uFF0C\u5C31\u4F1A\u5F7C\u6B64\u5F71\u54CD\uFF08\u5199\u56DE\u3001\u65E0\u6548\u5316\u6216\u8005\u540C\u6B65\uFF09\u800C\u5BFC\u81F4\u6027\u80FD\u964D\u4F4E\uFF0C\u8FD9\u5C31\u662F\u4F2A\u5171\u4EAB\u95EE\u9898\u3002</p><p>\u5047\u8BBE\u5904\u7406\u5668\u7684\u7F13\u5B58\u884C\u5927\u5C0F\u4E3A 64 \u5B57\u8282\uFF0C\u7531\u4E8E\u4E00\u4E2A\u5361\u8868\u5143\u7D20\u5360 1 \u4E2A\u5B57\u8282\uFF0C64 \u4E2A\u5361\u8868\u5143\u7D20\u5C06\u5171\u4EAB\u540C\u4E00\u4E2A\u7F13\u5B58\u884C\u3002\u8FD9 64 \u4E2A\u5361\u8868\u5143\u7D20\u5BF9\u5E94\u7684\u5361\u9875\u603B\u7684\u5185\u5B58\u4E3A 32KB\uFF0864 \xD7 512 \u5B57\u8282\uFF09\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5982\u679C\u4E0D\u540C\u7EBF\u7A0B\u66F4\u65B0\u7684\u5BF9\u8C61\u6B63\u597D\u5904\u4E8E\u8FD9 32KB \u7684\u5185\u5B58\u533A\u57DF\u5185\uFF0C\u5C31\u4F1A\u5BFC\u81F4\u66F4\u65B0\u5361\u8868\u65F6\u6B63\u597D\u5199\u5165\u540C\u4E00\u4E2A\u7F13\u5B58\u884C\u800C\u5F71\u54CD\u6027\u80FD\u3002\u4E3A\u4E86\u907F\u514D\u4F2A\u5171\u4EAB\u95EE\u9898\uFF0C\u4E00\u79CD\u7B80\u5355\u7684\u89E3\u51B3\u65B9\u6848\u662F\u4E0D\u91C7\u7528\u65E0\u6761\u4EF6\u7684\u5199\u5C4F\u969C\uFF0C\u800C\u662F\u5148\u68C0\u67E5\u5361\u8868\u6807\u8BB0\uFF0C\u53EA\u6709\u5F53\u8BE5\u5361\u8868\u5143\u7D20\u672A\u88AB\u6807\u8BB0\u8FC7\u65F6\u624D\u5C06\u5176\u6807\u8BB0\u4E3A\u53D8\u810F\uFF0C\u5373\u5C06\u5361\u8868\u66F4\u65B0\u7684\u903B\u8F91\u53D8\u4E3A\u4EE5\u4E0B\u4EE3\u7801\u6240\u793A\uFF1A</p><div class="language-c++ ext-c++ line-numbers-mode"><pre class="language-c++"><code>if (CARD_TABLE [this address &gt;&gt; 9] != 0)
    CARD_TABLE [this address &gt;&gt; 9] = 0;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728 JDK 7 \u4E4B\u540E\uFF0CHotSpot \u865A\u62DF\u673A\u589E\u52A0\u4E86\u4E00\u4E2A\u65B0\u7684\u53C2\u6570 -XX:+UseCondCardMark\uFF0C\u7528\u6765\u51B3\u5B9A\u662F\u5426\u5F00\u542F\u5361\u8868\u66F4\u65B0\u7684\u6761\u4EF6\u5224\u65AD\u3002\u5F00\u542F\u4F1A\u589E\u52A0\u4E00\u6B21\u989D\u5916\u5224\u65AD\u7684\u5F00\u9500\uFF0C\u4F46\u80FD\u591F\u907F\u514D\u4F2A\u5171\u4EAB\u95EE\u9898\uFF0C\u4E24\u8005\u5404\u6709\u6027\u80FD\u635F\u8017\uFF0C\u662F\u5426\u6253\u5F00\u8981\u6839\u636E\u5E94\u7528\u5B9E\u9645\u8FD0\u884C\u60C5\u51B5\u6765\u8FDB\u884C\u6D4B\u8BD5\u6743\u8861\u3002</p><h3 id="_3-4-6-\u5E76\u53D1\u7684\u53EF\u8FBE\u6027\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#_3-4-6-\u5E76\u53D1\u7684\u53EF\u8FBE\u6027\u5206\u6790" aria-hidden="true">#</a> 3.4.6 \u5E76\u53D1\u7684\u53EF\u8FBE\u6027\u5206\u6790</h3><p>\u5728 3.2 \u8282\u4E2D\u66FE\u7ECF\u63D0\u5230\u4E86\u5F53\u524D\u4E3B\u6D41\u7F16\u7A0B\u8BED\u8A00\u7684\u5783\u573E\u6536\u96C6\u5668\u57FA\u672C\u4E0A\u90FD\u662F\u4F9D\u9760\u53EF\u8FBE\u6027\u5206\u6790\u7B97\u6CD5\u6765\u5224\u5B9A\u5BF9\u8C61\u662F\u5426\u5B58\u6D3B\u7684\uFF0C\u53EF\u8FBE\u6027\u5206\u6790\u7B97\u6CD5\u7406\u8BBA\u4E0A\u8981\u6C42\u5168\u8FC7\u7A0B\u90FD\u57FA\u4E8E\u4E00\u4E2A\u80FD\u4FDD\u969C\u4E00\u81F4\u6027\u7684\u5FEB\u7167\u4E2D\u624D\u80FD\u591F\u8FDB\u884C\u5206\u6790\uFF0C\u8FD9\u610F\u5473\u7740\u5FC5\u987B\u5168\u7A0B\u51BB\u7ED3\u7528\u6237\u7EBF\u7A0B\u7684\u8FD0\u884C\u3002\u5728\u6839\u8282\u70B9\u679A\u4E3E\uFF08\u89C1 3.4.1 \u8282\uFF09\u8FD9\u4E2A\u6B65\u9AA4\u4E2D\uFF0C\u7531\u4E8E GC Roots \u76F8\u6BD4\u8D77\u6574\u4E2A Java \u5806\u4E2D\u5168\u90E8\u7684\u5BF9\u8C61\u6BD5\u7ADF\u8FD8\u7B97\u662F\u6781\u5C11\u6570\uFF0C\u4E14\u5728\u5404\u79CD\u4F18\u5316\u6280\u5DE7\uFF08\u5982 OopMap\uFF09\u7684\u52A0\u6301\u4E0B\uFF0C\u5B83\u5E26\u6765\u7684\u505C\u987F\u5DF2\u7ECF\u662F\u975E\u5E38\u77ED\u6682\u4E14\u76F8\u5BF9\u56FA\u5B9A\uFF08\u4E0D\u968F\u5806\u5BB9\u91CF\u800C\u589E\u957F\uFF09\u7684\u4E86\u3002\u53EF\u4ECE GC Roots \u518D\u7EE7\u7EED\u5F80\u4E0B\u904D\u5386\u5BF9\u8C61\u56FE\uFF0C\u8FD9\u4E00\u6B65\u9AA4\u7684\u505C\u987F\u65F6\u95F4\u5C31\u5FC5\u5B9A\u4F1A\u4E0E Java \u5806\u5BB9\u91CF\u76F4\u63A5\u6210\u6B63\u6BD4\u4F8B\u5173\u7CFB\u4E86\uFF1A\u5806\u8D8A\u5927\uFF0C\u5B58\u50A8\u7684\u5BF9\u8C61\u8D8A\u591A\uFF0C\u5BF9\u8C61\u56FE\u7ED3\u6784\u8D8A\u590D\u6742\uFF0C\u8981\u6807\u8BB0\u66F4\u591A\u5BF9\u8C61\u800C\u4EA7\u751F\u7684\u505C\u987F\u65F6\u95F4\u81EA\u7136\u5C31\u66F4\u957F\uFF0C\u8FD9\u542C\u8D77\u6765\u662F\u7406\u6240\u5F53\u7136\u7684\u4E8B\u60C5\u3002</p><p>\u8981\u77E5\u9053\u5305\u542B \u201C\u6807\u8BB0\u201D \u9636\u6BB5\u662F\u6240\u6709\u8FFD\u8E2A\u5F0F\u5783\u573E\u6536\u96C6\u7B97\u6CD5\u7684\u5171\u540C\u7279\u5F81\uFF0C\u5982\u679C\u8FD9\u4E2A\u9636\u6BB5\u4F1A\u968F\u7740\u5806\u53D8\u5927\u800C\u7B49\u6BD4\u4F8B\u589E\u52A0\u505C\u987F\u65F6\u95F4\uFF0C\u5176\u5F71\u54CD\u5C31\u4F1A\u6CE2\u53CA\u51E0\u4E4E\u6240\u6709\u7684\u5783\u573E\u6536\u96C6\u5668\uFF0C\u540C\u7406\u53EF\u77E5\uFF0C\u5982\u679C\u80FD\u591F\u524A\u51CF\u8FD9\u90E8\u5206\u505C\u987F\u65F6\u95F4\u7684\u8BDD\uFF0C\u90A3\u6536\u76CA\u4E5F\u5C06\u4F1A\u662F\u7CFB\u7EDF\u6027\u7684\u3002</p><p>\u60F3\u89E3\u51B3\u6216\u8005\u964D\u4F4E\u7528\u6237\u7EBF\u7A0B\u7684\u505C\u987F\uFF0C\u5C31\u8981\u5148\u641E\u6E05\u695A\u4E3A\u4EC0\u4E48\u5FC5\u987B\u5728\u4E00\u4E2A\u80FD\u4FDD\u969C\u4E00\u81F4\u6027\u7684\u5FEB\u7167\u4E0A\u624D\u80FD\u8FDB\u884C\u5BF9\u8C61\u56FE\u7684\u904D\u5386\uFF1F\u4E3A\u4E86\u80FD\u89E3\u91CA\u6E05\u695A\u8FD9\u4E2A\u95EE\u9898\uFF0C\u6211\u4EEC\u5F15\u5165\u4E09\u8272\u6807\u8BB0\uFF08Tricolor Marking\uFF09<sup class="footnote-ref"><a href="#footnote16">[16]</a><a class="footnote-anchor" id="footnote-ref16"></a></sup>\u4F5C\u4E3A\u5DE5\u5177\u6765\u8F85\u52A9\u63A8\u5BFC\uFF0C\u628A\u904D\u5386\u5BF9\u8C61\u56FE\u8FC7\u7A0B\u4E2D\u9047\u5230\u7684\u5BF9\u8C61\uFF0C\u6309\u7167 \u201C\u662F\u5426\u8BBF\u95EE\u8FC7\u201D \u8FD9\u4E2A\u6761\u4EF6\u6807\u8BB0\u6210\u4EE5\u4E0B\u4E09\u79CD\u989C\u8272\uFF1A</p><ul><li>\u767D\u8272\uFF1A\u8868\u793A\u5BF9\u8C61\u5C1A\u672A\u88AB\u5783\u573E\u6536\u96C6\u5668\u8BBF\u95EE\u8FC7\u3002\u663E\u7136\u5728\u53EF\u8FBE\u6027\u5206\u6790\u521A\u521A\u5F00\u59CB\u7684\u9636\u6BB5\uFF0C\u6240\u6709\u7684\u5BF9\u8C61\u90FD\u662F\u767D\u8272\u7684\uFF0C\u82E5\u5728\u5206\u6790\u7ED3\u675F\u7684\u9636\u6BB5\uFF0C\u4ECD\u7136\u662F\u767D\u8272\u7684\u5BF9\u8C61\uFF0C\u5373\u4EE3\u8868\u4E0D\u53EF\u8FBE\u3002</li><li>\u9ED1\u8272\uFF1A\u8868\u793A\u5BF9\u8C61\u5DF2\u7ECF\u88AB\u5783\u573E\u6536\u96C6\u5668\u8BBF\u95EE\u8FC7\uFF0C\u4E14\u8FD9\u4E2A\u5BF9\u8C61\u7684\u6240\u6709\u5F15\u7528\u90FD\u5DF2\u7ECF\u626B\u63CF\u8FC7\u3002\u9ED1\u8272\u7684\u5BF9\u8C61\u4EE3\u8868\u5DF2\u7ECF\u626B\u63CF\u8FC7\uFF0C\u5B83\u662F\u5B89\u5168\u5B58\u6D3B\u7684\uFF0C\u5982\u679C\u6709\u5176\u4ED6\u5BF9\u8C61\u5F15\u7528\u6307\u5411\u4E86\u9ED1\u8272\u5BF9\u8C61\uFF0C\u65E0\u987B\u91CD\u65B0\u626B\u63CF\u4E00\u904D\u3002\u9ED1\u8272\u5BF9\u8C61\u4E0D\u53EF\u80FD\u76F4\u63A5\uFF08\u4E0D\u7ECF\u8FC7\u7070\u8272\u5BF9\u8C61\uFF09\u6307\u5411\u67D0\u4E2A\u767D\u8272\u5BF9\u8C61\u3002</li><li>\u7070\u8272\uFF1A\u8868\u793A\u5BF9\u8C61\u5DF2\u7ECF\u88AB\u5783\u573E\u6536\u96C6\u5668\u8BBF\u95EE\u8FC7\uFF0C\u4F46\u8FD9\u4E2A\u5BF9\u8C61\u4E0A\u81F3\u5C11\u5B58\u5728\u4E00\u4E2A\u5F15\u7528\u8FD8\u6CA1\u6709\u88AB\u626B\u63CF\u8FC7\u3002\u5173\u4E8E\u53EF\u8FBE\u6027\u5206\u6790\u7684\u626B\u63CF\u8FC7\u7A0B\uFF0C\u8BFB\u8005\u4E0D\u59A8\u53D1\u6325\u4E00\u4E0B\u60F3\u8C61\u529B\uFF0C\u628A\u5B83\u770B\u4F5C\u5BF9\u8C61\u56FE\u4E0A\u4E00\u80A1\u4EE5\u7070\u8272\u4E3A\u6CE2\u5CF0\u7684</li></ul><p>\u6CE2\u7EB9\u4ECE\u9ED1\u5411\u767D\u63A8\u8FDB\u7684\u8FC7\u7A0B\uFF0C\u5982\u679C\u7528\u6237\u7EBF\u7A0B\u6B64\u65F6\u662F\u51BB\u7ED3\u7684\uFF0C\u53EA\u6709\u6536\u96C6\u5668\u7EBF\u7A0B\u5728\u5DE5\u4F5C\uFF0C\u90A3\u4E0D\u4F1A\u6709\u4EFB\u4F55\u95EE\u9898\u3002\u4F46\u5982\u679C\u7528\u6237\u7EBF\u7A0B\u4E0E\u6536\u96C6\u5668\u662F\u5E76\u53D1\u5DE5\u4F5C\u5462\uFF1F\u6536\u96C6\u5668\u5728\u5BF9\u8C61\u56FE\u4E0A\u6807\u8BB0\u989C\u8272\uFF0C\u540C\u65F6\u7528\u6237\u7EBF\u7A0B\u5728\u4FEE\u6539\u5F15\u7528\u5173\u7CFB\u2014\u2014\u5373\u4FEE\u6539\u5BF9\u8C61\u56FE\u7684\u7ED3\u6784\uFF0C\u8FD9\u6837\u53EF\u80FD\u51FA\u73B0\u4E24\u79CD\u540E\u679C\u3002\u4E00\u79CD\u662F\u628A\u539F\u672C\u6D88\u4EA1\u7684\u5BF9\u8C61\u9519\u8BEF\u6807\u8BB0\u4E3A\u5B58\u6D3B\uFF0C\u8FD9\u4E0D\u662F\u597D\u4E8B\uFF0C\u4F46\u5176\u5B9E\u662F\u53EF\u4EE5\u5BB9\u5FCD\u7684\uFF0C\u53EA\u4E0D\u8FC7\u4EA7\u751F\u4E86\u4E00\u70B9\u9003\u8FC7\u672C\u6B21\u6536\u96C6\u7684\u6D6E\u52A8\u5783\u573E\u800C\u5DF2\uFF0C\u4E0B\u6B21\u6536\u96C6\u6E05\u7406\u6389\u5C31\u597D\u3002\u53E6\u4E00\u79CD\u662F\u628A\u539F\u672C\u5B58\u6D3B\u7684\u5BF9\u8C61\u9519\u8BEF\u6807\u8BB0\u4E3A\u5DF2\u6D88\u4EA1\uFF0C\u8FD9\u5C31\u662F\u975E\u5E38\u81F4\u547D\u7684\u540E\u679C\u4E86\uFF0C\u7A0B\u5E8F\u80AF\u5B9A\u4F1A\u56E0\u6B64\u53D1\u751F\u9519\u8BEF\uFF0C\u4E0B\u9762\u88683-1 \u6F14\u793A\u4E86\u8FD9\u6837\u7684\u81F4\u547D\u9519\u8BEF\u5177\u4F53\u662F\u5982\u4F55\u4EA7\u751F\u7684\u3002</p><p>\u88683-1 \u5E76\u53D1\u51FA\u73B0 \u201C\u5BF9\u8C61\u6D88\u5931\u201D \u95EE\u9898\u7684\u793A\u610F<sup class="footnote-ref"><a href="#footnote17">[17]</a><a class="footnote-anchor" id="footnote-ref17"></a></sup></p><p><img src="`+f+'" alt="\u88683-1" loading="lazy"></p><p>Wilson \u4E8E 1994 \u5E74\u5728\u7406\u8BBA\u4E0A\u8BC1\u660E\u4E86\uFF0C\u5F53\u4E14\u4EC5\u5F53\u4EE5\u4E0B\u4E24\u4E2A\u6761\u4EF6\u540C\u65F6\u6EE1\u8DB3\u65F6\uFF0C\u4F1A\u4EA7\u751F \u201C\u5BF9\u8C61\u6D88\u5931\u201D \u7684\u95EE\u9898\uFF0C\u5373\u539F\u672C\u5E94\u8BE5\u662F\u9ED1\u8272\u7684\u5BF9\u8C61\u88AB\u8BEF\u6807\u4E3A\u767D\u8272\uFF1A</p><ul><li><p>\u8D4B\u503C\u5668\u63D2\u5165\u4E86\u4E00\u6761\u6216\u591A\u6761\u4ECE\u9ED1\u8272\u5BF9\u8C61\u5230\u767D\u8272\u5BF9\u8C61\u7684\u65B0\u5F15\u7528\uFF1B</p></li><li><p>\u8D4B\u503C\u5668\u5220\u9664\u4E86\u5168\u90E8\u4ECE\u7070\u8272\u5BF9\u8C61\u5230\u8BE5\u767D\u8272\u5BF9\u8C61\u7684\u76F4\u63A5\u6216\u95F4\u63A5\u5F15\u7528\u3002</p></li></ul><p>\u56E0\u6B64\uFF0C\u6211\u4EEC\u8981\u89E3\u51B3\u5E76\u53D1\u626B\u63CF\u65F6\u7684\u5BF9\u8C61\u6D88\u5931\u95EE\u9898\uFF0C\u53EA\u9700\u7834\u574F\u8FD9\u4E24\u4E2A\u6761\u4EF6\u7684\u4EFB\u610F\u4E00\u4E2A\u5373\u53EF\u3002\u7531\u6B64\u5206\u522B\u4EA7\u751F\u4E86\u4E24\u79CD\u89E3\u51B3\u65B9\u6848\uFF1A\u589E\u91CF\u66F4\u65B0\uFF08Incremental Update\uFF09\u548C\u539F\u59CB\u5FEB\u7167\uFF08Snapshot At The Beginning\uFF0CSATB\uFF09\u3002</p><p>\u589E\u91CF\u66F4\u65B0\u8981\u7834\u574F\u7684\u662F\u7B2C\u4E00\u4E2A\u6761\u4EF6\uFF0C\u5F53\u9ED1\u8272\u5BF9\u8C61\u63D2\u5165\u65B0\u7684\u6307\u5411\u767D\u8272\u5BF9\u8C61\u7684\u5F15\u7528\u5173\u7CFB\u65F6\uFF0C\u5C31\u5C06\u8FD9\u4E2A\u65B0\u63D2\u5165\u7684\u5F15\u7528\u8BB0\u5F55\u4E0B\u6765\uFF0C\u7B49\u5E76\u53D1\u626B\u63CF\u7ED3\u675F\u4E4B\u540E\uFF0C\u518D\u5C06\u8FD9\u4E9B\u8BB0\u5F55\u8FC7\u7684\u5F15\u7528\u5173\u7CFB\u4E2D\u7684\u9ED1\u8272\u5BF9\u8C61\u4E3A\u6839\uFF0C\u91CD\u65B0\u626B\u63CF\u4E00\u6B21\u3002\u8FD9\u53EF\u4EE5\u7B80\u5316\u7406\u89E3\u4E3A\uFF0C\u9ED1\u8272\u5BF9\u8C61\u4E00\u65E6\u65B0\u63D2\u5165\u4E86\u6307\u5411\u767D\u8272\u5BF9\u8C61\u7684\u5F15\u7528\u4E4B\u540E\uFF0C\u5B83\u5C31\u53D8\u56DE\u7070\u8272\u5BF9\u8C61\u4E86\u3002</p><p>\u539F\u59CB\u5FEB\u7167\u8981\u7834\u574F\u7684\u662F\u7B2C\u4E8C\u4E2A\u6761\u4EF6\uFF0C\u5F53\u7070\u8272\u5BF9\u8C61\u8981\u5220\u9664\u6307\u5411\u767D\u8272\u5BF9\u8C61\u7684\u5F15\u7528\u5173\u7CFB\u65F6\uFF0C\u5C31\u5C06\u8FD9\u4E2A\u8981\u5220\u9664\u7684\u5F15\u7528\u8BB0\u5F55\u4E0B\u6765\uFF0C\u5728\u5E76\u53D1\u626B\u63CF\u7ED3\u675F\u4E4B\u540E\uFF0C\u518D\u5C06\u8FD9\u4E9B\u8BB0\u5F55\u8FC7\u7684\u5F15\u7528\u5173\u7CFB\u4E2D\u7684\u7070\u8272\u5BF9\u8C61\u4E3A\u6839\uFF0C\u91CD\u65B0\u626B\u63CF\u4E00\u6B21\u3002\u8FD9\u4E5F\u53EF\u4EE5\u7B80\u5316\u7406\u89E3\u4E3A\uFF0C\u65E0\u8BBA\u5F15\u7528\u5173\u7CFB\u5220\u9664\u4E0E\u5426\uFF0C\u90FD\u4F1A\u6309\u7167\u521A\u521A\u5F00\u59CB\u626B\u63CF\u90A3\u4E00\u523B\u7684\u5BF9\u8C61\u56FE\u5FEB\u7167\u6765\u8FDB\u884C\u641C\u7D22\u3002</p><p>\u4EE5\u4E0A\u65E0\u8BBA\u662F\u5BF9\u5F15\u7528\u5173\u7CFB\u8BB0\u5F55\u7684\u63D2\u5165\u8FD8\u662F\u5220\u9664\uFF0C\u865A\u62DF\u673A\u7684\u8BB0\u5F55\u64CD\u4F5C\u90FD\u662F\u901A\u8FC7\u5199\u5C4F\u969C\u5B9E\u73B0\u7684\u3002\u5728 HotSpot \u865A\u62DF\u673A\u4E2D\uFF0C\u589E\u91CF\u66F4\u65B0\u548C\u539F\u59CB\u5FEB\u7167\u8FD9\u4E24\u79CD\u89E3\u51B3\u65B9\u6848\u90FD\u6709\u5B9E\u9645\u5E94\u7528\uFF0C\u8B6C\u5982\uFF0CCMS \u662F\u57FA\u4E8E\u589E\u91CF\u66F4\u65B0\u6765\u505A\u5E76\u53D1\u6807\u8BB0\u7684\uFF0CG1\u3001Shenandoah \u5219\u662F\u7528\u539F\u59CB\u5FEB\u7167\u6765\u5B9E\u73B0\u3002</p><p>\u5230\u8FD9\u91CC\uFF0C\u7B14\u8005\u7B80\u8981\u4ECB\u7ECD\u4E86 HotSpot \u865A\u62DF\u673A\u5982\u4F55\u53D1\u8D77\u5185\u5B58\u56DE\u6536\u3001\u5982\u4F55\u52A0\u901F\u5185\u5B58\u56DE\u6536\uFF0C\u4EE5\u53CA\u5982\u4F55\u4FDD\u8BC1\u56DE\u6536\u6B63\u786E\u6027\u7B49\u95EE\u9898\uFF0C\u4F46\u662F\u865A\u62DF\u673A\u5982\u4F55\u5177\u4F53\u5730\u8FDB\u884C\u5185\u5B58\u56DE\u6536\u52A8\u4F5C\u4ECD\u7136\u672A\u6D89\u53CA\u3002\u56E0\u4E3A\u5185\u5B58\u56DE\u6536\u5982\u4F55\u8FDB\u884C\u662F\u7531\u865A\u62DF\u673A\u6240\u91C7\u7528\u54EA\u4E00\u6B3E\u5783\u573E\u6536\u96C6\u5668\u6240\u51B3\u5B9A\u7684\uFF0C\u800C\u901A\u5E38\u865A\u62DF\u673A\u4E2D\u5F80\u5F80\u6709\u591A\u79CD\u5783\u573E\u6536\u96C6\u5668\uFF0C\u4E0B\u9762\u7B14\u8005\u5C06\u9010\u4E00\u4ECB\u7ECD HotSpot \u865A\u62DF\u673A\u4E2D\u51FA\u73B0\u8FC7\u7684\u5783\u573E\u6536\u96C6\u5668\u3002</p><h2 id="_3-5-\u7ECF\u5178\u5783\u573E\u6536\u96C6\u5668" tabindex="-1"><a class="header-anchor" href="#_3-5-\u7ECF\u5178\u5783\u573E\u6536\u96C6\u5668" aria-hidden="true">#</a> 3.5 \u7ECF\u5178\u5783\u573E\u6536\u96C6\u5668</h2><p>\u5982\u679C\u8BF4\u6536\u96C6\u7B97\u6CD5\u662F\u5185\u5B58\u56DE\u6536\u7684\u65B9\u6CD5\u8BBA\uFF0C\u90A3\u5783\u573E\u6536\u96C6\u5668\u5C31\u662F\u5185\u5B58\u56DE\u6536\u7684\u5B9E\u8DF5\u8005\u3002\u300AJava \u865A\u62DF\u673A\u89C4\u8303\u300B\u4E2D\u5BF9\u5783\u573E\u6536\u96C6\u5668\u5E94\u8BE5\u5982\u4F55\u5B9E\u73B0\u5E76\u6CA1\u6709\u505A\u51FA\u4EFB\u4F55\u89C4\u5B9A\uFF0C\u56E0\u6B64\u4E0D\u540C\u7684\u5382\u5546\u3001\u4E0D\u540C\u7248\u672C\u7684\u865A\u62DF\u673A\u6240\u5305\u542B\u7684\u5783\u573E\u6536\u96C6\u5668\u90FD\u53EF\u80FD\u4F1A\u6709\u5F88\u5927\u5DEE\u522B\uFF0C\u4E0D\u540C\u7684\u865A\u62DF\u673A\u4E00\u822C\u4E5F\u90FD\u4F1A\u63D0\u4F9B\u5404\u79CD\u53C2\u6570\u4F9B\u7528\u6237\u6839\u636E\u81EA\u5DF1\u7684\u5E94\u7528\u7279\u70B9\u548C\u8981\u6C42\u7EC4\u5408\u51FA\u5404\u4E2A\u5185\u5B58\u5206\u4EE3\u6240\u4F7F\u7528\u7684\u6536\u96C6\u5668\u3002</p><p>\u672C\u8282\u6807\u9898\u4E2D \u201C\u7ECF\u5178\u201D \u4E8C\u5B57\u5E76\u975E\u60C5\u6000\uFF0C\u5B83\u5176\u5B9E\u662F\u8BA8\u8BBA\u8303\u56F4\u7684\u9650\u5B9A\u8BED\uFF0C\u8FD9\u91CC\u8BA8\u8BBA\u7684\u662F\u5728 JDK 7 Update 4 \u4E4B\u540E\uFF08\u5728\u8FD9\u4E2A\u7248\u672C\u4E2D\u6B63\u5F0F\u63D0\u4F9B\u4E86\u5546\u7528\u7684 G1 \u6536\u96C6\u5668\uFF0C\u6B64\u524D G1 \u4ECD\u5904\u4E8E\u5B9E\u9A8C\u72B6\u6001\uFF09\u3001JDK 11 \u6B63\u5F0F\u53D1\u5E03\u4E4B\u524D\uFF0COracleJDK \u4E2D\u7684 HotSpot \u865A\u62DF\u673A<sup class="footnote-ref"><a href="#footnote18">[18]</a><a class="footnote-anchor" id="footnote-ref18"></a></sup>\u6240\u5305\u542B\u7684\u5168\u90E8\u53EF\u7528\u7684\u5783\u573E\u6536\u96C6\u5668\u3002\u4F7F\u7528 \u201C\u7ECF\u5178\u201D \u4E8C\u5B57\u662F\u4E3A\u4E86\u4E0E\u51E0\u6B3E\u76EE\u524D\u4ECD\u5904\u4E8E\u5B9E\u9A8C\u72B6\u6001\uFF0C\u4F46\u6267\u884C\u6548\u679C\u4E0A\u6709\u9769\u547D\u6027\u6539\u8FDB\u7684\u9AD8\u6027\u80FD\u4F4E\u5EF6\u8FDF\u6536\u96C6\u5668\u533A\u5206\u5F00\u6765\uFF0C\u8FD9\u4E9B\u7ECF\u5178\u7684\u6536\u96C6\u5668\u5C3D\u7BA1\u5DF2\u7ECF\u7B97\u4E0D\u4E0A\u662F\u6700\u5148\u8FDB\u7684\u6280\u672F\uFF0C\u4F46\u5B83\u4EEC\u66FE\u5728\u5B9E\u8DF5\u4E2D\u5343\u9524\u767E\u70BC\uFF0C\u8DB3\u591F\u6210\u719F\uFF0C\u57FA\u672C\u4E0A\u53EF\u8BA4\u4E3A\u662F\u73B0\u5728\u5230\u672A\u6765\u4E24\u3001\u4E09\u5E74\u5185\uFF0C\u80FD\u591F\u5728\u5546\u7528\u751F\u4EA7\u73AF\u5883\u4E0A\u653E\u5FC3\u4F7F\u7528\u7684\u5168\u90E8\u5783\u573E\u6536\u96C6\u5668\u4E86\u3002\u5404\u6B3E\u7ECF\u5178\u6536\u96C6\u5668\u4E4B\u95F4\u7684\u5173\u7CFB\u5982\u56FE3-6 \u6240\u793A\u3002</p><p><img src="'+h+'" alt="\u56FE3-6" loading="lazy"></p><p>\u56FE3-6 HotSpot \u865A\u62DF\u673A\u7684\u5783\u573E\u6536\u96C6\u5668<sup class="footnote-ref"><a href="#footnote19">[19]</a><a class="footnote-anchor" id="footnote-ref19"></a></sup></p><p>\u56FE3-6 \u5C55\u793A\u4E86\u4E03\u79CD\u4F5C\u7528\u4E8E\u4E0D\u540C\u5206\u4EE3\u7684\u6536\u96C6\u5668\uFF0C\u5982\u679C\u4E24\u4E2A\u6536\u96C6\u5668\u4E4B\u95F4\u5B58\u5728\u8FDE\u7EBF\uFF0C\u5C31\u8BF4\u660E\u5B83\u4EEC\u53EF\u4EE5\u642D\u914D\u4F7F\u7528<sup class="footnote-ref"><a href="#footnote20">[20]</a><a class="footnote-anchor" id="footnote-ref20"></a></sup>\uFF0C\u56FE\u4E2D\u6536\u96C6\u5668\u6240\u5904\u7684\u533A\u57DF\uFF0C\u5219\u8868\u793A\u5B83\u662F\u5C5E\u4E8E\u65B0\u751F\u4EE3\u6536\u96C6\u5668\u6291\u6216\u662F\u8001\u5E74\u4EE3\u6536\u96C6\u5668\u3002\u63A5\u4E0B\u6765\u7B14\u8005\u5C06\u9010\u4E00\u4ECB\u7ECD\u8FD9\u4E9B\u6536\u96C6\u5668\u7684\u76EE\u6807\u3001\u7279\u6027\u3001\u539F\u7406\u548C\u4F7F\u7528\u573A\u666F\uFF0C\u5E76\u91CD\u70B9\u5206\u6790 CMS \u548C G1 \u8FD9\u4E24\u6B3E\u76F8\u5BF9\u590D\u6742\u800C\u53C8\u5E7F\u6CDB\u4F7F\u7528\u7684\u6536\u96C6\u5668\uFF0C\u6DF1\u5165\u4E86\u89E3\u5B83\u4EEC\u7684\u90E8\u5206\u8FD0\u4F5C\u7EC6\u8282\u3002</p><p>\u5728\u4ECB\u7ECD\u8FD9\u4E9B\u6536\u96C6\u5668\u5404\u81EA\u7684\u7279\u6027\u4E4B\u524D\uFF0C\u8BA9\u6211\u4EEC\u5148\u6765\u660E\u786E\u4E00\u4E2A\u89C2\u70B9\uFF1A\u867D\u7136\u6211\u4EEC\u4F1A\u5BF9\u5404\u4E2A\u6536\u96C6\u5668\u8FDB\u884C\u6BD4\u8F83\uFF0C\u4F46\u5E76\u975E\u4E3A\u4E86\u6311\u9009\u4E00\u4E2A\u6700\u597D\u7684\u6536\u96C6\u5668\u51FA\u6765\uFF0C\u867D\u7136\u5783\u573E\u6536\u96C6\u5668\u7684\u6280\u672F\u5728\u4E0D\u65AD\u8FDB\u6B65\uFF0C\u4F46\u76F4\u5230\u73B0\u5728\u8FD8\u6CA1\u6709\u6700\u597D\u7684\u6536\u96C6\u5668\u51FA\u73B0\uFF0C\u66F4\u52A0\u4E0D\u5B58\u5728 \u201C\u4E07\u80FD\u201D \u7684\u6536\u96C6\u5668\uFF0C\u6240\u4EE5\u6211\u4EEC\u9009\u62E9\u7684\u53EA\u662F\u5BF9\u5177\u4F53\u5E94\u7528\u6700\u5408\u9002\u7684\u6536\u96C6\u5668\u3002</p><p>\u8FD9\u70B9\u4E0D\u9700\u8981\u591A\u52A0\u8BBA\u8FF0\u5C31\u80FD\u8BC1\u660E\uFF1A\u5982\u679C\u6709\u4E00\u79CD\u653E\u4E4B\u56DB\u6D77\u7686\u51C6\u3001\u4EFB\u4F55\u573A\u666F\u4E0B\u90FD\u9002\u7528\u7684\u5B8C\u7F8E\u6536\u96C6\u5668\u5B58\u5728\uFF0CHotSpot \u865A\u62DF\u673A\u5B8C\u5168\u6CA1\u5FC5\u8981\u5B9E\u73B0\u90A3\u4E48\u591A\u79CD\u4E0D\u540C\u7684\u6536\u96C6\u5668\u4E86\u3002</p><h3 id="_3-5-1-serial-\u6536\u96C6\u5668" tabindex="-1"><a class="header-anchor" href="#_3-5-1-serial-\u6536\u96C6\u5668" aria-hidden="true">#</a> 3.5.1 Serial \u6536\u96C6\u5668</h3><p>Serial \u6536\u96C6\u5668\u662F\u6700\u57FA\u7840\u3001\u5386\u53F2\u6700\u60A0\u4E45\u7684\u6536\u96C6\u5668\uFF0C\u66FE\u7ECF\uFF08\u5728 JDK 1.3.1 \u4E4B\u524D\uFF09\u662F HotSpot \u865A\u62DF\u673A\u65B0\u751F\u4EE3\u6536\u96C6\u5668\u7684\u552F\u4E00\u9009\u62E9\u3002\u5927\u5BB6\u53EA\u770B\u540D\u5B57\u5C31\u80FD\u591F\u731C\u5230\uFF0C\u8FD9\u4E2A\u6536\u96C6\u5668\u662F\u4E00\u4E2A\u5355\u7EBF\u7A0B\u5DE5\u4F5C\u7684\u6536\u96C6\u5668\uFF0C\u4F46\u5B83\u7684 \u201C\u5355\u7EBF\u7A0B\u201D \u7684\u610F\u4E49\u5E76\u4E0D\u4EC5\u4EC5\u662F\u8BF4\u660E\u5B83\u53EA\u4F1A\u4F7F\u7528\u4E00\u4E2A\u5904\u7406\u5668\u6216\u4E00\u6761\u6536\u96C6\u7EBF\u7A0B\u53BB\u5B8C\u6210\u5783\u573E\u6536\u96C6\u5DE5\u4F5C\uFF0C\u66F4\u91CD\u8981\u7684\u662F\u5F3A\u8C03\u5728\u5B83\u8FDB\u884C\u5783\u573E\u6536\u96C6\u65F6\uFF0C\u5FC5\u987B\u6682\u505C\u5176\u4ED6\u6240\u6709\u5DE5\u4F5C\u7EBF\u7A0B\uFF0C\u76F4\u5230\u5B83\u6536\u96C6\u7ED3\u675F\u3002&quot;Stop The World&quot; \u8FD9\u4E2A\u8BCD\u8BED\u4E5F\u8BB8\u542C\u8D77\u6765\u5F88\u9177\uFF0C\u4F46\u8FD9\u9879\u5DE5\u4F5C\u662F\u7531\u865A\u62DF\u673A\u5728\u540E\u53F0\u81EA\u52A8\u53D1\u8D77\u548C\u81EA\u52A8\u5B8C\u6210\u7684\uFF0C\u5728\u7528\u6237\u4E0D\u53EF\u77E5\u3001\u4E0D\u53EF\u63A7\u7684\u60C5\u51B5\u4E0B\u628A\u7528\u6237\u7684\u6B63\u5E38\u5DE5\u4F5C\u7684\u7EBF\u7A0B\u5168\u90E8\u505C\u6389\uFF0C\u8FD9\u5BF9\u5F88\u591A\u5E94\u7528\u6765\u8BF4\u90FD\u662F\u4E0D\u80FD\u63A5\u53D7\u7684\u3002\u8BFB\u8005\u4E0D\u59A8\u8BD5\u60F3\u4E00\u4E0B\uFF0C\u8981\u662F\u4F60\u7684\u7535\u8111\u6BCF\u8FD0\u884C\u4E00\u4E2A\u5C0F\u65F6\u5C31\u4F1A\u6682\u505C\u54CD\u5E94\u4E94\u5206\u949F\uFF0C\u4F60\u4F1A\u6709\u4EC0\u4E48\u6837\u7684\u5FC3\u60C5\uFF1F\u56FE3-7 \u793A\u610F\u4E86 Serial / Serial Old \u6536\u96C6\u5668\u7684\u8FD0\u884C\u8FC7\u7A0B\u3002</p><p><img src="'+m+'" alt="\u56FE3-7" loading="lazy"></p><p>\u56FE3-7 Serial / Serial Old \u6536\u96C6\u5668\u8FD0\u884C\u793A\u610F\u56FE</p><p>\u5BF9\u4E8E &quot;Stop The World&quot; \u5E26\u7ED9\u7528\u6237\u7684\u6076\u52A3\u4F53\u9A8C\uFF0C\u65E9\u671F HotSpot \u865A\u62DF\u673A\u7684\u8BBE\u8BA1\u8005\u4EEC\u8868\u793A\u5B8C\u5168\u7406\u89E3\uFF0C\u4F46\u4E5F\u540C\u65F6\u8868\u793A\u975E\u5E38\u59D4\u5C48\uFF1A\u201C\u4F60\u5988\u5988\u5728\u7ED9\u4F60\u6253\u626B\u623F\u95F4\u7684\u65F6\u5019\uFF0C\u80AF\u5B9A\u4E5F\u4F1A\u8BA9\u4F60\u8001\u8001\u5B9E\u5B9E\u5730\u5728\u6905\u5B50\u4E0A\u6216\u8005\u623F\u95F4\u5916\u5F85\u7740\uFF0C\u5982\u679C\u5979\u4E00\u8FB9\u6253\u626B\uFF0C\u4F60\u4E00\u8FB9\u4E71\u6254\u7EB8\u5C51\uFF0C\u8FD9\u623F\u95F4\u8FD8\u80FD\u6253\u626B\u5B8C\uFF1F\u201D \u8FD9\u786E\u5B9E\u662F\u4E00\u4E2A\u5408\u60C5\u5408\u7406\u7684\u77DB\u76FE\uFF0C\u867D\u7136\u5783\u573E\u6536\u96C6\u8FD9\u9879\u5DE5\u4F5C\u542C\u8D77\u6765\u548C\u6253\u626B\u623F\u95F4\u5C5E\u4E8E\u4E00\u4E2A\u5DE5\u79CD\uFF0C\u4F46\u5B9E\u9645\u4E0A\u80AF\u5B9A\u8FD8\u8981\u6BD4\u6253\u626B\u623F\u95F4\u590D\u6742\u5F97\u591A\uFF01</p><p>\u4ECE JDK 1.3 \u5F00\u59CB\uFF0C\u4E00\u76F4\u5230\u73B0\u5728\u6700\u65B0\u7684 JDK 13\uFF0CHotSpot \u865A\u62DF\u673A\u5F00\u53D1\u56E2\u961F\u4E3A\u6D88\u9664\u6216\u8005\u964D\u4F4E\u7528\u6237\u7EBF\u7A0B\u56E0\u5783\u573E\u6536\u96C6\u800C\u5BFC\u81F4\u505C\u987F\u7684\u52AA\u529B\u4E00\u76F4\u6301\u7EED\u8FDB\u884C\u7740\uFF0C\u4ECE Serial \u6536\u96C6\u5668\u5230 Parallel \u6536\u96C6\u5668\uFF0C\u518D\u5230 Concurrent Mark Sweep\uFF08CMS\uFF09\u548C Garbage First\uFF08G1\uFF09\u6536\u96C6\u5668\uFF0C\u6700\u7EC8\u81F3\u73B0\u5728\u5783\u573E\u6536\u96C6\u5668\u7684\u6700\u524D\u6CBF\u6210\u679C Shenandoah \u548C ZGC \u7B49\uFF0C\u6211\u4EEC\u770B\u5230\u4E86\u4E00\u4E2A\u4E2A\u8D8A\u6765\u8D8A\u6784\u601D\u7CBE\u5DE7\uFF0C\u8D8A\u6765\u8D8A\u4F18\u79C0\uFF0C\u4E5F\u8D8A\u6765\u8D8A\u590D\u6742\u7684\u5783\u573E\u6536\u96C6\u5668\u4E0D\u65AD\u6D8C\u73B0\uFF0C\u7528\u6237\u7EBF\u7A0B\u7684\u505C\u987F\u65F6\u95F4\u5728\u6301\u7EED\u7F29\u77ED\uFF0C\u4F46\u662F\u4ECD\u7136\u6CA1\u6709\u529E\u6CD5\u5F7B\u5E95\u6D88\u9664\uFF08\u8FD9\u91CC\u4E0D\u53BB\u8BA8\u8BBA RTSJ \u4E2D\u7684\u6536\u96C6\u5668\uFF09\uFF0C\u63A2\u7D22\u66F4\u4F18\u79C0\u5783\u573E\u6536\u96C6\u5668\u7684\u5DE5\u4F5C\u4ECD\u5728\u7EE7\u7EED\u3002</p><p>\u5199\u5230\u8FD9\u91CC\uFF0C\u7B14\u8005\u4F3C\u4E4E\u5DF2\u7ECF\u628A Serial \u6536\u96C6\u5668\u63CF\u8FF0\u6210\u4E00\u4E2A\u6700\u65E9\u51FA\u73B0\uFF0C\u4F46\u76EE\u524D\u5DF2\u7ECF\u8001\u800C\u65E0\u7528\uFF0C\u98DF\u4E4B\u65E0\u5473\uFF0C\u5F03\u4E4B\u53EF\u60DC\u7684 \u201C\u9E21\u808B\u201D \u4E86\uFF0C\u4F46\u4E8B\u5B9E\u4E0A\uFF0C\u8FC4\u4ECA\u4E3A\u6B62\uFF0C\u5B83\u4F9D\u7136\u662F HotSpot \u865A\u62DF\u673A\u8FD0\u884C\u5728\u5BA2\u6237\u7AEF\u6A21\u5F0F\u4E0B\u7684\u9ED8\u8BA4\u65B0\u751F\u4EE3\u6536\u96C6\u5668\uFF0C\u6709\u7740\u4F18\u4E8E\u5176\u4ED6\u6536\u96C6\u5668\u7684\u5730\u65B9\uFF0C\u90A3\u5C31\u662F\u7B80\u5355\u800C\u9AD8\u6548\uFF08\u4E0E\u5176\u4ED6\u6536\u96C6\u5668\u7684\u5355\u7EBF\u7A0B\u76F8\u6BD4\uFF09\uFF0C\u5BF9\u4E8E\u5185\u5B58\u8D44\u6E90\u53D7\u9650\u7684\u73AF\u5883\uFF0C\u5B83\u662F\u6240\u6709\u6536\u96C6\u5668\u91CC\u989D\u5916\u5185\u5B58\u6D88\u8017\uFF08Memory Footprint\uFF09<sup class="footnote-ref"><a href="#footnote21">[21]</a><a class="footnote-anchor" id="footnote-ref21"></a></sup>\u6700\u5C0F\u7684\uFF1B\u5BF9\u4E8E\u5355\u6838\u5904\u7406\u5668\u6216\u5904\u7406\u5668\u6838\u5FC3\u6570\u8F83\u5C11\u7684\u73AF\u5883\u6765\u8BF4\uFF0CSerial \u6536\u96C6\u5668\u7531\u4E8E\u6CA1\u6709\u7EBF\u7A0B\u4EA4\u4E92\u7684\u5F00\u9500\uFF0C\u4E13\u5FC3\u505A\u5783\u573E\u6536\u96C6\u81EA\u7136\u53EF\u4EE5\u83B7\u5F97\u6700\u9AD8\u7684\u5355\u7EBF\u7A0B\u6536\u96C6\u6548\u7387\u3002\u5728\u7528\u6237\u684C\u9762\u7684\u5E94\u7528\u573A\u666F\u4EE5\u53CA\u8FD1\u5E74\u6765\u6D41\u884C\u7684\u90E8\u5206\u5FAE\u670D\u52A1\u5E94\u7528\u4E2D\uFF0C\u5206\u914D\u7ED9\u865A\u62DF\u673A\u7BA1\u7406\u7684\u5185\u5B58\u4E00\u822C\u6765\u8BF4\u5E76\u4E0D\u4F1A\u7279\u522B\u5927\uFF0C\u6536\u96C6\u51E0\u5341\u5146\u751A\u81F3\u4E00\u4E24\u767E\u5146\u7684\u65B0\u751F\u4EE3\uFF08\u4EC5\u4EC5\u662F\u6307\u65B0\u751F\u4EE3\u4F7F\u7528\u7684\u5185\u5B58\uFF0C\u684C\u9762\u5E94\u7528\u751A\u5C11\u8D85\u8FC7\u8FD9\u4E2A\u5BB9\u91CF\uFF09\uFF0C\u5783\u573E\u6536\u96C6\u7684\u505C\u987F\u65F6\u95F4\u5B8C\u5168\u53EF\u4EE5\u63A7\u5236\u5728\u5341\u51E0\u3001\u51E0\u5341\u6BEB\u79D2\uFF0C\u6700\u591A\u4E00\u767E\u591A\u6BEB\u79D2\u4EE5\u5185\uFF0C\u53EA\u8981\u4E0D\u662F\u9891\u7E41\u53D1\u751F\u6536\u96C6\uFF0C\u8FD9\u70B9\u505C\u987F\u65F6\u95F4\u5BF9\u8BB8\u591A\u7528\u6237\u6765\u8BF4\u662F\u5B8C\u5168\u53EF\u4EE5\u63A5\u53D7\u7684\u3002\u6240\u4EE5\uFF0CSerial \u6536\u96C6\u5668\u5BF9\u4E8E\u8FD0\u884C\u5728\u5BA2\u6237\u7AEF\u6A21\u5F0F\u4E0B\u7684\u865A\u62DF\u673A\u6765\u8BF4\u662F\u4E00\u4E2A\u5F88\u597D\u7684\u9009\u62E9\u3002</p><h3 id="_3-5-2-parnew-\u6536\u96C6\u5668" tabindex="-1"><a class="header-anchor" href="#_3-5-2-parnew-\u6536\u96C6\u5668" aria-hidden="true">#</a> 3.5.2 ParNew \u6536\u96C6\u5668</h3><p>ParNew \u6536\u96C6\u5668\u5B9E\u8D28\u4E0A\u662F Serial \u6536\u96C6\u5668\u7684\u591A\u7EBF\u7A0B\u5E76\u884C\u7248\u672C\uFF0C\u9664\u4E86\u540C\u65F6\u4F7F\u7528\u591A\u6761\u7EBF\u7A0B\u8FDB\u884C\u5783\u573E\u6536\u96C6\u4E4B\u5916\uFF0C\u5176\u4F59\u7684\u884C\u4E3A\u5305\u62EC Serial \u6536\u96C6\u5668\u53EF\u7528\u7684\u6240\u6709\u63A7\u5236\u53C2\u6570\uFF08\u4F8B\u5982\uFF1A-XX:SurvivorRatio\u3001-XX:PretenureSizeThreshold\u3001-XX:HandlePromotionFailure \u7B49\uFF09\u3001\u6536\u96C6\u7B97\u6CD5\u3001Stop The World\u3001\u5BF9\u8C61\u5206\u914D\u89C4\u5219\u3001\u56DE\u6536\u7B56\u7565\u7B49\u90FD\u4E0E Serial \u6536\u96C6\u5668\u5B8C\u5168\u4E00\u81F4\uFF0C\u5728\u5B9E\u73B0\u4E0A\u8FD9\u4E24\u79CD\u6536\u96C6\u5668\u4E5F\u5171\u7528\u4E86\u76F8\u5F53\u591A\u7684\u4EE3\u7801\u3002ParNew \u6536\u96C6\u5668\u7684\u5DE5\u4F5C\u8FC7\u7A0B\u5982\u56FE3-8 \u6240\u793A\u3002</p><p><img src="'+g+'" alt="\u56FE3-8" loading="lazy"></p><p>\u56FE3-8 ParNew / Serial Old \u6536\u96C6\u5668\u8FD0\u884C\u793A\u610F\u56FE</p><p>ParNew \u6536\u96C6\u5668\u9664\u4E86\u652F\u6301\u591A\u7EBF\u7A0B\u5E76\u884C\u6536\u96C6\u4E4B\u5916\uFF0C\u5176\u4ED6\u4E0E Serial \u6536\u96C6\u5668\u76F8\u6BD4\u5E76\u6CA1\u6709\u592A\u591A\u521B\u65B0\u4E4B\u5904\uFF0C\u4F46\u5B83\u5374\u662F\u4E0D\u5C11\u8FD0\u884C\u5728\u670D\u52A1\u7AEF\u6A21\u5F0F\u4E0B\u7684 HotSpot \u865A\u62DF\u673A\uFF0C\u5C24\u5176\u662F JDK 7 \u4E4B\u524D\u7684\u9057\u7559\u7CFB\u7EDF\u4E2D\u9996\u9009\u7684\u65B0\u751F\u4EE3\u6536\u96C6\u5668\uFF0C\u5176\u4E2D\u6709\u4E00\u4E2A\u4E0E\u529F\u80FD\u3001\u6027\u80FD\u65E0\u5173\u4F46\u5176\u5B9E\u5F88\u91CD\u8981\u7684\u539F\u56E0\u662F\uFF1A\u9664\u4E86 Serial \u6536\u96C6\u5668\u5916\uFF0C\u76EE\u524D\u53EA\u6709\u5B83\u80FD\u4E0E CMS \u6536\u96C6\u5668\u914D\u5408\u5DE5\u4F5C\u3002</p><p>\u5728 JDK 5 \u53D1\u5E03\u65F6\uFF0CHotSpot \u63A8\u51FA\u4E86\u4E00\u6B3E\u5728\u5F3A\u4EA4\u4E92\u5E94\u7528\u4E2D\u51E0\u4E4E\u53EF\u79F0\u4E3A\u5177\u6709\u5212\u65F6\u4EE3\u610F\u4E49\u7684\u5783\u573E\u6536\u96C6\u5668\u2014\u2014CMS \u6536\u96C6\u5668\u3002\u8FD9\u6B3E\u6536\u96C6\u5668\u662F HotSpot \u865A\u62DF\u673A\u4E2D\u7B2C\u4E00\u6B3E\u771F\u6B63\u610F\u4E49\u4E0A\u652F\u6301\u5E76\u53D1\u7684\u5783\u573E\u6536\u96C6\u5668\uFF0C\u5B83\u9996\u6B21\u5B9E\u73B0\u4E86\u8BA9\u5783\u573E\u6536\u96C6\u7EBF\u7A0B\u4E0E\u7528\u6237\u7EBF\u7A0B\uFF08\u57FA\u672C\u4E0A\uFF09\u540C\u65F6\u5DE5\u4F5C\u3002</p><p>\u9057\u61BE\u7684\u662F\uFF0CCMS \u4F5C\u4E3A\u8001\u5E74\u4EE3\u7684\u6536\u96C6\u5668\uFF0C\u5374\u65E0\u6CD5\u4E0E JDK 1.4.0 \u4E2D\u5DF2\u7ECF\u5B58\u5728\u7684\u65B0\u751F\u4EE3\u6536\u96C6\u5668 Parallel Scavenge \u914D\u5408\u5DE5\u4F5C<sup class="footnote-ref"><a href="#footnote22">[22]</a><a class="footnote-anchor" id="footnote-ref22"></a></sup>\uFF0C\u6240\u4EE5\u5728 JDK 5 \u4E2D\u4F7F\u7528 CMS \u6765\u6536\u96C6\u8001\u5E74\u4EE3\u7684\u65F6\u5019\uFF0C\u65B0\u751F\u4EE3\u53EA\u80FD\u9009\u62E9 ParNew \u6216\u8005 Serial \u6536\u96C6\u5668\u4E2D\u7684\u4E00\u4E2A\u3002ParNew \u6536\u96C6\u5668\u662F\u6FC0\u6D3B CMS \u540E\uFF08\u4F7F\u7528 -XX:+UseConcMarkSweepGC \u9009\u9879\uFF09\u7684\u9ED8\u8BA4\u65B0\u751F\u4EE3\u6536\u96C6\u5668\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528 -XX:+/-UseParNewGC \u9009\u9879\u6765\u5F3A\u5236\u6307\u5B9A\u6216\u8005\u7981\u7528\u5B83\u3002</p><p>\u53EF\u4EE5\u8BF4\u76F4\u5230 CMS \u7684\u51FA\u73B0\u624D\u5DE9\u56FA\u4E86 ParNew \u7684\u5730\u4F4D\uFF0C\u4F46\u6210\u4E5F\u8427\u4F55\u8D25\u4E5F\u8427\u4F55\uFF0C\u968F\u7740\u5783\u573E\u6536\u96C6\u5668\u6280\u672F\u7684\u4E0D\u65AD\u6539\u8FDB\uFF0C\u66F4\u5148\u8FDB\u7684 G1 \u6536\u96C6\u5668\u5E26\u7740 CMS \u7EE7\u627F\u8005\u548C\u66FF\u4EE3\u8005\u7684\u5149\u73AF\u767B\u573A\u3002G1 \u662F\u4E00\u4E2A\u9762\u5411\u5168\u5806\u7684\u6536\u96C6\u5668\uFF0C\u4E0D\u518D\u9700\u8981\u5176\u4ED6\u65B0\u751F\u4EE3\u6536\u96C6\u5668\u7684\u914D\u5408\u5DE5\u4F5C\u3002\u6240\u4EE5\u81EA JDK 9 \u5F00\u59CB\uFF0CParNew \u52A0 CMS \u6536\u96C6\u5668\u7684\u7EC4\u5408\u5C31\u4E0D\u518D\u662F\u5B98\u65B9\u63A8\u8350\u7684\u670D\u52A1\u7AEF\u6A21\u5F0F\u4E0B\u7684\u6536\u96C6\u5668\u89E3\u51B3\u65B9\u6848\u4E86\u3002\u5B98\u65B9\u5E0C\u671B\u5B83\u80FD\u5B8C\u5168\u88AB G1 \u6240\u53D6\u4EE3\uFF0C\u751A\u81F3\u8FD8\u53D6\u6D88\u4E86 ParNew \u52A0 Serial Old \u4EE5\u53CA Serial \u52A0 CMS \u8FD9\u4E24\u7EC4\u6536\u96C6\u5668\u7EC4\u5408\u7684\u652F\u6301\uFF08\u5176\u5B9E\u539F\u672C\u4E5F\u5F88\u5C11\u4EBA\u8FD9\u6837\u4F7F\u7528\uFF09\uFF0C\u5E76\u76F4\u63A5\u53D6\u6D88\u4E86 -XX:+UseParNewGC \u53C2\u6570\uFF0C\u8FD9\u610F\u5473\u7740 ParNew \u548C CMS \u4ECE\u6B64\u53EA\u80FD\u4E92\u76F8\u642D\u914D\u4F7F\u7528\uFF0C\u518D\u4E5F\u6CA1\u6709\u5176\u4ED6\u6536\u96C6\u5668\u80FD\u591F\u548C\u5B83\u4EEC\u914D\u5408\u4E86\u3002\u8BFB\u8005\u4E5F\u53EF\u4EE5\u7406\u89E3\u4E3A\u4ECE\u6B64\u4EE5\u540E\uFF0CParNew \u5408\u5E76\u5165 CMS\uFF0C\u6210\u4E3A\u5B83\u4E13\u95E8\u5904\u7406\u65B0\u751F\u4EE3\u7684\u7EC4\u6210\u90E8\u5206\u3002ParNew \u53EF\u4EE5\u8BF4\u662F HotSpot \u865A\u62DF\u673A\u4E2D\u7B2C\u4E00\u6B3E\u9000\u51FA\u5386\u53F2\u821E\u53F0\u7684\u5783\u573E\u6536\u96C6\u5668\u3002</p><p>ParNew \u6536\u96C6\u5668\u5728\u5355\u6838\u5FC3\u5904\u7406\u5668\u7684\u73AF\u5883\u4E2D\u7EDD\u5BF9\u4E0D\u4F1A\u6709\u6BD4 Serial \u6536\u96C6\u5668\u66F4\u597D\u7684\u6548\u679C\uFF0C\u751A\u81F3\u7531\u4E8E\u5B58\u5728\u7EBF\u7A0B\u4EA4\u4E92\u7684\u5F00\u9500\uFF0C\u8BE5\u6536\u96C6\u5668\u5728\u901A\u8FC7\u8D85\u7EBF\u7A0B\uFF08Hyper-Threading\uFF09\u6280\u672F\u5B9E\u73B0\u7684\u4F2A\u53CC\u6838\u5904\u7406\u5668\u73AF\u5883\u4E2D\u90FD\u4E0D\u80FD\u767E\u5206\u4E4B\u767E\u4FDD\u8BC1\u8D85\u8D8A Serial \u6536\u96C6\u5668\u3002\u5F53\u7136\uFF0C\u968F\u7740\u53EF\u4EE5\u88AB\u4F7F\u7528\u7684\u5904\u7406\u5668\u6838\u5FC3\u6570\u91CF\u7684\u589E\u52A0\uFF0CParNew \u5BF9\u4E8E\u5783\u573E\u6536\u96C6\u65F6\u7CFB\u7EDF\u8D44\u6E90\u7684\u9AD8\u6548\u5229\u7528\u8FD8\u662F\u5F88\u6709\u597D\u5904\u7684\u3002\u5B83\u9ED8\u8BA4\u5F00\u542F\u7684\u6536\u96C6\u7EBF\u7A0B\u6570\u4E0E\u5904\u7406\u5668\u6838\u5FC3\u6570\u91CF\u76F8\u540C\uFF0C\u5728\u5904\u7406\u5668\u6838\u5FC3\u975E\u5E38\u591A\uFF08\u8B6C\u5982 32 \u4E2A\uFF0C\u73B0\u5728 CPU \u90FD\u662F\u591A\u6838\u52A0\u8D85\u7EBF\u7A0B\u8BBE\u8BA1\uFF0C\u670D\u52A1\u5668\u8FBE\u5230\u6216\u8D85\u8FC7 32 \u4E2A\u903B\u8F91\u6838\u5FC3\u7684\u60C5\u51B5\u975E\u5E38\u666E\u904D\uFF09\u7684\u73AF\u5883\u4E2D\uFF0C\u53EF\u4EE5\u4F7F\u7528 -XX:ParallelGCThreads \u53C2\u6570\u6765\u9650\u5236\u5783\u573E\u6536\u96C6\u7684\u7EBF\u7A0B\u6570\u3002</p><p><strong>\u6CE8\u610F</strong>\uFF1A\u4ECE ParNew \u6536\u96C6\u5668\u5F00\u59CB\uFF0C\u540E\u9762\u8FD8\u5C06\u4F1A\u63A5\u89E6\u5230\u82E5\u5E72\u6B3E\u6D89\u53CA \u201C\u5E76\u53D1\u201D \u548C \u201C\u5E76\u884C\u201D \u6982\u5FF5\u7684\u6536\u96C6\u5668\u3002\u5728\u5927\u5BB6\u53EF\u80FD\u4EA7\u751F\u7591\u60D1\u4E4B\u524D\uFF0C\u6709\u5FC5\u8981\u5148\u89E3\u91CA\u6E05\u695A\u8FD9\u4E24\u4E2A\u540D\u8BCD\u3002\u5E76\u884C\u548C\u5E76\u53D1\u90FD\u662F\u5E76\u53D1\u7F16\u7A0B\u4E2D\u7684\u4E13\u4E1A\u540D\u8BCD\uFF0C\u5728\u8C08\u8BBA\u5783\u573E\u6536\u96C6\u5668\u7684\u4E0A\u4E0B\u6587\u8BED\u5883\u4E2D\uFF0C\u5B83\u4EEC\u53EF\u4EE5\u7406\u89E3\u4E3A\uFF1A</p><ul><li><p>\u5E76\u884C\uFF08Parallel\uFF09\uFF1A\u5E76\u884C\u63CF\u8FF0\u7684\u662F\u591A\u6761\u5783\u573E\u6536\u96C6\u5668\u7EBF\u7A0B\u4E4B\u95F4\u7684\u5173\u7CFB\uFF0C\u8BF4\u660E\u540C\u4E00\u65F6\u95F4\u6709\u591A\u6761\u8FD9\u6837\u7684\u7EBF\u7A0B\u5728\u534F\u540C\u5DE5\u4F5C\uFF0C\u901A\u5E38\u9ED8\u8BA4\u6B64\u65F6\u7528\u6237\u7EBF\u7A0B\u662F\u5904\u4E8E\u7B49\u5F85\u72B6\u6001\u3002</p></li><li><p>\u5E76\u53D1\uFF08Concurrent\uFF09\uFF1A\u5E76\u53D1\u63CF\u8FF0\u7684\u662F\u5783\u573E\u6536\u96C6\u5668\u7EBF\u7A0B\u4E0E\u7528\u6237\u7EBF\u7A0B\u4E4B\u95F4\u7684\u5173\u7CFB\uFF0C\u8BF4\u660E\u540C\u4E00\u65F6\u95F4\u5783\u573E\u6536\u96C6\u5668\u7EBF\u7A0B\u4E0E\u7528\u6237\u7EBF\u7A0B\u90FD\u5728\u8FD0\u884C\u3002\u7531\u4E8E\u7528\u6237\u7EBF\u7A0B\u5E76\u672A\u88AB\u51BB\u7ED3\uFF0C\u6240\u4EE5\u7A0B\u5E8F\u4ECD\u7136\u80FD\u54CD\u5E94\u670D\u52A1\u8BF7\u6C42\uFF0C\u4F46\u7531\u4E8E\u5783\u573E\u6536\u96C6\u5668\u7EBF\u7A0B\u5360\u7528\u4E86\u4E00\u90E8\u5206\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u6B64\u65F6\u5E94\u7528\u7A0B\u5E8F\u7684\u5904\u7406\u7684\u541E\u5410\u91CF\u5C06\u53D7\u5230\u4E00\u5B9A\u5F71\u54CD\u3002</p></li></ul><h3 id="_3-5-3-parallel-scavenge-\u6536\u96C6\u5668" tabindex="-1"><a class="header-anchor" href="#_3-5-3-parallel-scavenge-\u6536\u96C6\u5668" aria-hidden="true">#</a> 3.5.3 Parallel Scavenge \u6536\u96C6\u5668</h3><p>Parallel Scavenge \u6536\u96C6\u5668\u4E5F\u662F\u4E00\u6B3E\u65B0\u751F\u4EE3\u6536\u96C6\u5668\uFF0C\u5B83\u540C\u6837\u662F\u57FA\u4E8E\u6807\u8BB0-\u590D\u5236\u7B97\u6CD5\u5B9E\u73B0\u7684\u6536\u96C6\u5668\uFF0C\u4E5F\u662F\u80FD\u591F\u5E76\u884C\u6536\u96C6\u7684\u591A\u7EBF\u7A0B\u6536\u96C6\u5668\u2026\u2026Parallel Scavenge \u7684\u8BF8\u591A\u7279\u6027\u4ECE\u8868\u9762\u4E0A\u770B\u548C ParNew \u975E\u5E38\u76F8\u4F3C\uFF0C\u90A3\u5B83\u6709\u4EC0\u4E48\u7279\u522B\u4E4B\u5904\u5462\uFF1F</p><p>Parallel Scavenge \u6536\u96C6\u5668\u7684\u7279\u70B9\u662F\u5B83\u7684\u5173\u6CE8\u70B9\u4E0E\u5176\u4ED6\u6536\u96C6\u5668\u4E0D\u540C\uFF0CCMS \u7B49\u6536\u96C6\u5668\u7684\u5173\u6CE8\u70B9\u662F\u5C3D\u53EF\u80FD\u5730\u7F29\u77ED\u5783\u573E\u6536\u96C6\u65F6\u7528\u6237\u7EBF\u7A0B\u7684\u505C\u987F\u65F6\u95F4\uFF0C\u800C Parallel Scavenge \u6536\u96C6\u5668\u7684\u76EE\u6807\u5219\u662F\u8FBE\u5230\u4E00\u4E2A\u53EF\u63A7\u5236\u7684\u541E\u5410\u91CF\uFF08Throughput\uFF09\u3002\u6240\u8C13\u541E\u5410\u91CF\u5C31\u662F\u5904\u7406\u5668\u7528\u4E8E\u8FD0\u884C\u7528\u6237\u4EE3\u7801\u7684\u65F6\u95F4\u4E0E\u5904\u7406\u5668\u603B\u6D88\u8017\u65F6\u95F4\u7684\u6BD4\u503C\uFF0C\u5373\uFF1A</p><p><img src="'+k+'" alt="\u56FE3-9" loading="lazy"></p><p>\u5982\u679C\u865A\u62DF\u673A\u5B8C\u6210\u67D0\u4E2A\u4EFB\u52A1\uFF0C\u7528\u6237\u4EE3\u7801\u52A0\u4E0A\u5783\u573E\u6536\u96C6\u603B\u5171\u8017\u8D39\u4E86 100 \u5206\u949F\uFF0C\u5176\u4E2D\u5783\u573E\u6536\u96C6\u82B1\u6389 1 \u5206\u949F\uFF0C\u90A3\u541E\u5410\u91CF\u5C31\u662F 99%\u3002\u505C\u987F\u65F6\u95F4\u8D8A\u77ED\u5C31\u8D8A\u9002\u5408\u9700\u8981\u4E0E\u7528\u6237\u4EA4\u4E92\u6216\u9700\u8981\u4FDD\u8BC1\u670D\u52A1\u54CD\u5E94\u8D28\u91CF\u7684\u7A0B\u5E8F\uFF0C\u826F\u597D\u7684\u54CD\u5E94\u901F\u5EA6\u80FD\u63D0\u5347\u7528\u6237\u4F53\u9A8C\uFF1B\u800C\u9AD8\u541E\u5410\u91CF\u5219\u53EF\u4EE5\u6700\u9AD8\u6548\u7387\u5730\u5229\u7528\u5904\u7406\u5668\u8D44\u6E90\uFF0C\u5C3D\u5FEB\u5B8C\u6210\u7A0B\u5E8F\u7684\u8FD0\u7B97\u4EFB\u52A1\uFF0C\u4E3B\u8981\u9002\u5408\u5728\u540E\u53F0\u8FD0\u7B97\u800C\u4E0D\u9700\u8981\u592A\u591A\u4EA4\u4E92\u7684\u5206\u6790\u4EFB\u52A1\u3002</p><p>Parallel Scavenge \u6536\u96C6\u5668\u63D0\u4F9B\u4E86\u4E24\u4E2A\u53C2\u6570\u7528\u4E8E\u7CBE\u786E\u63A7\u5236\u541E\u5410\u91CF\uFF0C\u5206\u522B\u662F\u63A7\u5236\u6700\u5927\u5783\u573E\u6536\u96C6\u505C\u987F\u65F6\u95F4\u7684 -XX:MaxGCPauseMillis \u53C2\u6570\u4EE5\u53CA\u76F4\u63A5\u8BBE\u7F6E\u541E\u5410\u91CF\u5927\u5C0F\u7684 -XX:GCTimeRatio \u53C2\u6570\u3002</p><p>-XX:MaxGCPauseMillis \u53C2\u6570\u5141\u8BB8\u7684\u503C\u662F\u4E00\u4E2A\u5927\u4E8E 0 \u7684\u6BEB\u79D2\u6570\uFF0C\u6536\u96C6\u5668\u5C06\u5C3D\u529B\u4FDD\u8BC1\u5185\u5B58\u56DE\u6536\u82B1\u8D39\u7684\u65F6\u95F4\u4E0D\u8D85\u8FC7\u7528\u6237\u8BBE\u5B9A\u503C\u3002\u4E0D\u8FC7\u5927\u5BB6\u4E0D\u8981\u5F02\u60F3\u5929\u5F00\u5730\u8BA4\u4E3A\u5982\u679C\u628A\u8FD9\u4E2A\u53C2\u6570\u7684\u503C\u8BBE\u7F6E\u5F97\u66F4\u5C0F\u4E00\u70B9\u5C31\u80FD\u4F7F\u5F97\u7CFB\u7EDF\u7684\u5783\u573E\u6536\u96C6\u901F\u5EA6\u53D8\u5F97\u66F4\u5FEB\uFF0C\u5783\u573E\u6536\u96C6\u505C\u987F\u65F6\u95F4\u7F29\u77ED\u662F\u4EE5\u727A\u7272\u541E\u5410\u91CF\u548C\u65B0\u751F\u4EE3\u7A7A\u95F4\u4E3A\u4EE3\u4EF7\u6362\u53D6\u7684\uFF1A\u7CFB\u7EDF\u628A\u65B0\u751F\u4EE3\u8C03\u5F97\u5C0F\u4E00\u4E9B\uFF0C\u6536\u96C6 300MB \u65B0\u751F\u4EE3\u80AF\u5B9A\u6BD4\u6536\u96C6 500MB \u5FEB\uFF0C\u4F46\u8FD9\u4E5F\u76F4\u63A5\u5BFC\u81F4\u5783\u573E\u6536\u96C6\u53D1\u751F\u5F97\u66F4\u9891\u7E41\uFF0C\u539F\u6765 10 \u79D2\u6536\u96C6\u4E00\u6B21\u3001\u6BCF\u6B21\u505C\u987F 100 \u6BEB\u79D2\uFF0C\u73B0\u5728\u53D8\u6210 5 \u79D2\u6536\u96C6\u4E00\u6B21\u3001\u6BCF\u6B21\u505C\u987F 70 \u6BEB\u79D2\u3002\u505C\u987F\u65F6\u95F4\u7684\u786E\u5728\u4E0B\u964D\uFF0C\u4F46\u541E\u5410\u91CF\u4E5F\u964D\u4E0B\u6765\u4E86\u3002</p><p>-XX:GCTimeRatio \u53C2\u6570\u7684\u503C\u5219\u5E94\u5F53\u662F\u4E00\u4E2A\u5927\u4E8E 0 \u5C0F\u4E8E 100 \u7684\u6574\u6570\uFF0C\u4E5F\u5C31\u662F\u5783\u573E\u6536\u96C6\u65F6\u95F4\u5360\u603B\u65F6\u95F4\u7684\u6BD4\u7387\uFF0C\u76F8\u5F53\u4E8E\u541E\u5410\u91CF\u7684\u5012\u6570\u3002\u8B6C\u5982\u628A\u6B64\u53C2\u6570\u8BBE\u7F6E\u4E3A 19\uFF0C\u90A3\u5141\u8BB8\u7684\u6700\u5927\u5783\u573E\u6536\u96C6\u65F6\u95F4\u5C31\u5360\u603B\u65F6\u95F4\u7684 5%\uFF08\u5373 1 / (1 + 19)\uFF09\uFF0C\u9ED8\u8BA4\u503C\u4E3A 99\uFF0C\u5373\u5141\u8BB8\u6700\u5927 1%\uFF08\u5373 1 / (1 + 99)\uFF09\u7684\u5783\u573E\u6536\u96C6\u65F6\u95F4\u3002</p><p>\u7531\u4E8E\u4E0E\u541E\u5410\u91CF\u5173\u7CFB\u5BC6\u5207\uFF0CParallel Scavenge \u6536\u96C6\u5668\u4E5F\u7ECF\u5E38\u88AB\u79F0\u4F5C \u201C\u541E\u5410\u91CF\u4F18\u5148\u6536\u96C6\u5668\u201D\u3002\u9664\u4E0A\u8FF0\u4E24\u4E2A\u53C2\u6570\u4E4B\u5916\uFF0CParallel Scavenge \u6536\u96C6\u5668\u8FD8\u6709\u4E00\u4E2A\u53C2\u6570 -XX:+UseAdaptiveSizePolicy \u503C\u5F97\u6211\u4EEC\u5173\u6CE8\u3002\u8FD9\u662F\u4E00\u4E2A\u5F00\u5173\u53C2\u6570\uFF0C\u5F53\u8FD9\u4E2A\u53C2\u6570\u88AB\u6FC0\u6D3B\u4E4B\u540E\uFF0C\u5C31\u4E0D\u9700\u8981\u4EBA\u5DE5\u6307\u5B9A\u65B0\u751F\u4EE3\u7684\u5927\u5C0F\uFF08-Xmn\uFF09\u3001Eden \u4E0E Survivor \u533A\u7684\u6BD4\u4F8B\uFF08-XX:SurvivorRatio\uFF09\u3001\u664B\u5347\u8001\u5E74\u4EE3\u5BF9\u8C61\u5927\u5C0F\uFF08-XX:PretenureSizeThreshold\uFF09\u7B49\u7EC6\u8282\u53C2\u6570\u4E86\uFF0C\u865A\u62DF\u673A\u4F1A\u6839\u636E\u5F53\u524D\u7CFB\u7EDF\u7684\u8FD0\u884C\u60C5\u51B5\u6536\u96C6\u6027\u80FD\u76D1\u63A7\u4FE1\u606F\uFF0C\u52A8\u6001\u8C03\u6574\u8FD9\u4E9B\u53C2\u6570\u4EE5\u63D0\u4F9B\u6700\u5408\u9002\u7684\u505C\u987F\u65F6\u95F4\u6216\u8005\u6700\u5927\u7684\u541E\u5410\u91CF\u3002\u8FD9\u79CD\u8C03\u8282\u65B9\u5F0F\u79F0\u4E3A\u5783\u573E\u6536\u96C6\u7684\u81EA\u9002\u5E94\u7684\u8C03\u8282\u7B56\u7565\uFF08GC Ergonomics\uFF09<sup class="footnote-ref"><a href="#footnote23">[23]</a><a class="footnote-anchor" id="footnote-ref23"></a></sup>\u3002\u5982\u679C\u8BFB\u8005\u5BF9\u4E8E\u6536\u96C6\u5668\u8FD0\u4F5C\u4E0D\u592A\u4E86\u89E3\uFF0C\u624B\u5DE5\u4F18\u5316\u5B58\u5728\u56F0\u96BE\u7684\u8BDD\uFF0C\u4F7F\u7528 Parallel Scavenge \u6536\u96C6\u5668\u914D\u5408\u81EA\u9002\u5E94\u8C03\u8282\u7B56\u7565\uFF0C\u628A\u5185\u5B58\u7BA1\u7406\u7684\u8C03\u4F18\u4EFB\u52A1\u4EA4\u7ED9\u865A\u62DF\u673A\u53BB\u5B8C\u6210\u4E5F\u8BB8\u662F\u4E00\u4E2A\u5F88\u4E0D\u9519\u7684\u9009\u62E9\u3002\u53EA\u9700\u8981\u628A\u57FA\u672C\u7684\u5185\u5B58\u6570\u636E\u8BBE\u7F6E\u597D\uFF08\u5982 -Xmx \u8BBE\u7F6E\u6700\u5927\u5806\uFF09\uFF0C\u7136\u540E\u4F7F\u7528 -XX:MaxGCPauseMillis \u53C2\u6570\uFF08\u66F4\u5173\u6CE8\u6700\u5927\u505C\u987F\u65F6\u95F4\uFF09\u6216 -XX:GCTimeRatio\uFF08\u66F4\u5173\u6CE8\u541E\u5410\u91CF\uFF09\u53C2\u6570\u7ED9\u865A\u62DF\u673A\u8BBE\u7ACB\u4E00\u4E2A\u4F18\u5316\u76EE\u6807\uFF0C\u90A3\u5177\u4F53\u7EC6\u8282\u53C2\u6570\u7684\u8C03\u8282\u5DE5\u4F5C\u5C31\u7531\u865A\u62DF\u673A\u5B8C\u6210\u4E86\u3002\u81EA\u9002\u5E94\u8C03\u8282\u7B56\u7565\u4E5F\u662F Parallel Scavenge \u6536\u96C6\u5668\u533A\u522B\u4E8E ParNew \u6536\u96C6\u5668\u7684\u4E00\u4E2A\u91CD\u8981\u7279\u6027\u3002</p><h3 id="_3-5-4-serial-old-\u6536\u96C6\u5668" tabindex="-1"><a class="header-anchor" href="#_3-5-4-serial-old-\u6536\u96C6\u5668" aria-hidden="true">#</a> 3.5.4 Serial Old \u6536\u96C6\u5668</h3><p>Serial Old \u662F Serial \u6536\u96C6\u5668\u7684\u8001\u5E74\u4EE3\u7248\u672C\uFF0C\u5B83\u540C\u6837\u662F\u4E00\u4E2A\u5355\u7EBF\u7A0B\u6536\u96C6\u5668\uFF0C\u4F7F\u7528\u6807\u8BB0-\u6574\u7406\u7B97\u6CD5\u3002\u8FD9\u4E2A\u6536\u96C6\u5668\u7684\u4E3B\u8981\u610F\u4E49\u4E5F\u662F\u4F9B\u5BA2\u6237\u7AEF\u6A21\u5F0F\u4E0B\u7684 HotSpot \u865A\u62DF\u673A\u4F7F\u7528\u3002\u5982\u679C\u5728\u670D\u52A1\u7AEF\u6A21\u5F0F\u4E0B\uFF0C\u5B83\u4E5F\u53EF\u80FD\u6709\u4E24\u79CD\u7528\u9014\uFF1A\u4E00\u79CD\u662F\u5728 JDK 5 \u4EE5\u53CA\u4E4B\u524D\u7684\u7248\u672C\u4E2D\u4E0E Parallel Scavenge \u6536\u96C6\u5668\u642D\u914D\u4F7F\u7528<sup class="footnote-ref"><a href="#footnote24">[24]</a><a class="footnote-anchor" id="footnote-ref24"></a></sup>\uFF0C\u53E6\u5916\u4E00\u79CD\u5C31\u662F\u4F5C\u4E3A CMS \u6536\u96C6\u5668\u53D1\u751F\u5931\u8D25\u65F6\u7684\u540E\u5907\u9884\u6848\uFF0C\u5728\u5E76\u53D1\u6536\u96C6\u53D1\u751F Concurrent Mode Failure \u65F6\u4F7F\u7528\u3002\u8FD9\u4E24\u70B9\u90FD\u5C06\u5728\u540E\u9762\u7684\u5185\u5BB9\u4E2D\u7EE7\u7EED\u8BB2\u89E3\u3002Serial Old \u6536\u96C6\u5668\u7684\u5DE5\u4F5C\u8FC7\u7A0B\u5982\u56FE3-9 \u6240\u793A\u3002</p><p><img src="'+b+'" alt="\u56FE3-10" loading="lazy"></p><p>\u56FE3-9 Serial / Serial Old \u6536\u96C6\u5668\u8FD0\u884C\u793A\u610F\u56FE</p><h3 id="_3-5-5-parallel-old-\u6536\u96C6\u5668" tabindex="-1"><a class="header-anchor" href="#_3-5-5-parallel-old-\u6536\u96C6\u5668" aria-hidden="true">#</a> 3.5.5 Parallel Old \u6536\u96C6\u5668</h3><p>Parallel Old \u662F Parallel Scavenge \u6536\u96C6\u5668\u7684\u8001\u5E74\u4EE3\u7248\u672C\uFF0C\u652F\u6301\u591A\u7EBF\u7A0B\u5E76\u53D1\u6536\u96C6\uFF0C\u57FA\u4E8E\u6807\u8BB0-\u6574\u7406\u7B97\u6CD5\u5B9E\u73B0\u3002\u8FD9\u4E2A\u6536\u96C6\u5668\u662F\u76F4\u5230 JDK 6 \u65F6\u624D\u5F00\u59CB\u63D0\u4F9B\u7684\uFF0C\u5728\u6B64\u4E4B\u524D\uFF0C\u65B0\u751F\u4EE3\u7684 Parallel Scavenge \u6536\u96C6\u5668\u4E00\u76F4\u5904\u4E8E\u76F8\u5F53\u5C34\u5C2C\u7684\u72B6\u6001\uFF0C\u539F\u56E0\u662F\u5982\u679C\u65B0\u751F\u4EE3\u9009\u62E9\u4E86 Parallel Scavenge \u6536\u96C6\u5668\uFF0C\u8001\u5E74\u4EE3\u9664\u4E86 Serial Old\uFF08PS MarkSweep\uFF09\u6536\u96C6\u5668\u4EE5\u5916\u522B\u65E0\u9009\u62E9\uFF0C\u5176\u4ED6\u8868\u73B0\u826F\u597D\u7684\u8001\u5E74\u4EE3\u6536\u96C6\u5668\uFF0C\u5982 CMS \u65E0\u6CD5\u4E0E\u5B83\u914D\u5408\u5DE5\u4F5C\u3002\u7531\u4E8E\u8001\u5E74\u4EE3 Serial Old \u6536\u96C6\u5668\u5728\u670D\u52A1\u7AEF\u5E94\u7528\u6027\u80FD\u4E0A\u7684 \u201C\u62D6\u7D2F\u201D\uFF0C\u4F7F\u7528 Parallel Scavenge \u6536\u96C6\u5668\u4E5F\u672A\u5FC5\u80FD\u5728\u6574\u4F53\u4E0A\u83B7\u5F97\u541E\u5410\u91CF\u6700\u5927\u5316\u7684\u6548\u679C\u3002\u540C\u6837\uFF0C\u7531\u4E8E\u5355\u7EBF\u7A0B\u7684\u8001\u5E74\u4EE3\u6536\u96C6\u4E2D\u65E0\u6CD5\u5145\u5206\u5229\u7528\u670D\u52A1\u5668\u591A\u5904\u7406\u5668\u7684\u5E76\u884C\u5904\u7406\u80FD\u529B\uFF0C\u5728\u8001\u5E74\u4EE3\u5185\u5B58\u7A7A\u95F4\u5F88\u5927\u800C\u4E14\u786C\u4EF6\u89C4\u683C\u6BD4\u8F83\u9AD8\u7EA7\u7684\u8FD0\u884C\u73AF\u5883\u4E2D\uFF0C\u8FD9\u79CD\u7EC4\u5408\u7684\u603B\u541E\u5410\u91CF\u751A\u81F3\u4E0D\u4E00\u5B9A\u6BD4 ParNew \u52A0 CMS \u7684\u7EC4\u5408\u6765\u5F97\u4F18\u79C0\u3002</p><p>\u76F4\u5230 Parallel Old \u6536\u96C6\u5668\u51FA\u73B0\u540E\uFF0C\u201C\u541E\u5410\u91CF\u4F18\u5148\u201D \u6536\u96C6\u5668\u7EC8\u4E8E\u6709\u4E86\u6BD4\u8F83\u540D\u526F\u5176\u5B9E\u7684\u642D\u914D\u7EC4\u5408\uFF0C\u5728\u6CE8\u91CD\u541E\u5410\u91CF\u6216\u8005\u5904\u7406\u5668\u8D44\u6E90\u8F83\u4E3A\u7A00\u7F3A\u7684\u573A\u5408\uFF0C\u90FD\u53EF\u4EE5\u4F18\u5148\u8003\u8651 Parallel Scavenge \u52A0 Parallel Old \u6536\u96C6\u5668\u8FD9\u4E2A\u7EC4\u5408\u3002Parallel Old \u6536\u96C6\u5668\u7684\u5DE5\u4F5C\u8FC7\u7A0B\u5982\u56FE3-10 \u6240\u793A\u3002</p><p><img src="'+C+'" alt="\u56FE3-11" loading="lazy"></p><p>\u56FE3-10 Parallel Scavenge / Parallel Old \u6536\u96C6\u5668\u8FD0\u884C\u793A\u610F\u56FE</p><h3 id="_3-5-6-cms-\u6536\u96C6\u5668" tabindex="-1"><a class="header-anchor" href="#_3-5-6-cms-\u6536\u96C6\u5668" aria-hidden="true">#</a> 3.5.6 CMS \u6536\u96C6\u5668</h3><p>CMS\uFF08Concurrent Mark Sweep\uFF09\u6536\u96C6\u5668\u662F\u4E00\u79CD\u4EE5\u83B7\u53D6\u6700\u77ED\u56DE\u6536\u505C\u987F\u65F6\u95F4\u4E3A\u76EE\u6807\u7684\u6536\u96C6\u5668\u3002\u76EE\u524D\u5F88\u5927\u4E00\u90E8\u5206\u7684 Java \u5E94\u7528\u96C6\u4E2D\u5728\u4E92\u8054\u7F51\u7F51\u7AD9\u6216\u8005\u57FA\u4E8E\u6D4F\u89C8\u5668\u7684 B/S \u7CFB\u7EDF\u7684\u670D\u52A1\u7AEF\u4E0A\uFF0C\u8FD9\u7C7B\u5E94\u7528\u901A\u5E38\u90FD\u4F1A\u8F83\u4E3A\u5173\u6CE8\u670D\u52A1\u7684\u54CD\u5E94\u901F\u5EA6\uFF0C\u5E0C\u671B\u7CFB\u7EDF\u505C\u987F\u65F6\u95F4\u5C3D\u53EF\u80FD\u77ED\uFF0C\u4EE5\u7ED9\u7528\u6237\u5E26\u6765\u826F\u597D\u7684\u4EA4\u4E92\u4F53\u9A8C\u3002CMS \u6536\u96C6\u5668\u5C31\u975E\u5E38\u7B26\u5408\u8FD9\u7C7B\u5E94\u7528\u7684\u9700\u6C42\u3002</p><p>\u4ECE\u540D\u5B57\uFF08\u5305\u542B &quot;Mark Sweep&quot;\uFF09\u4E0A\u5C31\u53EF\u4EE5\u770B\u51FA CMS \u6536\u96C6\u5668\u662F\u57FA\u4E8E\u6807\u8BB0-\u6E05\u9664\u7B97\u6CD5\u5B9E\u73B0\u7684\uFF0C\u5B83\u7684\u8FD0\u4F5C\u8FC7\u7A0B\u76F8\u5BF9\u4E8E\u524D\u9762\u51E0\u79CD\u6536\u96C6\u5668\u6765\u8BF4\u8981\u66F4\u590D\u6742\u4E00\u4E9B\uFF0C\u6574\u4E2A\u8FC7\u7A0B\u5206\u4E3A\u56DB\u4E2A\u6B65\u9AA4\uFF0C\u5305\u62EC\uFF1A</p><ol><li><p>\u521D\u59CB\u6807\u8BB0\uFF08CMS initial mark\uFF09</p></li><li><p>\u5E76\u53D1\u6807\u8BB0\uFF08CMS concurrent mark\uFF09</p></li><li><p>\u91CD\u65B0\u6807\u8BB0\uFF08CMS remark\uFF09</p></li><li><p>\u5E76\u53D1\u6E05\u9664\uFF08CMS concurrent sweep\uFF09</p></li></ol><p>\u5176\u4E2D\u521D\u59CB\u6807\u8BB0\u3001\u91CD\u65B0\u6807\u8BB0\u8FD9\u4E24\u4E2A\u6B65\u9AA4\u4ECD\u7136\u9700\u8981 &quot;Stop The World&quot;\u3002\u521D\u59CB\u6807\u8BB0\u4EC5\u4EC5\u53EA\u662F\u6807\u8BB0\u4E00\u4E0B GC Roots \u80FD\u76F4\u63A5\u5173\u8054\u5230\u7684\u5BF9\u8C61\uFF0C\u901F\u5EA6\u5F88\u5FEB\uFF1B\u5E76\u53D1\u6807\u8BB0\u9636\u6BB5\u5C31\u662F\u4ECE GC Roots \u7684\u76F4\u63A5\u5173\u8054\u5BF9\u8C61\u5F00\u59CB\u904D\u5386\u6574\u4E2A\u5BF9\u8C61\u56FE\u7684\u8FC7\u7A0B\uFF0C\u8FD9\u4E2A\u8FC7\u7A0B\u8017\u65F6\u8F83\u957F\u4F46\u662F\u4E0D\u9700\u8981\u505C\u987F\u7528\u6237\u7EBF\u7A0B\uFF0C\u53EF\u4EE5\u4E0E\u5783\u573E\u6536\u96C6\u7EBF\u7A0B\u4E00\u8D77\u5E76\u53D1\u8FD0\u884C\uFF1B\u800C\u91CD\u65B0\u6807\u8BB0\u9636\u6BB5\u5219\u662F\u4E3A\u4E86\u4FEE\u6B63\u5E76\u53D1\u6807\u8BB0\u671F\u95F4\uFF0C\u56E0\u7528\u6237\u7A0B\u5E8F\u7EE7\u7EED\u8FD0\u4F5C\u800C\u5BFC\u81F4\u6807\u8BB0\u4EA7\u751F\u53D8\u52A8\u7684\u90A3\u4E00\u90E8\u5206\u5BF9\u8C61\u7684\u6807\u8BB0\u8BB0\u5F55\uFF08\u8BE6\u89C1 3.4.6 \u8282\u4E2D\u5173\u4E8E\u589E\u91CF\u66F4\u65B0\u7684\u8BB2\u89E3\uFF09\uFF0C\u8FD9\u4E2A\u9636\u6BB5\u7684\u505C\u987F\u65F6\u95F4\u901A\u5E38\u4F1A\u6BD4\u521D\u59CB\u6807\u8BB0\u9636\u6BB5\u7A0D\u957F\u4E00\u4E9B\uFF0C\u4F46\u4E5F\u8FDC\u6BD4\u5E76\u53D1\u6807\u8BB0\u9636\u6BB5\u7684\u65F6\u95F4\u77ED\uFF1B\u6700\u540E\u662F\u5E76\u53D1\u6E05\u9664\u9636\u6BB5\uFF0C\u6E05\u7406\u5220\u9664\u6389\u6807\u8BB0\u9636\u6BB5\u5224\u65AD\u7684\u5DF2\u7ECF\u6B7B\u4EA1\u7684\u5BF9\u8C61\uFF0C\u7531\u4E8E\u4E0D\u9700\u8981\u79FB\u52A8\u5B58\u6D3B\u5BF9\u8C61\uFF0C\u6240\u4EE5\u8FD9\u4E2A\u9636\u6BB5\u4E5F\u662F\u53EF\u4EE5\u4E0E\u7528\u6237\u7EBF\u7A0B\u540C\u65F6\u5E76\u53D1\u7684\u3002</p><p>\u7531\u4E8E\u5728\u6574\u4E2A\u8FC7\u7A0B\u4E2D\u8017\u65F6\u6700\u957F\u7684\u5E76\u53D1\u6807\u8BB0\u548C\u5E76\u53D1\u6E05\u9664\u9636\u6BB5\u4E2D\uFF0C\u5783\u573E\u6536\u96C6\u5668\u7EBF\u7A0B\u90FD\u53EF\u4EE5\u4E0E\u7528\u6237\u7EBF\u7A0B\u4E00\u8D77\u5DE5\u4F5C\uFF0C\u6240\u4EE5\u4ECE\u603B\u4F53\u4E0A\u6765\u8BF4\uFF0CCMS \u6536\u96C6\u5668\u7684\u5185\u5B58\u56DE\u6536\u8FC7\u7A0B\u662F\u4E0E\u7528\u6237\u7EBF\u7A0B\u4E00\u8D77\u5E76\u53D1\u6267\u884C\u7684\u3002\u901A\u8FC7\u56FE3-11 \u53EF\u4EE5\u6BD4\u8F83\u6E05\u695A\u5730\u770B\u5230 CMS \u6536\u96C6\u5668\u7684\u8FD0\u4F5C\u6B65\u9AA4\u4E2D\u5E76\u53D1\u548C\u9700\u8981\u505C\u987F\u7684\u9636\u6BB5\u3002</p><p><img src="'+_+`" alt="\u56FE3-12" loading="lazy"></p><p>\u56FE3-11 Concurrent Mark Sweep \u6536\u96C6\u5668\u8FD0\u884C\u793A\u610F\u56FE</p><p>CMS \u662F\u4E00\u6B3E\u4F18\u79C0\u7684\u6536\u96C6\u5668\uFF0C\u5B83\u6700\u4E3B\u8981\u7684\u4F18\u70B9\u5728\u540D\u5B57\u4E0A\u5DF2\u7ECF\u4F53\u73B0\u51FA\u6765\uFF1A\u5E76\u53D1\u6536\u96C6\u3001\u4F4E\u505C\u987F\uFF0C\u4E00\u4E9B\u5B98\u65B9\u516C\u5F00\u6587\u6863\u91CC\u9762\u4E5F\u79F0\u4E4B\u4E3A \u201C\u5E76\u53D1\u4F4E\u505C\u987F\u6536\u96C6\u5668\u201D\uFF08Concurrent Low Pause Collector\uFF09\u3002CMS \u6536\u96C6\u5668\u662F HotSpot \u865A\u62DF\u673A\u8FFD\u6C42\u4F4E\u505C\u987F\u7684\u7B2C\u4E00\u6B21\u6210\u529F\u5C1D\u8BD5\uFF0C\u4F46\u662F\u5B83\u8FD8\u8FDC\u8FBE\u4E0D\u5230\u5B8C\u7F8E\u7684\u7A0B\u5EA6\uFF0C\u81F3\u5C11\u6709\u4EE5\u4E0B\u4E09\u4E2A\u660E\u663E\u7684\u7F3A\u70B9\uFF1A</p><p>\u9996\u5148\uFF0CCMS \u6536\u96C6\u5668\u5BF9\u5904\u7406\u5668\u8D44\u6E90\u975E\u5E38\u654F\u611F\u3002\u4E8B\u5B9E\u4E0A\uFF0C\u9762\u5411\u5E76\u53D1\u8BBE\u8BA1\u7684\u7A0B\u5E8F\u90FD\u5BF9\u5904\u7406\u5668\u8D44\u6E90\u6BD4\u8F83\u654F\u611F\u3002\u5728\u5E76\u53D1\u9636\u6BB5\uFF0C\u5B83\u867D\u7136\u4E0D\u4F1A\u5BFC\u81F4\u7528\u6237\u7EBF\u7A0B\u505C\u987F\uFF0C\u4F46\u5374\u4F1A\u56E0\u4E3A\u5360\u7528\u4E86\u4E00\u90E8\u5206\u7EBF\u7A0B\uFF08\u6216\u8005\u8BF4\u5904\u7406\u5668\u7684\u8BA1\u7B97\u80FD\u529B\uFF09\u800C\u5BFC\u81F4\u5E94\u7528\u7A0B\u5E8F\u53D8\u6162\uFF0C\u964D\u4F4E\u603B\u541E\u5410\u91CF\u3002CMS \u9ED8\u8BA4\u542F\u52A8\u7684\u56DE\u6536\u7EBF\u7A0B\u6570\u662F (\u5904\u7406\u5668\u6838\u5FC3\u6570\u91CF + 3) / 4\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5982\u679C\u5904\u7406\u5668\u6838\u5FC3\u6570\u5728\u56DB\u4E2A\u6216\u4EE5\u4E0A\uFF0C\u5E76\u53D1\u56DE\u6536\u65F6\u5783\u573E\u6536\u96C6\u7EBF\u7A0B\u53EA\u5360\u7528\u4E0D\u8D85\u8FC7 25% \u7684\u5904\u7406\u5668\u8FD0\u7B97\u8D44\u6E90\uFF0C\u5E76\u4E14\u4F1A\u968F\u7740\u5904\u7406\u5668\u6838\u5FC3\u6570\u91CF\u7684\u589E\u52A0\u800C\u4E0B\u964D\u3002\u4F46\u662F\u5F53\u5904\u7406\u5668\u6838\u5FC3\u6570\u91CF\u4E0D\u8DB3\u56DB\u4E2A\u65F6\uFF0CCMS \u5BF9\u7528\u6237\u7A0B\u5E8F\u7684\u5F71\u54CD\u5C31\u53EF\u80FD\u53D8\u5F97\u5F88\u5927\u3002\u5982\u679C\u5E94\u7528\u672C\u6765\u7684\u5904\u7406\u5668\u8D1F\u8F7D\u5C31\u5F88\u9AD8\uFF0C\u8FD8\u8981\u5206\u51FA\u4E00\u534A\u7684\u8FD0\u7B97\u80FD\u529B\u53BB\u6267\u884C\u6536\u96C6\u5668\u7EBF\u7A0B\uFF0C\u5C31\u53EF\u80FD\u5BFC\u81F4\u7528\u6237\u7A0B\u5E8F\u7684\u6267\u884C\u901F\u5EA6\u5FFD\u7136\u5927\u5E45\u964D\u4F4E\u3002\u4E3A\u4E86\u7F13\u89E3\u8FD9\u79CD\u60C5\u51B5\uFF0C\u865A\u62DF\u673A\u63D0\u4F9B\u4E86\u4E00\u79CD\u79F0\u4E3A \u201C\u589E\u91CF\u5F0F\u5E76\u53D1\u6536\u96C6\u5668\u201D\uFF08Incremental Concurrent Mark Sweep / i-CMS\uFF09\u7684 CMS \u6536\u96C6\u5668\u53D8\u79CD\uFF0C\u6240\u505A\u7684\u4E8B\u60C5\u548C\u4EE5\u524D\u5355\u6838\u5904\u7406\u5668\u5E74\u4EE3 PC \u673A\u64CD\u4F5C\u7CFB\u7EDF\u9760\u62A2\u5360\u5F0F\u591A\u4EFB\u52A1\u6765\u6A21\u62DF\u591A\u6838\u5E76\u884C\u591A\u4EFB\u52A1\u7684\u601D\u60F3\u4E00\u6837\uFF0C\u662F\u5728\u5E76\u53D1\u6807\u8BB0\u3001\u6E05\u7406\u7684\u65F6\u5019\u8BA9\u6536\u96C6\u5668\u7EBF\u7A0B\u3001\u7528\u6237\u7EBF\u7A0B\u4EA4\u66FF\u8FD0\u884C\uFF0C\u5C3D\u91CF\u51CF\u5C11\u5783\u573E\u6536\u96C6\u7EBF\u7A0B\u7684\u72EC\u5360\u8D44\u6E90\u7684\u65F6\u95F4\uFF0C\u8FD9\u6837\u6574\u4E2A\u5783\u573E\u6536\u96C6\u7684\u8FC7\u7A0B\u4F1A\u66F4\u957F\uFF0C\u4F46\u5BF9\u7528\u6237\u7A0B\u5E8F\u7684\u5F71\u54CD\u5C31\u4F1A\u663E\u5F97\u8F83\u5C11\u4E00\u4E9B\uFF0C\u76F4\u89C2\u611F\u53D7\u662F\u901F\u5EA6\u53D8\u6162\u7684\u65F6\u95F4\u66F4\u591A\u4E86\uFF0C\u4F46\u901F\u5EA6\u4E0B\u964D\u5E45\u5EA6\u5C31\u6CA1\u6709\u90A3\u4E48\u660E\u663E\u3002\u5B9E\u8DF5\u8BC1\u660E\u589E\u91CF\u5F0F\u7684 CMS \u6536\u96C6\u5668\u6548\u679C\u5F88\u4E00\u822C\uFF0C\u4ECE JDK 7 \u5F00\u59CB\uFF0Ci-CMS \u6A21\u5F0F\u5DF2\u7ECF\u88AB\u58F0\u660E\u4E3A &quot;deprecated&quot;\uFF0C\u5373\u5DF2\u8FC7\u65F6\u4E0D\u518D\u63D0\u5021\u7528\u6237\u4F7F\u7528\uFF0C\u5230 JDK 9 \u53D1\u5E03\u540E i-CMS \u6A21\u5F0F\u88AB\u5B8C\u5168\u5E9F\u5F03\u3002</p><p>\u7136\u540E\uFF0C\u7531\u4E8E CMS \u6536\u96C6\u5668\u65E0\u6CD5\u5904\u7406 \u201C\u6D6E\u52A8\u5783\u573E\u201D\uFF08Floating Garbage\uFF09\uFF0C\u6709\u53EF\u80FD\u51FA\u73B0 \u201CConcurrent Mode Failure\u201D \u5931\u8D25\u8FDB\u800C\u5BFC\u81F4\u53E6\u4E00\u6B21\u5B8C\u5168 &quot;Stop The World&quot; \u7684 Full GC \u7684\u4EA7\u751F\u3002\u5728 CMS \u7684\u5E76\u53D1\u6807\u8BB0\u548C\u5E76\u53D1\u6E05\u7406\u9636\u6BB5\uFF0C\u7528\u6237\u7EBF\u7A0B\u662F\u8FD8\u5728\u7EE7\u7EED\u8FD0\u884C\u7684\uFF0C\u7A0B\u5E8F\u5728\u8FD0\u884C\u81EA\u7136\u5C31\u8FD8\u4F1A\u4F34\u968F\u6709\u65B0\u7684\u5783\u573E\u5BF9\u8C61\u4E0D\u65AD\u4EA7\u751F\uFF0C\u4F46\u8FD9\u4E00\u90E8\u5206\u5783\u573E\u5BF9\u8C61\u662F\u51FA\u73B0\u5728\u6807\u8BB0\u8FC7\u7A0B\u7ED3\u675F\u4EE5\u540E\uFF0CCMS \u65E0\u6CD5\u5728\u5F53\u6B21\u6536\u96C6\u4E2D\u5904\u7406\u6389\u5B83\u4EEC\uFF0C\u53EA\u597D\u7559\u5F85\u4E0B\u4E00\u6B21\u5783\u573E\u6536\u96C6\u65F6\u518D\u6E05\u7406\u6389\u3002\u8FD9\u4E00\u90E8\u5206\u5783\u573E\u5C31\u79F0\u4E3A \u201C\u6D6E\u52A8\u5783\u573E\u201D\u3002\u540C\u6837\u4E5F\u662F\u7531\u4E8E\u5728\u5783\u573E\u6536\u96C6\u9636\u6BB5\u7528\u6237\u7EBF\u7A0B\u8FD8\u9700\u8981\u6301\u7EED\u8FD0\u884C\uFF0C\u90A3\u5C31\u8FD8\u9700\u8981\u9884\u7559\u8DB3\u591F\u5185\u5B58\u7A7A\u95F4\u63D0\u4F9B\u7ED9\u7528\u6237\u7EBF\u7A0B\u4F7F\u7528\uFF0C\u56E0\u6B64 CMS \u6536\u96C6\u5668\u4E0D\u80FD\u50CF\u5176\u4ED6\u6536\u96C6\u5668\u90A3\u6837\u7B49\u5F85\u5230\u8001\u5E74\u4EE3\u51E0\u4E4E\u5B8C\u5168\u88AB\u586B\u6EE1\u4E86\u518D\u8FDB\u884C\u6536\u96C6\uFF0C\u5FC5\u987B\u9884\u7559\u4E00\u90E8\u5206\u7A7A\u95F4\u4F9B\u5E76\u53D1\u6536\u96C6\u65F6\u7684\u7A0B\u5E8F\u8FD0\u4F5C\u4F7F\u7528\u3002\u5728 JDK 5 \u7684\u9ED8\u8BA4\u8BBE\u7F6E\u4E0B\uFF0CCMS \u6536\u96C6\u5668\u5F53\u8001\u5E74\u4EE3\u4F7F\u7528\u4E86 68% \u7684\u7A7A\u95F4\u540E\u5C31\u4F1A\u88AB\u6FC0\u6D3B\uFF0C\u8FD9\u662F\u4E00\u4E2A\u504F\u4FDD\u5B88\u7684\u8BBE\u7F6E\uFF0C\u5982\u679C\u5728\u5B9E\u9645\u5E94\u7528\u4E2D\u8001\u5E74\u4EE3\u589E\u957F\u5E76\u4E0D\u662F\u592A\u5FEB\uFF0C\u53EF\u4EE5\u9002\u5F53\u8C03\u9AD8\u53C2\u6570 -XX:CMSInitiatingOccu-pancyFraction \u7684\u503C\u6765\u63D0\u9AD8 CMS \u7684\u89E6\u53D1\u767E\u5206\u6BD4\uFF0C\u964D\u4F4E\u5185\u5B58\u56DE\u6536\u9891\u7387\uFF0C\u83B7\u53D6\u66F4\u597D\u7684\u6027\u80FD\u3002\u5230\u4E86 JDK 6 \u65F6\uFF0CCMS \u6536\u96C6\u5668\u7684\u542F\u52A8\u9608\u503C\u5C31\u5DF2\u7ECF\u9ED8\u8BA4\u63D0\u5347\u81F3 92%\u3002\u4F46\u8FD9\u53C8\u4F1A\u66F4\u5BB9\u6613\u9762\u4E34\u53E6\u4E00\u79CD\u98CE\u9669\uFF1A\u8981\u662F CMS \u8FD0\u884C\u671F\u95F4\u9884\u7559\u7684\u5185\u5B58\u65E0\u6CD5\u6EE1\u8DB3\u7A0B\u5E8F\u5206\u914D\u65B0\u5BF9\u8C61\u7684\u9700\u8981\uFF0C\u5C31\u4F1A\u51FA\u73B0\u4E00\u6B21 \u201C\u5E76\u53D1\u5931\u8D25\u201D\uFF08Concurrent Mode Failure\uFF09\uFF0C\u8FD9\u65F6\u5019\u865A\u62DF\u673A\u5C06\u4E0D\u5F97\u4E0D\u542F\u52A8\u540E\u5907\u9884\u6848\uFF1A\u51BB\u7ED3\u7528\u6237\u7EBF\u7A0B\u7684\u6267\u884C\uFF0C\u4E34\u65F6\u542F\u7528 Serial Old \u6536\u96C6\u5668\u6765\u91CD\u65B0\u8FDB\u884C\u8001\u5E74\u4EE3\u7684\u5783\u573E\u6536\u96C6\uFF0C\u4F46\u8FD9\u6837\u505C\u987F\u65F6\u95F4\u5C31\u5F88\u957F\u4E86\u3002\u6240\u4EE5\u53C2\u6570 -XX:CMSInitiatingOccupancyFraction \u8BBE\u7F6E\u5F97\u592A\u9AD8\u5C06\u4F1A\u5F88\u5BB9\u6613\u5BFC\u81F4\u5927\u91CF\u7684\u5E76\u53D1\u5931\u8D25\u4EA7\u751F\uFF0C\u6027\u80FD\u53CD\u800C\u964D\u4F4E\uFF0C\u7528\u6237\u5E94\u5728\u751F\u4EA7\u73AF\u5883\u4E2D\u6839\u636E\u5B9E\u9645\u5E94\u7528\u60C5\u51B5\u6765\u6743\u8861\u8BBE\u7F6E\u3002</p><p>\u8FD8\u6709\u6700\u540E\u4E00\u4E2A\u7F3A\u70B9\uFF0C\u5728\u672C\u8282\u7684\u5F00\u5934\u66FE\u63D0\u5230\uFF0CCMS \u662F\u4E00\u6B3E\u57FA\u4E8E \u201C\u6807\u8BB0-\u6E05\u9664\u201D \u7B97\u6CD5\u5B9E\u73B0\u7684\u6536\u96C6\u5668\uFF0C\u5982\u679C\u8BFB\u8005\u5BF9\u524D\u9762\u8FD9\u90E8\u5206\u4ECB\u7ECD\u8FD8\u6709\u5370\u8C61\u7684\u8BDD\uFF0C\u5C31\u53EF\u80FD\u60F3\u5230\u8FD9\u610F\u5473\u7740\u6536\u96C6\u7ED3\u675F\u65F6\u4F1A\u6709\u5927\u91CF\u7A7A\u95F4\u788E\u7247\u4EA7\u751F\u3002\u7A7A\u95F4\u788E\u7247\u8FC7\u591A\u65F6\uFF0C\u5C06\u4F1A\u7ED9\u5927\u5BF9\u8C61\u5206\u914D\u5E26\u6765\u5F88\u5927\u9EBB\u70E6\uFF0C\u5F80\u5F80\u4F1A\u51FA\u73B0\u8001\u5E74\u4EE3\u8FD8\u6709\u5F88\u591A\u5269\u4F59\u7A7A\u95F4\uFF0C\u4F46\u5C31\u662F\u65E0\u6CD5\u627E\u5230\u8DB3\u591F\u5927\u7684\u8FDE\u7EED\u7A7A\u95F4\u6765\u5206\u914D\u5F53\u524D\u5BF9\u8C61\uFF0C\u800C\u4E0D\u5F97\u4E0D\u63D0\u524D\u89E6\u53D1\u4E00\u6B21 Full GC \u7684\u60C5\u51B5\u3002\u4E3A\u4E86\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\uFF0CCMS \u6536\u96C6\u5668\u63D0\u4F9B\u4E86\u4E00\u4E2A -XX:+UseCMSCompactAtFullCollection \u5F00\u5173\u53C2\u6570\uFF08\u9ED8\u8BA4\u662F\u5F00\u542F\u7684\uFF0C\u6B64\u53C2\u6570\u4ECE JDK 9 \u5F00\u59CB\u5E9F\u5F03\uFF09\uFF0C\u7528\u4E8E\u5728 CMS \u6536\u96C6\u5668\u4E0D\u5F97\u4E0D\u8FDB\u884C Full GC \u65F6\u5F00\u542F\u5185\u5B58\u788E\u7247\u7684\u5408\u5E76\u6574\u7406\u8FC7\u7A0B\uFF0C\u7531\u4E8E\u8FD9\u4E2A\u5185\u5B58\u6574\u7406\u5FC5\u987B\u79FB\u52A8\u5B58\u6D3B\u5BF9\u8C61\uFF0C\uFF08\u5728 Shenandoah \u548C ZGC \u51FA\u73B0\u524D\uFF09\u662F\u65E0\u6CD5\u5E76\u53D1\u7684\u3002\u8FD9\u6837\u7A7A\u95F4\u788E\u7247\u95EE\u9898\u662F\u89E3\u51B3\u4E86\uFF0C\u4F46\u505C\u987F\u65F6\u95F4\u53C8\u4F1A\u53D8\u957F\uFF0C\u56E0\u6B64\u865A\u62DF\u673A\u8BBE\u8BA1\u8005\u4EEC\u8FD8\u63D0\u4F9B\u4E86\u53E6\u5916\u4E00\u4E2A\u53C2\u6570 -XX:CMSFullGCsBeforeCompaction\uFF08\u6B64\u53C2\u6570\u4ECE JDK 9 \u5F00\u59CB\u5E9F\u5F03\uFF09\uFF0C\u8FD9\u4E2A\u53C2\u6570\u7684\u4F5C\u7528\u662F\u8981\u6C42 CMS \u6536\u96C6\u5668\u5728\u6267\u884C\u8FC7\u82E5\u5E72\u6B21\uFF08\u6570\u91CF\u7531\u53C2\u6570\u503C\u51B3\u5B9A\uFF09\u4E0D\u6574\u7406\u7A7A\u95F4\u7684 Full GC \u4E4B\u540E\uFF0C\u4E0B\u4E00\u6B21\u8FDB\u5165 Full GC \u524D\u4F1A\u5148\u8FDB\u884C\u788E\u7247\u6574\u7406\uFF08\u9ED8\u8BA4\u503C\u4E3A 0\uFF0C\u8868\u793A\u6BCF\u6B21\u8FDB\u5165 Full GC \u65F6\u90FD\u8FDB\u884C\u788E\u7247\u6574\u7406\uFF09\u3002</p><h3 id="_3-5-7-garbage-first-\u6536\u96C6\u5668" tabindex="-1"><a class="header-anchor" href="#_3-5-7-garbage-first-\u6536\u96C6\u5668" aria-hidden="true">#</a> 3.5.7 Garbage First \u6536\u96C6\u5668</h3><p>Garbage First\uFF08\u7B80\u79F0 G1\uFF09\u6536\u96C6\u5668\u662F\u5783\u573E\u6536\u96C6\u5668\u6280\u672F\u53D1\u5C55\u5386\u53F2\u4E0A\u7684\u91CC\u7A0B\u7891\u5F0F\u7684\u6210\u679C\uFF0C\u5B83\u5F00\u521B\u4E86\u6536\u96C6\u5668\u9762\u5411\u5C40\u90E8\u6536\u96C6\u7684\u8BBE\u8BA1\u601D\u8DEF\u548C\u57FA\u4E8E Region \u7684\u5185\u5B58\u5E03\u5C40\u5F62\u5F0F\u3002\u65E9\u5728 JDK 7 \u521A\u521A\u786E\u7ACB\u9879\u76EE\u76EE\u6807\u3001Oracle \u516C\u53F8\u5236\u5B9A\u7684 JDK 7 RoadMap \u91CC\u9762\uFF0CG1 \u6536\u96C6\u5668\u5C31\u88AB\u89C6\u4F5C JDK 7 \u4E2D HotSpot \u865A\u62DF\u673A\u7684\u4E00\u9879\u91CD\u8981\u8FDB\u5316\u7279\u5F81\u3002\u4ECE JDK 6 Update 14 \u5F00\u59CB\u5C31\u6709 Early Access \u7248\u672C\u7684 G1 \u6536\u96C6\u5668\u4F9B\u5F00\u53D1\u4EBA\u5458\u5B9E\u9A8C\u548C\u8BD5\u7528\uFF0C\u4F46\u7531\u6B64\u5F00\u59CB G1 \u6536\u96C6\u5668\u7684 \u201C\u5B9E\u9A8C\u72B6\u6001\u201D\uFF08Experimental\uFF09\u6301\u7EED\u4E86\u6570\u5E74\u65F6\u95F4\uFF0C\u76F4\u81F3 JDK 7 Update 4\uFF0COracle \u624D\u8BA4\u4E3A\u5B83\u8FBE\u5230\u8DB3\u591F\u6210\u719F\u7684\u5546\u7528\u7A0B\u5EA6\uFF0C\u79FB\u9664\u4E86 &quot;Experimental&quot; \u7684\u6807\u8BC6\uFF1B\u5230\u4E86 JDK 8 Update 40 \u7684\u65F6\u5019\uFF0CG1 \u63D0\u4F9B\u5E76\u53D1\u7684\u7C7B\u5378\u8F7D\u7684\u652F\u6301\uFF0C\u8865\u5168\u4E86\u5176\u8BA1\u5212\u529F\u80FD\u7684\u6700\u540E\u4E00\u5757\u62FC\u56FE\u3002\u8FD9\u4E2A\u7248\u672C\u4EE5\u540E\u7684 G1 \u6536\u96C6\u5668\u624D\u88AB Oracle \u5B98\u65B9\u79F0\u4E3A \u201C\u5168\u529F\u80FD\u7684\u5783\u573E\u6536\u96C6\u5668\u201D\uFF08Fully-Featured Garbage Collector\uFF09\u3002</p><p>G1 \u662F\u4E00\u6B3E\u4E3B\u8981\u9762\u5411\u670D\u52A1\u7AEF\u5E94\u7528\u7684\u5783\u573E\u6536\u96C6\u5668\u3002HotSpot \u5F00\u53D1\u56E2\u961F\u6700\u521D\u8D4B\u4E88\u5B83\u7684\u671F\u671B\u662F\uFF08\u5728\u6BD4\u8F83\u957F\u671F\u7684\uFF09\u672A\u6765\u53EF\u4EE5\u66FF\u6362\u6389 JDK 5 \u4E2D\u53D1\u5E03\u7684 CMS \u6536\u96C6\u5668\u3002\u73B0\u5728\u8FD9\u4E2A\u671F\u671B\u76EE\u6807\u5DF2\u7ECF\u5B9E\u73B0\u8FC7\u534A\u4E86\uFF0CJDK 9 \u53D1\u5E03\u4E4B\u65E5\uFF0CG1 \u5BA3\u544A\u53D6\u4EE3 Parallel Scavenge \u52A0 Parallel Old \u7EC4\u5408\uFF0C\u6210\u4E3A\u670D\u52A1\u7AEF\u6A21\u5F0F\u4E0B\u7684\u9ED8\u8BA4\u5783\u573E\u6536\u96C6\u5668\uFF0C\u800C CMS \u5219\u6CA6\u843D\u81F3\u88AB\u58F0\u660E\u4E3A\u4E0D\u63A8\u8350\u4F7F\u7528\uFF08Deprecate\uFF09\u7684\u6536\u96C6\u5668<sup class="footnote-ref"><a href="#footnote25">[25]</a><a class="footnote-anchor" id="footnote-ref25"></a></sup>\u3002\u5982\u679C\u5BF9 JDK 9 \u53CA\u4EE5\u4E0A\u7248\u672C\u7684 HotSpot \u865A\u62DF\u673A\u4F7F\u7528\u53C2\u6570 -XX:+UseConcMarkSweepGC \u6765\u5F00\u542F CMS \u6536\u96C6\u5668\u7684\u8BDD\uFF0C\u7528\u6237\u4F1A\u6536\u5230\u4E00\u4E2A\u8B66\u544A\u4FE1\u606F\uFF0C\u63D0\u793A CMS \u672A\u6765\u5C06\u4F1A\u88AB\u5E9F\u5F03\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Java HotSpot(TM) 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4F46\u4F5C\u4E3A\u4E00\u6B3E\u66FE\u88AB\u5E7F\u6CDB\u8FD0\u7528\u8FC7\u7684\u6536\u96C6\u5668\uFF0C\u7ECF\u8FC7\u591A\u4E2A\u7248\u672C\u7684\u5F00\u53D1\u8FED\u4EE3\u540E\uFF0CCMS\uFF08\u4EE5\u53CA\u4E4B\u524D\u51E0\u6B3E\u6536\u96C6\u5668\uFF09\u7684\u4EE3\u7801\u4E0E HotSpot \u7684\u5185\u5B58\u7BA1\u7406\u3001\u6267\u884C\u3001\u7F16\u8BD1\u3001\u76D1\u63A7\u7B49\u5B50\u7CFB\u7EDF\u90FD\u6709\u5343\u4E1D\u4E07\u7F15\u7684\u8054\u7CFB\uFF0C\u8FD9\u662F\u5386\u53F2\u539F\u56E0\u5BFC\u81F4\u7684\uFF0C\u5E76\u4E0D\u7B26\u5408\u804C\u8D23\u5206\u79BB\u7684\u8BBE\u8BA1\u539F\u5219\u3002\u4E3A\u6B64\uFF0C\u89C4\u5212 JDK 10 \u529F\u80FD\u76EE\u6807\u65F6\uFF0CHotSpot \u865A\u62DF\u673A\u63D0\u51FA\u4E86 \u201C\u7EDF\u4E00\u5783\u573E\u6536\u96C6\u5668\u63A5\u53E3\u201D<sup class="footnote-ref"><a href="#footnote26">[26]</a><a class="footnote-anchor" id="footnote-ref26"></a></sup>\uFF0C\u5C06\u5185\u5B58\u56DE\u6536\u7684 \u201C\u884C\u4E3A\u201D \u4E0E \u201C\u5B9E\u73B0\u201D \u8FDB\u884C\u5206\u79BB\uFF0CCMS \u4EE5\u53CA\u5176\u4ED6\u6536\u96C6\u5668\u90FD\u91CD\u6784\u6210\u57FA\u4E8E\u8FD9\u5957\u63A5\u53E3\u7684\u4E00\u79CD\u5B9E\u73B0\u3002\u4EE5\u6B64\u4E3A\u57FA\u7840\uFF0C\u65E5\u540E\u8981\u79FB\u9664\u6216\u8005\u52A0\u5165\u67D0\u4E00\u6B3E\u6536\u96C6\u5668\uFF0C\u90FD\u4F1A\u53D8\u5F97\u5BB9\u6613\u8BB8\u591A\uFF0C\u98CE\u9669\u4E5F\u53EF\u4EE5\u63A7\u5236\uFF0C\u8FD9\u7B97\u662F\u5728\u4E3A CMS \u9000\u51FA\u5386\u53F2\u821E\u53F0\u94FA\u4E0B\u6700\u540E\u7684\u9053\u8DEF\u4E86\u3002</p><p>\u4F5C\u4E3A CMS \u6536\u96C6\u5668\u7684\u66FF\u4EE3\u8005\u548C\u7EE7\u627F\u4EBA\uFF0C\u8BBE\u8BA1\u8005\u4EEC\u5E0C\u671B\u505A\u51FA\u4E00\u6B3E\u80FD\u591F\u5EFA\u7ACB\u8D77 \u201C\u505C\u987F\u65F6\u95F4\u6A21\u578B\u201D\uFF08Pause Prediction Model\uFF09\u7684\u6536\u96C6\u5668\uFF0C\u505C\u987F\u65F6\u95F4\u6A21\u578B\u7684\u610F\u601D\u662F\u80FD\u591F\u652F\u6301\u6307\u5B9A\u5728\u4E00\u4E2A\u957F\u5EA6\u4E3A M \u6BEB\u79D2\u7684\u65F6\u95F4\u7247\u6BB5\u5185\uFF0C\u6D88\u8017\u5728\u5783\u573E\u6536\u96C6\u4E0A\u7684\u65F6\u95F4\u5927\u6982\u7387\u4E0D\u8D85\u8FC7 N \u6BEB\u79D2\u8FD9\u6837\u7684\u76EE\u6807\uFF0C\u8FD9\u51E0\u4E4E\u5DF2\u7ECF\u662F\u5B9E\u65F6 Java\uFF08RTSJ\uFF09\u7684\u4E2D\u8F6F\u5B9E\u65F6\u5783\u573E\u6536\u96C6\u5668\u7279\u5F81\u4E86\u3002</p><p>\u90A3\u5177\u4F53\u8981\u600E\u4E48\u505A\u624D\u80FD\u5B9E\u73B0\u8FD9\u4E2A\u76EE\u6807\u5462\uFF1F\u9996\u5148\u8981\u6709\u4E00\u4E2A\u601D\u60F3\u4E0A\u7684\u6539\u53D8\uFF0C\u5728 G1 \u6536\u96C6\u5668\u51FA\u73B0\u4E4B\u524D\u7684\u6240\u6709\u5176\u4ED6\u6536\u96C6\u5668\uFF0C\u5305\u62EC CMS \u5728\u5185\uFF0C\u5783\u573E\u6536\u96C6\u7684\u76EE\u6807\u8303\u56F4\u8981\u4E48\u662F\u6574\u4E2A\u65B0\u751F\u4EE3\uFF08Minor GC\uFF09\uFF0C\u8981\u4E48\u5C31\u662F\u6574\u4E2A\u8001\u5E74\u4EE3\uFF08Major GC\uFF09\uFF0C\u518D\u8981\u4E48\u5C31\u662F\u6574\u4E2A Java \u5806\uFF08Full GC\uFF09\u3002\u800C G1 \u8DF3\u51FA\u4E86\u8FD9\u4E2A\u6A0A\u7B3C\uFF0C\u5B83\u53EF\u4EE5\u9762\u5411\u5806\u5185\u5B58\u4EFB\u4F55\u90E8\u5206\u6765\u7EC4\u6210\u56DE\u6536\u96C6\uFF08Collection Set\uFF0C\u4E00\u822C\u7B80\u79F0 CSet\uFF09\u8FDB\u884C\u56DE\u6536\uFF0C\u8861\u91CF\u6807\u51C6\u4E0D\u518D\u662F\u5B83\u5C5E\u4E8E\u54EA\u4E2A\u5206\u4EE3\uFF0C\u800C\u662F\u54EA\u5757\u5185\u5B58\u4E2D\u5B58\u653E\u7684\u5783\u573E\u6570\u91CF\u6700\u591A\uFF0C\u56DE\u6536\u6536\u76CA\u6700\u5927\uFF0C\u8FD9\u5C31\u662F G1 \u6536\u96C6\u5668\u7684 Mixed GC \u6A21\u5F0F\u3002</p><p>G1 \u5F00\u521B\u7684\u57FA\u4E8E Region \u7684\u5806\u5185\u5B58\u5E03\u5C40\u662F\u5B83\u80FD\u591F\u5B9E\u73B0\u8FD9\u4E2A\u76EE\u6807\u7684\u5173\u952E\u3002\u867D\u7136 G1 \u4E5F\u4ECD\u662F\u9075\u5FAA\u5206\u4EE3\u6536\u96C6\u7406\u8BBA\u8BBE\u8BA1\u7684\uFF0C\u4F46\u5176\u5806\u5185\u5B58\u7684\u5E03\u5C40\u4E0E\u5176\u4ED6\u6536\u96C6\u5668\u6709\u975E\u5E38\u660E\u663E\u7684\u5DEE\u5F02\uFF1AG1 \u4E0D\u518D\u575A\u6301\u56FA\u5B9A\u5927\u5C0F\u4EE5\u53CA\u56FA\u5B9A\u6570\u91CF\u7684\u5206\u4EE3\u533A\u57DF\u5212\u5206\uFF0C\u800C\u662F\u628A\u8FDE\u7EED\u7684 Java \u5806\u5212\u5206\u4E3A\u591A\u4E2A\u5927\u5C0F\u76F8\u7B49\u7684\u72EC\u7ACB\u533A\u57DF\uFF08Region\uFF09\uFF0C\u6BCF\u4E00\u4E2A Region \u90FD\u53EF\u4EE5\u6839\u636E\u9700\u8981\uFF0C\u626E\u6F14\u65B0\u751F\u4EE3\u7684 Eden \u7A7A\u95F4\u3001Survivor \u7A7A\u95F4\uFF0C\u6216\u8005\u8001\u5E74\u4EE3\u7A7A\u95F4\u3002\u6536\u96C6\u5668\u80FD\u591F\u5BF9\u626E\u6F14\u4E0D\u540C\u89D2\u8272\u7684 Region \u91C7\u7528\u4E0D\u540C\u7684\u7B56\u7565\u53BB\u5904\u7406\uFF0C\u8FD9\u6837\u65E0\u8BBA\u662F\u65B0\u521B\u5EFA\u7684\u5BF9\u8C61\u8FD8\u662F\u5DF2\u7ECF\u5B58\u6D3B\u4E86\u4E00\u6BB5\u65F6\u95F4\u3001\u71AC\u8FC7\u591A\u6B21\u6536\u96C6\u7684\u65E7\u5BF9\u8C61\u90FD\u80FD\u83B7\u53D6\u5F88\u597D\u7684\u6536\u96C6\u6548\u679C\u3002</p><p>Region \u4E2D\u8FD8\u6709\u4E00\u7C7B\u7279\u6B8A\u7684 Humongous \u533A\u57DF\uFF0C\u4E13\u95E8\u7528\u6765\u5B58\u50A8\u5927\u5BF9\u8C61\u3002G1 \u8BA4\u4E3A\u53EA\u8981\u5927\u5C0F\u8D85\u8FC7\u4E86\u4E00\u4E2A Region \u5BB9\u91CF\u4E00\u534A\u7684\u5BF9\u8C61\u5373\u53EF\u5224\u5B9A\u4E3A\u5927\u5BF9\u8C61\u3002\u6BCF\u4E2A Region \u7684\u5927\u5C0F\u53EF\u4EE5\u901A\u8FC7\u53C2\u6570 -XX:G1HeapRegionSize \u8BBE\u5B9A\uFF0C\u53D6\u503C\u8303\u56F4\u4E3A 1MB ~ 32MB\uFF0C\u4E14\u5E94\u4E3A 2 \u7684 N \u6B21\u5E42\u3002\u800C\u5BF9\u4E8E\u90A3\u4E9B\u8D85\u8FC7\u4E86\u6574\u4E2A Region \u5BB9\u91CF\u7684\u8D85\u7EA7\u5927\u5BF9\u8C61\uFF0C\u5C06\u4F1A\u88AB\u5B58\u653E\u5728 N \u4E2A\u8FDE\u7EED\u7684 Humongous Region \u4E4B\u4E2D\uFF0CG1 \u7684\u5927\u591A\u6570\u884C\u4E3A\u90FD\u628A Humongous Region \u4F5C\u4E3A\u8001\u5E74\u4EE3\u7684\u4E00\u90E8\u5206\u6765\u8FDB\u884C\u770B\u5F85\uFF0C\u5982\u56FE3-12 \u6240\u793A\u3002</p><p><img src="`+S+'" alt="\u56FE3-13" loading="lazy"></p><p>\u56FE3-12 G1 \u6536\u96C6\u5668 Region \u5206\u533A\u793A\u610F\u56FE<sup class="footnote-ref"><a href="#footnote27">[27]</a><a class="footnote-anchor" id="footnote-ref27"></a></sup></p><p>\u867D\u7136 G1 \u4ECD\u7136\u4FDD\u7559\u65B0\u751F\u4EE3\u548C\u8001\u5E74\u4EE3\u7684\u6982\u5FF5\uFF0C\u4F46\u65B0\u751F\u4EE3\u548C\u8001\u5E74\u4EE3\u4E0D\u518D\u662F\u56FA\u5B9A\u7684\u4E86\uFF0C\u5B83\u4EEC\u90FD\u662F\u4E00\u7CFB\u5217\u533A\u57DF\uFF08\u4E0D\u9700\u8981\u8FDE\u7EED\uFF09\u7684\u52A8\u6001\u96C6\u5408\u3002G1 \u6536\u96C6\u5668\u4E4B\u6240\u4EE5\u80FD\u5EFA\u7ACB\u53EF\u9884\u6D4B\u7684\u505C\u987F\u65F6\u95F4\u6A21\u578B\uFF0C\u662F\u56E0\u4E3A\u5B83\u5C06 Region \u4F5C\u4E3A\u5355\u6B21\u56DE\u6536\u7684\u6700\u5C0F\u5355\u5143\uFF0C\u5373\u6BCF\u6B21\u6536\u96C6\u5230\u7684\u5185\u5B58\u7A7A\u95F4\u90FD\u662F Region \u5927\u5C0F\u7684\u6574\u6570\u500D\uFF0C\u8FD9\u6837\u53EF\u4EE5\u6709\u8BA1\u5212\u5730\u907F\u514D\u5728\u6574\u4E2A Java \u5806\u4E2D\u8FDB\u884C\u5168\u533A\u57DF\u7684\u5783\u573E\u6536\u96C6\u3002\u66F4\u5177\u4F53\u7684\u5904\u7406\u601D\u8DEF\u662F\u8BA9 G1 \u6536\u96C6\u5668\u53BB\u8DDF\u8E2A\u5404\u4E2A Region \u91CC\u9762\u7684\u5783\u573E\u5806\u79EF\u7684 \u201C\u4EF7\u503C\u201D \u5927\u5C0F\uFF0C\u4EF7\u503C\u5373\u56DE\u6536\u6240\u83B7\u5F97\u7684\u7A7A\u95F4\u5927\u5C0F\u4EE5\u53CA\u56DE\u6536\u6240\u9700\u65F6\u95F4\u7684\u7ECF\u9A8C\u503C\uFF0C\u7136\u540E\u5728\u540E\u53F0\u7EF4\u62A4\u4E00\u4E2A\u4F18\u5148\u7EA7\u5217\u8868\uFF0C\u6BCF\u6B21\u6839\u636E\u7528\u6237\u8BBE\u5B9A\u5141\u8BB8\u7684\u6536\u96C6\u505C\u987F\u65F6\u95F4\uFF08\u4F7F\u7528\u53C2\u6570 -XX:MaxGCPauseMillis \u6307\u5B9A\uFF0C\u9ED8\u8BA4\u503C\u662F 200 \u6BEB\u79D2\uFF09\uFF0C\u4F18\u5148\u5904\u7406\u56DE\u6536\u4EF7\u503C\u6536\u76CA\u6700\u5927\u7684\u90A3\u4E9B Region\uFF0C\u8FD9\u4E5F\u5C31\u662F &quot;Garbage First&quot; \u540D\u5B57\u7684\u7531\u6765\u3002\u8FD9\u79CD\u4F7F\u7528 Region \u5212\u5206\u5185\u5B58\u7A7A\u95F4\uFF0C\u4EE5\u53CA\u5177\u6709\u4F18\u5148\u7EA7\u7684\u533A\u57DF\u56DE\u6536\u65B9\u5F0F\uFF0C\u4FDD\u8BC1\u4E86 G1 \u6536\u96C6\u5668\u5728\u6709\u9650\u7684\u65F6\u95F4\u5185\u83B7\u53D6\u5C3D\u53EF\u80FD\u9AD8\u7684\u6536\u96C6\u6548\u7387\u3002</p><p>G1 \u5C06\u5806\u5185\u5B58 \u201C\u5316\u6574\u4E3A\u96F6\u201D \u7684 \u201C\u89E3\u9898\u601D\u8DEF\u201D\uFF0C\u770B\u8D77\u6765\u4F3C\u4E4E\u6CA1\u6709\u592A\u591A\u4EE4\u4EBA\u60CA\u8BB6\u4E4B\u5904\uFF0C\u4E5F\u5B8C\u5168\u4E0D\u96BE\u7406\u89E3\uFF0C\u4F46\u5176\u4E2D\u7684\u5B9E\u73B0\u7EC6\u8282\u53EF\u662F\u8FDC\u8FDC\u6CA1\u6709\u60F3\u8C61\u4E2D\u90A3\u4E48\u7B80\u5355\uFF0C\u5426\u5219\u5C31\u4E0D\u4F1A\u4ECE 2004 \u5E74 Sun \u5B9E\u9A8C\u5BA4\u53D1\u8868\u7B2C\u4E00\u7BC7\u5173\u4E8E G1 \u7684\u8BBA\u6587\u540E\u4E00\u76F4\u62D6\u5230 2012 \u5E74 4 \u6708 JDK 7 Update 4 \u53D1\u5E03\uFF0C\u7528\u5C06\u8FD1 10 \u5E74\u65F6\u95F4\u624D\u5012\u817E\u51FA\u80FD\u591F\u5546\u7528\u7684 G1 \u6536\u96C6\u5668\u6765\u3002G1 \u6536\u96C6\u5668\u81F3\u5C11\u6709\uFF08\u4E0D\u9650\u4E8E\uFF09\u4EE5\u4E0B\u8FD9\u4E9B\u5173\u952E\u7684\u7EC6\u8282\u95EE\u9898\u9700\u8981\u59A5\u5584\u89E3\u51B3\uFF1A</p><ul><li><p>\u8B6C\u5982\uFF0C\u5C06 Java \u5806\u5206\u6210\u591A\u4E2A\u72EC\u7ACB Region \u540E\uFF0CRegion \u91CC\u9762\u5B58\u5728\u7684\u8DE8 Region \u5F15\u7528\u5BF9\u8C61\u5982\u4F55\u89E3\u51B3\uFF1F\u89E3\u51B3\u7684\u601D\u8DEF\u6211\u4EEC\u5DF2\u7ECF\u77E5\u9053\uFF08\u89C1 3.3.1 \u8282\u548C 3.4.4 \u8282\uFF09\uFF1A\u4F7F\u7528\u8BB0\u5FC6\u96C6\u907F\u514D\u5168\u5806\u4F5C\u4E3A GC Roots \u626B\u63CF\uFF0C\u4F46\u5728 G1 \u6536\u96C6\u5668\u4E0A\u8BB0\u5FC6\u96C6\u7684\u5E94\u7528\u5176\u5B9E\u8981\u590D\u6742\u5F88\u591A\uFF0C\u5B83\u7684\u6BCF\u4E2A Region \u90FD\u7EF4\u62A4\u6709\u81EA\u5DF1\u7684\u8BB0\u5FC6\u96C6\uFF0C\u8FD9\u4E9B\u8BB0\u5FC6\u96C6\u4F1A\u8BB0\u5F55\u4E0B\u522B\u7684 Region \u6307\u5411\u81EA\u5DF1\u7684\u6307\u9488\uFF0C\u5E76\u6807\u8BB0\u8FD9\u4E9B\u6307\u9488\u5206\u522B\u5728\u54EA\u4E9B\u5361\u9875\u7684\u8303\u56F4\u4E4B\u5185\u3002G1 \u7684\u8BB0\u5FC6\u96C6\u5728\u5B58\u50A8\u7ED3\u6784\u7684\u672C\u8D28\u4E0A\u662F\u4E00\u79CD\u54C8\u5E0C\u8868\uFF0CKey \u662F\u522B\u7684 Region \u7684\u8D77\u59CB\u5730\u5740\uFF0CValue \u662F\u4E00\u4E2A\u96C6\u5408\uFF0C\u91CC\u9762\u5B58\u50A8\u7684\u5143\u7D20\u662F\u5361\u8868\u7684\u7D22\u5F15\u53F7\u3002\u8FD9\u79CD \u201C\u53CC\u5411\u201D \u7684\u5361\u8868\u7ED3\u6784\uFF08\u5361\u8868\u662F \u201C\u6211\u6307\u5411\u8C01\u201D\uFF0C\u8FD9\u79CD\u7ED3\u6784\u8FD8\u8BB0\u5F55\u4E86 \u201C\u8C01\u6307\u5411\u6211\u201D\uFF09\u6BD4\u539F\u6765\u7684\u5361\u8868\u5B9E\u73B0\u8D77\u6765\u66F4\u590D\u6742\uFF0C\u540C\u65F6\u7531\u4E8E Region \u6570\u91CF\u6BD4\u4F20\u7EDF\u6536\u96C6\u5668\u7684\u5206\u4EE3\u6570\u91CF\u660E\u663E\u8981\u591A\u5F97\u591A\uFF0C\u56E0\u6B64 G1 \u6536\u96C6\u5668\u8981\u6BD4\u5176\u4ED6\u7684\u4F20\u7EDF\u5783\u573E\u6536\u96C6\u5668\u6709\u7740\u66F4\u9AD8\u7684\u5185\u5B58\u5360\u7528\u8D1F\u62C5\u3002\u6839\u636E\u7ECF\u9A8C\uFF0CG1 \u81F3\u5C11\u8981\u8017\u8D39\u5927\u7EA6\u76F8\u5F53\u4E8E Java \u5806\u5BB9\u91CF 10% \u81F3 20% \u7684\u989D\u5916\u5185\u5B58\u6765\u7EF4\u6301\u6536\u96C6\u5668\u5DE5\u4F5C\u3002</p></li><li><p>\u8B6C\u5982\uFF0C\u5728\u5E76\u53D1\u6807\u8BB0\u9636\u6BB5\u5982\u4F55\u4FDD\u8BC1\u6536\u96C6\u7EBF\u7A0B\u4E0E\u7528\u6237\u7EBF\u7A0B\u4E92\u4E0D\u5E72\u6270\u5730\u8FD0\u884C\uFF1F\u8FD9\u91CC\u9996\u5148\u8981\u89E3\u51B3\u7684\u662F\u7528\u6237\u7EBF\u7A0B\u6539\u53D8\u5BF9\u8C61\u5F15\u7528\u5173\u7CFB\u65F6\uFF0C\u5FC5\u987B\u4FDD\u8BC1\u5176\u4E0D\u80FD\u6253\u7834\u539F\u672C\u7684\u5BF9\u8C61\u56FE\u7ED3\u6784\uFF0C\u5BFC\u81F4\u6807\u8BB0\u7ED3\u679C\u51FA\u73B0\u9519\u8BEF\uFF0C\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u529E\u6CD5\u7B14\u8005\u5DF2\u7ECF\u62BD\u51FA\u72EC\u7ACB\u5C0F\u8282\u6765\u8BB2\u89E3\u8FC7\uFF08\u89C1 3.4.6 \u8282\uFF09\uFF1ACMS \u6536\u96C6\u5668\u91C7\u7528\u589E\u91CF\u66F4\u65B0\u7B97\u6CD5\u5B9E\u73B0\uFF0C\u800C G1 \u6536\u96C6\u5668\u5219\u662F\u901A\u8FC7\u539F\u59CB\u5FEB\u7167\uFF08SATB\uFF09\u7B97\u6CD5\u6765\u5B9E\u73B0\u7684\u3002\u6B64\u5916\uFF0C\u5783\u573E\u6536\u96C6\u5BF9\u7528\u6237\u7EBF\u7A0B\u7684\u5F71\u54CD\u8FD8\u4F53\u73B0\u5728\u56DE\u6536\u8FC7\u7A0B\u4E2D\u65B0\u521B\u5EFA\u5BF9\u8C61\u7684\u5185\u5B58\u5206\u914D\u4E0A\uFF0C\u7A0B\u5E8F\u8981\u7EE7\u7EED\u8FD0\u884C\u5C31\u80AF\u5B9A\u4F1A\u6301\u7EED\u6709\u65B0\u5BF9\u8C61\u88AB\u521B\u5EFA\uFF0CG1 \u4E3A\u6BCF\u4E00\u4E2A Region \u8BBE\u8BA1\u4E86\u4E24\u4E2A\u540D\u4E3A TAMS\uFF08Top at Mark Start\uFF09\u7684\u6307\u9488\uFF0C\u628A Region \u4E2D\u7684\u4E00\u90E8\u5206\u7A7A\u95F4\u5212\u5206\u51FA\u6765\u7528\u4E8E\u5E76\u53D1\u56DE\u6536\u8FC7\u7A0B\u4E2D\u7684\u65B0\u5BF9\u8C61\u5206\u914D\uFF0C\u5E76\u53D1\u56DE\u6536\u65F6\u65B0\u5206\u914D\u7684\u5BF9\u8C61\u5730\u5740\u90FD\u5FC5\u987B\u8981\u5728\u8FD9\u4E24\u4E2A\u6307\u9488\u4F4D\u7F6E\u4EE5\u4E0A\u3002G1 \u6536\u96C6\u5668\u9ED8\u8BA4\u5728\u8FD9\u4E2A\u5730\u5740\u4EE5\u4E0A\u7684\u5BF9\u8C61\u662F\u88AB\u9690\u5F0F\u6807\u8BB0\u8FC7\u7684\uFF0C\u5373\u9ED8\u8BA4\u5B83\u4EEC\u662F\u5B58\u6D3B\u7684\uFF0C\u4E0D\u7EB3\u5165\u56DE\u6536\u8303\u56F4\u3002\u4E0E CMS \u4E2D\u7684 &quot;Concurrent Mode Failure&quot; \u5931\u8D25\u4F1A\u5BFC\u81F4 Full GC \u7C7B\u4F3C\uFF0C\u5982\u679C\u5185\u5B58\u56DE\u6536\u7684\u901F\u5EA6\u8D76\u4E0D\u4E0A\u5185\u5B58\u5206\u914D\u7684\u901F\u5EA6\uFF0CG1 \u6536\u96C6\u5668\u4E5F\u8981\u88AB\u8FEB\u51BB\u7ED3\u7528\u6237\u7EBF\u7A0B\u6267\u884C\uFF0C\u5BFC\u81F4 Full GC \u800C\u4EA7\u751F\u957F\u65F6\u95F4 &quot;Stop The World&quot;\u3002</p></li><li><p>\u8B6C\u5982\uFF0C\u600E\u6837\u5EFA\u7ACB\u8D77\u53EF\u9760\u7684\u505C\u987F\u9884\u6D4B\u6A21\u578B\uFF1F\u7528\u6237\u901A\u8FC7 -XX:MaxGCPauseMillis \u53C2\u6570\u6307\u5B9A\u7684\u505C\u987F\u65F6\u95F4\u53EA\u610F\u5473\u7740\u5783\u573E\u6536\u96C6\u53D1\u751F\u4E4B\u524D\u7684\u671F\u671B\u503C\uFF0C\u4F46 G1 \u6536\u96C6\u5668\u8981\u600E\u4E48\u505A\u624D\u80FD\u6EE1\u8DB3\u7528\u6237\u7684\u671F\u671B\u5462\uFF1FG1 \u6536\u96C6\u5668\u7684\u505C\u987F\u9884\u6D4B\u6A21\u578B\u662F\u4EE5\u8870\u51CF\u5747\u503C\uFF08Decaying Average\uFF09\u4E3A\u7406\u8BBA\u57FA\u7840\u6765\u5B9E\u73B0\u7684\uFF0C\u5728\u5783\u573E\u6536\u96C6\u8FC7\u7A0B\u4E2D\uFF0CG1 \u6536\u96C6\u5668\u4F1A\u8BB0\u5F55\u6BCF\u4E2A Region \u7684\u56DE\u6536\u8017\u65F6\u3001\u6BCF\u4E2A Region \u8BB0\u5FC6\u96C6\u91CC\u7684\u810F\u5361\u6570\u91CF\u7B49\u5404\u4E2A\u53EF\u6D4B\u91CF\u7684\u6B65\u9AA4\u82B1\u8D39\u7684\u6210\u672C\uFF0C\u5E76\u5206\u6790\u5F97\u51FA\u5E73\u5747\u503C\u3001\u6807\u51C6\u504F\u5DEE\u3001\u7F6E\u4FE1\u5EA6\u7B49\u7EDF\u8BA1\u4FE1\u606F\u3002\u8FD9\u91CC\u5F3A\u8C03\u7684 \u201C\u8870\u51CF\u5E73\u5747\u503C\u201D \u662F\u6307\u5B83\u4F1A\u6BD4\u666E\u901A\u7684\u5E73\u5747\u503C\u66F4\u5BB9\u6613\u53D7\u5230\u65B0\u6570\u636E\u7684\u5F71\u54CD\uFF0C\u5E73\u5747\u503C\u4EE3\u8868\u6574\u4F53\u5E73\u5747\u72B6\u6001\uFF0C\u4F46\u8870\u51CF\u5E73\u5747\u503C\u66F4\u51C6\u786E\u5730\u4EE3\u8868 \u201C\u6700\u8FD1\u7684\u201D \u5E73\u5747\u72B6\u6001\u3002\u6362\u53E5\u8BDD\u8BF4\uFF0CRegion \u7684\u7EDF\u8BA1\u72B6\u6001\u8D8A\u65B0\u8D8A\u80FD\u51B3\u5B9A\u5176\u56DE\u6536\u7684\u4EF7\u503C\u3002\u7136\u540E\u901A\u8FC7\u8FD9\u4E9B\u4FE1\u606F\u9884\u6D4B\u73B0\u5728\u5F00\u59CB\u56DE\u6536\u7684\u8BDD\uFF0C\u7531\u54EA\u4E9B Region \u7EC4\u6210\u56DE\u6536\u96C6\u624D\u53EF\u4EE5\u5728\u4E0D\u8D85\u8FC7\u671F\u671B\u505C\u987F\u65F6\u95F4\u7684\u7EA6\u675F\u4E0B\u83B7\u5F97\u6700\u9AD8\u7684\u6536\u76CA\u3002</p></li></ul><p>\u5982\u679C\u6211\u4EEC\u4E0D\u53BB\u8BA1\u7B97\u7528\u6237\u7EBF\u7A0B\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u7684\u52A8\u4F5C\uFF08\u5982\u4F7F\u7528\u5199\u5C4F\u969C\u7EF4\u62A4\u8BB0\u5FC6\u96C6\u7684\u64CD\u4F5C\uFF09\uFF0CG1 \u6536\u96C6\u5668\u7684\u8FD0\u4F5C\u8FC7\u7A0B\u5927\u81F4\u53EF\u5212\u5206\u4E3A\u4EE5\u4E0B\u56DB\u4E2A\u6B65\u9AA4\uFF1A</p><ul><li><p>\u521D\u59CB\u6807\u8BB0\uFF08Initial Marking\uFF09\uFF1A\u4EC5\u4EC5\u53EA\u662F\u6807\u8BB0\u4E00\u4E0B GC Roots \u80FD\u76F4\u63A5\u5173\u8054\u5230\u7684\u5BF9\u8C61\uFF0C\u5E76\u4E14\u4FEE\u6539 TAMS \u6307\u9488\u7684\u503C\uFF0C\u8BA9\u4E0B\u4E00\u9636\u6BB5\u7528\u6237\u7EBF\u7A0B\u5E76\u53D1\u8FD0\u884C\u65F6\uFF0C\u80FD\u6B63\u786E\u5730\u5728\u53EF\u7528\u7684 Region \u4E2D\u5206\u914D\u65B0\u5BF9\u8C61\u3002\u8FD9\u4E2A\u9636\u6BB5\u9700\u8981\u505C\u987F\u7EBF\u7A0B\uFF0C\u4F46\u8017\u65F6\u5F88\u77ED\uFF0C\u800C\u4E14\u662F\u501F\u7528\u8FDB\u884C Minor GC \u7684\u65F6\u5019\u540C\u6B65\u5B8C\u6210\u7684\uFF0C\u6240\u4EE5 G1 \u6536\u96C6\u5668\u5728\u8FD9\u4E2A\u9636\u6BB5\u5B9E\u9645\u5E76\u6CA1\u6709\u989D\u5916\u7684\u505C\u987F\u3002</p></li><li><p>\u5E76\u53D1\u6807\u8BB0\uFF08Concurrent Marking\uFF09\uFF1A\u4ECE GC Root \u5F00\u59CB\u5BF9\u5806\u4E2D\u5BF9\u8C61\u8FDB\u884C\u53EF\u8FBE\u6027\u5206\u6790\uFF0C\u9012\u5F52\u626B\u63CF\u6574\u4E2A\u5806\u91CC\u7684\u5BF9\u8C61\u56FE\uFF0C\u627E\u51FA\u8981\u56DE\u6536\u7684\u5BF9\u8C61\uFF0C\u8FD9\u9636\u6BB5\u8017\u65F6\u8F83\u957F\uFF0C\u4F46\u53EF\u4E0E\u7528\u6237\u7A0B\u5E8F\u5E76\u53D1\u6267\u884C\u3002\u5F53\u5BF9\u8C61\u56FE\u626B\u63CF\u5B8C\u6210\u4EE5\u540E\uFF0C\u8FD8\u8981\u91CD\u65B0\u5904\u7406 SATB \u8BB0\u5F55\u4E0B\u7684\u5728\u5E76\u53D1\u65F6\u6709\u5F15\u7528\u53D8\u52A8\u7684\u5BF9\u8C61\u3002</p></li><li><p>\u6700\u7EC8\u6807\u8BB0\uFF08Final Marking\uFF09\uFF1A\u5BF9\u7528\u6237\u7EBF\u7A0B\u505A\u53E6\u4E00\u4E2A\u77ED\u6682\u7684\u6682\u505C\uFF0C\u7528\u4E8E\u5904\u7406\u5E76\u53D1\u9636\u6BB5\u7ED3\u675F\u540E\u4ECD\u9057\u7559\u4E0B\u6765\u7684\u6700\u540E\u90A3\u5C11\u91CF\u7684 SATB \u8BB0\u5F55\u3002</p></li><li><p>\u7B5B\u9009\u56DE\u6536\uFF08Live Data Counting and Evacuation\uFF09\uFF1A\u8D1F\u8D23\u66F4\u65B0 Region \u7684\u7EDF\u8BA1\u6570\u636E\uFF0C\u5BF9\u5404\u4E2A Region \u7684\u56DE\u6536\u4EF7\u503C\u548C\u6210\u672C\u8FDB\u884C\u6392\u5E8F\uFF0C\u6839\u636E\u7528\u6237\u6240\u671F\u671B\u7684\u505C\u987F\u65F6\u95F4\u6765\u5236\u5B9A\u56DE\u6536\u8BA1\u5212\uFF0C\u53EF\u4EE5\u81EA\u7531\u9009\u62E9\u4EFB\u610F\u591A\u4E2A Region \u6784\u6210\u56DE\u6536\u96C6\uFF0C\u7136\u540E\u628A\u51B3\u5B9A\u56DE\u6536\u7684\u90A3\u4E00\u90E8\u5206 Region \u7684\u5B58\u6D3B\u5BF9\u8C61\u590D\u5236\u5230\u7A7A\u7684 Region \u4E2D\uFF0C\u518D\u6E05\u7406\u6389\u6574\u4E2A\u65E7 Region \u7684\u5168\u90E8\u7A7A\u95F4\u3002\u8FD9\u91CC\u7684\u64CD\u4F5C\u6D89\u53CA\u5B58\u6D3B\u5BF9\u8C61\u7684\u79FB\u52A8\uFF0C\u662F\u5FC5\u987B\u6682\u505C\u7528\u6237\u7EBF\u7A0B\uFF0C\u7531\u591A\u6761\u6536\u96C6\u5668\u7EBF\u7A0B\u5E76\u884C\u5B8C\u6210\u7684\u3002</p></li></ul><p>\u4ECE\u4E0A\u8FF0\u9636\u6BB5\u7684\u63CF\u8FF0\u53EF\u4EE5\u770B\u51FA\uFF0CG1 \u6536\u96C6\u5668\u9664\u4E86\u5E76\u53D1\u6807\u8BB0\u5916\uFF0C\u5176\u4F59\u9636\u6BB5\u4E5F\u662F\u8981\u5B8C\u5168\u6682\u505C\u7528\u6237\u7EBF\u7A0B\u7684\uFF0C\u6362\u8A00\u4E4B\uFF0C\u5B83\u5E76\u975E\u7EAF\u7CB9\u5730\u8FFD\u6C42\u4F4E\u5EF6\u8FDF\uFF0C\u5B98\u65B9\u7ED9\u5B83\u8BBE\u5B9A\u7684\u76EE\u6807\u662F\u5728\u5EF6\u8FDF\u53EF\u63A7\u7684\u60C5\u51B5\u4E0B\u83B7\u5F97\u5C3D\u53EF\u80FD\u9AD8\u7684\u541E\u5410\u91CF\uFF0C\u6240\u4EE5\u624D\u80FD\u62C5\u5F53\u8D77 \u201C\u5168\u529F\u80FD\u6536\u96C6\u5668\u201D \u7684\u91CD\u4EFB\u4E0E\u671F\u671B<sup class="footnote-ref"><a href="#footnote28">[28]</a><a class="footnote-anchor" id="footnote-ref28"></a></sup>\u3002</p><p>\u4ECE Oracle \u5B98\u65B9\u900F\u9732\u51FA\u6765\u7684\u4FE1\u606F\u53EF\u83B7\u77E5\uFF0C\u56DE\u6536\u9636\u6BB5\uFF08Evacuation\uFF09\u5176\u5B9E\u672C\u4E5F\u6709\u60F3\u8FC7\u8BBE\u8BA1\u6210\u4E0E\u7528\u6237\u7A0B\u5E8F\u4E00\u8D77\u5E76\u53D1\u6267\u884C\uFF0C\u4F46\u8FD9\u4EF6\u4E8B\u60C5\u505A\u8D77\u6765\u6BD4\u8F83\u590D\u6742\uFF0C\u8003\u8651\u5230 G1 \u53EA\u662F\u56DE\u6536\u4E00\u90E8\u5206 Region\uFF0C\u505C\u987F\u65F6\u95F4\u662F\u7528\u6237\u53EF\u63A7\u5236\u7684\uFF0C\u6240\u4EE5\u5E76\u4E0D\u8FEB\u5207\u53BB\u5B9E\u73B0\uFF0C\u800C\u9009\u62E9\u628A\u8FD9\u4E2A\u7279\u6027\u653E\u5230\u4E86 G1 \u4E4B\u540E\u51FA\u73B0\u7684\u4F4E\u5EF6\u8FDF\u5783\u573E\u6536\u96C6\u5668\uFF08\u5373 ZGC\uFF09\u4E2D\u3002\u53E6\u5916\uFF0C\u8FD8\u8003\u8651\u5230 G1 \u4E0D\u662F\u4EC5\u4EC5\u9762\u5411\u4F4E\u5EF6\u8FDF\uFF0C\u505C\u987F\u7528\u6237\u7EBF\u7A0B\u80FD\u591F\u6700\u5927\u5E45\u5EA6\u63D0\u9AD8\u5783\u573E\u6536\u96C6\u6548\u7387\uFF0C\u4E3A\u4E86\u4FDD\u8BC1\u541E\u5410\u91CF\u6240\u4EE5\u624D\u9009\u62E9\u4E86\u5B8C\u5168\u6682\u505C\u7528\u6237\u7EBF\u7A0B\u7684\u5B9E\u73B0\u65B9\u6848\u3002\u901A\u8FC7\u56FE3-13 \u53EF\u4EE5\u6BD4\u8F83\u6E05\u695A\u5730\u770B\u5230 G1 \u6536\u96C6\u5668\u7684\u8FD0\u4F5C\u6B65\u9AA4\u4E2D\u5E76\u53D1\u548C\u9700\u8981\u505C\u987F\u7684\u9636\u6BB5\u3002</p><p><img src="'+G+'" alt="\u56FE3-14" loading="lazy"></p><p>\u56FE3-13 G1 \u6536\u96C6\u5668\u8FD0\u884C\u793A\u610F\u56FE</p><p>\u6BEB\u65E0\u7591\u95EE\uFF0C\u53EF\u4EE5\u7531\u7528\u6237\u6307\u5B9A\u671F\u671B\u7684\u505C\u987F\u65F6\u95F4\u662F G1 \u6536\u96C6\u5668\u5F88\u5F3A\u5927\u7684\u4E00\u4E2A\u529F\u80FD\uFF0C\u8BBE\u7F6E\u4E0D\u540C\u7684\u671F\u671B\u505C\u987F\u65F6\u95F4\uFF0C\u53EF\u4F7F\u5F97 G1 \u5728\u4E0D\u540C\u5E94\u7528\u573A\u666F\u4E2D\u53D6\u5F97\u5173\u6CE8\u541E\u5410\u91CF\u548C\u5173\u6CE8\u5EF6\u8FDF\u4E4B\u95F4\u7684\u6700\u4F73\u5E73\u8861\u3002\u4E0D\u8FC7\uFF0C\u8FD9\u91CC\u8BBE\u7F6E\u7684 \u201C\u671F\u671B\u503C\u201D \u5FC5\u987B\u662F\u7B26\u5408\u5B9E\u9645\u7684\uFF0C\u4E0D\u80FD\u5F02\u60F3\u5929\u5F00\uFF0C\u6BD5\u7ADF G1 \u662F\u8981\u51BB\u7ED3\u7528\u6237\u7EBF\u7A0B\u6765\u590D\u5236\u5BF9\u8C61\u7684\uFF0C\u8FD9\u4E2A\u505C\u987F\u65F6\u95F4\u518D\u600E\u4E48\u4F4E\u4E5F\u5F97\u6709\u4E2A\u9650\u5EA6\u3002\u5B83\u9ED8\u8BA4\u7684\u505C\u987F\u76EE\u6807\u4E3A\u4E24\u767E\u6BEB\u79D2\uFF0C\u4E00\u822C\u6765\u8BF4\uFF0C\u56DE\u6536\u9636\u6BB5\u5360\u5230\u51E0\u5341\u5230\u4E00\u767E\u751A\u81F3\u63A5\u8FD1\u4E24\u767E\u6BEB\u79D2\u90FD\u5F88\u6B63\u5E38\uFF0C\u4F46\u5982\u679C\u6211\u4EEC\u628A\u505C\u987F\u65F6\u95F4\u8C03\u5F97\u975E\u5E38\u4F4E\uFF0C\u8B6C\u5982\u8BBE\u7F6E\u4E3A\u4E8C\u5341\u6BEB\u79D2\uFF0C\u5F88\u53EF\u80FD\u51FA\u73B0\u7684\u7ED3\u679C\u5C31\u662F\u7531\u4E8E\u505C\u987F\u76EE\u6807\u65F6\u95F4\u592A\u77ED\uFF0C\u5BFC\u81F4\u6BCF\u6B21\u9009\u51FA\u6765\u7684\u56DE\u6536\u96C6\u53EA\u5360\u5806\u5185\u5B58\u5F88\u5C0F\u7684\u4E00\u90E8\u5206\uFF0C\u6536\u96C6\u5668\u6536\u96C6\u7684\u901F\u5EA6\u9010\u6E10\u8DDF\u4E0D\u4E0A\u5206\u914D\u5668\u5206\u914D\u7684\u901F\u5EA6\uFF0C\u5BFC\u81F4\u5783\u573E\u6162\u6162\u5806\u79EF\u3002\u5F88\u53EF\u80FD\u4E00\u5F00\u59CB\u6536\u96C6\u5668\u8FD8\u80FD\u4ECE\u7A7A\u95F2\u7684\u5806\u5185\u5B58\u4E2D\u83B7\u5F97\u4E00\u4E9B\u5598\u606F\u7684\u65F6\u95F4\uFF0C\u4F46\u5E94\u7528\u8FD0\u884C\u65F6\u95F4\u4E00\u957F\u5C31\u4E0D\u884C\u4E86\uFF0C\u6700\u7EC8\u5360\u6EE1\u5806\u5F15\u53D1 Full GC \u53CD\u800C\u964D\u4F4E\u6027\u80FD\uFF0C\u6240\u4EE5\u901A\u5E38\u628A\u671F\u671B\u505C\u987F\u65F6\u95F4\u8BBE\u7F6E\u4E3A\u4E00\u4E24\u767E\u6BEB\u79D2\u6216\u8005\u4E24\u4E09\u767E\u6BEB\u79D2\u4F1A\u662F\u6BD4\u8F83\u5408\u7406\u7684\u3002</p><p>\u4ECE G1 \u5F00\u59CB\uFF0C\u6700\u5148\u8FDB\u7684\u5783\u573E\u6536\u96C6\u5668\u7684\u8BBE\u8BA1\u5BFC\u5411\u90FD\u4E0D\u7EA6\u800C\u540C\u5730\u53D8\u4E3A\u8FFD\u6C42\u80FD\u591F\u5E94\u4ED8\u5E94\u7528\u7684\u5185\u5B58\u5206\u914D\u901F\u7387\uFF08Allocation Rate\uFF09\uFF0C\u800C\u4E0D\u8FFD\u6C42\u4E00\u6B21\u628A\u6574\u4E2A Java \u5806\u5168\u90E8\u6E05\u7406\u5E72\u51C0\u3002\u8FD9\u6837\uFF0C\u5E94\u7528\u5728\u5206\u914D\uFF0C\u540C\u65F6\u6536\u96C6\u5668\u5728\u6536\u96C6\uFF0C\u53EA\u8981\u6536\u96C6\u7684\u901F\u5EA6\u80FD\u8DDF\u5F97\u4E0A\u5BF9\u8C61\u5206\u914D\u7684\u901F\u5EA6\uFF0C\u90A3\u4E00\u5207\u5C31\u80FD\u8FD0\u4F5C\u5F97\u5F88\u5B8C\u7F8E\u3002\u8FD9\u79CD\u65B0\u7684\u6536\u96C6\u5668\u8BBE\u8BA1\u601D\u8DEF\u4ECE\u5DE5\u7A0B\u5B9E\u73B0\u4E0A\u770B\u662F\u4ECE G1 \u5F00\u59CB\u5174\u8D77\u7684\uFF0C\u6240\u4EE5\u8BF4 G1 \u662F\u6536\u96C6\u5668\u6280\u672F\u53D1\u5C55\u7684\u4E00\u4E2A\u91CC\u7A0B\u7891\u3002</p><p>G1 \u6536\u96C6\u5668\u5E38\u4F1A\u88AB\u62FF\u6765\u4E0E CMS \u6536\u96C6\u5668\u4E92\u76F8\u6BD4\u8F83\uFF0C\u6BD5\u7ADF\u5B83\u4EEC\u90FD\u975E\u5E38\u5173\u6CE8\u505C\u987F\u65F6\u95F4\u7684\u63A7\u5236\uFF0C\u5B98\u65B9\u8D44\u6599<sup class="footnote-ref"><a href="#footnote29">[29]</a><a class="footnote-anchor" id="footnote-ref29"></a></sup>\u4E2D\u5C06\u5B83\u4EEC\u4E24\u4E2A\u5E76\u79F0\u4E3A &quot;The Mostly Concurrent Collectors&quot;\u3002\u5728\u672A\u6765\uFF0CG1 \u6536\u96C6\u5668\u6700\u7EC8\u8FD8\u662F\u8981\u53D6\u4EE3 CMS \u7684\uFF0C\u800C\u5F53\u4E0B\u5B83\u4EEC\u4E24\u8005\u5E76\u5B58\u7684\u65F6\u95F4\u91CC\uFF0C\u5206\u4E2A\u9AD8\u4F4E\u4F18\u52A3\u5C31\u65E0\u53EF\u907F\u514D\u3002</p><p>\u76F8\u6BD4 CMS\uFF0CG1 \u7684\u4F18\u70B9\u6709\u5F88\u591A\uFF0C\u6682\u4E14\u4E0D\u8BBA\u53EF\u4EE5\u6307\u5B9A\u6700\u5927\u505C\u987F\u65F6\u95F4\u3001\u5206 Region \u7684\u5185\u5B58\u5E03\u5C40\u3001\u6309\u6536\u76CA\u52A8\u6001\u786E\u5B9A\u56DE\u6536\u96C6\u8FD9\u4E9B\u521B\u65B0\u6027\u8BBE\u8BA1\u5E26\u6765\u7684\u7EA2\u5229\uFF0C\u5355\u4ECE\u6700\u4F20\u7EDF\u7684\u7B97\u6CD5\u7406\u8BBA\u4E0A\u770B\uFF0CG1 \u4E5F\u66F4\u6709\u53D1\u5C55\u6F5C\u529B\u3002\u4E0E CMS \u7684 \u201C\u6807\u8BB0-\u6E05\u9664\u201D \u7B97\u6CD5\u4E0D\u540C\uFF0CG1 \u4ECE\u6574\u4F53\u6765\u770B\u662F\u57FA\u4E8E \u201C\u6807\u8BB0-\u6574\u7406\u201D \u7B97\u6CD5\u5B9E\u73B0\u7684\u6536\u96C6\u5668\uFF0C\u4F46\u4ECE\u5C40\u90E8\uFF08\u4E24\u4E2A Region \u4E4B\u95F4\uFF09\u4E0A\u770B\u53C8\u662F\u57FA\u4E8E \u201C\u6807\u8BB0-\u590D\u5236\u201D \u7B97\u6CD5\u5B9E\u73B0\uFF0C\u65E0\u8BBA\u5982\u4F55\uFF0C\u8FD9\u4E24\u79CD\u7B97\u6CD5\u90FD\u610F\u5473\u7740 G1 \u8FD0\u4F5C\u671F\u95F4\u4E0D\u4F1A\u4EA7\u751F\u5185\u5B58\u7A7A\u95F4\u788E\u7247\uFF0C\u5783\u573E\u6536\u96C6\u5B8C\u6210\u4E4B\u540E\u80FD\u63D0\u4F9B\u89C4\u6574\u7684\u53EF\u7528\u5185\u5B58\u3002\u8FD9\u79CD\u7279\u6027\u6709\u5229\u4E8E\u7A0B\u5E8F\u957F\u65F6\u95F4\u8FD0\u884C\uFF0C\u5728\u7A0B\u5E8F\u4E3A\u5927\u5BF9\u8C61\u5206\u914D\u5185\u5B58\u65F6\u4E0D\u5BB9\u6613\u56E0\u65E0\u6CD5\u627E\u5230\u8FDE\u7EED\u5185\u5B58\u7A7A\u95F4\u800C\u63D0\u524D\u89E6\u53D1\u4E0B\u4E00\u6B21\u6536\u96C6\u3002</p><p>\u4E0D\u8FC7\uFF0CG1 \u76F8\u5BF9\u4E8E CMS \u4ECD\u7136\u4E0D\u662F\u5360\u5168\u65B9\u4F4D\u3001\u538B\u5012\u6027\u4F18\u52BF\u7684\uFF0C\u4ECE\u5B83\u51FA\u73B0\u51E0\u5E74\u4ECD\u4E0D\u80FD\u5728\u6240\u6709\u5E94\u7528\u573A\u666F\u4E2D\u4EE3\u66FF CMS \u5C31\u53EF\u4EE5\u5F97\u77E5\u8FD9\u4E2A\u7ED3\u8BBA\u3002\u6BD4\u8D77 CMS\uFF0CG1 \u7684\u5F31\u9879\u4E5F\u53EF\u4EE5\u5217\u4E3E\u51FA\u4E0D\u5C11\uFF0C\u5982\u5728\u7528\u6237\u7A0B\u5E8F\u8FD0\u884C\u8FC7\u7A0B\u4E2D\uFF0CG1 \u65E0\u8BBA\u662F\u4E3A\u4E86\u5783\u573E\u6536\u96C6\u4EA7\u751F\u7684\u5185\u5B58\u5360\u7528\uFF08Footprint\uFF09\u8FD8\u662F\u7A0B\u5E8F\u8FD0\u884C\u65F6\u7684\u989D\u5916\u6267\u884C\u8D1F\u8F7D\uFF08Overload\uFF09\u90FD\u8981\u6BD4 CMS \u8981\u9AD8\u3002</p><p>\u5C31\u5185\u5B58\u5360\u7528\u6765\u8BF4\uFF0C\u867D\u7136 G1 \u548C CMS \u90FD\u4F7F\u7528\u5361\u8868\u6765\u5904\u7406\u8DE8\u4EE3\u6307\u9488\uFF0C\u4F46 G1 \u7684\u5361\u8868\u5B9E\u73B0\u66F4\u4E3A\u590D\u6742\uFF0C\u800C\u4E14\u5806\u4E2D\u6BCF\u4E2A Region\uFF0C\u65E0\u8BBA\u626E\u6F14\u7684\u662F\u65B0\u751F\u4EE3\u8FD8\u662F\u8001\u5E74\u4EE3\u89D2\u8272\uFF0C\u90FD\u5FC5\u987B\u6709\u4E00\u4EFD\u5361\u8868\uFF0C\u8FD9\u5BFC\u81F4 G1 \u7684\u8BB0\u5FC6\u96C6\uFF08\u548C\u5176\u4ED6\u5185\u5B58\u6D88\u8017\uFF09\u53EF\u80FD\u4F1A\u5360\u6574\u4E2A\u5806\u5BB9\u91CF\u7684 20% \u4E43\u81F3\u66F4\u591A\u7684\u5185\u5B58\u7A7A\u95F4\uFF1B\u76F8\u6BD4\u8D77\u6765 CMS \u7684\u5361\u8868\u5C31\u76F8\u5F53\u7B80\u5355\uFF0C\u53EA\u6709\u552F\u4E00\u4E00\u4EFD\uFF0C\u800C\u4E14\u53EA\u9700\u8981\u5904\u7406\u8001\u5E74\u4EE3\u5230\u65B0\u751F\u4EE3\u7684\u5F15\u7528\uFF0C\u53CD\u8FC7\u6765\u5219\u4E0D\u9700\u8981\uFF0C\u7531\u4E8E\u65B0\u751F\u4EE3\u7684\u5BF9\u8C61\u5177\u6709\u671D\u751F\u5915\u706D\u7684\u4E0D\u7A33\u5B9A\u6027\uFF0C\u5F15\u7528\u53D8\u5316\u9891\u7E41\uFF0C\u80FD\u7701\u4E0B\u8FD9\u4E2A\u533A\u57DF\u7684\u7EF4\u62A4\u5F00\u9500\u662F\u5F88\u5212\u7B97\u7684<sup class="footnote-ref"><a href="#footnote30">[30]</a><a class="footnote-anchor" id="footnote-ref30"></a></sup>\u3002</p><p>\u5728\u6267\u884C\u8D1F\u8F7D\u7684\u89D2\u5EA6\u4E0A\uFF0C\u540C\u6837\u7531\u4E8E\u4E24\u4E2A\u6536\u96C6\u5668\u5404\u81EA\u7684\u7EC6\u8282\u5B9E\u73B0\u7279\u70B9\u5BFC\u81F4\u4E86\u7528\u6237\u7A0B\u5E8F\u8FD0\u884C\u65F6\u7684\u8D1F\u8F7D\u4F1A\u6709\u4E0D\u540C\uFF0C\u8B6C\u5982\u5B83\u4EEC\u90FD\u4F7F\u7528\u5230\u5199\u5C4F\u969C\uFF0CCMS \u7528\u5199\u540E\u5C4F\u969C\u6765\u66F4\u65B0\u7EF4\u62A4\u5361\u8868\uFF1B\u800C G1 \u9664\u4E86\u4F7F\u7528\u5199\u540E\u5C4F\u969C\u6765\u8FDB\u884C\u540C\u6837\u7684\uFF08\u7531\u4E8E G1 \u7684\u5361\u8868\u7ED3\u6784\u590D\u6742\uFF0C\u5176\u5B9E\u662F\u66F4\u70E6\u7410\u7684\uFF09\u5361\u8868\u7EF4\u62A4\u64CD\u4F5C\u5916\uFF0C\u4E3A\u4E86\u5B9E\u73B0\u539F\u59CB\u5FEB\u7167\u641C\u7D22\uFF08SATB\uFF09\u7B97\u6CD5\uFF0C\u8FD8\u9700\u8981\u4F7F\u7528\u5199\u524D\u5C4F\u969C\u6765\u8DDF\u8E2A\u5E76\u53D1\u65F6\u7684\u6307\u9488\u53D8\u5316\u60C5\u51B5\u3002\u76F8\u6BD4\u8D77\u589E\u91CF\u66F4\u65B0\u7B97\u6CD5\uFF0C\u539F\u59CB\u5FEB\u7167\u641C\u7D22\u80FD\u591F\u51CF\u5C11\u5E76\u53D1\u6807\u8BB0\u548C\u91CD\u65B0\u6807\u8BB0\u9636\u6BB5\u7684\u6D88\u8017\uFF0C\u907F\u514D CMS \u90A3\u6837\u5728\u6700\u7EC8\u6807\u8BB0\u9636\u6BB5\u505C\u987F\u65F6\u95F4\u8FC7\u957F\u7684\u7F3A\u70B9\uFF0C\u4F46\u662F\u5728\u7528\u6237\u7A0B\u5E8F\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u786E\u5B9E\u4F1A\u4EA7\u751F\u7531\u8DDF\u8E2A\u5F15\u7528\u53D8\u5316\u5E26\u6765\u7684\u989D\u5916\u8D1F\u62C5\u3002\u7531\u4E8E G1 \u5BF9\u5199\u5C4F\u969C\u7684\u590D\u6742\u64CD\u4F5C\u8981\u6BD4 CMS \u6D88\u8017\u66F4\u591A\u7684\u8FD0\u7B97\u8D44\u6E90\uFF0C\u6240\u4EE5 CMS \u7684\u5199\u5C4F\u969C\u5B9E\u73B0\u662F\u76F4\u63A5\u7684\u540C\u6B65\u64CD\u4F5C\uFF0C\u800C G1 \u5C31\u4E0D\u5F97\u4E0D\u5C06\u5176\u5B9E\u73B0\u4E3A\u7C7B\u4F3C\u4E8E\u6D88\u606F\u961F\u5217\u7684\u7ED3\u6784\uFF0C\u628A\u5199\u524D\u5C4F\u969C\u548C\u5199\u540E\u5C4F\u969C\u4E2D\u8981\u505A\u7684\u4E8B\u60C5\u90FD\u653E\u5230\u961F\u5217\u91CC\uFF0C\u7136\u540E\u518D\u5F02\u6B65\u5904\u7406\u3002</p><p>\u4EE5\u4E0A\u7684\u4F18\u7F3A\u70B9\u5BF9\u6BD4\u4EC5\u4EC5\u662F\u9488\u5BF9 G1 \u548C CMS \u4E24\u6B3E\u5783\u573E\u6536\u96C6\u5668\u5355\u72EC\u67D0\u65B9\u9762\u7684\u5B9E\u73B0\u7EC6\u8282\u7684\u5B9A\u6027\u5206\u6790\uFF0C\u901A\u5E38\u6211\u4EEC\u8BF4\u54EA\u6B3E\u6536\u96C6\u5668\u8981\u66F4\u597D\u3001\u8981\u597D\u4E0A\u591A\u5C11\uFF0C\u5F80\u5F80\u662F\u9488\u5BF9\u5177\u4F53\u573A\u666F\u624D\u80FD\u505A\u7684\u5B9A\u91CF\u6BD4\u8F83\u3002\u6309\u7167\u7B14\u8005\u7684\u5B9E\u8DF5\u7ECF\u9A8C\uFF0C\u76EE\u524D\u5728\u5C0F\u5185\u5B58\u5E94\u7528\u4E0A CMS \u7684\u8868\u73B0\u5927\u6982\u7387\u4ECD\u7136\u8981\u4F1A\u4F18\u4E8E G1\uFF0C\u800C\u5728\u5927\u5185\u5B58\u5E94\u7528\u4E0A G1 \u5219\u5927\u591A\u80FD\u53D1\u6325\u5176\u4F18\u52BF\uFF0C\u8FD9\u4E2A\u4F18\u52A3\u52BF\u7684 Java \u5806\u5BB9\u91CF\u5E73\u8861\u70B9\u901A\u5E38\u5728 6GB \u81F3 8GB \u4E4B\u95F4\uFF0C\u5F53\u7136\uFF0C\u4EE5\u4E0A\u8FD9\u4E9B\u4E5F\u4EC5\u662F\u7ECF\u9A8C\u4E4B\u8C08\uFF0C\u4E0D\u540C\u5E94\u7528\u9700\u8981\u91CF\u4F53\u88C1\u8863\u5730\u5B9E\u9645\u6D4B\u8BD5\u624D\u80FD\u5F97\u51FA\u6700\u5408\u9002\u7684\u7ED3\u8BBA\uFF0C\u968F\u7740 HotSpot \u7684\u5F00\u53D1\u8005\u5BF9 G1 \u7684\u4E0D\u65AD\u4F18\u5316\uFF0C\u4E5F\u4F1A\u8BA9\u5BF9\u6BD4\u7ED3\u679C\u7EE7\u7EED\u5411 G1 \u503E\u659C\u3002</p><h2 id="_3-6-\u4F4E\u5EF6\u8FDF\u5783\u573E\u6536\u96C6\u5668" tabindex="-1"><a class="header-anchor" href="#_3-6-\u4F4E\u5EF6\u8FDF\u5783\u573E\u6536\u96C6\u5668" aria-hidden="true">#</a> 3.6 \u4F4E\u5EF6\u8FDF\u5783\u573E\u6536\u96C6\u5668</h2><p>HotSpot \u7684\u5783\u573E\u6536\u96C6\u5668\u4ECE Serial \u53D1\u5C55\u5230 CMS \u518D\u5230 G1\uFF0C\u7ECF\u5386\u4E86\u903E\u4E8C\u5341\u5E74\u65F6\u95F4\uFF0C\u7ECF\u8FC7\u4E86\u6570\u767E\u4E0A\u5343\u4E07\u53F0\u670D\u52A1\u5668\u4E0A\u7684\u5E94\u7528\u5B9E\u8DF5\uFF0C\u5DF2\u7ECF\u88AB\u6DEC\u70BC\u5F97\u76F8\u5F53\u6210\u719F\u4E86\uFF0C\u4E0D\u8FC7\u5B83\u4EEC\u8DDD\u79BB \u201C\u5B8C\u7F8E\u201D \u8FD8\u662F\u5F88\u9065\u8FDC\u3002\u600E\u6837\u7684\u6536\u96C6\u5668\u624D\u7B97\u662F \u201C\u5B8C\u7F8E\u201D \u5462\uFF1F\u8FD9\u542C\u8D77\u6765\u50CF\u662F\u4E00\u9053\u4E3B\u89C2\u9898\uFF0C\u5176\u5B9E\u4E0D\u7136\uFF0C\u5B8C\u7F8E\u96BE\u4EE5\u5B9E\u73B0\uFF0C\u4F46\u662F\u6211\u4EEC\u786E\u5B9E\u53EF\u4EE5\u628A\u5B83\u5BA2\u89C2\u63CF\u8FF0\u51FA\u6765\u3002</p><p>\u8861\u91CF\u5783\u573E\u6536\u96C6\u5668\u7684\u4E09\u9879\u6700\u91CD\u8981\u7684\u6307\u6807\u662F\uFF1A\u5185\u5B58\u5360\u7528\uFF08Footprint\uFF09\u3001\u541E\u5410\u91CF\uFF08Throughput\uFF09\u548C\u5EF6\u8FDF\uFF08Latency\uFF09\uFF0C\u4E09\u8005\u5171\u540C\u6784\u6210\u4E86\u4E00\u4E2A \u201C\u4E0D\u53EF\u80FD\u4E09\u89D2<sup class="footnote-ref"><a href="#footnote31">[31]</a><a class="footnote-anchor" id="footnote-ref31"></a></sup>\u201D\u3002\u4E09\u8005\u603B\u4F53\u7684\u8868\u73B0\u4F1A\u968F\u6280\u672F\u8FDB\u6B65\u800C\u8D8A\u6765\u8D8A\u597D\uFF0C\u4F46\u662F\u8981\u5728\u8FD9\u4E09\u4E2A\u65B9\u9762\u540C\u65F6\u5177\u6709\u5353\u8D8A\u8868\u73B0\u7684 \u201C\u5B8C\u7F8E\u201D \u6536\u96C6\u5668\u662F\u6781\u5176\u56F0\u96BE\u751A\u81F3\u662F\u4E0D\u53EF\u80FD\u7684\uFF0C\u4E00\u6B3E\u4F18\u79C0\u7684\u6536\u96C6\u5668\u901A\u5E38\u6700\u591A\u53EF\u4EE5\u540C\u65F6\u8FBE\u6210\u5176\u4E2D\u7684\u4E24\u9879\u3002</p><p>\u5728\u5185\u5B58\u5360\u7528\u3001\u541E\u5410\u91CF\u548C\u5EF6\u8FDF\u8FD9\u4E09\u9879\u6307\u6807\u91CC\uFF0C\u5EF6\u8FDF\u7684\u91CD\u8981\u6027\u65E5\u76CA\u51F8\u663E\uFF0C\u8D8A\u53D1\u5907\u53D7\u5173\u6CE8\u3002\u5176\u539F\u56E0\u662F\u968F\u7740\u8BA1\u7B97\u673A\u786C\u4EF6\u7684\u53D1\u5C55\u3001\u6027\u80FD\u7684\u63D0\u5347\uFF0C\u6211\u4EEC\u8D8A\u6765\u8D8A\u80FD\u5BB9\u5FCD\u6536\u96C6\u5668\u591A\u5360\u7528\u4E00\u70B9\u70B9\u5185\u5B58\uFF1B\u786C\u4EF6\u6027\u80FD\u589E\u957F\uFF0C\u5BF9\u8F6F\u4EF6\u7CFB\u7EDF\u7684\u5904\u7406\u80FD\u529B\u662F\u6709\u76F4\u63A5\u52A9\u76CA\u7684\uFF0C\u786C\u4EF6\u7684\u89C4\u683C\u548C\u6027\u80FD\u8D8A\u9AD8\uFF0C\u4E5F\u6709\u52A9\u4E8E\u964D\u4F4E\u6536\u96C6\u5668\u8FD0\u884C\u65F6\u5BF9\u5E94\u7528\u7A0B\u5E8F\u7684\u5F71\u54CD\uFF0C\u6362\u53E5\u8BDD\u8BF4\uFF0C\u541E\u5410\u91CF\u4F1A\u66F4\u9AD8\u3002\u4F46\u5BF9\u5EF6\u8FDF\u5219\u4E0D\u662F\u8FD9\u6837\uFF0C\u786C\u4EF6\u89C4\u683C\u63D0\u5347\uFF0C\u51C6\u786E\u5730\u8BF4\u662F\u5185\u5B58\u7684\u6269\u5927\uFF0C\u5BF9\u5EF6\u8FDF\u53CD\u800C\u4F1A\u5E26\u6765\u8D1F\u9762\u7684\u6548\u679C\uFF0C\u8FD9\u70B9\u4E5F\u662F\u5F88\u7B26\u5408\u76F4\u89C2\u601D\u7EF4\u7684\uFF1A\u865A\u62DF\u673A\u8981\u56DE\u6536\u5B8C\u6574\u7684 1TB \u7684\u5806\u5185\u5B58\uFF0C\u6BEB\u65E0\u7591\u95EE\u8981\u6BD4\u56DE\u6536 1GB \u7684\u5806\u5185\u5B58\u8017\u8D39\u66F4\u591A\u65F6\u95F4\u3002\u7531\u6B64\uFF0C\u6211\u4EEC\u5C31\u4E0D\u96BE\u7406\u89E3\u4E3A\u4F55\u5EF6\u8FDF\u4F1A\u6210\u4E3A\u5783\u573E\u6536\u96C6\u5668\u6700\u88AB\u91CD\u89C6\u7684\u6027\u80FD\u6307\u6807\u4E86\u3002\u73B0\u5728\u6211\u4EEC\u6765\u89C2\u5BDF\u4E00\u4E0B\u73B0\u5728\u5DF2\u63A5\u89E6\u8FC7\u7684\u5783\u573E\u6536\u96C6\u5668\u7684\u505C\u987F\u72B6\u51B5\uFF0C\u5982\u56FE3-14 \u6240\u793A\u3002</p><p><img src="'+x+'" alt="\u56FE3-15" loading="lazy"></p><p>\u56FE3-14 \u5404\u6B3E\u6536\u96C6\u5668\u7684\u5E76\u53D1\u60C5\u51B5</p><p>\u56FE3-14 \u4E2D\u6D45\u8272\u9636\u6BB5\u8868\u793A\u5FC5\u987B\u6302\u8D77\u7528\u6237\u7EBF\u7A0B\uFF0C\u6DF1\u8272\u8868\u793A\u6536\u96C6\u5668\u7EBF\u7A0B\u4E0E\u7528\u6237\u7EBF\u7A0B\u662F\u5E76\u53D1\u5DE5\u4F5C\u7684\u3002\u7531\u56FE3-14 \u53EF\u89C1\uFF0C\u5728 CMS \u548C G1 \u4E4B\u524D\u7684\u5168\u90E8\u6536\u96C6\u5668\uFF0C\u5176\u5DE5\u4F5C\u7684\u6240\u6709\u6B65\u9AA4\u90FD\u4F1A\u4EA7\u751F &quot;Stop The World&quot; \u5F0F\u7684\u505C\u987F\uFF1BCMS \u548C G1 \u5206\u522B\u4F7F\u7528\u589E\u91CF\u66F4\u65B0\u548C\u539F\u59CB\u5FEB\u7167\uFF08\u89C1 3.4.6 \u8282\uFF09\u6280\u672F\uFF0C\u5B9E\u73B0\u4E86\u6807\u8BB0\u9636\u6BB5\u7684\u5E76\u53D1\uFF0C\u4E0D\u4F1A\u56E0\u7BA1\u7406\u7684\u5806\u5185\u5B58\u53D8\u5927\uFF0C\u8981\u6807\u8BB0\u7684\u5BF9\u8C61\u53D8\u591A\u800C\u5BFC\u81F4\u505C\u987F\u65F6\u95F4\u968F\u4E4B\u589E\u957F\u3002\u4F46\u662F\u5BF9\u4E8E\u6807\u8BB0\u9636\u6BB5\u4E4B\u540E\u7684\u5904\u7406\uFF0C\u4ECD\u672A\u5F97\u5230\u59A5\u5584\u89E3\u51B3\u3002CMS \u4F7F\u7528\u6807\u8BB0-\u6E05\u9664\u7B97\u6CD5\uFF0C\u867D\u7136\u907F\u514D\u4E86\u6574\u7406\u9636\u6BB5\u6536\u96C6\u5668\u5E26\u6765\u7684\u505C\u987F\uFF0C\u4F46\u662F\u6E05\u9664\u7B97\u6CD5\u4E0D\u8BBA\u5982\u4F55\u4F18\u5316\u6539\u8FDB\uFF0C\u5728\u8BBE\u8BA1\u539F\u7406\u4E0A\u907F\u514D\u4E0D\u4E86\u7A7A\u95F4\u788E\u7247\u7684\u4EA7\u751F\uFF0C\u968F\u7740\u7A7A\u95F4\u788E\u7247\u4E0D\u65AD\u6DE4\u79EF\u6700\u7EC8\u4F9D\u7136\u9003\u4E0D\u8FC7 &quot;Stop The World&quot; \u7684\u547D\u8FD0\u3002G1 \u867D\u7136\u53EF\u4EE5\u6309\u66F4\u5C0F\u7684\u7C92\u5EA6\u8FDB\u884C\u56DE\u6536\uFF0C\u4ECE\u800C\u6291\u5236\u6574\u7406\u9636\u6BB5\u51FA\u73B0\u65F6\u95F4\u8FC7\u957F\u7684\u505C\u987F\uFF0C\u4F46\u6BD5\u7ADF\u4E5F\u8FD8\u662F\u8981\u6682\u505C\u7684\u3002</p><p>\u8BFB\u8005\u80AF\u5B9A\u4E5F\u4ECE\u56FE3-14 \u4E2D\u6CE8\u610F\u5230\u4E86\uFF0C\u6700\u540E\u7684\u4E24\u6B3E\u6536\u96C6\u5668\uFF0CShenandoah \u548C ZGC\uFF0C\u51E0\u4E4E\u6574\u4E2A\u5DE5\u4F5C\u8FC7\u7A0B\u5168\u90E8\u90FD\u662F\u5E76\u53D1\u7684\uFF0C\u53EA\u6709\u521D\u59CB\u6807\u8BB0\u3001\u6700\u7EC8\u6807\u8BB0\u8FD9\u4E9B\u9636\u6BB5\u6709\u77ED\u6682\u7684\u505C\u987F\uFF0C\u8FD9\u90E8\u5206\u505C\u987F\u7684\u65F6\u95F4\u57FA\u672C\u4E0A\u662F\u56FA\u5B9A\u7684\uFF0C\u4E0E\u5806\u7684\u5BB9\u91CF\u3001\u5806\u4E2D\u5BF9\u8C61\u7684\u6570\u91CF\u6CA1\u6709\u6B63\u6BD4\u4F8B\u5173\u7CFB\u3002\u5B9E\u9645\u4E0A\uFF0C\u5B83\u4EEC\u90FD\u53EF\u4EE5\u5728\u4EFB\u610F\u53EF\u7BA1\u7406\u7684\uFF08\u8B6C\u5982\u73B0\u5728 ZGC \u53EA\u80FD\u7BA1\u7406 4TB \u4EE5\u5185\u7684\u5806\uFF09\u5806\u5BB9\u91CF\u4E0B\uFF0C\u5B9E\u73B0\u5783\u573E\u6536\u96C6\u7684\u505C\u987F\u90FD\u4E0D\u8D85\u8FC7\u5341\u6BEB\u79D2\u8FD9\u79CD\u4EE5\u524D\u542C\u8D77\u6765\u662F\u5929\u65B9\u591C\u8C2D\u3001\u532A\u5937\u6240\u601D\u7684\u76EE\u6807\u3002\u8FD9\u4E24\u6B3E\u76EE\u524D\u4ECD\u5904\u4E8E\u5B9E\u9A8C\u72B6\u6001\u7684\u6536\u96C6\u5668\uFF0C\u88AB\u5B98\u65B9\u547D\u540D\u4E3A \u201C\u4F4E\u5EF6\u8FDF\u5783\u573E\u6536\u96C6\u5668\u201D\uFF08Low-Latency Garbage Collector \u6216\u8005 Low-Pause-Time Garbage Collector\uFF09\u3002</p><h3 id="_3-6-1-shenandoah-\u6536\u96C6\u5668" tabindex="-1"><a class="header-anchor" href="#_3-6-1-shenandoah-\u6536\u96C6\u5668" aria-hidden="true">#</a> 3.6.1 Shenandoah \u6536\u96C6\u5668</h3><p>\u5728\u672C\u4E66\u6240\u51FA\u73B0\u7684\u4F17\u591A\u5783\u573E\u6536\u96C6\u5668\u91CC\uFF0CShenandoah \u5927\u6982\u662F\u6700 \u201C\u5B64\u72EC\u201D \u7684\u4E00\u4E2A\u3002\u73B0\u4EE3\u793E\u4F1A\u7ADE\u4E89\u6FC0\u70C8\uFF0C\u8FDE\u4E00\u4E2A\u516C\u53F8\u91CC\u4E0D\u540C\u56E2\u961F\u4E4B\u95F4\u90FD\u5B58\u5728 \u201C\u90E8\u95E8\u5899\u201D\uFF0C\u90A3 Shenandoah \u4F5C\u4E3A\u7B2C\u4E00\u6B3E\u4E0D\u7531 Oracle\uFF08\u5305\u62EC\u4EE5\u524D\u7684 Sun\uFF09\u516C\u53F8\u7684\u865A\u62DF\u673A\u56E2\u961F\u6240\u9886\u5BFC\u5F00\u53D1\u7684 HotSpot \u5783\u573E\u6536\u96C6\u5668\uFF0C\u4E0D\u53EF\u907F\u514D\u5730\u4F1A\u53D7\u5230\u4E00\u4E9B\u6765\u81EA \u201C\u5B98\u65B9\u201D \u7684\u6392\u6324\u3002\u5728\u7B14\u8005\u64B0\u5199\u8FD9\u90E8\u5206\u5185\u5BB9\u65F6<sup class="footnote-ref"><a href="#footnote32">[32]</a><a class="footnote-anchor" id="footnote-ref32"></a></sup>\uFF0COracle \u4ECD\u660E\u786E\u62D2\u7EDD\u5728 OracleJDK 12 \u4E2D\u652F\u6301 Shenandoah \u6536\u96C6\u5668\uFF0C\u5E76\u6267\u610F\u5728\u6253\u5305 OracleJDK \u65F6\u901A\u8FC7\u6761\u4EF6\u7F16\u8BD1\u5B8C\u5168\u6392\u9664\u6389\u4E86 Shenandoah \u7684\u4EE3\u7801\uFF0C\u6362\u53E5\u8BDD\u8BF4\uFF0CShenandoah \u662F\u4E00\u6B3E\u53EA\u6709 OpenJDK \u624D\u4F1A\u5305\u542B\uFF0C\u800C OracleJDK \u91CC\u53CD\u800C\u4E0D\u5B58\u5728\u7684\u6536\u96C6\u5668\uFF0C\u201C\u514D\u8D39\u5F00\u6E90\u7248\u201D \u6BD4 \u201C\u6536\u8D39\u5546\u4E1A\u7248\u201D \u529F\u80FD\u66F4\u591A\uFF0C\u8FD9\u662F\u76F8\u5BF9\u7F55\u89C1\u7684\u72B6\u51B5<sup class="footnote-ref"><a href="#footnote33">[33]</a><a class="footnote-anchor" id="footnote-ref33"></a></sup>\u3002\u5982\u679C\u8BFB\u8005\u7684\u9879\u76EE\u8981\u6C42\u7528\u5230 Oracle \u5546\u4E1A\u652F\u6301\u7684\u8BDD\uFF0C\u5C31\u4E0D\u5F97\u4E0D\u628A Shenandoah \u6392\u9664\u5728\u9009\u62E9\u8303\u56F4\u4E4B\u5916\u4E86\u3002</p><p>\u6700\u521D Shenandoah \u662F\u7531 RedHat \u516C\u53F8\u72EC\u7ACB\u53D1\u5C55\u7684\u65B0\u578B\u6536\u96C6\u5668\u9879\u76EE\uFF0C\u5728 2014 \u5E74 RedHat \u628A Shenandoah \u8D21\u732E\u7ED9\u4E86 OpenJDK\uFF0C\u5E76\u63A8\u52A8\u5B83\u6210\u4E3A OpenJDK 12 \u7684\u6B63\u5F0F\u7279\u6027\u4E4B\u4E00\uFF0C\u4E5F\u5C31\u662F\u540E\u6765\u7684 JEP 189\u3002\u8FD9\u4E2A\u9879\u76EE\u7684\u76EE\u6807\u662F\u5B9E\u73B0\u4E00\u79CD\u80FD\u5728\u4EFB\u4F55\u5806\u5185\u5B58\u5927\u5C0F\u4E0B\u90FD\u53EF\u4EE5\u628A\u5783\u573E\u6536\u96C6\u7684\u505C\u987F\u65F6\u95F4\u9650\u5236\u5728\u5341\u6BEB\u79D2\u4EE5\u5185\u7684\u5783\u573E\u6536\u96C6\u5668\uFF0C\u8BE5\u76EE\u6807\u610F\u5473\u7740\u76F8\u6BD4 CMS \u548C G1\uFF0CShenandoah \u4E0D\u4EC5\u8981\u8FDB\u884C\u5E76\u53D1\u7684\u5783\u573E\u6807\u8BB0\uFF0C\u8FD8\u8981\u5E76\u53D1\u5730\u8FDB\u884C\u5BF9\u8C61\u6E05\u7406\u540E\u7684\u6574\u7406\u52A8\u4F5C\u3002</p><p>\u4ECE\u4EE3\u7801\u5386\u53F2\u6E0A\u6E90\u4E0A\u8BB2\uFF0C\u6BD4\u8D77\u7A0D\u540E\u8981\u4ECB\u7ECD\u7684\u6709\u7740 Oracle \u6B63\u6714\u8840\u7EDF\u7684 ZGC\uFF0CShenandoah \u53CD\u800C\u66F4\u50CF\u662F G1 \u7684\u4E0B\u4E00\u4EE3\u7EE7\u627F\u8005\uFF0C\u5B83\u4EEC\u4E24\u8005\u6709\u7740\u76F8\u4F3C\u7684\u5806\u5185\u5B58\u5E03\u5C40\uFF0C\u5728\u521D\u59CB\u6807\u8BB0\u3001\u5E76\u53D1\u6807\u8BB0\u7B49\u8BB8\u591A\u9636\u6BB5\u7684\u5904\u7406\u601D\u8DEF\u4E0A\u90FD\u9AD8\u5EA6\u4E00\u81F4\uFF0C\u751A\u81F3\u8FD8\u76F4\u63A5\u5171\u4EAB\u4E86\u4E00\u90E8\u5206\u5B9E\u73B0\u4EE3\u7801\uFF0C\u8FD9\u4F7F\u5F97\u90E8\u5206\u5BF9 G1 \u7684\u6253\u78E8\u6539\u8FDB\u548C Bug \u4FEE\u6539\u4F1A\u540C\u65F6\u53CD\u6620\u5728 Shenandoah \u4E4B\u4E0A\uFF0C\u800C\u7531\u4E8E Shenandoah \u52A0\u5165\u6240\u5E26\u6765\u7684\u4E00\u4E9B\u65B0\u7279\u6027\uFF0C\u4E5F\u6709\u90E8\u5206\u4F1A\u51FA\u73B0\u5728 G1 \u6536\u96C6\u5668\u4E2D\uFF0C\u8B6C\u5982\u5728\u5E76\u53D1\u5931\u8D25\u540E\u4F5C\u4E3A \u201C\u9003\u751F\u95E8\u201D \u7684 Full GC<sup class="footnote-ref"><a href="#footnote34">[34]</a><a class="footnote-anchor" id="footnote-ref34"></a></sup>\uFF0CG1 \u5C31\u662F\u7531\u4E8E\u5408\u5E76\u4E86 Shenandoah \u7684\u4EE3\u7801\u624D\u83B7\u5F97\u591A\u7EBF\u7A0B Full GC \u7684\u652F\u6301\u3002</p><p>\u90A3 Shenandoah \u76F8\u6BD4\u8D77 G1 \u53C8\u6709\u4EC0\u4E48\u6539\u8FDB\u5462\uFF1F\u867D\u7136 Shenandoah \u4E5F\u662F\u4F7F\u7528\u57FA\u4E8E Region \u7684\u5806\u5185\u5B58\u5E03\u5C40\uFF0C\u540C\u6837\u6709\u7740\u7528\u4E8E\u5B58\u653E\u5927\u5BF9\u8C61\u7684 Humongous Region\uFF0C\u9ED8\u8BA4\u7684\u56DE\u6536\u7B56\u7565\u4E5F\u540C\u6837\u662F\u4F18\u5148\u5904\u7406\u56DE\u6536\u4EF7\u503C\u6700\u5927\u7684 Region\u2026\u2026\u4F46\u5728\u7BA1\u7406\u5806\u5185\u5B58\u65B9\u9762\uFF0C\u5B83\u4E0E G1 \u81F3\u5C11\u6709\u4E09\u4E2A\u660E\u663E\u7684\u4E0D\u540C\u4E4B\u5904\uFF0C\u6700\u91CD\u8981\u7684\u5F53\u7136\u662F\u652F\u6301\u5E76\u53D1\u7684\u6574\u7406\u7B97\u6CD5\uFF0CG1 \u7684\u56DE\u6536\u9636\u6BB5\u662F\u53EF\u4EE5\u591A\u7EBF\u7A0B\u5E76\u884C\u7684\uFF0C\u4F46\u5374\u4E0D\u80FD\u4E0E\u7528\u6237\u7EBF\u7A0B\u5E76\u53D1\uFF0C\u8FD9\u70B9\u4F5C\u4E3A Shenandoah \u6700\u6838\u5FC3\u7684\u529F\u80FD\u7A0D\u540E\u7B14\u8005\u4F1A\u7740\u91CD\u8BB2\u89E3\u3002\u5176\u6B21\uFF0CShenandoah\uFF08\u76EE\u524D\uFF09\u662F\u9ED8\u8BA4\u4E0D\u4F7F\u7528\u5206\u4EE3\u6536\u96C6\u7684\uFF0C\u6362\u8A00\u4E4B\uFF0C\u4E0D\u4F1A\u6709\u4E13\u95E8\u7684\u65B0\u751F\u4EE3 Region \u6216\u8005\u8001\u5E74\u4EE3 Region \u7684\u5B58\u5728\uFF0C\u6CA1\u6709\u5B9E\u73B0\u5206\u4EE3\uFF0C\u5E76\u4E0D\u662F\u8BF4\u5206\u4EE3\u5BF9 Shenandoah \u6CA1\u6709\u4EF7\u503C\uFF0C\u8FD9\u66F4\u591A\u662F\u51FA\u4E8E\u6027\u4EF7\u6BD4\u7684\u6743\u8861\uFF0C\u57FA\u4E8E\u5DE5\u4F5C\u91CF\u4E0A\u7684\u8003\u8651\u800C\u5C06\u5176\u653E\u5230\u4F18\u5148\u7EA7\u8F83\u4F4E\u7684\u4F4D\u7F6E\u4E0A\u3002\u6700\u540E\uFF0CShenandoah \u6452\u5F03\u4E86\u5728 G1 \u4E2D\u8017\u8D39\u5927\u91CF\u5185\u5B58\u548C\u8BA1\u7B97\u8D44\u6E90\u53BB\u7EF4\u62A4\u7684\u8BB0\u5FC6\u96C6\uFF0C\u6539\u7528\u540D\u4E3A \u201C\u8FDE\u63A5\u77E9\u9635\u201D\uFF08Connection Matrix\uFF09\u7684\u5168\u5C40\u6570\u636E\u7ED3\u6784\u6765\u8BB0\u5F55\u8DE8 Region \u7684\u5F15\u7528\u5173\u7CFB\uFF0C\u964D\u4F4E\u4E86\u5904\u7406\u8DE8\u4EE3\u6307\u9488\u65F6\u7684\u8BB0\u5FC6\u96C6\u7EF4\u62A4\u6D88\u8017\uFF0C\u4E5F\u964D\u4F4E\u4E86\u4F2A\u5171\u4EAB\u95EE\u9898\uFF08\u89C1 3.4.4 \u8282\uFF09\u7684\u53D1\u751F\u6982\u7387\u3002\u8FDE\u63A5\u77E9\u9635\u53EF\u4EE5\u7B80\u5355\u7406\u89E3\u4E3A\u4E00\u5F20\u4E8C\u7EF4\u8868\u683C\uFF0C\u5982\u679C Region N \u6709\u5BF9\u8C61\u6307\u5411 Region M\uFF0C\u5C31\u5728\u8868\u683C\u7684 N \u884C M \u5217\u4E2D\u6253\u4E0A\u4E00\u4E2A\u6807\u8BB0\uFF0C\u5982\u56FE3-15 \u6240\u793A\uFF0C\u5982\u679C Region 5 \u4E2D\u7684\u5BF9\u8C61 Baz \u5F15\u7528\u4E86 Region 3 \u7684 Foo\uFF0CFoo \u53C8\u5F15\u7528\u4E86 Region 1 \u7684 Bar\uFF0C\u90A3\u8FDE\u63A5\u77E9\u9635\u4E2D\u7684 5 \u884C 3 \u5217\u30013 \u884C 1 \u5217\u5C31\u5E94\u8BE5\u88AB\u6253\u4E0A\u6807\u8BB0\u3002\u5728\u56DE\u6536\u65F6\u901A\u8FC7\u8FD9\u5F20\u8868\u683C\u5C31\u53EF\u4EE5\u5F97\u51FA\u54EA\u4E9B Region \u4E4B\u95F4\u4EA7\u751F\u4E86\u8DE8\u4EE3\u5F15\u7528\u3002</p><p><img src="'+M+'" alt="\u56FE3-16" loading="lazy"></p><p>\u56FE3-15 Shenandoah \u6536\u96C6\u5668\u7684\u8FDE\u63A5\u77E9\u9635\u793A\u610F\u56FE</p><p>Shenandoah \u6536\u96C6\u5668\u7684\u5DE5\u4F5C\u8FC7\u7A0B\u5927\u81F4\u53EF\u4EE5\u5212\u5206\u4E3A\u4EE5\u4E0B\u4E5D\u4E2A\u9636\u6BB5\uFF08\u6B64\u5904\u4EE5 Shenandoah \u5728 2016 \u5E74\u53D1\u8868\u7684\u539F\u59CB\u8BBA\u6587<sup class="footnote-ref"><a href="#footnote35">[35]</a><a class="footnote-anchor" id="footnote-ref35"></a></sup>\u8FDB\u884C\u4ECB\u7ECD\u3002\u5728\u6700\u65B0\u7248\u672C\u7684 Shenandoah 2.0 \u4E2D\uFF0C\u8FDB\u4E00\u6B65\u5F3A\u5316\u4E86 \u201C\u90E8\u5206\u6536\u96C6\u201D \u7684\u7279\u6027\uFF0C\u521D\u59CB\u6807\u8BB0\u4E4B\u524D\u8FD8\u6709 Initial Partial\u3001Concurrent Partial \u548C Final Partial \u9636\u6BB5\uFF0C\u5B83\u4EEC\u53EF\u4EE5\u4E0D\u592A\u4E25\u8C28\u5730\u7406\u89E3\u4E3A\u5BF9\u5E94\u4E8E\u4EE5\u524D\u5206\u4EE3\u6536\u96C6\u4E2D\u7684 Minor GC \u7684\u5DE5\u4F5C\uFF09\uFF1A</p><ul><li><p>\u521D\u59CB\u6807\u8BB0\uFF08Initial Marking\uFF09\uFF1A\u4E0E G1 \u4E00\u6837\uFF0C\u9996\u5148\u6807\u8BB0\u4E0E GC Roots \u76F4\u63A5\u5173\u8054\u7684\u5BF9\u8C61\uFF0C\u8FD9\u4E2A\u9636\u6BB5\u4ECD\u662F &quot;Stop The World&quot; \u7684\uFF0C\u4F46\u505C\u987F\u65F6\u95F4\u4E0E\u5806\u5927\u5C0F\u65E0\u5173\uFF0C\u53EA\u4E0E GC Roots \u7684\u6570\u91CF\u76F8\u5173\u3002</p></li><li><p>\u5E76\u53D1\u6807\u8BB0\uFF08Concurrent Marking\uFF09\uFF1A\u4E0E G1 \u4E00\u6837\uFF0C\u904D\u5386\u5BF9\u8C61\u56FE\uFF0C\u6807\u8BB0\u51FA\u5168\u90E8\u53EF\u8FBE\u7684\u5BF9\u8C61\uFF0C\u8FD9\u4E2A\u9636\u6BB5\u662F\u4E0E\u7528\u6237\u7EBF\u7A0B\u4E00\u8D77\u5E76\u53D1\u7684\uFF0C\u65F6\u95F4\u957F\u77ED\u53D6\u51B3\u4E8E\u5806\u4E2D\u5B58\u6D3B\u5BF9\u8C61\u7684\u6570\u91CF\u4EE5\u53CA\u5BF9\u8C61\u56FE\u7684\u7ED3\u6784\u590D\u6742\u7A0B\u5EA6\u3002</p></li><li><p>\u6700\u7EC8\u6807\u8BB0\uFF08Final Marking\uFF09\uFF1A\u4E0E G1 \u4E00\u6837\uFF0C\u5904\u7406\u5269\u4F59\u7684 SATB \u626B\u63CF\uFF0C\u5E76\u5728\u8FD9\u4E2A\u9636\u6BB5\u7EDF\u8BA1\u51FA\u56DE\u6536\u4EF7\u503C\u6700\u9AD8\u7684 Region\uFF0C\u5C06\u8FD9\u4E9B Region \u6784\u6210\u4E00\u7EC4\u56DE\u6536\u96C6\uFF08Collection Set\uFF09\u3002\u6700\u7EC8\u6807\u8BB0\u9636\u6BB5\u4E5F\u4F1A\u6709\u4E00\u5C0F\u6BB5\u77ED\u6682\u7684\u505C\u987F\u3002</p></li><li><p>\u5E76\u53D1\u6E05\u7406\uFF08Concurrent Cleanup\uFF09\uFF1A\u8FD9\u4E2A\u9636\u6BB5\u7528\u4E8E\u6E05\u7406\u90A3\u4E9B\u6574\u4E2A\u533A\u57DF\u5185\u8FDE\u4E00\u4E2A\u5B58\u6D3B\u5BF9\u8C61\u90FD\u6CA1\u6709\u627E\u5230\u7684 Region\uFF08\u8FD9\u7C7B Region \u88AB\u79F0\u4E3A Immediate Garbage Region\uFF09\u3002</p></li><li><p>\u5E76\u53D1\u56DE\u6536\uFF08Concurrent Evacuation\uFF09\uFF1A\u5E76\u53D1\u56DE\u6536\u9636\u6BB5\u662F Shenandoah \u4E0E\u4E4B\u524D HotSpot \u4E2D\u5176\u4ED6\u6536\u96C6\u5668\u7684\u6838\u5FC3\u5DEE\u5F02\u3002\u5728\u8FD9\u4E2A\u9636\u6BB5\uFF0CShenandoah \u8981\u628A\u56DE\u6536\u96C6\u91CC\u9762\u7684\u5B58\u6D3B\u5BF9\u8C61\u5148\u590D\u5236\u4E00\u4EFD\u5230\u5176\u4ED6\u672A\u88AB\u4F7F\u7528\u7684 Region \u4E4B\u4E2D\u3002\u590D\u5236\u5BF9\u8C61\u8FD9\u4EF6\u4E8B\u60C5\u5982\u679C\u5C06\u7528\u6237\u7EBF\u7A0B\u51BB\u7ED3\u8D77\u6765\u518D\u505A\u90A3\u662F\u76F8\u5F53\u7B80\u5355\u7684\uFF0C\u4F46\u5982\u679C\u4E24\u8005\u5FC5\u987B\u8981\u540C\u65F6\u5E76\u53D1\u8FDB\u884C\u7684\u8BDD\uFF0C\u5C31\u53D8\u5F97\u590D\u6742\u8D77\u6765\u4E86\u3002\u5176\u56F0\u96BE\u70B9\u662F\u5728\u79FB\u52A8\u5BF9\u8C61\u7684\u540C\u65F6\uFF0C\u7528\u6237\u7EBF\u7A0B\u4ECD\u7136\u53EF\u80FD\u4E0D\u505C\u5BF9\u88AB\u79FB\u52A8\u7684\u5BF9\u8C61\u8FDB\u884C\u8BFB\u5199\u8BBF\u95EE\uFF0C\u79FB\u52A8\u5BF9\u8C61\u662F\u4E00\u6B21\u6027\u7684\u884C\u4E3A\uFF0C\u4F46\u79FB\u52A8\u4E4B\u540E\u6574\u4E2A\u5185\u5B58\u4E2D\u6240\u6709\u6307\u5411\u8BE5\u5BF9\u8C61\u7684\u5F15\u7528\u90FD\u8FD8\u662F\u65E7\u5BF9\u8C61\u7684\u5730\u5740\uFF0C\u8FD9\u662F\u5F88\u96BE\u4E00\u77AC\u95F4\u5168\u90E8\u6539\u53D8\u8FC7\u6765\u7684\u3002\u5BF9\u4E8E\u5E76\u53D1\u56DE\u6536\u9636\u6BB5\u9047\u5230\u7684\u8FD9\u4E9B\u56F0\u96BE\uFF0CShenandoah \u5C06\u4F1A\u901A\u8FC7\u8BFB\u5C4F\u969C\u548C\u88AB\u79F0\u4E3A \u201CBrooks Pointers&quot; \u7684\u8F6C\u53D1\u6307\u9488\u6765\u89E3\u51B3\uFF08\u8BB2\u89E3\u5B8C Shenandoah \u6574\u4E2A\u5DE5\u4F5C\u8FC7\u7A0B\u4E4B\u540E\u7B14\u8005\u8FD8\u8981\u518D\u56DE\u5934\u4ECB\u7ECD\u5B83\uFF09\u3002\u5E76\u53D1\u56DE\u6536\u9636\u6BB5\u8FD0\u884C\u7684\u65F6\u95F4\u957F\u77ED\u53D6\u51B3\u4E8E\u56DE\u6536\u96C6\u7684\u5927\u5C0F\u3002</p></li><li><p>\u521D\u59CB\u5F15\u7528\u66F4\u65B0\uFF08Initial Update Reference\uFF09\uFF1A\u5E76\u53D1\u56DE\u6536\u9636\u6BB5\u590D\u5236\u5BF9\u8C61\u7ED3\u675F\u540E\uFF0C\u8FD8\u9700\u8981\u628A\u5806\u4E2D\u6240\u6709\u6307\u5411\u65E7\u5BF9\u8C61\u7684\u5F15\u7528\u4FEE\u6B63\u5230\u590D\u5236\u540E\u7684\u65B0\u5730\u5740\uFF0C\u8FD9\u4E2A\u64CD\u4F5C\u79F0\u4E3A\u5F15\u7528\u66F4\u65B0\u3002\u5F15\u7528\u66F4\u65B0\u7684\u521D\u59CB\u5316\u9636\u6BB5\u5B9E\u9645\u4E0A\u5E76\u672A\u505A\u4EC0\u4E48\u5177\u4F53\u7684\u5904\u7406\uFF0C\u8BBE\u7ACB\u8FD9\u4E2A\u9636\u6BB5\u53EA\u662F\u4E3A\u4E86\u5EFA\u7ACB\u4E00\u4E2A\u7EBF\u7A0B\u96C6\u5408\u70B9\uFF0C\u786E\u4FDD\u6240\u6709\u5E76\u53D1\u56DE\u6536\u9636\u6BB5\u4E2D\u8FDB\u884C\u7684\u6536\u96C6\u5668\u7EBF\u7A0B\u90FD\u5DF2\u5B8C\u6210\u5206\u914D\u7ED9\u5B83\u4EEC\u7684\u5BF9\u8C61\u79FB\u52A8\u4EFB\u52A1\u800C\u5DF2\u3002\u521D\u59CB\u5F15\u7528\u66F4\u65B0\u65F6\u95F4\u5F88\u77ED\uFF0C\u4F1A\u4EA7\u751F\u4E00\u4E2A\u975E\u5E38\u77ED\u6682\u7684\u505C\u987F\u3002</p></li><li><p>\u5E76\u53D1\u5F15\u7528\u66F4\u65B0\uFF08Concurrent Update Reference\uFF09\uFF1A\u771F\u6B63\u5F00\u59CB\u8FDB\u884C\u5F15\u7528\u66F4\u65B0\u64CD\u4F5C\uFF0C\u8FD9\u4E2A\u9636\u6BB5\u662F\u4E0E\u7528\u6237\u7EBF\u7A0B\u4E00\u8D77\u5E76\u53D1\u7684\uFF0C\u65F6\u95F4\u957F\u77ED\u53D6\u51B3\u4E8E\u5185\u5B58\u4E2D\u6D89\u53CA\u7684\u5F15\u7528\u6570\u91CF\u7684\u591A\u5C11\u3002\u5E76\u53D1\u5F15\u7528\u66F4\u65B0\u4E0E\u5E76\u53D1\u6807\u8BB0\u4E0D\u540C\uFF0C\u5B83\u4E0D\u518D\u9700\u8981\u6CBF\u7740\u5BF9\u8C61\u56FE\u6765\u641C\u7D22\uFF0C\u53EA\u9700\u8981\u6309\u7167\u5185\u5B58\u7269\u7406\u5730\u5740\u7684\u987A\u5E8F\uFF0C\u7EBF\u6027\u5730\u641C\u7D22\u51FA\u5F15\u7528\u7C7B\u578B\uFF0C\u628A\u65E7\u503C\u6539\u4E3A\u65B0\u503C\u5373\u53EF\u3002</p></li><li><p>\u6700\u7EC8\u5F15\u7528\u66F4\u65B0\uFF08Final Update Reference\uFF09\uFF1A\u89E3\u51B3\u4E86\u5806\u4E2D\u7684\u5F15\u7528\u66F4\u65B0\u540E\uFF0C\u8FD8\u8981\u4FEE\u6B63\u5B58\u5728\u4E8E GC Roots \u4E2D\u7684\u5F15\u7528\u3002\u8FD9\u4E2A\u9636\u6BB5\u662F Shenandoah \u7684\u6700\u540E\u4E00\u6B21\u505C\u987F\uFF0C\u505C\u987F\u65F6\u95F4\u53EA\u4E0E GC Roots \u7684\u6570\u91CF\u76F8\u5173\u3002</p></li><li><p>\u5E76\u53D1\u6E05\u7406\uFF08Concurrent Cleanup\uFF09\uFF1A\u7ECF\u8FC7\u5E76\u53D1\u56DE\u6536\u548C\u5F15\u7528\u66F4\u65B0\u4E4B\u540E\uFF0C\u6574\u4E2A\u56DE\u6536\u96C6\u4E2D\u6240\u6709\u7684 Region \u5DF2\u518D\u65E0\u5B58\u6D3B\u5BF9\u8C61\uFF0C\u8FD9\u4E9B Region \u90FD\u53D8\u6210 Immediate Garbage Regions \u4E86\uFF0C\u6700\u540E\u518D\u8C03\u7528\u4E00\u6B21\u5E76\u53D1\u6E05\u7406\u8FC7\u7A0B\u6765\u56DE\u6536\u8FD9\u4E9B Region \u7684\u5185\u5B58\u7A7A\u95F4\uFF0C\u4F9B\u4EE5\u540E\u65B0\u5BF9\u8C61\u5206\u914D\u4F7F\u7528\u3002</p></li></ul><p>\u4EE5\u4E0A\u5BF9 Shenandoah \u6536\u96C6\u5668\u8FD9\u4E5D\u4E2A\u9636\u6BB5\u7684\u5DE5\u4F5C\u8FC7\u7A0B\u7684\u63CF\u8FF0\u53EF\u80FD\u62C6\u5206\u5F97\u7565\u4E3A\u7410\u788E\uFF0C\u8BFB\u8005\u53EA\u8981\u6293\u4F4F\u5176\u4E2D\u4E09\u4E2A\u6700\u91CD\u8981\u7684\u5E76\u53D1\u9636\u6BB5\uFF08\u5E76\u53D1\u6807\u8BB0\u3001\u5E76\u53D1\u56DE\u6536\u3001\u5E76\u53D1\u5F15\u7528\u66F4\u65B0\uFF09\uFF0C\u5C31\u80FD\u6BD4\u8F83\u5BB9\u6613\u7406\u6E05 Shenandoah \u662F\u5982\u4F55\u8FD0\u4F5C\u7684\u4E86\u3002\u56FE3-16<sup class="footnote-ref"><a href="#footnote36">[36]</a><a class="footnote-anchor" id="footnote-ref36"></a></sup>\u4E2D\u9EC4\u8272\u7684\u533A\u57DF\u4EE3\u8868\u7684\u662F\u88AB\u9009\u5165\u56DE\u6536\u96C6\u7684 Region\uFF0C\u7EFF\u8272\u90E8\u5206\u5C31\u4EE3\u8868\u8FD8\u5B58\u6D3B\u7684\u5BF9\u8C61\uFF0C\u84DD\u8272\u5C31\u662F\u7528\u6237\u7EBF\u7A0B\u53EF\u4EE5\u7528\u6765\u5206\u914D\u5BF9\u8C61\u7684\u5185\u5B58 Region \u4E86\u3002\u56FE3-16 \u4E2D\u4E0D\u4EC5\u5C55\u793A\u4E86 Shenandoah \u4E09\u4E2A\u5E76\u53D1\u9636\u6BB5\u7684\u5DE5\u4F5C\u8FC7\u7A0B\uFF0C\u8FD8\u80FD\u5F62\u8C61\u5730\u8868\u793A\u51FA\u5E76\u53D1\u6807\u8BB0\u9636\u6BB5\u5982\u4F55\u627E\u51FA\u56DE\u6536\u5BF9\u8C61\u786E\u5B9A\u56DE\u6536\u96C6\uFF0C\u5E76\u53D1\u56DE\u6536\u9636\u6BB5\u5982\u4F55\u79FB\u52A8\u56DE\u6536\u96C6\u4E2D\u7684\u5B58\u6D3B\u5BF9\u8C61\uFF0C\u5E76\u53D1\u5F15\u7528\u66F4\u65B0\u9636\u6BB5\u5982\u4F55\u5C06\u6307\u5411\u56DE\u6536\u96C6\u4E2D\u5B58\u6D3B\u5BF9\u8C61\u7684\u6240\u6709\u5F15\u7528\u5168\u90E8\u4FEE\u6B63\uFF0C\u6B64\u540E\u56DE\u6536\u96C6\u4FBF\u4E0D\u5B58\u5728\u4EFB\u4F55\u5F15\u7528\u53EF\u8FBE\u7684\u5B58\u6D3B\u5BF9\u8C61\u4E86\u3002</p><p><img src="'+w+'" alt="\u56FE3-17" loading="lazy"></p><p>\u56FE3-16 Shenandoah \u6536\u96C6\u5668\u7684\u5DE5\u4F5C\u8FC7\u7A0B</p><p>\u5B66\u4E60\u4E86 Shenandoah \u6536\u96C6\u5668\u7684\u5DE5\u4F5C\u8FC7\u7A0B\uFF0C\u6211\u4EEC\u518D\u6765\u804A\u4E00\u4E0B Shenandoah \u7528\u4EE5\u652F\u6301\u5E76\u884C\u6574\u7406\u7684\u6838\u5FC3\u6982\u5FF5\u2014\u2014Brooks Pointer\u3002&quot;Brooks&quot; \u662F\u4E00\u4E2A\u4EBA\u7684\u540D\u5B57\u30021984 \u5E74\uFF0CRodney A.Brooks \u5728\u8BBA\u6587\u300ATrading Data Space for Reduced Time and Code Space in Real-Time Garbage Collection on Stock Hardware\u300B\u4E2D\u63D0\u51FA\u4E86\u4F7F\u7528\u8F6C\u53D1\u6307\u9488\uFF08Forwarding Pointer\uFF0C\u4E5F\u5E38\u88AB\u79F0\u4E3A Indirection Pointer\uFF09\u6765\u5B9E\u73B0\u5BF9\u8C61\u79FB\u52A8\u4E0E\u7528\u6237\u7A0B\u5E8F\u5E76\u53D1\u7684\u4E00\u79CD\u89E3\u51B3\u65B9\u6848\u3002\u6B64\u524D\uFF0C\u8981\u505A\u7C7B\u4F3C\u7684\u5E76\u53D1\u64CD\u4F5C\uFF0C\u901A\u5E38\u662F\u5728\u88AB\u79FB\u52A8\u5BF9\u8C61\u539F\u6709\u7684\u5185\u5B58\u4E0A\u8BBE\u7F6E\u4FDD\u62A4\u9677\u9631\uFF08Memory Protection Trap\uFF09\uFF0C\u4E00\u65E6\u7528\u6237\u7A0B\u5E8F\u8BBF\u95EE\u5230\u5F52\u5C5E\u4E8E\u65E7\u5BF9\u8C61\u7684\u5185\u5B58\u7A7A\u95F4\u5C31\u4F1A\u4EA7\u751F\u81EA\u9677\u4E2D\u6BB5\uFF0C\u8FDB\u5165\u9884\u8BBE\u597D\u7684\u5F02\u5E38\u5904\u7406\u5668\u4E2D\uFF0C\u518D\u7531\u5176\u4E2D\u7684\u4EE3\u7801\u903B\u8F91\u628A\u8BBF\u95EE\u8F6C\u53D1\u5230\u590D\u5236\u540E\u7684\u65B0\u5BF9\u8C61\u4E0A\u3002\u867D\u7136\u786E\u5B9E\u80FD\u591F\u5B9E\u73B0\u5BF9\u8C61\u79FB\u52A8\u4E0E\u7528\u6237\u7EBF\u7A0B\u5E76\u53D1\uFF0C\u4F46\u662F\u5982\u679C\u6CA1\u6709\u64CD\u4F5C\u7CFB\u7EDF\u5C42\u9762\u7684\u76F4\u63A5\u652F\u6301\uFF0C\u8FD9\u79CD\u65B9\u6848\u5C06\u5BFC\u81F4\u7528\u6237\u6001\u9891\u7E41\u5207\u6362\u5230\u6838\u5FC3\u6001<sup class="footnote-ref"><a href="#footnote37">[37]</a><a class="footnote-anchor" id="footnote-ref37"></a></sup>\uFF0C\u4EE3\u4EF7\u662F\u975E\u5E38\u5927\u7684\uFF0C\u4E0D\u80FD\u9891\u7E41\u4F7F\u7528<sup class="footnote-ref"><a href="#footnote38">[38]</a><a class="footnote-anchor" id="footnote-ref38"></a></sup>\u3002</p><p>Brooks \u63D0\u51FA\u7684\u65B0\u65B9\u6848\u4E0D\u9700\u8981\u7528\u5230\u5185\u5B58\u4FDD\u62A4\u9677\u9631\uFF0C\u800C\u662F\u5728\u539F\u6709\u5BF9\u8C61\u5E03\u5C40\u7ED3\u6784\u7684\u6700\u524D\u9762\u7EDF\u4E00\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u5F15\u7528\u5B57\u6BB5\uFF0C\u5728\u6B63\u5E38\u4E0D\u5904\u4E8E\u5E76\u53D1\u79FB\u52A8\u7684\u60C5\u51B5\u4E0B\uFF0C\u8BE5\u5F15\u7528\u6307\u5411\u5BF9\u8C61\u81EA\u5DF1\uFF0C\u5982\u56FE3-17 \u6240\u793A\u3002</p><p><img src="'+K+`" alt="\u56FE3-18" loading="lazy"></p><p>\u56FE3-17 Brooks Pointers \u793A\u610F\u56FE\uFF08\u4E00\uFF09</p><p>\u4ECE\u7ED3\u6784\u4E0A\u6765\u770B\uFF0CBrooks \u63D0\u51FA\u7684\u8F6C\u53D1\u6307\u9488\u4E0E\u67D0\u4E9B\u65E9\u671F Java \u865A\u62DF\u673A\u4F7F\u7528\u8FC7\u7684\u53E5\u67C4\u5B9A\u4F4D\uFF08\u5173\u4E8E\u5BF9\u8C61\u5B9A\u4F4D\u8BE6\u89C1\u7B2C 2 \u7AE0\uFF09\u6709\u4E00\u4E9B\u76F8\u4F3C\u4E4B\u5904\uFF0C\u4E24\u8005\u90FD\u662F\u4E00\u79CD\u95F4\u63A5\u6027\u7684\u5BF9\u8C61\u8BBF\u95EE\u65B9\u5F0F\uFF0C\u5DEE\u522B\u662F\u53E5\u67C4\u901A\u5E38\u4F1A\u7EDF\u4E00\u5B58\u50A8\u5728\u4E13\u95E8\u7684\u53E5\u67C4\u6C60\u4E2D\uFF0C\u800C\u8F6C\u53D1\u6307\u9488\u662F\u5206\u6563\u5B58\u653E\u5728\u6BCF\u4E00\u4E2A\u5BF9\u8C61\u5934\u524D\u9762\u3002</p><p>\u6709\u4E86\u8F6C\u53D1\u6307\u9488\u4E4B\u540E\uFF0C\u6709\u4F55\u6536\u76CA\u6682\u4E14\u4E0D\u8BBA\uFF0C\u6240\u6709\u95F4\u63A5\u5BF9\u8C61\u8BBF\u95EE\u6280\u672F\u7684\u7F3A\u70B9\u90FD\u662F\u76F8\u540C\u7684\uFF0C\u4E5F\u662F\u975E\u5E38\u663E\u8457\u7684\u2014\u2014\u6BCF\u6B21\u5BF9\u8C61\u8BBF\u95EE\u4F1A\u5E26\u6765\u4E00\u6B21\u989D\u5916\u7684\u8F6C\u5411\u5F00\u9500\uFF0C\u5C3D\u7BA1\u8FD9\u4E2A\u5F00\u9500\u5DF2\u7ECF\u88AB\u4F18\u5316\u5230\u53EA\u6709\u4E00\u884C\u6C47\u7F16\u6307\u4EE4\u7684\u7A0B\u5EA6\uFF0C\u8B6C\u5982\u4EE5\u4E0B\u6240\u793A\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>mov r13,QWORD PTR [r12+r14*8-0x8]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4E0D\u8FC7\uFF0C\u6BD5\u7ADF\u5BF9\u8C61\u5B9A\u4F4D\u4F1A\u88AB\u9891\u7E41\u4F7F\u7528\u5230\uFF0C\u8FD9\u4ECD\u662F\u4E00\u7B14\u4E0D\u53EF\u5FFD\u89C6\u7684\u6267\u884C\u6210\u672C\uFF0C\u53EA\u662F\u5B83\u6BD4\u8D77\u5185\u5B58\u4FDD\u62A4\u9677\u9631\u7684\u65B9\u6848\u5DF2\u7ECF\u597D\u4E86\u5F88\u591A\u3002\u8F6C\u53D1\u6307\u9488\u52A0\u5165\u540E\u5E26\u6765\u7684\u6536\u76CA\u81EA\u7136\u662F\u5F53\u5BF9\u8C61\u62E5\u6709\u4E86\u4E00\u4EFD\u65B0\u7684\u526F\u672C\u65F6\uFF0C\u53EA\u9700\u8981\u4FEE\u6539\u4E00\u5904\u6307\u9488\u7684\u503C\uFF0C\u5373\u65E7\u5BF9\u8C61\u4E0A\u8F6C\u53D1\u6307\u9488\u7684\u5F15\u7528\u4F4D\u7F6E\uFF0C\u4F7F\u5176\u6307\u5411\u65B0\u5BF9\u8C61\uFF0C\u4FBF\u53EF\u5C06\u6240\u6709\u5BF9\u8BE5\u5BF9\u8C61\u7684\u8BBF\u95EE\u8F6C\u53D1\u5230\u65B0\u7684\u526F\u672C\u4E0A\u3002\u8FD9\u6837\u53EA\u8981\u65E7\u5BF9\u8C61\u7684\u5185\u5B58\u4ECD\u7136\u5B58\u5728\uFF0C\u672A\u88AB\u6E05\u7406\u6389\uFF0C\u865A\u62DF\u673A\u5185\u5B58\u4E2D\u6240\u6709\u901A\u8FC7\u65E7\u5F15\u7528\u5730\u5740\u8BBF\u95EE\u7684\u4EE3\u7801\u4FBF\u4ECD\u7136\u53EF\u7528\uFF0C\u90FD\u4F1A\u88AB\u81EA\u52A8\u8F6C\u53D1\u5230\u65B0\u5BF9\u8C61\u4E0A\u7EE7\u7EED\u5DE5\u4F5C\uFF0C\u5982\u56FE3-18 \u6240\u793A\u3002</p><p><img src="`+y+'" alt="\u56FE3-19" loading="lazy"></p><p>\u56FE3-18 Brooks Pointers \u793A\u610F\u56FE\uFF08\u4E8C\uFF09</p><p>\u9700\u8981\u6CE8\u610F\uFF0CBrooks \u5F62\u5F0F\u7684\u8F6C\u53D1\u6307\u9488\u5728\u8BBE\u8BA1\u4E0A\u51B3\u5B9A\u4E86\u5B83\u662F\u5FC5\u7136\u4F1A\u51FA\u73B0\u591A\u7EBF\u7A0B\u7ADE\u4E89\u95EE\u9898\u7684\uFF0C\u5982\u679C\u6536\u96C6\u5668\u7EBF\u7A0B\u4E0E\u7528\u6237\u7EBF\u7A0B\u53D1\u751F\u7684\u53EA\u662F\u5E76\u53D1\u8BFB\u53D6\uFF0C\u90A3\u65E0\u8BBA\u8BFB\u5230\u65E7\u5BF9\u8C61\u8FD8\u662F\u65B0\u5BF9\u8C61\u4E0A\u7684\u5B57\u6BB5\uFF0C\u8FD4\u56DE\u7684\u7ED3\u679C\u90FD\u5E94\u8BE5\u662F\u4E00\u6837\u7684\uFF0C\u8FD9\u4E2A\u573A\u666F\u8FD8\u53EF\u4EE5\u6709\u4E00\u4E9B \u201C\u5077\u61D2\u201D \u7684\u5904\u7406\u4F59\u5730\uFF1B\u4F46\u5982\u679C\u53D1\u751F\u7684\u662F\u5E76\u53D1\u5199\u5165\uFF0C\u5C31\u4E00\u5B9A\u5FC5\u987B\u4FDD\u8BC1\u5199\u64CD\u4F5C\u53EA\u80FD\u53D1\u751F\u5728\u65B0\u590D\u5236\u7684\u5BF9\u8C61\u4E0A\uFF0C\u800C\u4E0D\u662F\u5199\u5165\u65E7\u5BF9\u8C61\u7684\u5185\u5B58\u4E2D\u3002\u8BFB\u8005\u4E0D\u59A8\u8BBE\u60F3\u4EE5\u4E0B\u4E09\u4EF6\u4E8B\u60C5\u5E76\u53D1\u8FDB\u884C\u65F6\u7684\u573A\u666F\uFF1A</p><ol><li><p>\u6536\u96C6\u5668\u7EBF\u7A0B\u590D\u5236\u4E86\u65B0\u7684\u5BF9\u8C61\u526F\u672C\uFF1B</p></li><li><p>\u7528\u6237\u7EBF\u7A0B\u66F4\u65B0\u5BF9\u8C61\u7684\u67D0\u4E2A\u5B57\u6BB5\uFF1B</p></li><li><p>\u6536\u96C6\u5668\u7EBF\u7A0B\u66F4\u65B0\u8F6C\u53D1\u6307\u9488\u7684\u5F15\u7528\u503C\u4E3A\u65B0\u526F\u672C\u5730\u5740\u3002</p></li></ol><p>\u5982\u679C\u4E0D\u505A\u4EFB\u4F55\u4FDD\u62A4\u63AA\u65BD\uFF0C\u8BA9\u4E8B\u4EF6 2 \u5728\u4E8B\u4EF6 1\u3001\u4E8B\u4EF6 3 \u4E4B\u95F4\u53D1\u751F\u7684\u8BDD\uFF0C\u5C06\u5BFC\u81F4\u7684\u7ED3\u679C\u5C31\u662F\u7528\u6237\u7EBF\u7A0B\u5BF9\u5BF9\u8C61\u7684\u53D8\u66F4\u53D1\u751F\u5728\u65E7\u5BF9\u8C61\u4E0A\uFF0C\u6240\u4EE5\u8FD9\u91CC\u5FC5\u987B\u9488\u5BF9\u8F6C\u53D1\u6307\u9488\u7684\u8BBF\u95EE\u64CD\u4F5C\u91C7\u53D6\u540C\u6B65\u63AA\u65BD\uFF0C\u8BA9\u6536\u96C6\u5668\u7EBF\u7A0B\u6216\u8005\u7528\u6237\u7EBF\u7A0B\u5BF9\u8F6C\u53D1\u6307\u9488\u7684\u8BBF\u95EE\u53EA\u6709\u5176\u4E2D\u4E4B\u4E00\u80FD\u591F\u6210\u529F\uFF0C\u53E6\u5916\u4E00\u4E2A\u5FC5\u987B\u7B49\u5F85\uFF0C\u907F\u514D\u4E24\u8005\u4EA4\u66FF\u8FDB\u884C\u3002\u5B9E\u9645\u4E0A Shenandoah \u6536\u96C6\u5668\u662F\u901A\u8FC7\u6BD4\u8F83\u5E76\u4EA4\u6362\uFF08Compare And Swap\uFF0CCAS\uFF09\u64CD\u4F5C<sup class="footnote-ref"><a href="#footnote39">[39]</a><a class="footnote-anchor" id="footnote-ref39"></a></sup>\u6765\u4FDD\u8BC1\u5E76\u53D1\u65F6\u5BF9\u8C61\u7684\u8BBF\u95EE\u6B63\u786E\u6027\u7684\u3002</p><p>\u8F6C\u53D1\u6307\u9488\u53E6\u4E00\u70B9\u5FC5\u987B\u6CE8\u610F\u7684\u662F\u6267\u884C\u9891\u7387\u7684\u95EE\u9898\uFF0C\u5C3D\u7BA1\u901A\u8FC7\u5BF9\u8C61\u5934\u4E0A\u7684 Brooks Pointer \u6765\u4FDD\u8BC1\u5E76\u53D1\u65F6\u539F\u5BF9\u8C61\u4E0E\u590D\u5236\u5BF9\u8C61\u7684\u8BBF\u95EE\u4E00\u81F4\u6027\uFF0C\u8FD9\u4EF6\u4E8B\u60C5\u53EA\u4ECE\u539F\u7406\u4E0A\u770B\u662F\u4E0D\u590D\u6742\u7684\uFF0C\u4F46\u662F \u201C\u5BF9\u8C61\u8BBF\u95EE\u201D \u8FD9\u56DB\u4E2A\u5B57\u7684\u5206\u91CF\u662F\u975E\u5E38\u91CD\u7684\uFF0C\u5BF9\u4E8E\u4E00\u95E8\u9762\u5411\u5BF9\u8C61\u7684\u7F16\u7A0B\u8BED\u8A00\u6765\u8BF4\uFF0C\u5BF9\u8C61\u7684\u8BFB\u53D6\u3001\u5199\u5165\uFF0C\u5BF9\u8C61\u7684\u6BD4\u8F83\uFF0C\u4E3A\u5BF9\u8C61\u54C8\u5E0C\u503C\u8BA1\u7B97\uFF0C\u7528\u5BF9\u8C61\u52A0\u9501\u7B49\uFF0C\u8FD9\u4E9B\u64CD\u4F5C\u90FD\u5C5E\u4E8E\u5BF9\u8C61\u8BBF\u95EE\u7684\u8303\u7574\uFF0C\u5B83\u4EEC\u5728\u4EE3\u7801\u4E2D\u6BD4\u6BD4\u7686\u662F\uFF0C\u8981\u8986\u76D6\u5168\u90E8\u5BF9\u8C61\u8BBF\u95EE\u64CD\u4F5C\uFF0CShenandoah \u4E0D\u5F97\u4E0D\u540C\u65F6\u8BBE\u7F6E\u8BFB\u3001\u5199\u5C4F\u969C\u53BB\u62E6\u622A\u3002</p><p>\u4E4B\u524D\u4ECB\u7ECD\u5176\u4ED6\u6536\u96C6\u5668\u65F6\uFF0C\u6216\u8005\u662F\u7528\u4E8E\u7EF4\u62A4\u5361\u8868\uFF0C\u6216\u8005\u662F\u7528\u4E8E\u5B9E\u73B0\u5E76\u53D1\u6807\u8BB0\uFF0C\u5199\u5C4F\u969C\u5DF2\u88AB\u4F7F\u7528\u591A\u6B21\uFF0C\u7D2F\u79EF\u4E86\u4E0D\u5C11\u7684\u5904\u7406\u4EFB\u52A1\u4E86\uFF0C\u8FD9\u4E9B\u5199\u5C4F\u969C\u6709\u76F8\u5F53\u4E00\u90E8\u5206\u5728 Shenandoah \u6536\u96C6\u5668\u4E2D\u4F9D\u7136\u8981\u88AB\u4F7F\u7528\u5230\u3002\u9664\u6B64\u4EE5\u5916\uFF0C\u4E3A\u4E86\u5B9E\u73B0 Brooks Pointer\uFF0CShenandoah \u5728\u8BFB\u3001\u5199\u5C4F\u969C\u4E2D\u90FD\u52A0\u5165\u4E86\u989D\u5916\u7684\u8F6C\u53D1\u5904\u7406\uFF0C\u5C24\u5176\u662F\u4F7F\u7528\u8BFB\u5C4F\u969C\u7684\u4EE3\u4EF7\uFF0C\u8FD9\u662F\u6BD4\u5199\u5C4F\u969C\u66F4\u5927\u7684\u3002\u4EE3\u7801\u91CC\u5BF9\u8C61\u8BFB\u53D6\u7684\u51FA\u73B0\u9891\u7387\u8981\u6BD4\u5BF9\u8C61\u5199\u5165\u7684\u9891\u7387\u9AD8\u51FA\u5F88\u591A\uFF0C\u8BFB\u5C4F\u969C\u6570\u91CF\u81EA\u7136\u4E5F\u8981\u6BD4\u5199\u5C4F\u969C\u591A\u5F97\u591A\uFF0C\u6240\u4EE5\u8BFB\u5C4F\u969C\u7684\u4F7F\u7528\u5FC5\u987B\u66F4\u52A0\u8C28\u614E\uFF0C\u4E0D\u5141\u8BB8\u4EFB\u4F55\u7684\u91CD\u91CF\u7EA7\u64CD\u4F5C\u3002Shenandoah \u662F\u672C\u4E66\u4E2D\u7B2C\u4E00\u6B3E\u4F7F\u7528\u5230\u8BFB\u5C4F\u969C\u7684\u6536\u96C6\u5668\uFF0C\u5B83\u7684\u5F00\u53D1\u8005\u4E5F\u610F\u8BC6\u5230\u6570\u91CF\u5E9E\u5927\u7684\u8BFB\u5C4F\u969C\u5E26\u6765\u7684\u6027\u80FD\u5F00\u9500\u4F1A\u662F Shenandoah \u88AB\u8BDF\u75C5\u7684\u5173\u952E\u70B9\u4E4B\u4E00<sup class="footnote-ref"><a href="#footnote40">[40]</a><a class="footnote-anchor" id="footnote-ref40"></a></sup>\uFF0C\u6240\u4EE5\u8BA1\u5212\u5728 JDK 13 \u4E2D\u5C06 Shenandoah \u7684\u5185\u5B58\u5C4F\u969C\u6A21\u578B\u6539\u8FDB\u4E3A\u57FA\u4E8E\u5F15\u7528\u8BBF\u95EE\u5C4F\u969C\uFF08Load Reference Barrier\uFF09<sup class="footnote-ref"><a href="#footnote41">[41]</a><a class="footnote-anchor" id="footnote-ref41"></a></sup>\u7684\u5B9E\u73B0\uFF0C\u6240\u8C13 \u201C\u5F15\u7528\u8BBF\u95EE\u5C4F\u969C\u201D \u662F\u6307\u5185\u5B58\u5C4F\u969C\u53EA\u62E6\u622A\u5BF9\u8C61\u4E2D\u6570\u636E\u7C7B\u578B\u4E3A\u5F15\u7528\u7C7B\u578B\u7684\u8BFB\u5199\u64CD\u4F5C\uFF0C\u800C\u4E0D\u53BB\u7BA1\u539F\u751F\u6570\u636E\u7C7B\u578B\u7B49\u5176\u4ED6\u975E\u5F15\u7528\u5B57\u6BB5\u7684\u8BFB\u5199\uFF0C\u8FD9\u80FD\u591F\u7701\u53BB\u5927\u91CF\u5BF9\u539F\u751F\u7C7B\u578B\u3001\u5BF9\u8C61\u6BD4\u8F83\u3001\u5BF9\u8C61\u52A0\u9501\u7B49\u573A\u666F\u4E2D\u8BBE\u7F6E\u5185\u5B58\u5C4F\u969C\u6240\u5E26\u6765\u7684\u6D88\u8017\u3002</p><p>\u6700\u540E\u6765\u8C08\u8C08 Shenandoah \u5728\u5B9E\u9645\u5E94\u7528\u4E2D\u7684\u6027\u80FD\u8868\u73B0\uFF0CShenandoah \u7684\u5F00\u53D1\u56E2\u961F\u6216\u8005\u5176\u4ED6\u7B2C\u4E09\u65B9\u6D4B\u8BD5\u8005\u5728\u7F51\u4E0A\u90FD\u516C\u5E03\u4E86\u4E00\u7CFB\u5217\u6D4B\u8BD5\uFF0C\u7ED3\u679C\u5404\u6709\u5DEE\u5F02\u3002\u7B14\u8005\u5728\u6B64\u9009\u62E9\u5C55\u793A\u4E86\u4E00\u4EFD RedHat \u5B98\u65B9\u5728 2016 \u5E74\u6240\u53D1\u8868\u7684 Shenandoah \u5B9E\u73B0\u8BBA\u6587\u4E2D\u7ED9\u51FA\u7684\u5E94\u7528\u5B9E\u6D4B\u6570\u636E\uFF0C\u6D4B\u8BD5\u5185\u5BB9\u662F\u4F7F\u7528 ElasticSearch \u5BF9 200GB \u7684\u7EF4\u57FA\u767E\u79D1\u6570\u636E\u8FDB\u884C\u7D22\u5F15<sup class="footnote-ref"><a href="#footnote42">[42]</a><a class="footnote-anchor" id="footnote-ref42"></a></sup>\uFF0C\u5982\u88683-2 \u6240\u793A\u3002\u4ECE\u7ED3\u679C\u6765\u770B\uFF0C\u5E94\u8BE5\u8BF4 2016 \u5E74\u505A\u8BE5\u6D4B\u8BD5\u65F6\u7684 Shenandoah \u5E76\u6CA1\u6709\u5B8C\u5168\u8FBE\u6210\u9884\u5B9A\u76EE\u6807\uFF0C\u505C\u987F\u65F6\u95F4\u6BD4\u5176\u4ED6\u51E0\u6B3E\u6536\u96C6\u5668\u786E\u5B9E\u6709\u4E86\u8D28\u7684\u98DE\u8DC3\uFF0C\u4F46\u4E5F\u5E76\u672A\u5B9E\u73B0\u6700\u5927\u505C\u987F\u65F6\u95F4\u63A7\u5236\u5728\u5341\u6BEB\u79D2\u4EE5\u5185\u7684\u76EE\u6807\uFF0C\u800C\u541E\u5410\u91CF\u65B9\u9762\u5219\u51FA\u73B0\u4E86\u5F88\u660E\u663E\u7684\u4E0B\u964D\uFF0C\u5176\u603B\u8FD0\u884C\u65F6\u95F4\u662F\u6240\u6709\u6D4B\u8BD5\u6536\u96C6\u5668\u4E2D\u6700\u957F\u7684\u3002\u8BFB\u8005\u53EF\u4EE5\u4ECE\u8FD9\u4E2A\u5B98\u65B9\u7684\u6D4B\u8BD5\u7ED3\u679C\u6765\u5BF9 Shenandoah \u7684\u5F31\u9879\uFF08\u9AD8\u8FD0\u884C\u8D1F\u62C5\u4F7F\u5F97\u541E\u5410\u91CF\u4E0B\u964D\uFF09\u548C\u5F3A\u9879\uFF08\u4F4E\u5EF6\u8FDF\u65F6\u95F4\uFF09\u5EFA\u7ACB\u91CF\u5316\u7684\u6982\u5FF5\uFF0C\u5E76\u5BF9\u6BD4\u4E00\u4E0B\u7A0D\u540E\u4ECB\u7ECD\u7684 ZGC \u7684\u6D4B\u8BD5\u7ED3\u679C\u3002</p><p>\u88683-2 Shenandoah \u5728\u5B9E\u9645\u5E94\u7528\u4E2D\u7684\u6D4B\u8BD5\u6570\u636E</p><p><img src="'+P+'" alt="\u88683-2" loading="lazy"></p><p>Shenandoah \u6536\u96C6\u5668\u4F5C\u4E3A\u7B2C\u4E00\u6B3E\u7531\u975E Oracle \u5F00\u53D1\u7684\u5783\u573E\u6536\u96C6\u5668\uFF0C\u4E00\u5F00\u59CB\u5C31\u9884\u8BA1\u5230\u4E86\u7F3A\u4E4F Oracle \u516C\u53F8\u90A3\u6837\u5BCC\u6709\u7ECF\u9A8C\u7684\u7814\u53D1\u56E2\u961F\u53EF\u80FD\u4F1A\u9047\u5230\u5F88\u591A\u56F0\u96BE\u3002\u6240\u4EE5 Shenandoah \u91C7\u53D6\u4E86 \u201C\u5C0F\u6B65\u5FEB\u8DD1\u201D \u7684\u7B56\u7565\uFF0C\u5C06\u6700\u7EC8\u76EE\u6807\u8FDB\u884C\u62C6\u5206\uFF0C\u5206\u522B\u5F62\u6210 Shenandoah 1.0\u30012.0\u30013.0\u2026\u2026\u8FD9\u6837\u7684\u5C0F\u7248\u672C\u8BA1\u5212\uFF0C\u5728\u6BCF\u4E2A\u7248\u672C\u4E2D\u8FED\u4EE3\u6539\u8FDB\uFF0C\u73B0\u5728\u5DF2\u7ECF\u53EF\u4EE5\u770B\u5230 Shenandoah \u7684\u6027\u80FD\u5728\u65E5\u76CA\u6539\u5584\uFF0C\u9010\u6B65\u63A5\u8FD1 &quot;Low-Pause&quot; \u7684\u76EE\u6807\u3002\u6B64\u5916\uFF0CRedHat \u4E5F\u79EF\u6781\u62D3\u5C55 Shenandoah \u7684\u4F7F\u7528\u8303\u56F4\uFF0C\u5C06\u5176 Backport \u5230 JDK 11 \u751A\u81F3\u662F JDK 8 \u4E4B\u4E0A\uFF0C\u8BA9\u66F4\u591A\u4E0D\u65B9\u4FBF\u5347\u7EA7 JDK \u7248\u672C\u7684\u5E94\u7528\u4E5F\u80FD\u591F\u4EAB\u53D7\u5230\u5783\u573E\u6536\u96C6\u5668\u6280\u672F\u53D1\u5C55\u7684\u6700\u524D\u6CBF\u6210\u679C\u3002</p><h3 id="_3-6-2-zgc-\u6536\u96C6\u5668" tabindex="-1"><a class="header-anchor" href="#_3-6-2-zgc-\u6536\u96C6\u5668" aria-hidden="true">#</a> 3.6.2 ZGC \u6536\u96C6\u5668</h3><p>ZGC\uFF08 &quot;Z&quot; \u5E76\u975E\u4EC0\u4E48\u4E13\u4E1A\u540D\u8BCD\u7684\u7F29\u5199\uFF0C\u8FD9\u6B3E\u6536\u96C6\u5668\u7684\u540D\u5B57\u5C31\u53EB\u4F5C Z Garbage Collector\uFF09\u662F\u4E00\u6B3E\u5728 JDK 11 \u4E2D\u65B0\u52A0\u5165\u7684\u5177\u6709\u5B9E\u9A8C\u6027\u8D28<sup class="footnote-ref"><a href="#footnote43">[43]</a><a class="footnote-anchor" id="footnote-ref43"></a></sup>\u7684\u4F4E\u5EF6\u8FDF\u5783\u573E\u6536\u96C6\u5668\uFF0C\u662F\u7531 Oracle \u516C\u53F8\u7814\u53D1\u7684\u30022018 \u5E74 Oracle \u521B\u5EFA\u4E86 JEP 333 \u5C06 ZGC \u63D0\u4EA4\u7ED9 OpenJDK\uFF0C\u63A8\u52A8\u5176\u8FDB\u5165 OpenJDK 11 \u7684\u53D1\u5E03\u6E05\u5355\u4E4B\u4E2D\u3002</p><p>ZGC \u548C Shenandoah \u7684\u76EE\u6807\u662F\u9AD8\u5EA6\u76F8\u4F3C\u7684\uFF0C\u90FD\u5E0C\u671B\u5728\u5C3D\u53EF\u80FD\u5BF9\u541E\u5410\u91CF\u5F71\u54CD\u4E0D\u592A\u5927\u7684\u524D\u63D0\u4E0B<sup class="footnote-ref"><a href="#footnote44">[44]</a><a class="footnote-anchor" id="footnote-ref44"></a></sup>\uFF0C\u5B9E\u73B0\u5728\u4EFB\u610F\u5806\u5185\u5B58\u5927\u5C0F\u4E0B\u90FD\u53EF\u4EE5\u628A\u5783\u573E\u6536\u96C6\u7684\u505C\u987F\u65F6\u95F4\u9650\u5236\u5728\u5341\u6BEB\u79D2\u4EE5\u5185\u7684\u4F4E\u5EF6\u8FDF\u3002\u4F46\u662F ZGC \u548C Shenandoah \u7684\u5B9E\u73B0\u601D\u8DEF\u53C8\u662F\u5DEE\u5F02\u663E\u8457\u7684\uFF0C\u5982\u679C\u8BF4 RedHat \u516C\u53F8\u5F00\u53D1\u7684 Shenandoah \u50CF\u662F Oracle \u7684 G1 \u6536\u96C6\u5668\u7684\u5B9E\u9645\u7EE7\u627F\u8005\u7684\u8BDD\uFF0C\u90A3 Oracle \u516C\u53F8\u5F00\u53D1\u7684 ZGC \u5C31\u66F4\u50CF\u662F Azul System \u516C\u53F8\u72EC\u6B65\u5929\u4E0B\u7684 PGC\uFF08Pauseless GC\uFF09\u548C C4\uFF08Concurrent Continuously Compacting Collector\uFF09\u6536\u96C6\u5668\u7684\u540C\u80DE\u5144\u5F1F\u3002</p><p>\u65E9\u5728 2005 \u5E74\uFF0C\u8FD0\u884C\u5728 Azul VM \u4E0A\u7684 PGC \u5C31\u5DF2\u7ECF\u5B9E\u73B0\u4E86\u6807\u8BB0\u548C\u6574\u7406\u9636\u6BB5\u90FD\u5168\u7A0B\u4E0E\u7528\u6237\u7EBF\u7A0B\u5E76\u53D1\u8FD0\u884C\u7684\u5783\u573E\u6536\u96C6\uFF0C\u800C\u8FD0\u884C\u5728 Zing VM \u4E0A\u7684 C4 \u6536\u96C6\u5668\u662F PGC \u7EE7\u7EED\u6F14\u8FDB\u7684\u4EA7\u7269\uFF0C\u4E3B\u8981\u589E\u52A0\u4E86\u5206\u4EE3\u6536\u96C6\u652F\u6301\uFF0C\u5927\u5E45\u63D0\u5347\u4E86\u6536\u96C6\u5668\u80FD\u591F\u627F\u53D7\u7684\u5BF9\u8C61\u5206\u914D\u901F\u5EA6\u3002\u65E0\u8BBA\u4ECE\u7B97\u6CD5\u8FD8\u662F\u5B9E\u73B0\u539F\u7406\u4E0A\u6765\u8BB2\uFF0CPGC \u548C C4 \u80AF\u5B9A\u7B97\u662F\u4E00\u8109\u76F8\u627F\u7684\uFF0C\u800C ZGC \u867D\u7136\u5E76\u975E Azul \u516C\u53F8\u7684\u4EA7\u54C1\uFF0C\u4F46\u4E5F\u5E94\u89C6\u4E3A\u8FD9\u6761\u8109\u7EDC\u4E0A\u7684\u53E6\u4E00\u4E2A\u8282\u70B9\uFF0C\u56E0\u4E3A ZGC \u51E0\u4E4E\u6240\u6709\u7684\u5173\u952E\u6280\u672F\u4E0A\uFF0C\u4E0E PGC \u548C C4 \u90FD\u53EA\u5B58\u5728\u672F\u8BED\u79F0\u8C13\u4E0A\u7684\u5DEE\u522B\uFF0C\u5B9E\u8D28\u5185\u5BB9\u51E0\u4E4E\u662F\u4E00\u6A21\u4E00\u6837\u7684\u3002\u76F8\u4FE1\u5230\u8FD9\u91CC\u8BFB\u8005\u5E94\u8BE5\u5DF2\u7ECF\u5BF9 Java \u865A\u62DF\u673A\u6536\u96C6\u5668\u5E38\u89C1\u7684\u4E13\u4E1A\u672F\u8BED\u90FD\u6709\u6240\u4E86\u89E3\u4E86\uFF0C\u5982\u679C\u4E0D\u907F\u8BB3\u4E13\u4E1A\u672F\u8BED\u7684\u8BDD\uFF0C\u6211\u4EEC\u53EF\u4EE5\u7ED9 ZGC \u4E0B\u4E00\u4E2A\u8FD9\u6837\u7684\u5B9A\u4E49\u6765\u6982\u62EC\u5B83\u7684\u4E3B\u8981\u7279\u5F81\uFF1AZGC \u6536\u96C6\u5668\u662F\u4E00\u6B3E\u57FA\u4E8E Region \u5185\u5B58\u5E03\u5C40\u7684\uFF0C\uFF08\u6682\u65F6\uFF09\u4E0D\u8BBE\u5206\u4EE3\u7684\uFF0C\u4F7F\u7528\u4E86\u8BFB\u5C4F\u969C\u3001\u67D3\u8272\u6307\u9488\u548C\u5185\u5B58\u591A\u91CD\u6620\u5C04\u7B49\u6280\u672F\u6765\u5B9E\u73B0\u53EF\u5E76\u53D1\u7684\u6807\u8BB0-\u6574\u7406\u7B97\u6CD5\u7684\uFF0C\u4EE5\u4F4E\u5EF6\u8FDF\u4E3A\u9996\u8981\u76EE\u6807\u7684\u4E00\u6B3E\u5783\u573E\u6536\u96C6\u5668\u3002\u63A5\u4E0B\u6765\uFF0C\u7B14\u8005\u5C06\u9010\u9879\u6765\u4ECB\u7ECD ZGC \u7684\u8FD9\u4E9B\u6280\u672F\u7279\u70B9\u3002</p><p>\u9996\u5148\u4ECE ZGC \u7684\u5185\u5B58\u5E03\u5C40\u8BF4\u8D77\u3002\u4E0E Shenandoah \u548C G1 \u4E00\u6837\uFF0CZGC \u4E5F\u91C7\u7528\u57FA\u4E8E Region \u7684\u5806\u5185\u5B58\u5E03\u5C40\uFF0C\u4F46\u4E0E\u5B83\u4EEC\u4E0D\u540C\u7684\u662F\uFF0CZGC \u7684 Region\uFF08\u5728\u4E00\u4E9B\u5B98\u65B9\u8D44\u6599\u4E2D\u5C06\u5B83\u79F0\u4E3A Page \u6216\u8005 ZPage\uFF0C\u672C\u7AE0\u4E3A\u884C\u6587\u4E00\u81F4\u7EE7\u7EED\u79F0\u4E3A Region\uFF09\u5177\u6709\u52A8\u6001\u6027\u2014\u2014\u52A8\u6001\u521B\u5EFA\u548C\u9500\u6BC1\uFF0C\u4EE5\u53CA\u52A8\u6001\u7684\u533A\u57DF\u5BB9\u91CF\u5927\u5C0F\u3002\u5728 x64 \u786C\u4EF6\u5E73\u53F0\u4E0B\uFF0CZGC \u7684 Region \u53EF\u4EE5\u5177\u6709\u5982\u56FE3-19 \u6240\u793A\u7684\u5927\u3001\u4E2D\u3001\u5C0F\u4E09\u7C7B\u5BB9\u91CF\uFF1A</p><ul><li><p>\u5C0F\u578B Region\uFF08Small Region\uFF09\uFF1A\u5BB9\u91CF\u56FA\u5B9A\u4E3A 2MB\uFF0C\u7528\u4E8E\u653E\u7F6E\u5C0F\u4E8E 256KB \u7684\u5C0F\u5BF9\u8C61\u3002</p></li><li><p>\u4E2D\u578B Region\uFF08Medium Region\uFF09\uFF1A\u5BB9\u91CF\u56FA\u5B9A\u4E3A 32MB\uFF0C\u7528\u4E8E\u653E\u7F6E\u5927\u4E8E\u7B49\u4E8E 256KB \u4F46\u5C0F\u4E8E 4MB \u7684\u5BF9\u8C61\u3002</p></li><li><p>\u5927\u578B Region\uFF08Large Region\uFF09\uFF1A\u5BB9\u91CF\u4E0D\u56FA\u5B9A\uFF0C\u53EF\u4EE5\u52A8\u6001\u53D8\u5316\uFF0C\u4F46\u5FC5\u987B\u4E3A 2MB \u7684\u6574\u6570\u500D\uFF0C\u7528\u4E8E\u653E\u7F6E 4MB \u6216\u4EE5\u4E0A\u7684\u5927\u5BF9\u8C61\u3002\u6BCF\u4E2A\u5927\u578B Region \u4E2D\u53EA\u4F1A\u5B58\u653E\u4E00\u4E2A\u5927\u5BF9\u8C61\uFF0C\u8FD9\u4E5F\u9884\u793A\u7740\u867D\u7136\u540D\u5B57\u53EB\u4F5C \u201C\u5927\u578BRegion\u201D\uFF0C\u4F46\u5B83\u7684\u5B9E\u9645\u5BB9\u91CF\u5B8C\u5168\u6709\u53EF\u80FD\u5C0F\u4E8E\u4E2D\u578B Region\uFF0C\u6700\u5C0F\u5BB9\u91CF\u53EF\u4F4E\u81F3 4MB\u3002\u5927\u578B Region \u5728 ZGC \u7684\u5B9E\u73B0\u4E2D\u662F\u4E0D\u4F1A\u88AB\u91CD\u5206\u914D\uFF08\u91CD\u5206\u914D\u662F ZGC \u7684\u4E00\u79CD\u5904\u7406\u52A8\u4F5C\uFF0C\u7528\u4E8E\u590D\u5236\u5BF9\u8C61\u7684\u6536\u96C6\u5668\u9636\u6BB5\uFF0C\u7A0D\u540E\u4F1A\u4ECB\u7ECD\u5230\uFF09\u7684\uFF0C\u56E0\u4E3A\u590D\u5236\u4E00\u4E2A\u5927\u5BF9\u8C61\u7684\u4EE3\u4EF7\u975E\u5E38\u9AD8\u6602\u3002</p></li></ul><p><img src="'+R+'" alt="\u56FE3-20" loading="lazy"></p><p>\u56FE3-19 ZGC \u7684\u5806\u5185\u5B58\u5E03\u5C40</p><p>\u63A5\u4E0B\u6765\u662F ZGC \u7684\u6838\u5FC3\u95EE\u9898\u2014\u2014\u5E76\u53D1\u6574\u7406\u7B97\u6CD5\u7684\u5B9E\u73B0\u3002Shenandoah \u4F7F\u7528\u8F6C\u53D1\u6307\u9488\u548C\u8BFB\u5C4F\u969C\u6765\u5B9E\u73B0\u5E76\u53D1\u6574\u7406\uFF0CZGC \u867D\u7136\u540C\u6837\u7528\u5230\u4E86\u8BFB\u5C4F\u969C\uFF0C\u4F46\u7528\u7684\u5374\u662F\u4E00\u6761\u4E0E Shenandoah \u5B8C\u5168\u4E0D\u540C\uFF0C\u66F4\u52A0\u590D\u6742\u7CBE\u5DE7\u7684\u89E3\u9898\u601D\u8DEF\u3002</p><p>ZGC \u6536\u96C6\u5668\u6709\u4E00\u4E2A\u6807\u5FD7\u6027\u7684\u8BBE\u8BA1\u662F\u5B83\u91C7\u7528\u7684\u67D3\u8272\u6307\u9488\u6280\u672F\uFF08Colored Pointer\uFF0C\u5176\u4ED6\u7C7B\u4F3C\u7684\u6280\u672F\u4E2D\u53EF\u80FD\u5C06\u5B83\u79F0\u4E3A Tag Pointer \u6216\u8005 Version Pointer\uFF09\u3002\u4ECE\u524D\uFF0C\u5982\u679C\u6211\u4EEC\u8981\u5728\u5BF9\u8C61\u4E0A\u5B58\u50A8\u4E00\u4E9B\u989D\u5916\u7684\u3001\u53EA\u4F9B\u6536\u96C6\u5668\u6216\u8005\u865A\u62DF\u673A\u672C\u8EAB\u4F7F\u7528\u7684\u6570\u636E\uFF0C\u901A\u5E38\u4F1A\u5728\u5BF9\u8C61\u5934\u4E2D\u589E\u52A0\u989D\u5916\u7684\u5B58\u50A8\u5B57\u6BB5\uFF08\u8BE6\u89C1 2.3.2 \u8282\u7684\u5185\u5BB9\uFF09\uFF0C\u5982\u5BF9\u8C61\u7684\u54C8\u5E0C\u7801\u3001\u5206\u4EE3\u5E74\u9F84\u3001\u9501\u8BB0\u5F55\u7B49\u5C31\u662F\u8FD9\u6837\u5B58\u50A8\u7684\u3002\u8FD9\u79CD\u8BB0\u5F55\u65B9\u5F0F\u5728\u6709\u5BF9\u8C61\u8BBF\u95EE\u7684\u573A\u666F\u4E0B\u662F\u5F88\u81EA\u7136\u6D41\u7545\u7684\uFF0C\u4E0D\u4F1A\u6709\u4EC0\u4E48\u989D\u5916\u8D1F\u62C5\u3002\u4F46\u5982\u679C\u5BF9\u8C61\u5B58\u5728\u88AB\u79FB\u52A8\u8FC7\u7684\u53EF\u80FD\u6027\uFF0C\u5373\u4E0D\u80FD\u4FDD\u8BC1\u5BF9\u8C61\u8BBF\u95EE\u80FD\u591F\u6210\u529F\u5462\uFF1F\u53C8\u6216\u8005\u6709\u4E00\u4E9B\u6839\u672C\u5C31\u4E0D\u4F1A\u53BB\u8BBF\u95EE\u5BF9\u8C61\uFF0C\u4F46\u53C8\u5E0C\u671B\u5F97\u77E5\u8BE5\u5BF9\u8C61\u7684\u67D0\u4E9B\u4FE1\u606F\u7684\u5E94\u7528\u573A\u666F\u5462\uFF1F\u80FD\u4E0D\u80FD\u4ECE\u6307\u9488\u6216\u8005\u4E0E\u5BF9\u8C61\u5185\u5B58\u65E0\u5173\u7684\u5730\u65B9\u5F97\u5230\u8FD9\u4E9B\u4FE1\u606F\uFF0C\u8B6C\u5982\u662F\u5426\u80FD\u591F\u770B\u51FA\u6765\u5BF9\u8C61\u88AB\u79FB\u52A8\u8FC7\uFF1F\u8FD9\u6837\u7684\u8981\u6C42\u5E76\u975E\u4E0D\u5408\u7406\u7684\u5201\u96BE\uFF0C\u5148\u4E0D\u53BB\u8BF4\u5E76\u53D1\u79FB\u52A8\u5BF9\u8C61\u53EF\u80FD\u5E26\u6765\u7684\u53EF\u8BBF\u95EE\u6027\u95EE\u9898\uFF0C\u6B64\u524D\u6211\u4EEC\u5C31\u9047\u5230\u8FC7\u8FD9\u6837\u7684\u8981\u6C42\u2014\u2014\u8FFD\u8E2A\u5F0F\u6536\u96C6\u7B97\u6CD5\u7684\u6807\u8BB0\u9636\u6BB5\u5C31\u53EF\u80FD\u5B58\u5728\u53EA\u8DDF\u6307\u9488\u6253\u4EA4\u9053\u800C\u4E0D\u5FC5\u6D89\u53CA\u6307\u9488\u6240\u5F15\u7528\u7684\u5BF9\u8C61\u672C\u8EAB\u7684\u573A\u666F\u3002\u4F8B\u5982\u5BF9\u8C61\u6807\u8BB0\u7684\u8FC7\u7A0B\u4E2D\u9700\u8981\u7ED9\u5BF9\u8C61\u6253\u4E0A\u4E09\u8272\u6807\u8BB0\uFF08\u89C1 3.4.6 \u8282\uFF09\uFF0C\u8FD9\u4E9B\u6807\u8BB0\u672C\u8D28\u4E0A\u5C31\u53EA\u548C\u5BF9\u8C61\u7684\u5F15\u7528\u6709\u5173\uFF0C\u800C\u4E0E\u5BF9\u8C61\u672C\u8EAB\u65E0\u5173\u2014\u2014\u67D0\u4E2A\u5BF9\u8C61\u53EA\u6709\u5B83\u7684\u5F15\u7528\u5173\u7CFB\u80FD\u51B3\u5B9A\u5B83\u5B58\u6D3B\u4E0E\u5426\uFF0C\u5BF9\u8C61\u4E0A\u5176\u4ED6\u6240\u6709\u7684\u5C5E\u6027\u90FD\u4E0D\u80FD\u591F\u5F71\u54CD\u5B83\u7684\u5B58\u6D3B\u5224\u5B9A\u7ED3\u679C\u3002HotSpot \u865A\u62DF\u673A\u7684\u51E0\u79CD\u6536\u96C6\u5668\u6709\u4E0D\u540C\u7684\u6807\u8BB0\u5B9E\u73B0\u65B9\u6848\uFF0C\u6709\u7684\u628A\u6807\u8BB0\u76F4\u63A5\u8BB0\u5F55\u5728\u5BF9\u8C61\u5934\u4E0A\uFF08\u5982 Serial \u6536\u96C6\u5668\uFF09\uFF0C\u6709\u7684\u628A\u6807\u8BB0\u8BB0\u5F55\u5728\u4E0E\u5BF9\u8C61\u76F8\u4E92\u72EC\u7ACB\u7684\u6570\u636E\u7ED3\u6784\u4E0A\uFF08\u5982 G1\u3001Shenandoah \u4F7F\u7528\u4E86\u4E00\u79CD\u76F8\u5F53\u4E8E\u5806\u5185\u5B58\u7684 1/64 \u5927\u5C0F\u7684\uFF0C\u79F0\u4E3A BitMap \u7684\u7ED3\u6784\u6765\u8BB0\u5F55\u6807\u8BB0\u4FE1\u606F\uFF09\uFF0C\u800C ZGC \u7684\u67D3\u8272\u6307\u9488\u662F\u6700\u76F4\u63A5\u7684\u3001\u6700\u7EAF\u7CB9\u7684\uFF0C\u5B83\u76F4\u63A5\u628A\u6807\u8BB0\u4FE1\u606F\u8BB0\u5728\u5F15\u7528\u5BF9\u8C61\u7684\u6307\u9488\u4E0A\uFF0C\u8FD9\u65F6\uFF0C\u4E0E\u5176\u8BF4\u53EF\u8FBE\u6027\u5206\u6790\u662F\u904D\u5386\u5BF9\u8C61\u56FE\u6765\u6807\u8BB0\u5BF9\u8C61\uFF0C\u8FD8\u4E0D\u5982\u8BF4\u662F\u904D\u5386 \u201C\u5F15\u7528\u56FE\u201D \u6765\u6807\u8BB0 \u201C\u5F15\u7528\u201D \u4E86\u3002</p><p>\u67D3\u8272\u6307\u9488\u662F\u4E00\u79CD\u76F4\u63A5\u5C06\u5C11\u91CF\u989D\u5916\u7684\u4FE1\u606F\u5B58\u50A8\u5728\u6307\u9488\u4E0A\u7684\u6280\u672F\uFF0C\u53EF\u662F\u4E3A\u4EC0\u4E48\u6307\u9488\u672C\u8EAB\u4E5F\u53EF\u4EE5\u5B58\u50A8\u989D\u5916\u4FE1\u606F\u5462\uFF1F\u5728 64 \u4F4D\u7CFB\u7EDF\u4E2D\uFF0C\u7406\u8BBA\u53EF\u4EE5\u8BBF\u95EE\u7684\u5185\u5B58\u9AD8\u8FBE 16EB\uFF082 \u7684 64 \u6B21\u5E42\uFF09\u5B57\u8282<sup class="footnote-ref"><a href="#footnote45">[45]</a><a class="footnote-anchor" id="footnote-ref45"></a></sup>\u3002\u5B9E\u9645\u4E0A\uFF0C\u57FA\u4E8E\u9700\u6C42\uFF08\u7528\u4E0D\u5230\u90A3\u4E48\u591A\u5185\u5B58\uFF09\u3001\u6027\u80FD\uFF08\u5730\u5740\u8D8A\u5BBD\u5728\u505A\u5730\u5740\u8F6C\u6362\u65F6\u9700\u8981\u7684\u9875\u8868\u7EA7\u6570\u8D8A\u591A\uFF09\u548C\u6210\u672C\uFF08\u6D88\u8017\u66F4\u591A\u6676\u4F53\u7BA1\uFF09\u7684\u8003\u8651\uFF0C\u5728 AMD64 \u67B6\u6784<sup class="footnote-ref"><a href="#footnote46">[46]</a><a class="footnote-anchor" id="footnote-ref46"></a></sup>\u4E2D\u53EA\u652F\u6301\u5230 52 \u4F4D\uFF084PB\uFF09\u7684\u5730\u5740\u603B\u7EBF\u548C 48 \u4F4D\uFF08256TB\uFF09\u7684\u865A\u62DF\u5730\u5740\u7A7A\u95F4\uFF0C\u6240\u4EE5\u76EE\u524D 64 \u4F4D\u7684\u786C\u4EF6\u5B9E\u9645\u80FD\u591F\u652F\u6301\u7684\u6700\u5927\u5185\u5B58\u53EA\u6709 256TB\u3002\u6B64\u5916\uFF0C\u64CD\u4F5C\u7CFB\u7EDF\u4E00\u4FA7\u4E5F\u8FD8\u4F1A\u65BD\u52A0\u81EA\u5DF1\u7684\u7EA6\u675F\uFF0C64 \u4F4D\u7684 Linux \u5219\u5206\u522B\u652F\u6301 47 \u4F4D\uFF08128TB\uFF09\u7684\u8FDB\u7A0B\u865A\u62DF\u5730\u5740\u7A7A\u95F4\u548C 46 \u4F4D\uFF0864TB\uFF09\u7684\u7269\u7406\u5730\u5740\u7A7A\u95F4\uFF0C64 \u4F4D\u7684 Windows \u7CFB\u7EDF\u751A\u81F3\u53EA\u652F\u6301 44 \u4F4D\uFF0816TB\uFF09\u7684\u7269\u7406\u5730\u5740\u7A7A\u95F4\u3002</p><p>\u5C3D\u7BA1 Linux \u4E0B 64 \u4F4D\u6307\u9488\u7684\u9AD8 18 \u4F4D\u4E0D\u80FD\u7528\u6765\u5BFB\u5740\uFF0C\u4F46\u5269\u4F59\u7684 46 \u4F4D\u6307\u9488\u6240\u80FD\u652F\u6301\u7684 64TB \u5185\u5B58\u5728\u4ECA\u5929\u4ECD\u7136\u80FD\u591F\u5145\u5206\u6EE1\u8DB3\u5927\u578B\u670D\u52A1\u5668\u7684\u9700\u8981\u3002\u9274\u4E8E\u6B64\uFF0CZGC \u7684\u67D3\u8272\u6307\u9488\u6280\u672F\u7EE7\u7EED\u76EF\u4E0A\u4E86\u8FD9\u5269\u4E0B\u7684 46 \u4F4D\u6307\u9488\u5BBD\u5EA6\uFF0C\u5C06\u5176\u9AD8 4 \u4F4D\u63D0\u53D6\u51FA\u6765\u5B58\u50A8\u56DB\u4E2A\u6807\u5FD7\u4FE1\u606F\u3002\u901A\u8FC7\u8FD9\u4E9B\u6807\u5FD7\u4F4D\uFF0C\u865A\u62DF\u673A\u53EF\u4EE5\u76F4\u63A5\u4ECE\u6307\u9488\u4E2D\u770B\u5230\u5176\u5F15\u7528\u5BF9\u8C61\u7684\u4E09\u8272\u6807\u8BB0\u72B6\u6001\u3001\u662F\u5426\u8FDB\u5165\u4E86\u91CD\u5206\u914D\u96C6\uFF08\u5373\u88AB\u79FB\u52A8\u8FC7\uFF09\u3001\u662F\u5426\u53EA\u80FD\u901A\u8FC7 finalize() \u65B9\u6CD5\u624D\u80FD\u88AB\u8BBF\u95EE\u5230\uFF0C\u5982\u56FE3-20 \u6240\u793A\u3002\u5F53\u7136\uFF0C\u7531\u4E8E\u8FD9\u4E9B\u6807\u5FD7\u4F4D\u8FDB\u4E00\u6B65\u538B\u7F29\u4E86\u539F\u672C\u5C31\u53EA\u6709 46 \u4F4D\u7684\u5730\u5740\u7A7A\u95F4\uFF0C\u4E5F\u76F4\u63A5\u5BFC\u81F4 ZGC \u80FD\u591F\u7BA1\u7406\u7684\u5185\u5B58\u4E0D\u53EF\u4EE5\u8D85\u8FC7 4TB\uFF082 \u7684 42 \u6B21\u5E42\uFF09<sup class="footnote-ref"><a href="#footnote47">[47]</a><a class="footnote-anchor" id="footnote-ref47"></a></sup>\u3002</p><p><img src="'+J+'" alt="\u56FE3-21" loading="lazy"></p><p>\u56FE3-20 \u67D3\u8272\u6307\u9488\u793A\u610F<sup class="footnote-ref"><a href="#footnote48">[48]</a><a class="footnote-anchor" id="footnote-ref48"></a></sup></p><p>\u867D\u7136\u67D3\u8272\u6307\u9488\u6709 4TB \u7684\u5185\u5B58\u9650\u5236\uFF0C\u4E0D\u80FD\u652F\u6301 32 \u4F4D\u5E73\u53F0\uFF0C\u4E0D\u80FD\u652F\u6301\u538B\u7F29\u6307\u9488\uFF08-XX:+UseCompressedOops\uFF09\u7B49\u8BF8\u591A\u7EA6\u675F\uFF0C\u4F46\u5B83\u5E26\u6765\u7684\u6536\u76CA\u4E5F\u662F\u975E\u5E38\u53EF\u89C2\u7684\uFF0C\u5728 JEP 333 \u7684\u63CF\u8FF0\u9875<sup class="footnote-ref"><a href="#footnote49">[49]</a><a class="footnote-anchor" id="footnote-ref49"></a></sup>\u4E2D\uFF0CZGC \u7684\u8BBE\u8BA1\u8005 Per Liden \u5728 \u201C\u63CF\u8FF0\u201D \u5C0F\u8282\u91CC\u82B1\u4E86\u5168\u6587\u8FC7\u534A\u7684\u7BC7\u5E45\u6765\u9648\u8FF0\u67D3\u8272\u6307\u9488\u7684\u4E09\u5927\u4F18\u52BF\uFF1A</p><ul><li><p>\u67D3\u8272\u6307\u9488\u53EF\u4EE5\u4F7F\u5F97\u4E00\u65E6\u67D0\u4E2A Region \u7684\u5B58\u6D3B\u5BF9\u8C61\u88AB\u79FB\u8D70\u4E4B\u540E\uFF0C\u8FD9\u4E2A Region \u7ACB\u5373\u5C31\u80FD\u591F\u88AB\u91CA\u653E\u548C\u91CD\u7528\u6389\uFF0C\u800C\u4E0D\u5FC5\u7B49\u5F85\u6574\u4E2A\u5806\u4E2D\u6240\u6709\u6307\u5411\u8BE5 Region \u7684\u5F15\u7528\u90FD\u88AB\u4FEE\u6B63\u540E\u624D\u80FD\u6E05\u7406\u3002\u8FD9\u70B9\u76F8\u6BD4\u8D77 Shenandoah \u662F\u4E00\u4E2A\u9887\u5927\u7684\u4F18\u52BF\uFF0C\u4F7F\u5F97\u7406\u8BBA\u4E0A\u53EA\u8981\u8FD8\u6709\u4E00\u4E2A\u7A7A\u95F2 Region\uFF0CZGC \u5C31\u80FD\u5B8C\u6210\u6536\u96C6\uFF0C\u800C Shenandoah \u9700\u8981\u7B49\u5230\u5F15\u7528\u66F4\u65B0\u9636\u6BB5\u7ED3\u675F\u4EE5\u540E\u624D\u80FD\u91CA\u653E\u56DE\u6536\u96C6\u4E2D\u7684 Region\uFF0C\u8FD9\u610F\u5473\u7740\u5806\u4E2D\u51E0\u4E4E\u6240\u6709\u5BF9\u8C61\u90FD\u5B58\u6D3B\u7684\u6781\u7AEF\u60C5\u51B5\uFF0C\u9700\u8981 1\u22361 \u590D\u5236\u5BF9\u8C61\u5230\u65B0 Region \u7684\u8BDD\uFF0C\u5C31\u5FC5\u987B\u8981\u6709\u4E00\u534A\u7684\u7A7A\u95F2 Region \u6765\u5B8C\u6210\u6536\u96C6\u3002\u81F3\u4E8E\u4E3A\u4EC0\u4E48\u67D3\u8272\u6307\u9488\u80FD\u591F\u5BFC\u81F4\u8FD9\u6837\u7684\u7ED3\u679C\uFF0C\u7B14\u8005\u5C06\u5728\u540E\u7EED\u89E3\u91CA\u5176 \u201C\u81EA\u6108\u201D \u7279\u6027\u7684\u65F6\u5019\u8FDB\u884C\u89E3\u91CA\u3002</p></li><li><p>\u67D3\u8272\u6307\u9488\u53EF\u4EE5\u5927\u5E45\u51CF\u5C11\u5728\u5783\u573E\u6536\u96C6\u8FC7\u7A0B\u4E2D\u5185\u5B58\u5C4F\u969C\u7684\u4F7F\u7528\u6570\u91CF\uFF0C\u8BBE\u7F6E\u5185\u5B58\u5C4F\u969C\uFF0C\u5C24\u5176\u662F\u5199\u5C4F\u969C\u7684\u76EE\u7684\u901A\u5E38\u662F\u4E3A\u4E86\u8BB0\u5F55\u5BF9\u8C61\u5F15\u7528\u7684\u53D8\u52A8\u60C5\u51B5\uFF0C\u5982\u679C\u5C06\u8FD9\u4E9B\u4FE1\u606F\u76F4\u63A5\u7EF4\u62A4\u5728\u6307\u9488\u4E2D\uFF0C\u663E\u7136\u5C31\u53EF\u4EE5\u7701\u53BB\u4E00\u4E9B\u4E13\u95E8\u7684\u8BB0\u5F55\u64CD\u4F5C\u3002\u5B9E\u9645\u4E0A\uFF0C\u5230\u76EE\u524D\u4E3A\u6B62 ZGC \u90FD\u5E76\u672A\u4F7F\u7528\u4EFB\u4F55\u5199\u5C4F\u969C\uFF0C\u53EA\u4F7F\u7528\u4E86\u8BFB\u5C4F\u969C\uFF08\u4E00\u90E8\u5206\u662F\u67D3\u8272\u6307\u9488\u7684\u529F\u52B3\uFF0C\u4E00\u90E8\u5206\u662F ZGC \u73B0\u5728\u8FD8\u4E0D\u652F\u6301\u5206\u4EE3\u6536\u96C6\uFF0C\u5929\u7136\u5C31\u6CA1\u6709\u8DE8\u4EE3\u5F15\u7528\u7684\u95EE\u9898\uFF09\u3002\u5185\u5B58\u5C4F\u969C\u5BF9\u7A0B\u5E8F\u8FD0\u884C\u65F6\u6027\u80FD\u7684\u635F\u8017\u5728\u524D\u9762\u7AE0\u8282\u4E2D\u5DF2\u7ECF\u8BB2\u89E3\u8FC7\uFF0C\u80FD\u591F\u7701\u53BB\u4E00\u90E8\u5206\u7684\u5185\u5B58\u5C4F\u969C\uFF0C\u663E\u7136\u5BF9\u7A0B\u5E8F\u8FD0\u884C\u6548\u7387\u662F\u5927\u6709\u88E8\u76CA\u7684\uFF0C\u6240\u4EE5 ZGC \u5BF9\u541E\u5410\u91CF\u7684\u5F71\u54CD\u4E5F\u76F8\u5BF9\u8F83\u4F4E\u3002</p></li><li><p>\u67D3\u8272\u6307\u9488\u53EF\u4EE5\u4F5C\u4E3A\u4E00\u79CD\u53EF\u6269\u5C55\u7684\u5B58\u50A8\u7ED3\u6784\u7528\u6765\u8BB0\u5F55\u66F4\u591A\u4E0E\u5BF9\u8C61\u6807\u8BB0\u3001\u91CD\u5B9A\u4F4D\u8FC7\u7A0B\u76F8\u5173\u7684\u6570\u636E\uFF0C\u4EE5\u4FBF\u65E5\u540E\u8FDB\u4E00\u6B65\u63D0\u9AD8\u6027\u80FD\u3002\u73B0\u5728 Linux \u4E0B\u7684 64 \u4F4D\u6307\u9488\u8FD8\u6709\u524D 18 \u4F4D\u5E76\u672A\u4F7F\u7528\uFF0C\u5B83\u4EEC\u867D\u7136\u4E0D\u80FD\u7528\u6765\u5BFB\u5740\uFF0C\u5374\u53EF\u4EE5\u901A\u8FC7\u5176\u4ED6\u624B\u6BB5\u7528\u4E8E\u4FE1\u606F\u8BB0\u5F55\u3002\u5982\u679C\u5F00\u53D1\u4E86\u8FD9 18 \u4F4D\uFF0C\u65E2\u53EF\u4EE5\u817E\u51FA\u5DF2\u7528\u7684 4 \u4E2A\u6807\u5FD7\u4F4D\uFF0C\u5C06 ZGC \u53EF\u652F\u6301\u7684\u6700\u5927\u5806\u5185\u5B58\u4ECE 4TB \u62D3\u5C55\u5230 64TB\uFF0C\u4E5F\u53EF\u4EE5\u5229\u7528\u5176\u4F59\u4F4D\u7F6E\u518D\u5B58\u50A8\u66F4\u591A\u7684\u6807\u5FD7\uFF0C\u8B6C\u5982\u5B58\u50A8\u4E00\u4E9B\u8FFD\u8E2A\u4FE1\u606F\u6765\u8BA9\u5783\u573E\u6536\u96C6\u5668\u5728\u79FB\u52A8\u5BF9\u8C61\u65F6\u80FD\u5C06\u4F4E\u9891\u6B21\u4F7F\u7528\u7684\u5BF9\u8C61\u79FB\u52A8\u5230\u4E0D\u5E38\u8BBF\u95EE\u7684\u5185\u5B58\u533A\u57DF\u3002</p></li></ul><p>\u4E0D\u8FC7\uFF0C\u8981\u987A\u5229\u5E94\u7528\u67D3\u8272\u6307\u9488\u6709\u4E00\u4E2A\u5FC5\u987B\u89E3\u51B3\u7684\u524D\u7F6E\u95EE\u9898\uFF1AJava \u865A\u62DF\u673A\u4F5C\u4E3A\u4E00\u4E2A\u666E\u666E\u901A\u901A\u7684\u8FDB\u7A0B\uFF0C\u8FD9\u6837\u968F\u610F\u91CD\u65B0\u5B9A\u4E49\u5185\u5B58\u4E2D\u67D0\u4E9B\u6307\u9488\u7684\u5176\u4E2D\u51E0\u4F4D\uFF0C\u64CD\u4F5C\u7CFB\u7EDF\u662F\u5426\u652F\u6301\uFF1F\u5904\u7406\u5668\u662F\u5426\u652F\u6301\uFF1F\u8FD9\u662F\u5F88\u73B0\u5B9E\u7684\u95EE\u9898\uFF0C\u65E0\u8BBA\u4E2D\u95F4\u8FC7\u7A0B\u5982\u4F55\uFF0C\u7A0B\u5E8F\u4EE3\u7801\u6700\u7EC8\u90FD\u8981\u8F6C\u6362\u4E3A\u673A\u5668\u6307\u4EE4\u6D41\u4EA4\u4ED8\u7ED9\u5904\u7406\u5668\u53BB\u6267\u884C\uFF0C\u5904\u7406\u5668\u53EF\u4E0D\u4F1A\u7BA1\u6307\u4EE4\u6D41\u4E2D\u7684\u6307\u9488\u54EA\u90E8\u5206\u5B58\u7684\u662F\u6807\u5FD7\u4F4D\uFF0C\u54EA\u90E8\u5206\u624D\u662F\u771F\u6B63\u7684\u5BFB\u5740\u5730\u5740\uFF0C\u53EA\u4F1A\u628A\u6574\u4E2A\u6307\u9488\u90FD\u89C6\u4F5C\u4E00\u4E2A\u5185\u5B58\u5730\u5740\u6765\u5BF9\u5F85\u3002\u8FD9\u4E2A\u95EE\u9898\u5728 Solaris / SPARC \u5E73\u53F0\u4E0A\u6BD4\u8F83\u5BB9\u6613\u89E3\u51B3\uFF0C\u56E0\u4E3A SPARC \u786C\u4EF6\u5C42\u9762\u672C\u8EAB\u5C31\u652F\u6301\u865A\u62DF\u5730\u5740\u63A9\u7801\uFF0C\u8BBE\u7F6E\u4E4B\u540E\u5176\u673A\u5668\u6307\u4EE4\u76F4\u63A5\u5C31\u53EF\u4EE5\u5FFD\u7565\u6389\u67D3\u8272\u6307\u9488\u4E2D\u7684\u6807\u5FD7\u4F4D\u3002\u4F46\u5728 x86-64 \u5E73\u53F0\u4E0A\u5E76\u6CA1\u6709\u63D0\u4F9B\u7C7B\u4F3C\u7684\u9ED1\u79D1\u6280\uFF0CZGC \u8BBE\u8BA1\u8005\u5C31\u53EA\u80FD\u91C7\u53D6\u5176\u4ED6\u7684\u8865\u6551\u63AA\u65BD\u4E86\uFF0C\u8FD9\u91CC\u9762\u7684\u89E3\u51B3\u65B9\u6848\u8981\u6D89\u53CA\u865A\u62DF\u5185\u5B58\u6620\u5C04\u6280\u672F\uFF0C\u8BA9\u6211\u4EEC\u5148\u6765\u590D\u4E60\u4E00\u4E0B\u8FD9\u4E2A x86 \u8BA1\u7B97\u673A\u4F53\u7CFB\u4E2D\u7684\u7ECF\u5178\u8BBE\u8BA1\u3002</p><p>\u5728\u8FDC\u53E4\u65F6\u4EE3\u7684 x86 \u8BA1\u7B97\u673A\u7CFB\u7EDF\u91CC\u9762\uFF0C\u6240\u6709\u8FDB\u7A0B\u90FD\u662F\u5171\u7528\u540C\u4E00\u5757\u7269\u7406\u5185\u5B58\u7A7A\u95F4\u7684\uFF0C\u8FD9\u6837\u4F1A\u5BFC\u81F4\u4E0D\u540C\u8FDB\u7A0B\u4E4B\u95F4\u7684\u5185\u5B58\u65E0\u6CD5\u76F8\u4E92\u9694\u79BB\uFF0C\u5F53\u4E00\u4E2A\u8FDB\u7A0B\u6C61\u67D3\u4E86\u522B\u7684\u8FDB\u7A0B\u5185\u5B58\u540E\uFF0C\u5C31\u53EA\u80FD\u5BF9\u6574\u4E2A\u7CFB\u7EDF\u8FDB\u884C\u590D\u4F4D\u540E\u624D\u80FD\u5F97\u4EE5\u6062\u590D\u3002\u4E3A\u4E86\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\uFF0C\u4ECE Intel 80386 \u5904\u7406\u5668\u5F00\u59CB\uFF0C\u63D0\u4F9B\u4E86 \u201C\u4FDD\u62A4\u6A21\u5F0F\u201D \u7528\u4E8E\u9694\u79BB\u8FDB\u7A0B\u3002\u5728\u4FDD\u62A4\u6A21\u5F0F\u4E0B\uFF0C386 \u5904\u7406\u5668\u7684\u5168\u90E8 32 \u6761\u5730\u5740\u5BFB\u5740\u7EBF\u90FD\u6709\u6548\uFF0C\u8FDB\u7A0B\u53EF\u8BBF\u95EE\u6700\u9AD8\u4E5F\u53EF\u8FBE 4GB \u7684\u5185\u5B58\u7A7A\u95F4\uFF0C\u4F46\u6B64\u65F6\u5DF2\u4E0D\u540C\u4E8E\u4E4B\u524D\u5B9E\u6A21\u5F0F\u4E0B\u7684\u7269\u7406\u5185\u5B58\u5BFB\u5740\u4E86\uFF0C\u5904\u7406\u5668\u4F1A\u4F7F\u7528\u5206\u9875\u7BA1\u7406\u673A\u5236\u628A\u7EBF\u6027\u5730\u5740\u7A7A\u95F4\u548C\u7269\u7406\u5730\u5740\u7A7A\u95F4\u5206\u522B\u5212\u5206\u4E3A\u5927\u5C0F\u76F8\u540C\u7684\u5757\uFF0C\u8FD9\u6837\u7684\u5185\u5B58\u5757\u88AB\u79F0\u4E3A \u201C\u9875\u201D\uFF08Page\uFF09\u3002\u901A\u8FC7\u5728\u7EBF\u6027\u865A\u62DF\u7A7A\u95F4\u7684\u9875\u4E0E\u7269\u7406\u5730\u5740\u7A7A\u95F4\u7684\u9875\u4E4B\u95F4\u5EFA\u7ACB\u7684\u6620\u5C04\u8868\uFF0C\u5206\u9875\u7BA1\u7406\u673A\u5236\u4F1A\u8FDB\u884C\u7EBF\u6027\u5730\u5740\u5230\u7269\u7406\u5730\u5740\u7A7A\u95F4\u7684\u6620\u5C04\uFF0C\u5B8C\u6210\u7EBF\u6027\u5730\u5740\u5230\u7269\u7406\u5730\u5740\u7684\u8F6C\u6362<sup class="footnote-ref"><a href="#footnote50">[50]</a><a class="footnote-anchor" id="footnote-ref50"></a></sup>\u3002\u5982\u679C\u8BFB\u8005\u5BF9\u8BA1\u7B97\u673A\u7ED3\u6784\u4F53\u7CFB\u4E86\u89E3\u4E0D\u591A\u7684\u8BDD\uFF0C\u4E0D\u59A8\u8BBE\u60F3\u8FD9\u6837\u4E00\u4E2A\u573A\u666F\u6765\u7C7B\u6BD4\uFF1A\u5047\u5982\u4F60\u8981\u53BB \u201C\u4E2D\u5C71\u4E00\u8DEF 3 \u53F7\u201D \u8FD9\u4E2A\u5730\u5740\u62DC\u8BBF\u4E00\u4F4D\u670B\u53CB\uFF0C\u6839\u636E\u4F60\u6240\u5904\u57CE\u5E02\u7684\u4E0D\u540C\uFF0C\u8B6C\u5982\u5728\u5E7F\u5DDE\u6216\u8005\u5728\u4E0A\u6D77\uFF0C\u662F\u80FD\u591F\u901A\u8FC7\u8FD9\u4E2A \u201C\u76F8\u540C\u7684\u5730\u5740\u201D \u5B9A\u4F4D\u5230\u4E24\u4E2A\u5B8C\u5168\u72EC\u7ACB\u7684\u7269\u7406\u4F4D\u7F6E\u7684\uFF0C\u8FD9\u65F6\u5730\u5740\u4E0E\u7269\u7406\u4F4D\u7F6E\u662F\u4E00\u5BF9\u591A\u5173\u7CFB\u6620\u5C04\u3002</p><p>\u4E0D\u540C\u5C42\u6B21\u7684\u865A\u62DF\u5185\u5B58\u5230\u7269\u7406\u5185\u5B58\u7684\u8F6C\u6362\u5173\u7CFB\u53EF\u4EE5\u5728\u786C\u4EF6\u5C42\u9762\u3001\u64CD\u4F5C\u7CFB\u7EDF\u5C42\u9762\u6216\u8005\u8F6F\u4EF6\u8FDB\u7A0B\u5C42\u9762\u5B9E\u73B0\uFF0C\u5982\u4F55\u5B8C\u6210\u5730\u5740\u8F6C\u6362\uFF0C\u662F\u4E00\u5BF9\u4E00\u3001\u591A\u5BF9\u4E00\u8FD8\u662F\u4E00\u5BF9\u591A\u7684\u6620\u5C04\uFF0C\u4E5F\u53EF\u4EE5\u6839\u636E\u5B9E\u9645\u9700\u8981\u6765\u8BBE\u8BA1\u3002Linux / x86-64 \u5E73\u53F0\u4E0A\u7684 ZGC \u4F7F\u7528\u4E86\u591A\u91CD\u6620\u5C04\uFF08Multi-Mapping\uFF09\u5C06\u591A\u4E2A\u4E0D\u540C\u7684\u865A\u62DF\u5185\u5B58\u5730\u5740\u6620\u5C04\u5230\u540C\u4E00\u4E2A\u7269\u7406\u5185\u5B58\u5730\u5740\u4E0A\uFF0C\u8FD9\u662F\u4E00\u79CD\u591A\u5BF9\u4E00\u6620\u5C04\uFF0C\u610F\u5473\u7740 ZGC \u5728\u865A\u62DF\u5185\u5B58\u4E2D\u770B\u5230\u7684\u5730\u5740\u7A7A\u95F4\u8981\u6BD4\u5B9E\u9645\u7684\u5806\u5185\u5B58\u5BB9\u91CF\u6765\u5F97\u66F4\u5927\u3002\u628A\u67D3\u8272\u6307\u9488\u4E2D\u7684\u6807\u5FD7\u4F4D\u770B\u4F5C\u662F\u5730\u5740\u7684\u5206\u6BB5\u7B26\uFF0C\u90A3\u53EA\u8981\u5C06\u8FD9\u4E9B\u4E0D\u540C\u7684\u5730\u5740\u6BB5\u90FD\u6620\u5C04\u5230\u540C\u4E00\u4E2A\u7269\u7406\u5185\u5B58\u7A7A\u95F4\uFF0C\u7ECF\u8FC7\u591A\u91CD\u6620\u5C04\u8F6C\u6362\u540E\uFF0C\u5C31\u53EF\u4EE5\u4F7F\u7528\u67D3\u8272\u6307\u9488\u6B63\u5E38\u8FDB\u884C\u5BFB\u5740\u4E86\uFF0C\u6548\u679C\u5982\u56FE3-21 \u6240\u793A\u3002</p><p><img src="'+X+'" alt="\u56FE3-22" loading="lazy"></p><p>\u56FE3-21 \u591A\u91CD\u6620\u5C04\u4E0B\u7684\u5BFB\u5740</p><p>\u5728\u67D0\u4E9B\u573A\u666F\u4E0B\uFF0C\u591A\u91CD\u6620\u5C04\u6280\u672F\u786E\u5B9E\u53EF\u80FD\u4F1A\u5E26\u6765\u4E00\u4E9B\u8BF8\u5982\u590D\u5236\u5927\u5BF9\u8C61\u65F6\u4F1A\u66F4\u5BB9\u6613\u8FD9\u6837\u7684\u989D\u5916\u597D\u5904\uFF0C\u53EF\u4ECE\u6839\u6E90\u4E0A\u8BB2\uFF0CZGC \u7684\u591A\u91CD\u6620\u5C04\u53EA\u662F\u5B83\u91C7\u7528\u67D3\u8272\u6307\u9488\u6280\u672F\u7684\u4F34\u751F\u4EA7\u7269\uFF0C\u5E76\u4E0D\u662F\u4E13\u95E8\u4E3A\u4E86\u5B9E\u73B0\u5176\u4ED6\u67D0\u79CD\u7279\u6027\u9700\u6C42\u800C\u53BB\u505A\u7684\u3002</p><p>\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u6765\u5B66\u4E60 ZGC \u6536\u96C6\u5668\u662F\u5982\u4F55\u5DE5\u4F5C\u7684\u3002ZGC \u7684\u8FD0\u4F5C\u8FC7\u7A0B\u5927\u81F4\u53EF\u5212\u5206\u4E3A\u4EE5\u4E0B\u56DB\u4E2A\u5927\u7684\u9636\u6BB5\u3002\u5168\u90E8\u56DB\u4E2A\u9636\u6BB5\u90FD\u662F\u53EF\u4EE5\u5E76\u53D1\u6267\u884C\u7684\uFF0C\u4EC5\u662F\u4E24\u4E2A\u9636\u6BB5\u4E2D\u95F4\u4F1A\u5B58\u5728\u77ED\u6682\u7684\u505C\u987F\u5C0F\u9636\u6BB5\uFF0C\u8FD9\u4E9B\u5C0F\u9636\u6BB5\uFF0C\u8B6C\u5982\u521D\u59CB\u5316 GC Root \u76F4\u63A5\u5173\u8054\u5BF9\u8C61\u7684 Mark Start\uFF0C\u4E0E\u4E4B\u524D G1 \u548C Shenandoah \u7684 Initial Mark \u9636\u6BB5\u5E76\u6CA1\u6709\u4EC0\u4E48\u5DEE\u5F02\uFF0C\u7B14\u8005\u5C31\u4E0D\u518D\u5355\u72EC\u89E3\u91CA\u4E86\u3002ZGC \u7684\u8FD0\u4F5C\u8FC7\u7A0B\u5177\u4F53\u5982\u56FE3-22 \u6240\u793A\u3002</p><p><img src="'+B+'" alt="\u56FE3-22" loading="lazy"></p><p>\u56FE3-22 ZGC \u8FD0\u4F5C\u8FC7\u7A0B</p><p>\u5E76\u53D1\u6807\u8BB0\uFF08Concurrent Mark\uFF09\uFF1A\u4E0E G1\u3001Shenandoah \u4E00\u6837\uFF0C\u5E76\u53D1\u6807\u8BB0\u662F\u904D\u5386\u5BF9\u8C61\u56FE\u505A\u53EF\u8FBE\u6027\u5206\u6790\u7684\u9636\u6BB5\uFF0C\u524D\u540E\u4E5F\u8981\u7ECF\u8FC7\u7C7B\u4F3C\u4E8E G1\u3001Shenandoah \u7684\u521D\u59CB\u6807\u8BB0\u3001\u6700\u7EC8\u6807\u8BB0\uFF08\u5C3D\u7BA1 ZGC \u4E2D\u7684\u540D\u5B57\u4E0D\u53EB\u8FD9\u4E9B\uFF09\u7684\u77ED\u6682\u505C\u987F\uFF0C\u800C\u4E14\u8FD9\u4E9B\u505C\u987F\u9636\u6BB5\u6240\u505A\u7684\u4E8B\u60C5\u5728\u76EE\u6807\u4E0A\u4E5F\u662F\u76F8\u7C7B\u4F3C\u7684\u3002\u4E0E G1\u3001Shenandoah \u4E0D\u540C\u7684\u662F\uFF0CZGC \u7684\u6807\u8BB0\u662F\u5728\u6307\u9488\u4E0A\u800C\u4E0D\u662F\u5728\u5BF9\u8C61\u4E0A\u8FDB\u884C\u7684\uFF0C\u6807\u8BB0\u9636\u6BB5\u4F1A\u66F4\u65B0\u67D3\u8272\u6307\u9488\u4E2D\u7684 Marked 0\u3001Marked 1 \u6807\u5FD7\u4F4D\u3002</p><p>\u5E76\u53D1\u9884\u5907\u91CD\u5206\u914D\uFF08Concurrent Prepare for Relocate\uFF09\uFF1A\u8FD9\u4E2A\u9636\u6BB5\u9700\u8981\u6839\u636E\u7279\u5B9A\u7684\u67E5\u8BE2\u6761\u4EF6\u7EDF\u8BA1\u5F97\u51FA\u672C\u6B21\u6536\u96C6\u8FC7\u7A0B\u8981\u6E05\u7406\u54EA\u4E9B Region\uFF0C\u5C06\u8FD9\u4E9B Region \u7EC4\u6210\u91CD\u5206\u914D\u96C6\uFF08Relocation Set\uFF09\u3002\u91CD\u5206\u914D\u96C6\u4E0E G1 \u6536\u96C6\u5668\u7684\u56DE\u6536\u96C6\uFF08Collection Set\uFF09\u8FD8\u662F\u6709\u533A\u522B\u7684\uFF0CZGC \u5212\u5206 Region \u7684\u76EE\u7684\u5E76\u975E\u4E3A\u4E86\u50CF G1 \u90A3\u6837\u505A\u6536\u76CA\u4F18\u5148\u7684\u589E\u91CF\u56DE\u6536\u3002\u76F8\u53CD\uFF0CZGC \u6BCF\u6B21\u56DE\u6536\u90FD\u4F1A\u626B\u63CF\u6240\u6709\u7684 Region\uFF0C\u7528\u8303\u56F4\u66F4\u5927\u7684\u626B\u63CF\u6210\u672C\u6362\u53D6\u7701\u53BB G1 \u4E2D\u8BB0\u5FC6\u96C6\u7684\u7EF4\u62A4\u6210\u672C\u3002\u56E0\u6B64\uFF0CZGC \u7684\u91CD\u5206\u914D\u96C6\u53EA\u662F\u51B3\u5B9A\u4E86\u91CC\u9762\u7684\u5B58\u6D3B\u5BF9\u8C61\u4F1A\u88AB\u91CD\u65B0\u590D\u5236\u5230\u5176\u4ED6\u7684 Region \u4E2D\uFF0C\u91CC\u9762\u7684 Region \u4F1A\u88AB\u91CA\u653E\uFF0C\u800C\u5E76\u4E0D\u80FD\u8BF4\u56DE\u6536\u884C\u4E3A\u5C31\u53EA\u662F\u9488\u5BF9\u8FD9\u4E2A\u96C6\u5408\u91CC\u9762\u7684 Region \u8FDB\u884C\uFF0C\u56E0\u4E3A\u6807\u8BB0\u8FC7\u7A0B\u662F\u9488\u5BF9\u5168\u5806\u7684\u3002\u6B64\u5916\uFF0C\u5728 JDK 12 \u7684 ZGC \u4E2D\u5F00\u59CB\u652F\u6301\u7684\u7C7B\u5378\u8F7D\u4EE5\u53CA\u5F31\u5F15\u7528\u7684\u5904\u7406\uFF0C\u4E5F\u662F\u5728\u8FD9\u4E2A\u9636\u6BB5\u4E2D\u5B8C\u6210\u7684\u3002</p><p>\u5E76\u53D1\u91CD\u5206\u914D\uFF08Concurrent Relocate\uFF09\uFF1A\u91CD\u5206\u914D\u662F ZGC \u6267\u884C\u8FC7\u7A0B\u4E2D\u7684\u6838\u5FC3\u9636\u6BB5\uFF0C\u8FD9\u4E2A\u8FC7\u7A0B\u8981\u628A\u91CD\u5206\u914D\u96C6\u4E2D\u7684\u5B58\u6D3B\u5BF9\u8C61\u590D\u5236\u5230\u65B0\u7684 Region \u4E0A\uFF0C\u5E76\u4E3A\u91CD\u5206\u914D\u96C6\u4E2D\u7684\u6BCF\u4E2A Region \u7EF4\u62A4\u4E00\u4E2A\u8F6C\u53D1\u8868\uFF08Forward Table\uFF09\uFF0C\u8BB0\u5F55\u4ECE\u65E7\u5BF9\u8C61\u5230\u65B0\u5BF9\u8C61\u7684\u8F6C\u5411\u5173\u7CFB\u3002\u5F97\u76CA\u4E8E\u67D3\u8272\u6307\u9488\u7684\u652F\u6301\uFF0CZGC \u6536\u96C6\u5668\u80FD\u4EC5\u4ECE\u5F15\u7528\u4E0A\u5C31\u660E\u786E\u5F97\u77E5\u4E00\u4E2A\u5BF9\u8C61\u662F\u5426\u5904\u4E8E\u91CD\u5206\u914D\u96C6\u4E4B\u4E2D\uFF0C\u5982\u679C\u7528\u6237\u7EBF\u7A0B\u6B64\u65F6\u5E76\u53D1\u8BBF\u95EE\u4E86\u4F4D\u4E8E\u91CD\u5206\u914D\u96C6\u4E2D\u7684\u5BF9\u8C61\uFF0C\u8FD9\u6B21\u8BBF\u95EE\u5C06\u4F1A\u88AB\u9884\u7F6E\u7684\u5185\u5B58\u5C4F\u969C\u6240\u622A\u83B7\uFF0C\u7136\u540E\u7ACB\u5373\u6839\u636E Region \u4E0A\u7684\u8F6C\u53D1\u8868\u8BB0\u5F55\u5C06\u8BBF\u95EE\u8F6C\u53D1\u5230\u65B0\u590D\u5236\u7684\u5BF9\u8C61\u4E0A\uFF0C\u5E76\u540C\u65F6\u4FEE\u6B63\u66F4\u65B0\u8BE5\u5F15\u7528\u7684\u503C\uFF0C\u4F7F\u5176\u76F4\u63A5\u6307\u5411\u65B0\u5BF9\u8C61\uFF0CZGC \u5C06\u8FD9\u79CD\u884C\u4E3A\u79F0\u4E3A\u6307\u9488\u7684 \u201C\u81EA\u6108\u201D\uFF08Self-Healing\uFF09\u80FD\u529B\u3002\u8FD9\u6837\u505A\u7684\u597D\u5904\u662F\u53EA\u6709\u7B2C\u4E00\u6B21\u8BBF\u95EE\u65E7\u5BF9\u8C61\u4F1A\u9677\u5165\u8F6C\u53D1\uFF0C\u4E5F\u5C31\u662F\u53EA\u6162\u4E00\u6B21\uFF0C\u5BF9\u6BD4 Shenandoah \u7684 Brooks \u8F6C\u53D1\u6307\u9488\uFF0C\u90A3\u662F\u6BCF\u6B21\u5BF9\u8C61\u8BBF\u95EE\u90FD\u5FC5\u987B\u4ED8\u51FA\u7684\u56FA\u5B9A\u5F00\u9500\uFF0C\u7B80\u5355\u5730\u8BF4\u5C31\u662F\u6BCF\u6B21\u90FD\u6162\uFF0C\u56E0\u6B64 ZGC \u5BF9\u7528\u6237\u7A0B\u5E8F\u7684\u8FD0\u884C\u65F6\u8D1F\u8F7D\u8981\u6BD4 Shenandoah \u6765\u5F97\u66F4\u4F4E\u4E00\u4E9B\u3002\u8FD8\u6709\u53E6\u5916\u4E00\u4E2A\u76F4\u63A5\u7684\u597D\u5904\u662F\u7531\u4E8E\u67D3\u8272\u6307\u9488\u7684\u5B58\u5728\uFF0C\u4E00\u65E6\u91CD\u5206\u914D\u96C6\u4E2D\u67D0\u4E2A Region \u7684\u5B58\u6D3B\u5BF9\u8C61\u90FD\u590D\u5236\u5B8C\u6BD5\u540E\uFF0C\u8FD9\u4E2A Region \u5C31\u53EF\u4EE5\u7ACB\u5373\u91CA\u653E\u7528\u4E8E\u65B0\u5BF9\u8C61\u7684\u5206\u914D\uFF08\u4F46\u662F\u8F6C\u53D1\u8868\u8FD8\u5F97\u7559\u7740\u4E0D\u80FD\u91CA\u653E\u6389\uFF09\uFF0C\u54EA\u6015\u5806\u4E2D\u8FD8\u6709\u5F88\u591A\u6307\u5411\u8FD9\u4E2A\u5BF9\u8C61\u7684\u672A\u66F4\u65B0\u6307\u9488\u4E5F\u6CA1\u6709\u5173\u7CFB\uFF0C\u8FD9\u4E9B\u65E7\u6307\u9488\u4E00\u65E6\u88AB\u4F7F\u7528\uFF0C\u5B83\u4EEC\u90FD\u662F\u53EF\u4EE5\u81EA\u6108\u7684\u3002</p><p>\u5E76\u53D1\u91CD\u6620\u5C04\uFF08Concurrent Remap\uFF09\uFF1A\u91CD\u6620\u5C04\u6240\u505A\u7684\u5C31\u662F\u4FEE\u6B63\u6574\u4E2A\u5806\u4E2D\u6307\u5411\u91CD\u5206\u914D\u96C6\u4E2D\u65E7\u5BF9\u8C61\u7684\u6240\u6709\u5F15\u7528\uFF0C\u8FD9\u4E00\u70B9\u4ECE\u76EE\u6807\u89D2\u5EA6\u770B\u662F\u4E0E Shenandoah \u5E76\u53D1\u5F15\u7528\u66F4\u65B0\u9636\u6BB5\u4E00\u6837\u7684\uFF0C\u4F46\u662F ZGC \u7684\u5E76\u53D1\u91CD\u6620\u5C04\u5E76\u4E0D\u662F\u4E00\u4E2A\u5FC5\u987B\u8981 \u201C\u8FEB\u5207\u201D \u53BB\u5B8C\u6210\u7684\u4EFB\u52A1\uFF0C\u56E0\u4E3A\u524D\u9762\u8BF4\u8FC7\uFF0C\u5373\u4F7F\u662F\u65E7\u5F15\u7528\uFF0C\u5B83\u4E5F\u662F\u53EF\u4EE5\u81EA\u6108\u7684\uFF0C\u6700\u591A\u53EA\u662F\u7B2C\u4E00\u6B21\u4F7F\u7528\u65F6\u591A\u4E00\u6B21\u8F6C\u53D1\u548C\u4FEE\u6B63\u64CD\u4F5C\u3002\u91CD\u6620\u5C04\u6E05\u7406\u8FD9\u4E9B\u65E7\u5F15\u7528\u7684\u4E3B\u8981\u76EE\u7684\u662F\u4E3A\u4E86\u4E0D\u53D8\u6162\uFF08\u8FD8\u6709\u6E05\u7406\u7ED3\u675F\u540E\u53EF\u4EE5\u91CA\u653E\u8F6C\u53D1\u8868\u8FD9\u6837\u7684\u9644\u5E26\u6536\u76CA\uFF09\uFF0C\u6240\u4EE5\u8BF4\u8FD9\u5E76\u4E0D\u662F\u5F88 \u201C\u8FEB\u5207\u201D\u3002\u56E0\u6B64\uFF0CZGC \u5F88\u5DE7\u5999\u5730\u628A\u5E76\u53D1\u91CD\u6620\u5C04\u9636\u6BB5\u8981\u505A\u7684\u5DE5\u4F5C\uFF0C\u5408\u5E76\u5230\u4E86\u4E0B\u4E00\u6B21\u5783\u573E\u6536\u96C6\u5FAA\u73AF\u4E2D\u7684\u5E76\u53D1\u6807\u8BB0\u9636\u6BB5\u91CC\u53BB\u5B8C\u6210\uFF0C\u53CD\u6B63\u5B83\u4EEC\u90FD\u662F\u8981\u904D\u5386\u6240\u6709\u5BF9\u8C61\u7684\uFF0C\u8FD9\u6837\u5408\u5E76\u5C31\u8282\u7701\u4E86\u4E00\u6B21\u904D\u5386\u5BF9\u8C61\u56FE<sup class="footnote-ref"><a href="#footnote51">[51]</a><a class="footnote-anchor" id="footnote-ref51"></a></sup>\u7684\u5F00\u9500\u3002\u4E00\u65E6\u6240\u6709\u6307\u9488\u90FD\u88AB\u4FEE\u6B63\u4E4B\u540E\uFF0C\u539F\u6765\u8BB0\u5F55\u65B0\u65E7\u5BF9\u8C61\u5173\u7CFB\u7684\u8F6C\u53D1\u8868\u5C31\u53EF\u4EE5\u91CA\u653E\u6389\u4E86\u3002</p><p>ZGC \u7684\u8BBE\u8BA1\u7406\u5FF5\u4E0E Azul System \u516C\u53F8\u7684 PGC \u548C C4 \u6536\u96C6\u5668\u4E00\u8109\u76F8\u627F<sup class="footnote-ref"><a href="#footnote52">[52]</a><a class="footnote-anchor" id="footnote-ref52"></a></sup>\uFF0C\u662F\u8FC4\u4ECA\u5783\u573E\u6536\u96C6\u5668\u7814\u7A76\u7684\u6700\u524D\u6CBF\u6210\u679C\uFF0C\u5B83\u4E0E Shenandoah \u4E00\u6837\u505A\u5230\u4E86\u51E0\u4E4E\u6574\u4E2A\u6536\u96C6\u8FC7\u7A0B\u90FD\u5168\u7A0B\u53EF\u5E76\u53D1\uFF0C\u77ED\u6682\u505C\u987F\u4E5F\u53EA\u4E0E GC Roots \u5927\u5C0F\u76F8\u5173\u800C\u4E0E\u5806\u5185\u5B58\u5927\u5C0F\u65E0\u5173\uFF0C\u56E0\u800C\u540C\u6837\u5B9E\u73B0\u4E86\u4EFB\u4F55\u5806\u4E0A\u505C\u987F\u90FD\u5C0F\u4E8E\u5341\u6BEB\u79D2\u7684\u76EE\u6807\u3002</p><p>\u76F8\u6BD4 G1\u3001Shenandoah \u7B49\u5148\u8FDB\u7684\u5783\u573E\u6536\u96C6\u5668\uFF0CZGC \u5728\u5B9E\u73B0\u7EC6\u8282\u4E0A\u505A\u4E86\u4E00\u4E9B\u4E0D\u540C\u7684\u6743\u8861\u9009\u62E9\uFF0C\u8B6C\u5982 G1 \u9700\u8981\u901A\u8FC7\u5199\u5C4F\u969C\u6765\u7EF4\u62A4\u8BB0\u5FC6\u96C6\uFF0C\u624D\u80FD\u5904\u7406\u8DE8\u4EE3\u6307\u9488\uFF0C\u5F97\u4EE5\u5B9E\u73B0 Region \u7684\u589E\u91CF\u56DE\u6536\u3002\u8BB0\u5FC6\u96C6\u8981\u5360\u7528\u5927\u91CF\u7684\u5185\u5B58\u7A7A\u95F4\uFF0C\u5199\u5C4F\u969C\u4E5F\u5BF9\u6B63\u5E38\u7A0B\u5E8F\u8FD0\u884C\u9020\u6210\u989D\u5916\u8D1F\u62C5\uFF0C\u8FD9\u4E9B\u90FD\u662F\u6743\u8861\u9009\u62E9\u7684\u4EE3\u4EF7\u3002ZGC \u5C31\u5B8C\u5168\u6CA1\u6709\u4F7F\u7528\u8BB0\u5FC6\u96C6\uFF0C\u5B83\u751A\u81F3\u8FDE\u5206\u4EE3\u90FD\u6CA1\u6709\uFF0C\u8FDE\u50CF CMS \u4E2D\u90A3\u6837\u53EA\u8BB0\u5F55\u65B0\u751F\u4EE3\u548C\u8001\u5E74\u4EE3\u95F4\u5F15\u7528\u7684\u5361\u8868\u4E5F\u4E0D\u9700\u8981\uFF0C\u56E0\u800C\u5B8C\u5168\u6CA1\u6709\u7528\u5230\u5199\u5C4F\u969C\uFF0C\u6240\u4EE5\u7ED9\u7528\u6237\u7EBF\u7A0B\u5E26\u6765\u7684\u8FD0\u884C\u8D1F\u62C5\u4E5F\u8981\u5C0F\u5F97\u591A\u3002\u53EF\u662F\uFF0C\u5FC5\u5B9A\u8981\u6709\u4F18\u6709\u52A3\u624D\u4F1A\u79F0\u4F5C\u6743\u8861\uFF0CZGC \u7684\u8FD9\u79CD\u9009\u62E9<sup class="footnote-ref"><a href="#footnote53">[53]</a><a class="footnote-anchor" id="footnote-ref53"></a></sup>\u4E5F\u9650\u5236\u4E86\u5B83\u80FD\u627F\u53D7\u7684\u5BF9\u8C61\u5206\u914D\u901F\u7387\u4E0D\u4F1A\u592A\u9AD8\uFF0C\u53EF\u4EE5\u60F3\u8C61\u4EE5\u4E0B\u573A\u666F\u6765\u7406\u89E3 ZGC \u7684\u8FD9\u4E2A\u52A3\u52BF\uFF1AZGC \u51C6\u5907\u8981\u5BF9\u4E00\u4E2A\u5F88\u5927\u7684\u5806\u505A\u4E00\u6B21\u5B8C\u6574\u7684\u5E76\u53D1\u6536\u96C6\uFF0C\u5047\u8BBE\u5176\u5168\u8FC7\u7A0B\u8981\u6301\u7EED\u5341\u5206\u949F\u4EE5\u4E0A\uFF08\u8BF7\u8BFB\u8005\u5207\u52FF\u6DF7\u6DC6\u5E76\u53D1\u65F6\u95F4\u4E0E\u505C\u987F\u65F6\u95F4\uFF0CZGC \u7ACB\u7684 Flag \u662F\u505C\u987F\u65F6\u95F4\u4E0D\u8D85\u8FC7\u5341\u6BEB\u79D2\uFF09\uFF0C\u5728\u8FD9\u6BB5\u65F6\u95F4\u91CC\u9762\uFF0C\u7531\u4E8E\u5E94\u7528\u7684\u5BF9\u8C61\u5206\u914D\u901F\u7387\u5F88\u9AD8\uFF0C\u5C06\u521B\u9020\u5927\u91CF\u7684\u65B0\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u65B0\u5BF9\u8C61\u5F88\u96BE\u8FDB\u5165\u5F53\u6B21\u6536\u96C6\u7684\u6807\u8BB0\u8303\u56F4\uFF0C\u901A\u5E38\u5C31\u53EA\u80FD\u5168\u90E8\u5F53\u4F5C\u5B58\u6D3B\u5BF9\u8C61\u6765\u770B\u5F85\u2014\u2014\u5C3D\u7BA1\u5176\u4E2D\u7EDD\u5927\u90E8\u5206\u5BF9\u8C61\u90FD\u662F\u671D\u751F\u5915\u706D\u7684\uFF0C\u8FD9\u5C31\u4EA7\u751F\u4E86\u5927\u91CF\u7684\u6D6E\u52A8\u5783\u573E\u3002\u5982\u679C\u8FD9\u79CD\u9AD8\u901F\u5206\u914D\u6301\u7EED\u7EF4\u6301\u7684\u8BDD\uFF0C\u6BCF\u4E00\u6B21\u5B8C\u6574\u7684\u5E76\u53D1\u6536\u96C6\u5468\u671F\u90FD\u4F1A\u5F88\u957F\uFF0C\u56DE\u6536\u5230\u7684\u5185\u5B58\u7A7A\u95F4\u6301\u7EED\u5C0F\u4E8E\u671F\u95F4\u5E76\u53D1\u4EA7\u751F\u7684\u6D6E\u52A8\u5783\u573E\u6240\u5360\u7684\u7A7A\u95F4\uFF0C\u5806\u4E2D\u5269\u4F59\u53EF\u817E\u632A\u7684\u7A7A\u95F4\u5C31\u8D8A\u6765\u8D8A\u5C0F\u4E86\u3002\u76EE\u524D\u552F\u4E00\u7684\u529E\u6CD5\u5C31\u662F\u5C3D\u53EF\u80FD\u5730\u589E\u52A0\u5806\u5BB9\u91CF\u5927\u5C0F\uFF0C\u83B7\u5F97\u66F4\u591A\u5598\u606F\u7684\u65F6\u95F4\u3002\u4F46\u662F\u82E5\u8981\u4ECE\u6839\u672C\u4E0A\u63D0\u5347 ZGC \u80FD\u591F\u5E94\u5BF9\u7684\u5BF9\u8C61\u5206\u914D\u901F\u7387\uFF0C\u8FD8\u662F\u9700\u8981\u5F15\u5165\u5206\u4EE3\u6536\u96C6\uFF0C\u8BA9\u65B0\u751F\u5BF9\u8C61\u90FD\u5728\u4E00\u4E2A\u4E13\u95E8\u7684\u533A\u57DF\u4E2D\u521B\u5EFA\uFF0C\u7136\u540E\u4E13\u95E8\u9488\u5BF9\u8FD9\u4E2A\u533A\u57DF\u8FDB\u884C\u66F4\u9891\u7E41\u3001\u66F4\u5FEB\u7684\u6536\u96C6\u3002Azul \u7684 C4 \u6536\u96C6\u5668\u5B9E\u73B0\u4E86\u5206\u4EE3\u6536\u96C6\u540E\uFF0C\u80FD\u591F\u5E94\u5BF9\u7684\u5BF9\u8C61\u5206\u914D\u901F\u7387\u5C31\u6BD4\u4E0D\u5206\u4EE3\u7684 PGC \u6536\u96C6\u5668\u63D0\u5347\u4E86\u5341\u500D\u4E4B\u591A\u3002</p><p>ZGC \u8FD8\u6709\u4E00\u4E2A\u5E38\u5728\u6280\u672F\u8D44\u6599\u4E0A\u88AB\u63D0\u53CA\u7684\u4F18\u70B9\u662F\u652F\u6301 &quot;NUMA-Aware&quot; \u7684\u5185\u5B58\u5206\u914D\u3002NUMA\uFF08Non-Uniform Memory Access\uFF0C\u975E\u7EDF\u4E00\u5185\u5B58\u8BBF\u95EE\u67B6\u6784\uFF09\u662F\u4E00\u79CD\u4E3A\u591A\u5904\u7406\u5668\u6216\u8005\u591A\u6838\u5904\u7406\u5668\u7684\u8BA1\u7B97\u673A\u6240\u8BBE\u8BA1\u7684\u5185\u5B58\u67B6\u6784\u3002\u7531\u4E8E\u6469\u5C14\u5B9A\u5F8B\u9010\u6E10\u5931\u6548\uFF0C\u73B0\u4EE3\u5904\u7406\u5668\u56E0\u9891\u7387\u53D1\u5C55\u53D7\u9650\u8F6C\u800C\u5411\u591A\u6838\u65B9\u5411\u53D1\u5C55\uFF0C\u4EE5\u524D\u539F\u672C\u5728\u5317\u6865\u82AF\u7247\u4E2D\u7684\u5185\u5B58\u63A7\u5236\u5668\u4E5F\u88AB\u96C6\u6210\u5230\u4E86\u5904\u7406\u5668\u5185\u6838\u4E2D\uFF0C\u8FD9\u6837\u6BCF\u4E2A\u5904\u7406\u5668\u6838\u5FC3\u6240\u5728\u7684\u88F8\u6676\uFF08DIE\uFF09<sup class="footnote-ref"><a href="#footnote54">[54]</a><a class="footnote-anchor" id="footnote-ref54"></a></sup>\u90FD\u6709\u5C5E\u4E8E\u81EA\u5DF1\u5185\u5B58\u7BA1\u7406\u5668\u6240\u7BA1\u7406\u7684\u5185\u5B58\uFF0C\u5982\u679C\u8981\u8BBF\u95EE\u88AB\u5176\u4ED6\u5904\u7406\u5668\u6838\u5FC3\u7BA1\u7406\u7684\u5185\u5B58\uFF0C\u5C31\u5FC5\u987B\u901A\u8FC7 Inter-Connect \u901A\u9053\u6765\u5B8C\u6210\uFF0C\u8FD9\u8981\u6BD4\u8BBF\u95EE\u5904\u7406\u5668\u7684\u672C\u5730\u5185\u5B58\u6162\u5F97\u591A\u3002\u5728 NUMA \u67B6\u6784\u4E0B\uFF0CZGC \u6536\u96C6\u5668\u4F1A\u4F18\u5148\u5C1D\u8BD5\u5728\u8BF7\u6C42\u7EBF\u7A0B\u5F53\u524D\u6240\u5904\u7684\u5904\u7406\u5668\u7684\u672C\u5730\u5185\u5B58\u4E0A\u5206\u914D\u5BF9\u8C61\uFF0C\u4EE5\u4FDD\u8BC1\u9AD8\u6548\u5185\u5B58\u8BBF\u95EE\u3002\u5728 ZGC \u4E4B\u524D\u7684\u6536\u96C6\u5668\u5C31\u53EA\u6709\u9488\u5BF9\u541E\u5410\u91CF\u8BBE\u8BA1\u7684 Parallel Scavenge \u652F\u6301 NUMA \u5185\u5B58\u5206\u914D<sup class="footnote-ref"><a href="#footnote55">[55]</a><a class="footnote-anchor" id="footnote-ref55"></a></sup>\uFF0C\u5982\u4ECA ZGC \u4E5F\u6210\u4E3A\u53E6\u5916\u4E00\u4E2A\u9009\u62E9\u3002</p><p>\u5728\u6027\u80FD\u65B9\u9762\uFF0C\u5C3D\u7BA1\u76EE\u524D\u8FD8\u5904\u4E8E\u5B9E\u9A8C\u72B6\u6001\uFF0C\u8FD8\u6CA1\u6709\u5B8C\u6210\u6240\u6709\u7279\u6027\uFF0C\u7A33\u5B9A\u6027\u6253\u78E8\u548C\u6027\u80FD\u8C03\u4F18\u4E5F\u4ECD\u5728\u8FDB\u884C\uFF0C\u4F46\u5373\u4F7F\u662F\u8FD9\u79CD\u72B6\u6001\u4E0B\u7684 ZGC\uFF0C\u5176\u6027\u80FD\u8868\u73B0\u5DF2\u7ECF\u76F8\u5F53\u4EAE\u773C\uFF0C\u4ECE\u5B98\u65B9\u7ED9\u51FA\u7684\u6D4B\u8BD5\u7ED3\u679C<sup class="footnote-ref"><a href="#footnote56">[56]</a><a class="footnote-anchor" id="footnote-ref56"></a></sup>\u6765\u770B\uFF0C\u7528 \u201C\u4EE4\u4EBA\u9707\u60CA\u7684\u3001\u9769\u547D\u6027\u7684 ZGC\u201D \u6765\u5F62\u5BB9\u90FD\u4E0D\u4E3A\u8FC7\u3002</p><p>\u56FE3-23 \u548C\u56FE3-24 \u662F ZGC \u4E0E Parallel Scavenge\u3001G1 \u4E09\u6B3E\u6536\u96C6\u5668\u901A\u8FC7 SPECjbb 2015<sup class="footnote-ref"><a href="#footnote57">[57]</a><a class="footnote-anchor" id="footnote-ref57"></a></sup>\u7684\u6D4B\u8BD5\u7ED3\u679C\u3002\u5728 ZGC \u7684 \u201C\u5F31\u9879\u201D \u541E\u5410\u91CF\u65B9\u9762\uFF0C\u4EE5\u4F4E\u5EF6\u8FDF\u4E3A\u9996\u8981\u76EE\u6807\u7684 ZGC \u5DF2\u7ECF\u8FBE\u5230\u4E86\u4EE5\u9AD8\u541E\u5410\u91CF\u4E3A\u76EE\u6807 Parallel Scavenge \u7684 99%\uFF0C\u76F4\u63A5\u8D85\u8D8A\u4E86 G1\u3002\u5982\u679C\u5C06\u541E\u5410\u91CF\u6D4B\u8BD5\u8BBE\u5B9A\u4E3A\u9762\u5411 SLA\uFF08Service Level Agreements\uFF09\u5E94\u7528\u7684 &quot;Critical Throughput&quot; \u7684\u8BDD<sup class="footnote-ref"><a href="#footnote58">[58]</a><a class="footnote-anchor" id="footnote-ref58"></a></sup>\uFF0CZGC \u7684\u8868\u73B0\u751A\u81F3\u8FD8\u53CD\u8D85\u4E86 Parallel Scavenge \u6536\u96C6\u5668\u3002</p><p>\u800C\u5728 ZGC \u7684\u5F3A\u9879\u505C\u987F\u65F6\u95F4\u6D4B\u8BD5\u4E0A\uFF0C\u5B83\u5C31\u6BEB\u4E0D\u7559\u60C5\u5730\u4E0E Parallel Scavenge\u3001G1 \u62C9\u5F00\u4E86\u4E24\u4E2A\u6570\u91CF\u7EA7\u7684\u5DEE\u8DDD\u3002\u4E0D\u8BBA\u662F\u5E73\u5747\u505C\u987F\uFF0C\u8FD8\u662F 95% \u505C\u987F\u300199% \u505C\u987F\u300199.9% \u505C\u987F\uFF0C\u6291\u6216\u662F\u6700\u5927\u505C\u987F\u65F6\u95F4\uFF0CZGC \u5747\u80FD\u6BEB\u4E0D\u8D39\u52B2\u5730\u63A7\u5236\u5728\u5341\u6BEB\u79D2\u4E4B\u5185\uFF0C\u4EE5\u81F3\u4E8E\u628A\u5B83\u548C\u53E6\u5916\u4E24\u6B3E\u505C\u987F\u6570\u767E\u8FD1\u5343\u6BEB\u79D2\u7684\u6536\u96C6\u5668\u653E\u5230\u4E00\u8D77\u5BF9\u6BD4\uFF0C\u5C31\u51E0\u4E4E\u663E\u793A\u4E0D\u4E86 ZGC \u7684\u67F1\u72B6\u6761\uFF08\u56FE3-24a\uFF09\uFF0C\u5FC5\u987B\u628A\u7ED3\u679C\u7684\u7EB5\u5750\u6807\u4ECE\u7EBF\u6027\u5C3A\u5EA6\u8C03\u6574\u6210\u5BF9\u6570\u5C3A\u5EA6\uFF08\u56FE3-24b\uFF0C\u7EB5\u5750\u6807\u8F74\u7684\u5C3A\u5EA6\u662F\u5BF9\u6570\u589E\u957F\u7684\uFF09\u624D\u80FD\u89C2\u5BDF\u5230 ZGC \u7684\u6D4B\u8BD5\u7ED3\u679C\u3002</p><p><img src="'+E+'" alt="\u56FE3-24" loading="lazy"></p><p>\u56FE3-23 ZGC \u7684\u541E\u5410\u91CF\u6D4B\u8BD5</p><p><img src="'+D+`" alt="\u56FE3-25" loading="lazy"></p><p>\u56FE3-24 ZGC \u7684\u505C\u987F\u65F6\u95F4\u6D4B\u8BD5</p><p>ZGC \u539F\u672C\u662F Oracle \u4F5C\u4E3A\u4E00\u9879\u5546\u4E1A\u7279\u6027\uFF08\u5982\u540C JFR\u3001JMC \u8FD9\u4E9B\u529F\u80FD\uFF09\u6765\u8BBE\u8BA1\u548C\u5B9E\u73B0\u7684\uFF0C\u53EA\u4E0D\u8FC7\u5728\u5B83\u6A2A\u7A7A\u51FA\u4E16\u7684 JDK 11 \u65F6\u671F\uFF0C\u6B63\u597D\u9002\u9022 Oracle \u8C03\u6574\u8BB8\u53EF\u8BC1\u6388\u6743\uFF0C\u628A\u6240\u6709\u5546\u4E1A\u7279\u6027\u90FD\u5F00\u6E90\u7ED9\u4E86 OpenJDK\uFF08\u8BE6\u60C5\u89C1\u7B2C 1 \u7AE0 Java \u53D1\u5C55\u53F2\uFF09\uFF0C\u6240\u4EE5\u7528\u6237\u5BF9\u5176\u5546\u4E1A\u6027\u5E76\u6CA1\u6709\u660E\u663E\u7684\u611F\u77E5\u3002ZGC \u6709\u7740\u4EE4\u6240\u6709\u5F00\u53D1\u4EBA\u5458\u8D8B\u4E4B\u82E5\u9E5C\u7684\u4F18\u79C0\u6027\u80FD\uFF0C\u8BA9\u4EE5\u524D\u5927\u591A\u6570\u4EBA\u53EA\u662F\u542C\u8BF4\uFF0C\u4F46\u4ECE\u672A\u7528\u8FC7\u7684 \u201CAzul \u5F0F\u7684\u5783\u573E\u6536\u96C6\u5668\u201D \u4E00\u4E0B\u5B50\u98DE\u5165\u5BFB\u5E38\u767E\u59D3\u5BB6\uFF0C\u7B14\u8005\u76F8\u4FE1\u5B83\u5B8C\u5168\u6210\u719F\u4E4B\u540E\uFF0C\u5C06\u4F1A\u6210\u4E3A\u670D\u52A1\u7AEF\u3001\u5927\u5185\u5B58\u3001\u4F4E\u5EF6\u8FDF\u5E94\u7528\u7684\u9996\u9009\u6536\u96C6\u5668\u7684\u6709\u529B\u7ADE\u4E89\u8005\u3002</p><h2 id="_3-7-\u9009\u62E9\u5408\u9002\u7684\u5783\u573E\u6536\u96C6\u5668" tabindex="-1"><a class="header-anchor" href="#_3-7-\u9009\u62E9\u5408\u9002\u7684\u5783\u573E\u6536\u96C6\u5668" aria-hidden="true">#</a> 3.7 \u9009\u62E9\u5408\u9002\u7684\u5783\u573E\u6536\u96C6\u5668</h2><p>HotSpot \u865A\u62DF\u673A\u63D0\u4F9B\u4E86\u79CD\u7C7B\u7E41\u591A\u7684\u5783\u573E\u6536\u96C6\u5668\uFF0C\u9009\u62E9\u592A\u591A\u53CD\u800C\u4EE4\u4EBA\u8E0C\u8E87\u96BE\u51B3\uFF0C\u82E5\u53EA\u6311\u6700\u5148\u8FDB\u7684\u663E\u7136\u4E0D\u53EF\u80FD\u6EE1\u8DB3\u5168\u90E8\u5E94\u7528\u573A\u666F\uFF0C\u4F46\u53EA\u7528\u4E00\u53E5 \u201C\u5FC5\u987B\u56E0\u5730\u5236\u5B9C\uFF0C\u6309\u9700\u9009\u7528\u201D \u53C8\u672A\u514D\u6709\u6577\u884D\u7684\u5ACC\u7591\uFF0C\u672C\u8282\u6211\u4EEC\u5C31\u6765\u63A2\u8BA8\u4E00\u4E0B\u5982\u4F55\u9009\u62E9\u5408\u9002\u7684\u5783\u573E\u6536\u96C6\u5668\u3002</p><h3 id="_3-7-1-epsilon-\u6536\u96C6\u5668" tabindex="-1"><a class="header-anchor" href="#_3-7-1-epsilon-\u6536\u96C6\u5668" aria-hidden="true">#</a> 3.7.1 Epsilon \u6536\u96C6\u5668</h3><p>\u5728 G1\u3001Shenandoah \u6216\u8005 ZGC \u8FD9\u4E9B\u8D8A\u6765\u8D8A\u590D\u6742\u3001\u8D8A\u6765\u8D8A\u5148\u8FDB\u7684\u5783\u573E\u6536\u96C6\u5668\u76F8\u7EE7\u51FA\u73B0\u7684\u540C\u65F6\uFF0C\u4E5F\u6709\u4E00\u4E2A \u201C\u53CD\u5176\u9053\u800C\u884C\u201D \u7684\u65B0\u5783\u573E\u6536\u96C6\u5668\u51FA\u73B0\u5728 JDK 11 \u7684\u7279\u5F81\u6E05\u5355\u4E2D\u2014\u2014Epsilon\uFF0C\u8FD9\u662F\u4E00\u6B3E\u4EE5\u4E0D\u80FD\u591F\u8FDB\u884C\u5783\u573E\u6536\u96C6\u4E3A \u201C\u5356\u70B9\u201D \u7684\u5783\u573E\u6536\u96C6\u5668\uFF0C\u8FD9\u79CD\u8BDD\u542C\u8D77\u6765\u7B2C\u4E00\u611F\u89C9\u5C31\u5341\u5206\u8FDD\u53CD\u903B\u8F91\uFF0C\u8FD9\u79CD \u201C\u4E0D\u5E72\u6D3B\u201D \u7684\u6536\u96C6\u5668\u8981\u5B83\u4F55\u7528\uFF1F</p><p>Epsilon \u6536\u96C6\u5668\u7531 RedHat \u516C\u53F8\u5728 JEP 318 \u4E2D\u63D0\u51FA\uFF0C\u5728\u6B64\u63D0\u6848\u91CC Epsilon \u88AB\u5F62\u5BB9\u6210\u4E00\u4E2A\u65E0\u64CD\u4F5C\u7684\u6536\u96C6\u5668\uFF08A No-Op Garbage Collector\uFF09\uFF0C\u800C\u4E8B\u5B9E\u4E0A\u53EA\u8981 Java \u865A\u62DF\u673A\u80FD\u591F\u5DE5\u4F5C\uFF0C\u5783\u573E\u6536\u96C6\u5668\u4FBF\u4E0D\u53EF\u80FD\u662F\u771F\u6B63 \u201C\u65E0\u64CD\u4F5C\u201D \u7684\u3002\u539F\u56E0\u662F \u201C\u5783\u573E\u6536\u96C6\u5668\u201D \u8FD9\u4E2A\u540D\u5B57\u5E76\u4E0D\u80FD\u5F62\u5BB9\u5B83\u5168\u90E8\u7684\u804C\u8D23\uFF0C\u66F4\u8D34\u5207\u7684\u540D\u5B57\u5E94\u8BE5\u662F\u672C\u4E66\u4E3A\u8FD9\u4E00\u90E8\u5206\u6240\u53D6\u7684\u6807\u9898\u2014\u2014\u201C\u81EA\u52A8\u5185\u5B58\u7BA1\u7406\u5B50\u7CFB\u7EDF\u201D\u3002\u4E00\u4E2A\u5783\u573E\u6536\u96C6\u5668\u9664\u4E86\u5783\u573E\u6536\u96C6\u8FD9\u4E2A\u672C\u804C\u5DE5\u4F5C\u4E4B\u5916\uFF0C\u5B83\u8FD8\u8981\u8D1F\u8D23\u5806\u7684\u7BA1\u7406\u4E0E\u5E03\u5C40\u3001\u5BF9\u8C61\u7684\u5206\u914D\u3001\u4E0E\u89E3\u91CA\u5668\u7684\u534F\u4F5C\u3001\u4E0E\u7F16\u8BD1\u5668\u7684\u534F\u4F5C\u3001\u4E0E\u76D1\u63A7\u5B50\u7CFB\u7EDF\u534F\u4F5C\u7B49\u804C\u8D23\uFF0C\u5176\u4E2D\u81F3\u5C11\u5806\u7684\u7BA1\u7406\u548C\u5BF9\u8C61\u7684\u5206\u914D\u8FD9\u90E8\u5206\u529F\u80FD\u662F Java \u865A\u62DF\u673A\u80FD\u591F\u6B63\u5E38\u8FD0\u4F5C\u7684\u5FC5\u8981\u652F\u6301\uFF0C\u662F\u4E00\u4E2A\u6700\u5C0F\u5316\u529F\u80FD\u7684\u5783\u573E\u6536\u96C6\u5668\u4E5F\u5FC5\u987B\u5B9E\u73B0\u7684\u5185\u5BB9\u3002\u4ECE JDK 10 \u5F00\u59CB\uFF0C\u4E3A\u4E86\u9694\u79BB\u5783\u573E\u6536\u96C6\u5668\u4E0E Java \u865A\u62DF\u673A\u89E3\u91CA\u3001\u7F16\u8BD1\u3001\u76D1\u63A7\u7B49\u5B50\u7CFB\u7EDF\u7684\u5173\u7CFB\uFF0CRedHat \u63D0\u51FA\u4E86\u5783\u573E\u6536\u96C6\u5668\u7684\u7EDF\u4E00\u63A5\u53E3\uFF0C\u5373 JEP 304 \u63D0\u6848\uFF0CEpsilon \u662F\u8FD9\u4E2A\u63A5\u53E3\u7684\u6709\u6548\u6027\u9A8C\u8BC1\u548C\u53C2\u8003\u5B9E\u73B0\uFF0C\u540C\u65F6\u4E5F\u7528\u4E8E\u9700\u8981\u5265\u79BB\u5783\u573E\u6536\u96C6\u5668\u5F71\u54CD\u7684\u6027\u80FD\u6D4B\u8BD5\u548C\u538B\u529B\u6D4B\u8BD5\u3002</p><p>\u5728\u5B9E\u9645\u751F\u4EA7\u73AF\u5883\u4E2D\uFF0C\u4E0D\u80FD\u8FDB\u884C\u5783\u573E\u6536\u96C6\u7684 Epsilon \u4E5F\u4ECD\u6709\u7528\u6B66\u4E4B\u5730\u3002\u5F88\u957F\u4E00\u6BB5\u65F6\u95F4\u4EE5\u6765\uFF0CJava \u6280\u672F\u4F53\u7CFB\u7684\u53D1\u5C55\u91CD\u5FC3\u90FD\u5728\u9762\u5411\u957F\u65F6\u95F4\u3001\u5927\u89C4\u6A21\u7684\u4F01\u4E1A\u7EA7\u5E94\u7528\u548C\u670D\u52A1\u7AEF\u5E94\u7528\uFF0C\u5C3D\u7BA1\u4E5F\u6709\u79FB\u52A8\u5E73\u53F0\uFF08\u6307 Java ME \u800C\u4E0D\u662F Android\uFF09\u548C\u684C\u9762\u5E73\u53F0\u7684\u652F\u6301\uFF0C\u4F46\u4F7F\u7528\u70ED\u5EA6\u4E0A\u4E0E\u524D\u8005\u76F8\u6BD4\u8981\u900A\u8272\u4E0D\u5C11\u3002\u53EF\u662F\u8FD1\u5E74\u6765\u5927\u578B\u7CFB\u7EDF\u4ECE\u4F20\u7EDF\u5355\u4F53\u5E94\u7528\u5411\u5FAE\u670D\u52A1\u5316\u3001\u65E0\u670D\u52A1\u5316\u65B9\u5411\u53D1\u5C55\u7684\u8D8B\u52BF\u5DF2\u8D8A\u53D1\u660E\u663E\uFF0CJava \u5728\u8FD9\u65B9\u9762\u6BD4\u8D77 Golang \u7B49\u540E\u8D77\u4E4B\u79C0\u6765\u786E\u5B9E\u6709\u4E00\u4E9B\u5148\u5929\u4E0D\u8DB3\uFF0C\u4F7F\u7528\u7387\u6B63\u6E10\u6E10\u4E0B\u964D\u3002\u4F20\u7EDF Java \u6709\u7740\u5185\u5B58\u5360\u7528\u8F83\u5927\uFF0C\u5728\u5BB9\u5668\u4E2D\u542F\u52A8\u65F6\u95F4\u957F\uFF0C\u5373\u65F6\u7F16\u8BD1\u9700\u8981\u7F13\u6162\u4F18\u5316\u7B49\u7279\u70B9\uFF0C\u8FD9\u5BF9\u5927\u578B\u5E94\u7528\u6765\u8BF4\u5E76\u4E0D\u662F\u4EC0\u4E48\u592A\u5927\u7684\u95EE\u9898\uFF0C\u4F46\u5BF9\u77ED\u65F6\u95F4\u3001\u5C0F\u89C4\u6A21\u7684\u670D\u52A1\u5F62\u5F0F\u5C31\u6709\u8BF8\u591A\u4E0D\u9002\u3002\u4E3A\u4E86\u5E94\u5BF9\u65B0\u7684\u6280\u672F\u6F6E\u6D41\uFF0C\u6700\u8FD1\u51E0\u4E2A\u7248\u672C\u7684 JDK \u9010\u6E10\u52A0\u5165\u4E86\u63D0\u524D\u7F16\u8BD1\u3001\u9762\u5411\u5E94\u7528\u7684\u7C7B\u6570\u636E\u5171\u4EAB\u7B49\u652F\u6301\u3002Epsilon \u4E5F\u662F\u6709\u7740\u7C7B\u4F3C\u7684\u76EE\u6807\uFF0C\u5982\u679C\u8BFB\u8005\u7684\u5E94\u7528\u53EA\u8981\u8FD0\u884C\u6570\u5206\u949F\u751A\u81F3\u6570\u79D2\uFF0C\u53EA\u8981 Java \u865A\u62DF\u673A\u80FD\u6B63\u786E\u5206\u914D\u5185\u5B58\uFF0C\u5728\u5806\u8017\u5C3D\u4E4B\u524D\u5C31\u4F1A\u9000\u51FA\uFF0C\u90A3\u663E\u7136\u8FD0\u884C\u8D1F\u8F7D\u6781\u5C0F\u3001\u6CA1\u6709\u4EFB\u4F55\u56DE\u6536\u884C\u4E3A\u7684 Epsilon \u4FBF\u662F\u5F88\u6070\u5F53\u7684\u9009\u62E9\u3002</p><h3 id="_3-7-2-\u6536\u96C6\u5668\u7684\u6743\u8861" tabindex="-1"><a class="header-anchor" href="#_3-7-2-\u6536\u96C6\u5668\u7684\u6743\u8861" aria-hidden="true">#</a> 3.7.2 \u6536\u96C6\u5668\u7684\u6743\u8861</h3><p>\u5982\u679C\u7B97\u4E0A Epsilon\uFF0C\u672C\u4E66\u4E2D\u5DF2\u7ECF\u4ECB\u7ECD\u8FC7\u5341\u6B3E HotSpot \u865A\u62DF\u673A\u7684\u5783\u573E\u6536\u96C6\u5668\u4E86\uFF0C\u6B64\u5916\u8FD8\u6D89\u53CA Azul System \u516C\u53F8\u7684 PGC\u3001C4 \u7B49\u6536\u96C6\u5668\uFF0C\u518D\u52A0\u4E0A\u672C\u7AE0\u4E2D\u5E76\u6CA1\u6709\u51FA\u73B0\uFF0C\u4F46\u5176\u5B9E\u4E5F\u9887\u4E3A\u5E38\u7528\u7684 OpenJ9 \u4E2D\u7684\u5783\u573E\u6536\u96C6\u5668\uFF0C\u628A\u8FD9\u4E9B\u6536\u96C6\u5668\u7F57\u5217\u51FA\u6765\u5C31\u4EFF\u4F5B\u662F\u4E00\u5E45\u7433\u7405\u753B\u5377\u3001\u4E00\u90E8\u5783\u573E\u6536\u96C6\u7684\u6280\u672F\u6F14\u8FDB\u53F2\u3002\u73B0\u5728\u53EF\u80FD\u6709\u8BFB\u8005\u8981\u72AF\u9009\u62E9\u56F0\u96BE\u75C7\u4E86\uFF0C\u6211\u4EEC\u5E94\u8BE5\u5982\u4F55\u9009\u62E9\u4E00\u6B3E\u9002\u5408\u81EA\u5DF1\u5E94\u7528\u7684\u6536\u96C6\u5668\u5462\uFF1F\u8FD9\u4E2A\u95EE\u9898\u7684\u7B54\u6848\u4E3B\u8981\u53D7\u4EE5\u4E0B\u4E09\u4E2A\u56E0\u7D20\u5F71\u54CD\uFF1A</p><ul><li><p>\u5E94\u7528\u7A0B\u5E8F\u7684\u4E3B\u8981\u5173\u6CE8\u70B9\u662F\u4EC0\u4E48\uFF1F\u5982\u679C\u662F\u6570\u636E\u5206\u6790\u3001\u79D1\u5B66\u8BA1\u7B97\u7C7B\u7684\u4EFB\u52A1\uFF0C\u76EE\u6807\u662F\u80FD\u5C3D\u5FEB\u7B97\u51FA\u7ED3\u679C\uFF0C\u90A3\u541E\u5410\u91CF\u5C31\u662F\u4E3B\u8981\u5173\u6CE8\u70B9\uFF1B\u5982\u679C\u662F SLA \u5E94\u7528\uFF0C\u90A3\u505C\u987F\u65F6\u95F4\u76F4\u63A5\u5F71\u54CD\u670D\u52A1\u8D28\u91CF\uFF0C\u4E25\u91CD\u7684\u751A\u81F3\u4F1A\u5BFC\u81F4\u4E8B\u52A1\u8D85\u65F6\uFF0C\u8FD9\u6837\u5EF6\u8FDF\u5C31\u662F\u4E3B\u8981\u5173\u6CE8\u70B9\uFF1B\u800C\u5982\u679C\u662F\u5BA2\u6237\u7AEF\u5E94\u7528\u6216\u8005\u5D4C\u5165\u5F0F\u5E94\u7528\uFF0C\u90A3\u5783\u573E\u6536\u96C6\u7684\u5185\u5B58\u5360\u7528\u5219\u662F\u4E0D\u53EF\u5FFD\u89C6\u7684\u3002</p></li><li><p>\u8FD0\u884C\u5E94\u7528\u7684\u57FA\u7840\u8BBE\u65BD\u5982\u4F55\uFF1F\u8B6C\u5982\u786C\u4EF6\u89C4\u683C\uFF0C\u8981\u6D89\u53CA\u7684\u7CFB\u7EDF\u67B6\u6784\u662F x86-32 / 64\u3001SPARC \u8FD8\u662F ARM / Aarch64\uFF1B\u5904\u7406\u5668\u7684\u6570\u91CF\u591A\u5C11\uFF0C\u5206\u914D\u5185\u5B58\u7684\u5927\u5C0F\uFF1B\u9009\u62E9\u7684\u64CD\u4F5C\u7CFB\u7EDF\u662F Linux\u3001Solaris \u8FD8\u662F Windows \u7B49\u3002</p></li><li><p>\u4F7F\u7528 JDK \u7684\u53D1\u884C\u5546\u662F\u4EC0\u4E48\uFF1F\u7248\u672C\u53F7\u662F\u591A\u5C11\uFF1F\u662F ZingJDK / Zulu\u3001OracleJDK\u3001OpenJDK\u3001OpenJ9 \u6291\u6216\u662F\u5176\u4ED6\u516C\u53F8\u7684\u53D1\u884C\u7248\uFF1F\u8BE5 JDK \u5BF9\u5E94\u4E86\u300AJava \u865A\u62DF\u673A\u89C4\u8303\u300B\u7684\u54EA\u4E2A\u7248\u672C\uFF1F</p></li></ul><p>\u4E00\u822C\u6765\u8BF4\uFF0C\u6536\u96C6\u5668\u7684\u9009\u62E9\u5C31\u4ECE\u4EE5\u4E0A\u8FD9\u51E0\u70B9\u51FA\u53D1\u6765\u8003\u8651\u3002\u4E3E\u4E2A\u4F8B\u5B50\uFF0C\u5047\u8BBE\u67D0\u4E2A\u76F4\u63A5\u9762\u5411\u7528\u6237\u63D0\u4F9B\u670D\u52A1\u7684 B/S \u7CFB\u7EDF\u51C6\u5907\u9009\u62E9\u5783\u573E\u6536\u96C6\u5668\uFF0C\u4E00\u822C\u6765\u8BF4\u5EF6\u8FDF\u65F6\u95F4\u662F\u8FD9\u7C7B\u5E94\u7528\u7684\u4E3B\u8981\u5173\u6CE8\u70B9\uFF0C\u90A3\u4E48\uFF1A</p><ul><li><p>\u5982\u679C\u4F60\u6709\u5145\u8DB3\u7684\u9884\u7B97\u4F46\u6CA1\u6709\u592A\u591A\u8C03\u4F18\u7ECF\u9A8C\uFF0C\u90A3\u4E48\u4E00\u5957\u5E26\u5546\u4E1A\u6280\u672F\u652F\u6301\u7684\u4E13\u6709\u786C\u4EF6\u6216\u8005\u8F6F\u4EF6\u89E3\u51B3\u65B9\u6848\u662F\u4E0D\u9519\u7684\u9009\u62E9\uFF0CAzul \u516C\u53F8\u4EE5\u524D\u4E3B\u63A8\u7684 Vega \u7CFB\u7EDF\u548C\u73B0\u5728\u4E3B\u63A8\u7684 Zing VM \u662F\u8FD9\u65B9\u9762\u7684\u4EE3\u8868\uFF0C\u8FD9\u6837\u4F60\u5C31\u53EF\u4EE5\u4F7F\u7528\u4F20\u8BF4\u4E2D\u7684 C4 \u6536\u96C6\u5668\u4E86\u3002</p></li><li><p>\u5982\u679C\u4F60\u867D\u7136\u6CA1\u6709\u8DB3\u591F\u9884\u7B97\u53BB\u4F7F\u7528\u5546\u4E1A\u89E3\u51B3\u65B9\u6848\uFF0C\u4F46\u80FD\u591F\u638C\u63A7\u8F6F\u786C\u4EF6\u578B\u53F7\uFF0C\u4F7F\u7528\u8F83\u65B0\u7684\u7248\u672C\uFF0C\u540C\u65F6\u53C8\u7279\u522B\u6CE8\u91CD\u5EF6\u8FDF\uFF0C\u90A3 ZGC \u5F88\u503C\u5F97\u5C1D\u8BD5\u3002</p></li><li><p>\u5982\u679C\u4F60\u5BF9\u8FD8\u5904\u4E8E\u5B9E\u9A8C\u72B6\u6001\u7684\u6536\u96C6\u5668\u7684\u7A33\u5B9A\u6027\u6709\u6240\u987E\u8651\uFF0C\u6216\u8005\u5E94\u7528\u5FC5\u987B\u8FD0\u884C\u5728 Windows \u64CD\u4F5C\u7CFB\u7EDF\u4E0B\uFF0C\u90A3 ZGC \u5C31\u65E0\u7F18\u4E86\uFF0C\u8BD5\u8BD5 Shenandoah \u5427\u3002</p></li><li><p>\u5982\u679C\u4F60\u63A5\u624B\u7684\u662F\u9057\u7559\u7CFB\u7EDF\uFF0C\u8F6F\u786C\u4EF6\u57FA\u7840\u8BBE\u65BD\u548C JDK \u7248\u672C\u90FD\u6BD4\u8F83\u843D\u540E\uFF0C\u90A3\u5C31\u6839\u636E\u5185\u5B58\u89C4\u6A21\u8861\u91CF\u4E00\u4E0B\uFF0C\u5BF9\u4E8E\u5927\u6982 4GB \u5230 6GB \u4EE5\u4E0B\u7684\u5806\u5185\u5B58\uFF0CCMS \u4E00\u822C\u80FD\u5904\u7406\u5F97\u6BD4\u8F83\u597D\uFF0C\u800C\u5BF9\u4E8E\u66F4\u5927\u7684\u5806\u5185\u5B58\uFF0C\u53EF\u91CD\u70B9\u8003\u5BDF\u4E00\u4E0B G1\u3002</p></li></ul><p>\u5F53\u7136\uFF0C\u4EE5\u4E0A\u90FD\u662F\u4EC5\u4ECE\u7406\u8BBA\u51FA\u53D1\u7684\u5206\u6790\uFF0C\u5B9E\u6218\u4E2D\u5207\u4E0D\u53EF\u7EB8\u4E0A\u8C08\u5175\uFF0C\u6839\u636E\u7CFB\u7EDF\u5B9E\u9645\u60C5\u51B5\u53BB\u6D4B\u8BD5\u624D\u662F\u9009\u62E9\u6536\u96C6\u5668\u7684\u6700\u7EC8\u4F9D\u636E\u3002</p><h3 id="_3-7-3-\u865A\u62DF\u673A\u53CA\u5783\u573E\u6536\u96C6\u5668\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#_3-7-3-\u865A\u62DF\u673A\u53CA\u5783\u573E\u6536\u96C6\u5668\u65E5\u5FD7" aria-hidden="true">#</a> 3.7.3 \u865A\u62DF\u673A\u53CA\u5783\u573E\u6536\u96C6\u5668\u65E5\u5FD7</h3><p>\u9605\u8BFB\u5206\u6790\u865A\u62DF\u673A\u548C\u5783\u573E\u6536\u96C6\u5668\u7684\u65E5\u5FD7\u662F\u5904\u7406 Java \u865A\u62DF\u673A\u5185\u5B58\u95EE\u9898\u5FC5\u5907\u7684\u57FA\u7840\u6280\u80FD\uFF0C\u5783\u573E\u6536\u96C6\u5668\u65E5\u5FD7\u662F\u4E00\u7CFB\u5217\u4EBA\u4E3A\u8BBE\u5B9A\u7684\u89C4\u5219\uFF0C\u591A\u5C11\u6709\u70B9\u968F\u5F00\u53D1\u8005\u7F16\u7801\u65F6\u7684\u5FC3\u60C5\u800C\u5B9A\uFF0C\u6CA1\u6709\u4EFB\u4F55\u7684 \u201C\u4E1A\u754C\u6807\u51C6\u201D \u53EF\u8A00\uFF0C\u6362\u53E5\u8BDD\u8BF4\uFF0C\u6BCF\u4E2A\u6536\u96C6\u5668\u7684\u65E5\u5FD7\u683C\u5F0F\u90FD\u53EF\u80FD\u4E0D\u4E00\u6837\u3002\u9664\u6B64\u4EE5\u5916\u8FD8\u6709\u4E00\u4E2A\u9EBB\u70E6\uFF0C\u5728 JDK 9 \u4EE5\u524D\uFF0CHotSpot \u5E76\u6CA1\u6709\u63D0\u4F9B\u7EDF\u4E00\u7684\u65E5\u5FD7\u5904\u7406\u6846\u67B6\uFF0C\u865A\u62DF\u673A\u5404\u4E2A\u529F\u80FD\u6A21\u5757\u7684\u65E5\u5FD7\u5F00\u5173\u5206\u5E03\u5728\u4E0D\u540C\u7684\u53C2\u6570\u4E0A\uFF0C\u65E5\u5FD7\u7EA7\u522B\u3001\u5FAA\u73AF\u65E5\u5FD7\u5927\u5C0F\u3001\u8F93\u51FA\u683C\u5F0F\u3001\u91CD\u5B9A\u5411\u7B49\u8BBE\u7F6E\u5728\u4E0D\u540C\u529F\u80FD\u4E0A\u90FD\u8981\u5355\u72EC\u89E3\u51B3\u3002\u76F4\u5230 JDK 9\uFF0C\u8FD9\u79CD\u6DF7\u4E71\u4E0D\u582A\u7684\u5C40\u9762\u624D\u7EC8\u4E8E\u6D88\u5931\uFF0CHotSpot \u6240\u6709\u529F\u80FD\u7684\u65E5\u5FD7\u90FD\u6536\u5F52\u5230\u4E86 &quot;-Xlog&quot; \u53C2\u6570\u4E0A\uFF0C\u8FD9\u4E2A\u53C2\u6570\u7684\u80FD\u529B\u4E5F\u76F8\u5E94\u88AB\u6781\u5927\u62D3\u5C55\u4E86\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>-Xlog[:[selector][:[output][:[decorators][:output-options]]]]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u547D\u4EE4\u884C\u4E2D\u6700\u5173\u952E\u7684\u53C2\u6570\u662F\u9009\u62E9\u5668\uFF08Selector\uFF09\uFF0C\u5B83\u7531\u6807\u7B7E\uFF08Tag\uFF09\u548C\u65E5\u5FD7\u7EA7\u522B\uFF08Level\uFF09\u5171\u540C\u7EC4\u6210\u3002\u6807\u7B7E\u53EF\u7406\u89E3\u4E3A\u865A\u62DF\u673A\u4E2D\u67D0\u4E2A\u529F\u80FD\u6A21\u5757\u7684\u540D\u5B57\uFF0C\u5B83\u544A\u8BC9\u65E5\u5FD7\u6846\u67B6\u7528\u6237\u5E0C\u671B\u5F97\u5230\u865A\u62DF\u673A\u54EA\u4E9B\u529F\u80FD\u7684\u65E5\u5FD7\u8F93\u51FA\u3002\u5783\u573E\u6536\u96C6\u5668\u7684\u6807\u7B7E\u540D\u79F0\u4E3A &quot;gc&quot;\uFF0C\u7531\u6B64\u53EF\u89C1\uFF0C\u5783\u573E\u6536\u96C6\u5668\u65E5\u5FD7\u53EA\u662F HotSpot \u4F17\u591A\u529F\u80FD\u65E5\u5FD7\u7684\u5176\u4E2D\u4E00\u9879\uFF0C\u5168\u90E8\u652F\u6301\u7684\u529F\u80FD\u6A21\u5757\u6807\u7B7E\u540D\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>add, age, alloc, annotation, aot, arguments, attach, barrier, biasedlocking, blocks, bot, breakpoint, bytecode, census, class, classhisto, cleanup, compaction, comparator, constraints, constantpool, coops, cpu, cset, data, defaultmethods, dump, ergo, event, exceptions, exit, fingerprint, freelist, gc, hashtables, heap, humongous, ihop, iklass, init, itables, jfr, jni, jvmti, liveness, load, loader, logging, mark, marking, metadata, metaspace, method, mmu, modules, monitorinflation, monitormismatch, nmethod, normalize, objecttagging, obsolete, oopmap, os, pagesize, parser, patch, path, phases, plab, preorder, promotion, protectiondomain, purge, redefine, ref, refine, region, remset, resolve, safepoint, scavenge, scrub, setting, stackmap, stacktrace, stackwalk, start, startuptime, state, stats, stringdedup, stringtable, subclass, survivor, sweep, system, task, thread, time, timer, tlab, unload, update, verification, verify, vmoperation, vtables, workgang
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u65E5\u5FD7\u7EA7\u522B\u4ECE\u4F4E\u5230\u9AD8\uFF0C\u5171\u6709 Trace\uFF0CDebug\uFF0CInfo\uFF0CWarning\uFF0CError\uFF0COff \u516D\u79CD\u7EA7\u522B\uFF0C\u65E5\u5FD7\u7EA7\u522B\u51B3\u5B9A\u4E86\u8F93\u51FA\u4FE1\u606F\u7684\u8BE6\u7EC6\u7A0B\u5EA6\uFF0C\u9ED8\u8BA4\u7EA7\u522B\u4E3A Info\uFF0CHotSpot \u7684\u65E5\u5FD7\u89C4\u5219\u4E0E Log4j\u3001SLF4j \u8FD9\u7C7B Java \u65E5\u5FD7\u6846\u67B6\u5927\u4F53\u4E0A\u662F\u4E00\u81F4\u7684\u3002\u53E6\u5916\uFF0C\u8FD8\u53EF\u4EE5\u4F7F\u7528\u4FEE\u9970\u5668\uFF08Decorator\uFF09\u6765\u8981\u6C42\u6BCF\u884C\u65E5\u5FD7\u8F93\u51FA\u90FD\u9644\u52A0\u4E0A\u989D\u5916\u7684\u5185\u5BB9\uFF0C\u652F\u6301\u9644\u52A0\u5728\u65E5\u5FD7\u884C\u4E0A\u7684\u4FE1\u606F\u5305\u62EC\uFF1A</p><ul><li><p>time\uFF1A\u5F53\u524D\u65E5\u671F\u548C\u65F6\u95F4\u3002</p></li><li><p>uptime\uFF1A\u865A\u62DF\u673A\u542F\u52A8\u5230\u73B0\u5728\u7ECF\u8FC7\u7684\u65F6\u95F4\uFF0C\u4EE5\u79D2\u4E3A\u5355\u4F4D\u3002</p></li><li><p>timemillis\uFF1A\u5F53\u524D\u65F6\u95F4\u7684\u6BEB\u79D2\u6570\uFF0C\u76F8\u5F53\u4E8E System.currentTimeMillis() \u7684\u8F93\u51FA\u3002</p></li><li><p>uptimemillis\uFF1A\u865A\u62DF\u673A\u542F\u52A8\u5230\u73B0\u5728\u7ECF\u8FC7\u7684\u6BEB\u79D2\u6570\u3002</p></li><li><p>timenanos\uFF1A\u5F53\u524D\u65F6\u95F4\u7684\u7EB3\u79D2\u6570\uFF0C\u76F8\u5F53\u4E8E System.nanoTime() \u7684\u8F93\u51FA\u3002</p></li><li><p>uptimenanos\uFF1A\u865A\u62DF\u673A\u542F\u52A8\u5230\u73B0\u5728\u7ECF\u8FC7\u7684\u7EB3\u79D2\u6570\u3002</p></li><li><p>pid\uFF1A\u8FDB\u7A0B ID\u3002</p></li><li><p>tid\uFF1A\u7EBF\u7A0B ID\u3002</p></li><li><p>level\uFF1A\u65E5\u5FD7\u7EA7\u522B\u3002</p></li><li><p>tags\uFF1A\u65E5\u5FD7\u8F93\u51FA\u7684\u6807\u7B7E\u96C6\u3002</p></li></ul><p>\u5982\u679C\u4E0D\u6307\u5B9A\uFF0C\u9ED8\u8BA4\u503C\u662F uptime\u3001level\u3001tags \u8FD9\u4E09\u4E2A\uFF0C\u6B64\u65F6\u65E5\u5FD7\u8F93\u51FA\u7C7B\u4F3C\u4E8E\u4EE5\u4E0B\u5F62\u5F0F\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[3.080s][info][gc,cpu] GC(5) User=0.03s Sys=0.00s Real=0.01s
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4E0B\u9762\u7B14\u8005\u4E3E\u51E0\u4E2A\u4F8B\u5B50\uFF0C\u5C55\u793A\u5728 JDK 9 \u7EDF\u4E00\u65E5\u5FD7\u6846\u67B6\u524D\u3001\u540E\u662F\u5982\u4F55\u83B7\u5F97\u5783\u573E\u6536\u96C6\u5668\u8FC7\u7A0B\u7684\u76F8\u5173\u4FE1\u606F\uFF0C\u4EE5\u4E0B\u5747\u4EE5 JDK 9 \u7684 G1 \u6536\u96C6\u5668\uFF08JDK 9 \u4E0B\u9ED8\u8BA4\u6536\u96C6\u5668\u5C31\u662F G1\uFF0C\u6240\u4EE5\u547D\u4EE4\u884C\u4E2D\u6CA1\u6709\u6307\u5B9A\u6536\u96C6\u5668\uFF09\u4E3A\u4F8B\u3002</p><ol><li><p>\u67E5\u770B GC \u57FA\u672C\u4FE1\u606F\uFF0C\u5728 JDK 9 \u4E4B\u524D\u4F7F\u7528 -XX:+PrintGC\uFF0CJDK 9 \u540E\u4F7F\u7528 -Xlog:gc\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>bash-3.2$ java -Xlog:gc GCTest
[0.222s][info][gc] Using G1
[2.825s][info][gc] GC(0) Pause Young (G1 Evacuation Pause) 26M-&gt;5M(256M) 355.623ms
[3.096s][info][gc] GC(1) Pause Young (G1 Evacuation Pause) 14M-&gt;7M(256M) 50.030ms
[3.385s][info][gc] GC(2) Pause Young (G1 Evacuation Pause) 17M-&gt;10M(256M) 40.576ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u67E5\u770B GC \u8BE6\u7EC6\u4FE1\u606F\uFF0C\u5728 JDK 9 \u4E4B\u524D\u4F7F\u7528 -XX:+PrintGCDetails\uFF0C\u5728 JDK 9 \u4E4B\u540E\u4F7F\u7528 -X-log:gc*\uFF0C\u7528\u901A\u914D\u7B26 * \u5C06 GC \u6807\u7B7E\u4E0B\u6240\u6709\u7EC6\u5206\u8FC7\u7A0B\u90FD\u6253\u5370\u51FA\u6765\uFF0C\u5982\u679C\u628A\u65E5\u5FD7\u7EA7\u522B\u8C03\u6574\u5230 Debug \u6216\u8005 Trace\uFF08\u57FA\u4E8E\u7248\u9762\u7BC7\u5E45\u8003\u8651\uFF0C\u4F8B\u5B50\u4E2D\u5E76\u6CA1\u6709\uFF09\uFF0C\u8FD8\u5C06\u83B7\u5F97\u66F4\u591A\u7EC6\u8282\u4FE1\u606F\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>bash-3.2$ java -Xlog:gc* GCTest
[0.233s][info][gc,heap] Heap region size: 1M
[0.383s][info][gc ] Using G1
[0.383s][info][gc,heap,coops] Heap address: 0xfffffffe50400000, size: 4064 MB, Compressed Oops mode: Non-zero based:
0xfffffffe50000000, Oop shift amount: 3
[3.064s][info][gc,start ] GC(0) Pause Young (G1 Evacuation Pause)
gc,task ] GC(0) Using 23 workers of 23 for evacuation
[3.420s][info][gc,phases ] GC(0) Pre Evacuate Collection Set: 0.2ms
[3.421s][info][gc,phases ] GC(0) Evacuate Collection Set: 348.0ms
gc,phases ] GC(0) Post Evacuate Collection Set: 6.2ms
[3.421s][info][gc,phases ] GC(0) Other: 2.8ms
gc,heap ] GC(0) Eden regions: 24-&gt;0(9)
[3.421s][info][gc,heap ] GC(0) Survivor regions: 0-&gt;3(3)
[3.421s][info][gc,heap ] GC(0) Old regions: 0-&gt;2
[3.421s][info][gc,heap ] GC(0) Humongous regions: 2-&gt;1
[3.421s][info][gc,metaspace ] GC(0) Metaspace: 4719K-&gt;4719K(1056768K)
[3.421s][info][gc ] GC(0) Pause Young (G1 Evacuation Pause) 26M-&gt;5M(256M) 357.743ms
[3.422s][info][gc,cpu ] GC(0) User=0.70s Sys=5.13s Real=0.36s
[3.648s][info][gc,start ] GC(1) Pause Young (G1 Evacuation Pause)
[3.648s][info][gc,task ] GC(1) Using 23 workers of 23 for evacuation
[3.699s][info][gc,phases ] GC(1) Pre Evacuate Collection Set: 0.3ms
gc,phases ] GC(1) Evacuate Collection Set: 45.6ms
gc,phases ] GC(1) Post Evacuate Collection Set: 3.4ms
gc,phases ] GC(1) Other: 1.7ms
gc,heap ] GC(1) Eden regions: 9-&gt;0(10)
[3.699s][info][gc,heap ] GC(1) Survivor regions: 3-&gt;2(2)
[3.699s][info][gc,heap ] GC(1) Old regions: 2-&gt;5
[3.700s][info][gc,heap ] GC(1) Humongous regions: 1-&gt;1
[3.700s][info][gc,metaspace ] GC(1) Metaspace: 4726K-&gt;4726K(1056768K)
[3.700s][info][gc ] GC(1) Pause Young (G1 Evacuation Pause) 14M-&gt;7M(256M) 51.872ms
[3.700s][info][gc,cpu ] GC(1) User=0.56s Sys=0.46s Real=0.05s
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u67E5\u770B GC \u524D\u540E\u7684\u5806\u3001\u65B9\u6CD5\u533A\u53EF\u7528\u5BB9\u91CF\u53D8\u5316\uFF0C\u5728 JDK 9 \u4E4B\u524D\u4F7F\u7528 -XX:+PrintHeapAtGC\uFF0CJDK 9 \u4E4B\u540E\u4F7F\u7528 -Xlog:gc+heap=debug\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>bash-3.2$ java -Xlog:gc+heap=debug GCTest
[0.113s][info][gc,heap] Heap region size: 1M
[0.113s][debug][gc,heap] Minimum heap 8388608 Initial heap 268435456 Maximum heap 4261412864
[2.529s][debug][gc,heap] GC(0) Heap before GC invocations=0 (full 0):
[2.529s][debug][gc,heap] GC(0) garbage-first heap total 262144K, used 26624K [0xfffffffe50400000, 0xfffffffe50500800,
0xffffffff4e400000)
[2.529s][debug][gc,heap] GC(0) region size 1024K, 24 young (24576K), 0 survivors (0K)
[2.530s][debug][gc,heap] GC(0) Metaspace used 4719K, capacity 4844K, committed 5120K, reserved 1056768K
[2.530s][debug][gc,heap] GC(0) class space used 413K, capacity 464K, committed 512K, reserved 1048576K
[2.892s][info ][gc,heap] GC(0) Eden regions: 24-&gt;0(9)
[2.892s][info ][gc,heap] GC(0) Survivor regions: 0-&gt;3(3)
[2.892s][info ][gc,heap] GC(0) Old regions: 0-&gt;2
[2.892s][info ][gc,heap] GC(0) Humongous regions: 2-&gt;1
[2.893s][debug][gc,heap] GC(0) Heap after GC invocations=1 (full 0):
[2.893s][debug][gc,heap] GC(0) garbage-first heap total 262144K, used 5850K [0xfffffffe50400000, 0xfffffffe50500800, 0xffffffff4e400000)
[2.893s][debug][gc,heap] GC(0) region size 1024K, 3 young (3072K), 3 survivors (3072K)
[2.893s][debug][gc,heap] GC(0) Metaspace used 4719K, capacity 4844K, committed 5120K, reserved 1056768K
[2.893s][debug][gc,heap] GC(0) class space used 413K, capacity 464K, committed 512K, reserved 1048576K
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u67E5\u770B GC \u8FC7\u7A0B\u4E2D\u7528\u6237\u7EBF\u7A0B\u5E76\u53D1\u65F6\u95F4\u4EE5\u53CA\u505C\u987F\u7684\u65F6\u95F4\uFF0C\u5728 JDK 9 \u4E4B\u524D\u4F7F\u7528 -XX:+PrintGCApplicationConcurrentTime \u4EE5\u53CA -XX:+PrintGCApplicationStoppedTime\uFF0CJDK 9 \u4E4B\u540E\u4F7F\u7528 -Xlog:safepoint\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>bash-3.2$ java -Xlog:safepoint GCTest
[1.376s][info][safepoint] Application time: 0.3091519 seconds
[1.377s][info][safepoint] Total time for which application threads were stopped: 0.0004600 seconds, Stopping threads took:
0.0002648 seconds
[2.386s][info][safepoint] Application time: 1.0091637 seconds
[2.387s][info][safepoint] Total time for which application threads were stopped: 0.0005217 seconds, Stopping threads took:
0.0002297 seconds
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u67E5\u770B\u6536\u96C6\u5668 Ergonomics \u673A\u5236\uFF08\u81EA\u52A8\u8BBE\u7F6E\u5806\u7A7A\u95F4\u5404\u5206\u4EE3\u533A\u57DF\u5927\u5C0F\u3001\u6536\u96C6\u76EE\u6807\u7B49\u5185\u5BB9\uFF0C\u4ECE Parallel \u6536\u96C6\u5668\u5F00\u59CB\u652F\u6301\uFF09\u81EA\u52A8\u8C03\u8282\u7684\u76F8\u5173\u4FE1\u606F\u3002\u5728 JDK 9 \u4E4B\u524D\u4F7F\u7528 -XX:+PrintAdaptiveSizePolicy\uFF0CJDK 9 \u4E4B\u540E\u4F7F\u7528 -Xlog:gc+ergo*=trace\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>bash-3.2$ java -Xlog:gc+ergo*=trace GCTest 
[0.122s][debug][gc,ergo,refine] Initial Refinement Zones: green: 23, yellow: 69, red: 115, min yellow size: 46
[0.142s][debug][gc,ergo,heap ] Expand the heap. requested expansion amount:268435456B expansion amount:268435456B
[2.475s][trace][gc,ergo,cset ] GC(0) Start choosing CSet. pending cards: 0 predicted base time: 10.00ms remaining time:
190.00ms target pause time: 200.00ms
[2.476s][trace][gc,ergo,cset ] GC(0) Add young regions to CSet. eden: 24 regions, survivors: 0 regions, predicted young
region time: 367.19ms, target pause time: 200.00ms
[2.476s][debug][gc,ergo,cset ] GC(0) Finish choosing CSet. old: 0 regions, predicted old region time: 0.00ms, time
remaining: 0.00
[2.826s][debug][gc,ergo ] GC(0) Running G1 Clear Card Table Task using 1 workers for 1 units of work for 24 regions.
[2.827s][debug][gc,ergo ] GC(0) Running G1 Free Collection Set using 1 workers for collection set length 24
[2.828s][trace][gc,ergo,refine] GC(0) Updating Refinement Zones: update_rs time: 0.004ms, update_rs buffers: 0, update_rs
goal time: 19.999ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u67E5\u770B\u71AC\u8FC7\u6536\u96C6\u540E\u5269\u4F59\u5BF9\u8C61\u7684\u5E74\u9F84\u5206\u5E03\u4FE1\u606F\uFF0C\u5728 JDK 9 \u524D\u4F7F\u7528 -XX:+PrintTenuringDistribution\uFF0CJDK 9 \u4E4B\u540E\u4F7F\u7528 -Xlog:gc+age=trace\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>bash-3.2$ java -Xlog:gc+age=trace GCTest
[2.406s][debug][gc,age] GC(0) Desired survivor size 1572864 bytes, new threshold 15 (max threshold 15)
[2.745s][trace][gc,age] GC(0) Age table with threshold 15 (max threshold 15)
[2.745s][trace][gc,age] GC(0) - age 1: 3100640 bytes, 3100640 total
[4.700s][debug][gc,age] GC(5) Desired survivor size 2097152 bytes, new threshold 15 (max threshold 15)
[4.810s][trace][gc,age] GC(5) Age table with threshold 15 (max threshold 15)
[4.810s][trace][gc,age] GC(5) - age 1: 2658280 bytes, 2658280 total
[4.810s][trace][gc,age] GC(5) - age 2: 1527360 bytes, 4185640 total
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>\u7531\u4E8E\u7BC7\u5E45\u539F\u56E0\uFF0C\u4E0D\u518D\u4E00\u4E00\u5217\u4E3E\uFF0C\u88683-3 \u7ED9\u51FA\u4E86\u5168\u90E8\u5728 JDK 9 \u4E2D\u88AB\u5E9F\u5F03\u7684\u65E5\u5FD7\u76F8\u5173\u53C2\u6570\u53CA\u5B83\u4EEC\u5728 JDK 9 \u540E\u4F7F\u7528 -Xlog \u7684\u4EE3\u66FF\u914D\u7F6E\u5F62\u5F0F\u3002</p><p>\u88683-3 JDK 9 \u524D\u540E\u65E5\u5FD7\u53C2\u6570\u53D8\u5316</p><p><img src="`+T+'" alt="\u88683-3" loading="lazy"></p><h3 id="_3-7-4-\u5783\u573E\u6536\u96C6\u5668\u53C2\u6570\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#_3-7-4-\u5783\u573E\u6536\u96C6\u5668\u53C2\u6570\u603B\u7ED3" aria-hidden="true">#</a> 3.7.4 \u5783\u573E\u6536\u96C6\u5668\u53C2\u6570\u603B\u7ED3</h3><p>HotSpot \u865A\u62DF\u673A\u4E2D\u7684\u5404\u79CD\u5783\u573E\u6536\u96C6\u5668\u5230\u6B64\u5168\u90E8\u4ECB\u7ECD\u5B8C\u6BD5\uFF0C\u5728\u63CF\u8FF0\u8FC7\u7A0B\u4E2D\u63D0\u5230\u4E86\u5F88\u591A\u865A\u62DF\u673A\u975E\u7A33\u5B9A\u7684\u8FD0\u884C\u53C2\u6570\uFF0C\u4E0B\u9762\u88683-4 \u4E2D\u6574\u7406\u4E86\u8FD9\u4E9B\u53C2\u6570\uFF0C\u4F9B\u8BFB\u8005\u5B9E\u8DF5\u65F6\u53C2\u8003\u3002</p><p>\u88683-4 \u5783\u573E\u6536\u96C6\u76F8\u5173\u7684\u5E38\u7528\u53C2\u6570</p><p><img src="'+O+'" alt="\u88683-4-1" loading="lazy"></p><p><img src="'+A+`" alt="\u88683-4-2" loading="lazy"></p><h2 id="_3-8-\u5B9E\u6218-\u5185\u5B58\u5206\u914D\u4E0E\u56DE\u6536\u7B56\u7565" tabindex="-1"><a class="header-anchor" href="#_3-8-\u5B9E\u6218-\u5185\u5B58\u5206\u914D\u4E0E\u56DE\u6536\u7B56\u7565" aria-hidden="true">#</a> 3.8 \u5B9E\u6218\uFF1A\u5185\u5B58\u5206\u914D\u4E0E\u56DE\u6536\u7B56\u7565</h2><p>Java \u6280\u672F\u4F53\u7CFB\u7684\u81EA\u52A8\u5185\u5B58\u7BA1\u7406\uFF0C\u6700\u6839\u672C\u7684\u76EE\u6807\u662F\u81EA\u52A8\u5316\u5730\u89E3\u51B3\u4E24\u4E2A\u95EE\u9898\uFF1A\u81EA\u52A8\u7ED9\u5BF9\u8C61\u5206\u914D\u5185\u5B58\u4EE5\u53CA\u81EA\u52A8\u56DE\u6536\u5206\u914D\u7ED9\u5BF9\u8C61\u7684\u5185\u5B58\u3002\u5173\u4E8E\u56DE\u6536\u5185\u5B58\u8FD9\u65B9\u9762\uFF0C\u7B14\u8005\u5DF2\u7ECF\u4F7F\u7528\u4E86\u5927\u91CF\u7BC7\u5E45\u53BB\u4ECB\u7ECD\u865A\u62DF\u673A\u4E2D\u7684\u5783\u573E\u6536\u96C6\u5668\u4F53\u7CFB\u4EE5\u53CA\u8FD0\u4F5C\u539F\u7406\uFF0C\u73B0\u5728\u6211\u4EEC\u6765\u63A2\u8BA8\u4E00\u4E0B\u5173\u4E8E\u7ED9\u5BF9\u8C61\u5206\u914D\u5185\u5B58\u7684\u90A3\u4E9B\u4E8B\u513F\u3002</p><p>\u5BF9\u8C61\u7684\u5185\u5B58\u5206\u914D\uFF0C\u4ECE\u6982\u5FF5\u4E0A\u8BB2\uFF0C\u5E94\u8BE5\u90FD\u662F\u5728\u5806\u4E0A\u5206\u914D\uFF08\u800C\u5B9E\u9645\u4E0A\u4E5F\u6709\u53EF\u80FD\u7ECF\u8FC7\u5373\u65F6\u7F16\u8BD1\u540E\u88AB\u62C6\u6563\u4E3A\u6807\u91CF\u7C7B\u578B\u5E76\u95F4\u63A5\u5730\u5728\u6808\u4E0A\u5206\u914D<sup class="footnote-ref"><a href="#footnote59">[59]</a><a class="footnote-anchor" id="footnote-ref59"></a></sup>\uFF09\u3002\u5728\u7ECF\u5178\u5206\u4EE3\u7684\u8BBE\u8BA1\u4E0B\uFF0C\u65B0\u751F\u5BF9\u8C61\u901A\u5E38\u4F1A\u5206\u914D\u5728\u65B0\u751F\u4EE3\u4E2D\uFF0C\u5C11\u6570\u60C5\u51B5\u4E0B\uFF08\u4F8B\u5982\u5BF9\u8C61\u5927\u5C0F\u8D85\u8FC7\u4E00\u5B9A\u9608\u503C\uFF09\u4E5F\u53EF\u80FD\u4F1A\u76F4\u63A5\u5206\u914D\u5728\u8001\u5E74\u4EE3\u3002\u5BF9\u8C61\u5206\u914D\u7684\u89C4\u5219\u5E76\u4E0D\u662F\u56FA\u5B9A\u7684\uFF0C\u300AJava \u865A\u62DF\u673A\u89C4\u8303\u300B\u5E76\u672A\u89C4\u5B9A\u65B0\u5BF9\u8C61\u7684\u521B\u5EFA\u548C\u5B58\u50A8\u7EC6\u8282\uFF0C\u8FD9\u53D6\u51B3\u4E8E\u865A\u62DF\u673A\u5F53\u524D\u4F7F\u7528\u7684\u662F\u54EA\u4E00\u79CD\u5783\u573E\u6536\u96C6\u5668\uFF0C\u4EE5\u53CA\u865A\u62DF\u673A\u4E2D\u4E0E\u5185\u5B58\u76F8\u5173\u7684\u53C2\u6570\u7684\u8BBE\u5B9A\u3002</p><p>\u63A5\u4E0B\u6765\u7684\u51E0\u5C0F\u8282\u5185\u5BB9\uFF0C\u7B14\u8005\u5C06\u4F1A\u8BB2\u89E3\u82E5\u5E72\u6700\u57FA\u672C\u7684\u5185\u5B58\u5206\u914D\u539F\u5219\uFF0C\u5E76\u901A\u8FC7\u4EE3\u7801\u53BB\u9A8C\u8BC1\u8FD9\u4E9B\u539F\u5219\u3002\u672C\u8282\u51FA\u73B0\u7684\u4EE3\u7801\u5982\u65E0\u7279\u522B\u8BF4\u660E\uFF0C\u5747\u4F7F\u7528 HotSpot \u865A\u62DF\u673A\uFF0C\u4EE5\u5BA2\u6237\u7AEF\u6A21\u5F0F\u8FD0\u884C\u3002\u7531\u4E8E\u5E76\u672A\u6307\u5B9A\u6536\u96C6\u5668\u7EC4\u5408\uFF0C\u56E0\u6B64\uFF0C\u672C\u8282\u9A8C\u8BC1\u7684\u5B9E\u9645\u662F\u4F7F\u7528 Serial \u52A0 Serial Old \u5BA2\u6237\u7AEF\u9ED8\u8BA4\u6536\u96C6\u5668\u7EC4\u5408\u4E0B\u7684\u5185\u5B58\u5206\u914D\u548C\u56DE\u6536\u7684\u7B56\u7565\uFF0C\u8FD9\u79CD\u914D\u7F6E\u548C\u6536\u96C6\u5668\u7EC4\u5408\u4E5F\u8BB8\u662F\u5F00\u53D1\u4EBA\u5458\u505A\u7814\u53D1\u65F6\u7684\u9ED8\u8BA4\u7EC4\u5408\uFF08\u5176\u5B9E\u73B0\u5728\u7814\u53D1\u65F6\u5F88\u591A\u4E5F\u9ED8\u8BA4\u7528\u670D\u52A1\u7AEF\u865A\u62DF\u673A\u4E86\uFF09\uFF0C\u4F46\u5728\u751F\u4EA7\u73AF\u5883\u4E2D\u4E00\u822C\u4E0D\u4F1A\u8FD9\u6837\u7528\uFF0C\u6240\u4EE5\u5927\u5BB6\u4E3B\u8981\u53BB\u5B66\u4E60\u7684\u662F\u5206\u6790\u65B9\u6CD5\uFF0C\u800C\u5217\u4E3E\u7684\u5206\u914D\u89C4\u5219\u53CD\u800C\u53EA\u662F\u6B21\u8981\u7684\u3002\u8BFB\u8005\u4E5F\u4E0D\u59A8\u6839\u636E\u81EA\u5DF1\u9879\u76EE\u4E2D\u4F7F\u7528\u7684\u6536\u96C6\u5668\u7F16\u5199\u4E00\u4E9B\u7A0B\u5E8F\u53BB\u5B9E\u8DF5\u9A8C\u8BC1\u4E00\u4E0B\u4F7F\u7528\u5176\u4ED6\u51E0\u79CD\u6536\u96C6\u5668\u7684\u5185\u5B58\u5206\u914D\u89C4\u5219\u3002</p><h3 id="_3-8-1-\u5BF9\u8C61\u4F18\u5148\u5728-eden-\u5206\u914D" tabindex="-1"><a class="header-anchor" href="#_3-8-1-\u5BF9\u8C61\u4F18\u5148\u5728-eden-\u5206\u914D" aria-hidden="true">#</a> 3.8.1 \u5BF9\u8C61\u4F18\u5148\u5728 Eden \u5206\u914D</h3><p>\u5927\u591A\u6570\u60C5\u51B5\u4E0B\uFF0C\u5BF9\u8C61\u5728\u65B0\u751F\u4EE3 Eden \u533A\u4E2D\u5206\u914D\u3002\u5F53 Eden \u533A\u6CA1\u6709\u8DB3\u591F\u7A7A\u95F4\u8FDB\u884C\u5206\u914D\u65F6\uFF0C\u865A\u62DF\u673A\u5C06\u53D1\u8D77\u4E00\u6B21 Minor GC\u3002</p><p>HotSpot \u865A\u62DF\u673A\u63D0\u4F9B\u4E86 -XX:+PrintGCDetails \u8FD9\u4E2A\u6536\u96C6\u5668\u65E5\u5FD7\u53C2\u6570\uFF0C\u544A\u8BC9\u865A\u62DF\u673A\u5728\u53D1\u751F\u5783\u573E\u6536\u96C6\u884C\u4E3A\u65F6\u6253\u5370\u5185\u5B58\u56DE\u6536\u65E5\u5FD7\uFF0C\u5E76\u4E14\u5728\u8FDB\u7A0B\u9000\u51FA\u7684\u65F6\u5019\u8F93\u51FA\u5F53\u524D\u7684\u5185\u5B58\u5404\u533A\u57DF\u5206\u914D\u60C5\u51B5\u3002\u5728\u5B9E\u9645\u7684\u95EE\u9898\u6392\u67E5\u4E2D\uFF0C\u6536\u96C6\u5668\u65E5\u5FD7\u5E38\u4F1A\u6253\u5370\u5230\u6587\u4EF6\u540E\u901A\u8FC7\u5DE5\u5177\u8FDB\u884C\u5206\u6790\uFF0C\u4E0D\u8FC7\u672C\u8282\u5B9E\u9A8C\u7684\u65E5\u5FD7\u5E76\u4E0D\u591A\uFF0C\u76F4\u63A5\u9605\u8BFB\u5C31\u80FD\u770B\u5F97\u5F88\u6E05\u695A\u3002</p><p>\u5728\u4EE3\u7801\u6E05\u53553-7 \u7684 testAllocation() \u65B9\u6CD5\u4E2D\uFF0C\u5C1D\u8BD5\u5206\u914D\u4E09\u4E2A 2MB \u5927\u5C0F\u548C\u4E00\u4E2A 4MB \u5927\u5C0F\u7684\u5BF9\u8C61\uFF0C\u5728\u8FD0\u884C\u65F6\u901A\u8FC7- Xms20M\u3001-Xmx20M\u3001-Xmn10M \u8FD9\u4E09\u4E2A\u53C2\u6570\u9650\u5236\u4E86 Java \u5806\u5927\u5C0F\u4E3A 20MB\uFF0C\u4E0D\u53EF\u6269\u5C55\uFF0C\u5176\u4E2D 10MB \u5206\u914D\u7ED9\u65B0\u751F\u4EE3\uFF0C\u5269\u4E0B\u7684 10MB \u5206\u914D\u7ED9\u8001\u5E74\u4EE3\u3002-XX:SurvivorRatio=8 \u51B3\u5B9A\u4E86\u65B0\u751F\u4EE3\u4E2D Eden \u533A\u4E0E\u4E00\u4E2A Survivor \u533A\u7684\u7A7A\u95F4\u6BD4\u4F8B\u662F 8\u22361\uFF0C\u4ECE\u8F93\u51FA\u7684\u7ED3\u679C\u4E5F\u6E05\u6670\u5730\u770B\u5230 &quot;eden space 8192K\u3001from space 1024K\u3001to space 1024K&quot; \u7684\u4FE1\u606F\uFF0C\u65B0\u751F\u4EE3\u603B\u53EF\u7528\u7A7A\u95F4\u4E3A 9216KB\uFF08Eden \u533A + 1 \u4E2A Survivor \u533A\u7684\u603B\u5BB9\u91CF\uFF09\u3002</p><p>\u4EE3\u7801\u6E05\u53553-7 \u65B0\u751F\u4EE3 Minor GC</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> _1MB <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * VM\u53C2\u6570\uFF1A-verbose:gc -Xms20M -Xmx20M -Xmn10M -XX:+PrintGCDetails -XX:SurvivorRatio=8
 */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testAllocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> allocation1<span class="token punctuation">,</span> allocation2<span class="token punctuation">,</span> allocation3<span class="token punctuation">,</span> allocation4<span class="token punctuation">;</span>
    allocation1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> _1MB<span class="token punctuation">]</span><span class="token punctuation">;</span>
    allocation2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> _1MB<span class="token punctuation">]</span><span class="token punctuation">;</span>
    allocation3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> _1MB<span class="token punctuation">]</span><span class="token punctuation">;</span>
    allocation4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">4</span> <span class="token operator">*</span> _1MB<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// \u51FA\u73B0\u4E00\u6B21Minor GC</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[GC [DefNew: 6651K-&gt;148K(9216K), 0.0070106 secs] 6651K-&gt;6292K(19456K), 0.0070426 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
Heap
    def new generation   total 9216K, used 4326K [0x029d0000, 0x033d0000, 0x033d0000)
        eden space 8192K,  51% used [0x029d0000, 0x02de4828, 0x031d0000)
        from space 1024K,  14% used [0x032d0000, 0x032f5370, 0x033d0000)
        to   space 1024K,   0% used [0x031d0000, 0x031d0000, 0x032d0000)
    tenured generation   total 10240K, used 6144K [0x033d0000, 0x03dd0000, 0x03dd0000)
            the space 10240K,  60% used [0x033d0000, 0x039d0030, 0x039d0200, 0x03dd0000)
    compacting perm gen  total 12288K, used 2114K [0x03dd0000, 0x049d0000, 0x07dd0000)
            the space 12288K,  17% used [0x03dd0000, 0x03fe0998, 0x03fe0a00, 0x049d0000)
No shared spaces configured.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6267\u884C testAllocation() \u4E2D\u5206\u914D allocation4 \u5BF9\u8C61\u7684\u8BED\u53E5\u65F6\u4F1A\u53D1\u751F\u4E00\u6B21 Minor GC\uFF0C\u8FD9\u6B21\u56DE\u6536\u7684\u7ED3\u679C\u662F\u65B0\u751F\u4EE3 6651KB \u53D8\u4E3A 148KB\uFF0C\u800C\u603B\u5185\u5B58\u5360\u7528\u91CF\u5219\u51E0\u4E4E\u6CA1\u6709\u51CF\u5C11\uFF08\u56E0\u4E3A allocation1\u30012\u30013 \u4E09\u4E2A\u5BF9\u8C61\u90FD\u662F\u5B58\u6D3B\u7684\uFF0C\u865A\u62DF\u673A\u51E0\u4E4E\u6CA1\u6709\u627E\u5230\u53EF\u56DE\u6536\u7684\u5BF9\u8C61\uFF09\u3002\u4EA7\u751F\u8FD9\u6B21\u5783\u573E\u6536\u96C6\u7684\u539F\u56E0\u662F\u4E3A allocation4 \u5206\u914D\u5185\u5B58\u65F6\uFF0C\u53D1\u73B0 Eden \u5DF2\u7ECF\u88AB\u5360\u7528\u4E86 6MB\uFF0C\u5269\u4F59\u7A7A\u95F4\u5DF2\u4E0D\u8DB3\u4EE5\u5206\u914D allocation4 \u6240\u9700\u7684 4MB \u5185\u5B58\uFF0C\u56E0\u6B64\u53D1\u751F Minor GC\u3002\u5783\u573E\u6536\u96C6\u671F\u95F4\u865A\u62DF\u673A\u53C8\u53D1\u73B0\u5DF2\u6709\u7684\u4E09\u4E2A 2MB \u5927\u5C0F\u7684\u5BF9\u8C61\u5168\u90E8\u65E0\u6CD5\u653E\u5165 Survivor \u7A7A\u95F4\uFF08Survivor \u7A7A\u95F4\u53EA\u6709 1MB \u5927\u5C0F\uFF09\uFF0C\u6240\u4EE5\u53EA\u597D\u901A\u8FC7\u5206\u914D\u62C5\u4FDD\u673A\u5236\u63D0\u524D\u8F6C\u79FB\u5230\u8001\u5E74\u4EE3\u53BB\u3002</p><p>\u8FD9\u6B21\u6536\u96C6\u7ED3\u675F\u540E\uFF0C4MB \u7684 allocation4 \u5BF9\u8C61\u987A\u5229\u5206\u914D\u5728 Eden \u4E2D\u3002\u56E0\u6B64\u7A0B\u5E8F\u6267\u884C\u5B8C\u7684\u7ED3\u679C\u662F Eden \u5360\u7528 4MB\uFF08\u88AB allocation4 \u5360\u7528\uFF09\uFF0CSurvivor \u7A7A\u95F2\uFF0C\u8001\u5E74\u4EE3\u88AB\u5360\u7528 6MB\uFF08\u88AB allocation1\u30012\u30013 \u5360\u7528\uFF09\u3002\u901A\u8FC7 GC \u65E5\u5FD7\u53EF\u4EE5\u8BC1\u5B9E\u8FD9\u4E00\u70B9\u3002</p><h3 id="_3-8-2-\u5927\u5BF9\u8C61\u76F4\u63A5\u8FDB\u5165\u8001\u5E74\u4EE3" tabindex="-1"><a class="header-anchor" href="#_3-8-2-\u5927\u5BF9\u8C61\u76F4\u63A5\u8FDB\u5165\u8001\u5E74\u4EE3" aria-hidden="true">#</a> 3.8.2 \u5927\u5BF9\u8C61\u76F4\u63A5\u8FDB\u5165\u8001\u5E74\u4EE3</h3><p>\u5927\u5BF9\u8C61\u5C31\u662F\u6307\u9700\u8981\u5927\u91CF\u8FDE\u7EED\u5185\u5B58\u7A7A\u95F4\u7684 Java \u5BF9\u8C61\uFF0C\u6700\u5178\u578B\u7684\u5927\u5BF9\u8C61\u4FBF\u662F\u90A3\u79CD\u5F88\u957F\u7684\u5B57\u7B26\u4E32\uFF0C\u6216\u8005\u5143\u7D20\u6570\u91CF\u5F88\u5E9E\u5927\u7684\u6570\u7EC4\uFF0C\u672C\u8282\u4F8B\u5B50\u4E2D\u7684 byte[] \u6570\u7EC4\u5C31\u662F\u5178\u578B\u7684\u5927\u5BF9\u8C61\u3002\u5927\u5BF9\u8C61\u5BF9\u865A\u62DF\u673A\u7684\u5185\u5B58\u5206\u914D\u6765\u8BF4\u5C31\u662F\u4E00\u4E2A\u4E0D\u6298\u4E0D\u6263\u7684\u574F\u6D88\u606F\uFF0C\u6BD4\u9047\u5230\u4E00\u4E2A\u5927\u5BF9\u8C61\u66F4\u52A0\u574F\u7684\u6D88\u606F\u5C31\u662F\u9047\u5230\u4E00\u7FA4 \u201C\u671D\u751F\u5915\u706D\u201D \u7684 \u201C\u77ED\u547D\u5927\u5BF9\u8C61\u201D\uFF0C\u6211\u4EEC\u5199\u7A0B\u5E8F\u7684\u65F6\u5019\u5E94\u6CE8\u610F\u907F\u514D\u3002\u5728 Java \u865A\u62DF\u673A\u4E2D\u8981\u907F\u514D\u5927\u5BF9\u8C61\u7684\u539F\u56E0\u662F\uFF0C\u5728\u5206\u914D\u7A7A\u95F4\u65F6\uFF0C\u5B83\u5BB9\u6613\u5BFC\u81F4\u5185\u5B58\u660E\u660E\u8FD8\u6709\u4E0D\u5C11\u7A7A\u95F4\u65F6\u5C31\u63D0\u524D\u89E6\u53D1\u5783\u573E\u6536\u96C6\uFF0C\u4EE5\u83B7\u53D6\u8DB3\u591F\u7684\u8FDE\u7EED\u7A7A\u95F4\u624D\u80FD\u5B89\u7F6E\u597D\u5B83\u4EEC\uFF0C\u800C\u5F53\u590D\u5236\u5BF9\u8C61\u65F6\uFF0C\u5927\u5BF9\u8C61\u5C31\u610F\u5473\u7740\u9AD8\u989D\u7684\u5185\u5B58\u590D\u5236\u5F00\u9500\u3002HotSpot \u865A\u62DF\u673A\u63D0\u4F9B\u4E86 -XX:PretenureSizeThreshold \u53C2\u6570\uFF0C\u6307\u5B9A\u5927\u4E8E\u8BE5\u8BBE\u7F6E\u503C\u7684\u5BF9\u8C61\u76F4\u63A5\u5728\u8001\u5E74\u4EE3\u5206\u914D\uFF0C\u8FD9\u6837\u505A\u7684\u76EE\u7684\u5C31\u662F\u907F\u514D\u5728 Eden \u533A\u53CA\u4E24\u4E2A Survivor \u533A\u4E4B\u95F4\u6765\u56DE\u590D\u5236\uFF0C\u4EA7\u751F\u5927\u91CF\u7684\u5185\u5B58\u590D\u5236\u64CD\u4F5C\u3002</p><p>\u6267\u884C\u4EE3\u7801\u6E05\u53553-8 \u4E2D\u7684 testPretenureSizeThreshold() \u65B9\u6CD5\u540E\uFF0C\u6211\u4EEC\u770B\u5230 Eden \u7A7A\u95F4\u51E0\u4E4E\u6CA1\u6709\u88AB\u4F7F\u7528\uFF0C\u800C\u8001\u5E74\u4EE3\u7684 10MB \u7A7A\u95F4\u88AB\u4F7F\u7528\u4E86 40%\uFF0C\u4E5F\u5C31\u662F 4MB \u7684 allocation \u5BF9\u8C61\u76F4\u63A5\u5C31\u5206\u914D\u5728\u8001\u5E74\u4EE3\u4E2D\uFF0C\u8FD9\u662F\u56E0\u4E3A -XX:PretenureSizeThreshold \u88AB\u8BBE\u7F6E\u4E3A 3MB\uFF08\u5C31\u662F 3145728\uFF0C\u8FD9\u4E2A\u53C2\u6570\u4E0D\u80FD\u4E0E -Xmx \u4E4B\u7C7B\u7684\u53C2\u6570\u4E00\u6837\u76F4\u63A5\u5199 3MB\uFF09\uFF0C\u56E0\u6B64\u8D85\u8FC7 3MB \u7684\u5BF9\u8C61\u90FD\u4F1A\u76F4\u63A5\u5728\u8001\u5E74\u4EE3\u8FDB\u884C\u5206\u914D\u3002</p><p><strong>\u6CE8\u610F</strong>\uFF1A-XX:PretenureSizeThreshold \u53C2\u6570\u53EA\u5BF9 Serial \u548C ParNew \u4E24\u6B3E\u65B0\u751F\u4EE3\u6536\u96C6\u5668\u6709\u6548\uFF0CHotSpot \u7684\u5176\u4ED6\u65B0\u751F\u4EE3\u6536\u96C6\u5668\uFF0C\u5982 Parallel Scavenge \u5E76\u4E0D\u652F\u6301\u8FD9\u4E2A\u53C2\u6570\u3002\u5982\u679C\u5FC5\u987B\u4F7F\u7528\u6B64\u53C2\u6570\u8FDB\u884C\u8C03\u4F18\uFF0C\u53EF\u8003\u8651 ParNew \u52A0 CMS \u7684\u6536\u96C6\u5668\u7EC4\u5408\u3002</p><p>\u4EE3\u7801\u6E05\u53553-8 \u5927\u5BF9\u8C61\u76F4\u63A5\u8FDB\u5165\u8001\u5E74\u4EE3</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> _1MB <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * VM\u53C2\u6570\uFF1A-verbose:gc -Xms20M -Xmx20M -Xmn10M -XX:+PrintGCDetails -XX:SurvivorRatio=8
 * -XX:PretenureSizeThreshold=3145728
 */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testPretenureSizeThreshold</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> allocation<span class="token punctuation">;</span>
    allocation <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">4</span> <span class="token operator">*</span> _1MB<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">//\u76F4\u63A5\u5206\u914D\u5728\u8001\u5E74\u4EE3\u4E2D</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Heap
    def new generation   total 9216K, used 671K [0x029d0000, 0x033d0000, 0x033d0000)
        eden space 8192K,   8% used [0x029d0000, 0x02a77e98, 0x031d0000)
        from space 1024K,   0% used [0x031d0000, 0x031d0000, 0x032d0000)
        to   space 1024K,   0% used [0x032d0000, 0x032d0000, 0x033d0000)
    tenured generation   total 10240K, used 4096K [0x033d0000, 0x03dd0000, 0x03dd0000)
            the space 10240K,  40% used [0x033d0000, 0x037d0010, 0x037d0200, 0x03dd0000)
    compacting perm gen  total 12288K, used 2107K [0x03dd0000, 0x049d0000, 0x07dd0000)
            the space 12288K,  17% used [0x03dd0000, 0x03fdefd0, 0x03fdf000, 0x049d0000)
No shared spaces configured.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-8-3-\u957F\u671F\u5B58\u6D3B\u7684\u5BF9\u8C61\u5C06\u8FDB\u5165\u8001\u5E74\u4EE3" tabindex="-1"><a class="header-anchor" href="#_3-8-3-\u957F\u671F\u5B58\u6D3B\u7684\u5BF9\u8C61\u5C06\u8FDB\u5165\u8001\u5E74\u4EE3" aria-hidden="true">#</a> 3.8.3 \u957F\u671F\u5B58\u6D3B\u7684\u5BF9\u8C61\u5C06\u8FDB\u5165\u8001\u5E74\u4EE3</h3><p>HotSpot \u865A\u62DF\u673A\u4E2D\u591A\u6570\u6536\u96C6\u5668\u90FD\u91C7\u7528\u4E86\u5206\u4EE3\u6536\u96C6\u6765\u7BA1\u7406\u5806\u5185\u5B58\uFF0C\u90A3\u5185\u5B58\u56DE\u6536\u65F6\u5C31\u5FC5\u987B\u80FD\u51B3\u7B56\u54EA\u4E9B\u5B58\u6D3B\u5BF9\u8C61\u5E94\u5F53\u653E\u5728\u65B0\u751F\u4EE3\uFF0C\u54EA\u4E9B\u5B58\u6D3B\u5BF9\u8C61\u653E\u5728\u8001\u5E74\u4EE3\u4E2D\u3002\u4E3A\u505A\u5230\u8FD9\u70B9\uFF0C\u865A\u62DF\u673A\u7ED9\u6BCF\u4E2A\u5BF9\u8C61\u5B9A\u4E49\u4E86\u4E00\u4E2A\u5BF9\u8C61\u5E74\u9F84\uFF08Age\uFF09\u8BA1\u6570\u5668\uFF0C\u5B58\u50A8\u5728\u5BF9\u8C61\u5934\u4E2D\uFF08\u8BE6\u89C1\u7B2C 2 \u7AE0\uFF09\u3002\u5BF9\u8C61\u901A\u5E38\u5728 Eden \u533A\u91CC\u8BDE\u751F\uFF0C\u5982\u679C\u7ECF\u8FC7\u7B2C\u4E00\u6B21 Minor GC \u540E\u4ECD\u7136\u5B58\u6D3B\uFF0C\u5E76\u4E14\u80FD\u88AB Survivor \u5BB9\u7EB3\u7684\u8BDD\uFF0C\u8BE5\u5BF9\u8C61\u4F1A\u88AB\u79FB\u52A8\u5230 Survivor \u7A7A\u95F4\u4E2D\uFF0C\u5E76\u4E14\u5C06\u5176\u5BF9\u8C61\u5E74\u9F84\u8BBE\u4E3A 1 \u5C81\u3002\u5BF9\u8C61\u5728 Survivor \u533A\u4E2D\u6BCF\u71AC\u8FC7\u4E00\u6B21 Minor GC\uFF0C\u5E74\u9F84\u5C31\u589E\u52A0 1 \u5C81\uFF0C\u5F53\u5B83\u7684\u5E74\u9F84\u589E\u52A0\u5230\u4E00\u5B9A\u7A0B\u5EA6\uFF08\u9ED8\u8BA4\u4E3A 15\uFF09\uFF0C\u5C31\u4F1A\u88AB\u664B\u5347\u5230\u8001\u5E74\u4EE3\u4E2D\u3002\u5BF9\u8C61\u664B\u5347\u8001\u5E74\u4EE3\u7684\u5E74\u9F84\u9608\u503C\uFF0C\u53EF\u4EE5\u901A\u8FC7\u53C2\u6570 -XX:MaxTenuringThreshold \u8BBE\u7F6E\u3002</p><p>\u8BFB\u8005\u53EF\u4EE5\u8BD5\u8BD5\u5206\u522B\u4EE5 -XX:MaxTenuringThreshold=1 \u548C -XX:MaxTenuringThreshold=15 \u4E24\u79CD\u8BBE\u7F6E\u6765\u6267\u884C\u4EE3\u7801\u6E05\u53553-9 \u4E2D\u7684 testTenuringThreshold() \u65B9\u6CD5\uFF0C\u6B64\u65B9\u6CD5\u4E2D allocation1 \u5BF9\u8C61\u9700\u8981 256KB \u5185\u5B58\uFF0CSurvivor \u7A7A\u95F4\u53EF\u4EE5\u5BB9\u7EB3\u3002\u5F53 -XX:MaxTenuringThreshold=1 \u65F6\uFF0Callocation1 \u5BF9\u8C61\u5728\u7B2C\u4E8C\u6B21 GC \u53D1\u751F\u65F6\u8FDB\u5165\u8001\u5E74\u4EE3\uFF0C\u65B0\u751F\u4EE3\u5DF2\u4F7F\u7528\u7684\u5185\u5B58\u5728\u5783\u573E\u6536\u96C6\u4EE5\u540E\u975E\u5E38\u5E72\u51C0\u5730\u53D8\u6210 0KB\u3002\u800C\u5F53 -XX:MaxTenuringThreshold=15 \u65F6\uFF0C\u7B2C\u4E8C\u6B21 GC \u53D1\u751F\u540E\uFF0Callocation1 \u5BF9\u8C61\u5219\u8FD8\u7559\u5728\u65B0\u751F\u4EE3 Survivor \u7A7A\u95F4\uFF0C\u8FD9\u65F6\u5019\u65B0\u751F\u4EE3\u4ECD\u7136\u6709 404KB \u88AB\u5360\u7528\u3002</p><p>\u4EE3\u7801\u6E05\u53553-9 \u957F\u671F\u5B58\u6D3B\u7684\u5BF9\u8C61\u8FDB\u5165\u8001\u5E74\u4EE3</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> _1MB <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * VM\u53C2\u6570\uFF1A-verbose:gc -Xms20M -Xmx20M -Xmn10M -XX:+PrintGCDetails 
 * -XX:SurvivorRatio=8 -XX:MaxTenuringThreshold=1
 * -XX:+PrintTenuringDistribution
 */</span>
<span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unused&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testTenuringThreshold</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> allocation1<span class="token punctuation">,</span> allocation2<span class="token punctuation">,</span> allocation3<span class="token punctuation">;</span>
    allocation1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span>_1MB <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>   <span class="token comment">// \u4EC0\u4E48\u65F6\u5019\u8FDB\u5165\u8001\u5E74\u4EE3\u51B3\u5B9A\u4E8EXX:MaxTenuring-Threshold\u8BBE\u7F6E</span>
    allocation2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">4</span> <span class="token operator">*</span> _1MB<span class="token punctuation">]</span><span class="token punctuation">;</span>
    allocation3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">4</span> <span class="token operator">*</span> _1MB<span class="token punctuation">]</span><span class="token punctuation">;</span>
    allocation3 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    allocation3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">4</span> <span class="token operator">*</span> _1MB<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE5 -XX:MaxTenuringThreshold=1\u53C2\u6570\u6765\u8FD0\u884C\u7684\u7ED3\u679C\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[GC [DefNew
Desired Survivor size 524288 bytes, new threshold 1 (max 1)
- age   1:     414664 bytes,     414664 total
: 4859K-&gt;404K(9216K), 0.0065012 secs] 4859K-&gt;4500K(19456K), 0.0065283 secs] [Times: user=0.02 sys=0.00, real=0.02 secs]
[GC [DefNew
Desired Survivor size 524288 bytes, new threshold 1 (max 1)
: 4500K-&gt;0K(9216K), 0.0009253 secs] 8596K-&gt;4500K(19456K), 0.0009458 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
Heap
    def new generation   total 9216K, used 4178K [0x029d0000, 0x033d0000, 0x033d0000)
        eden space 8192K,  51% used [0x029d0000, 0x02de4828, 0x031d0000)
        from space 1024K,   0% used [0x031d0000, 0x031d0000, 0x032d0000)
        to   space 1024K,   0% used [0x032d0000, 0x032d0000, 0x033d0000)
    tenured generation   total 10240K, used 4500K [0x033d0000, 0x03dd0000, 0x03dd0000)
            the space 10240K,  43% used [0x033d0000, 0x03835348, 0x03835400, 0x03dd0000)
    com\\pacting perm gen  total 12288K, used 2114K [0x03dd0000, 0x049d0000, 0x07dd0000)
            the space 12288K,  17% used [0x03dd0000, 0x03fe0998, 0x03fe0a00, 0x049d0000)
No shared spaces configured.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE5 -XX:MaxTenuringThreshold=15 \u53C2\u6570\u6765\u8FD0\u884C\u7684\u7ED3\u679C\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[GC [DefNew
Desired Survivor size 524288 bytes, new threshold 15 (max 15)
- age   1:     414664 bytes,     414664 total
: 4859K-&gt;404K(9216K), 0.0049637 secs] 4859K-&gt;4500K(19456K), 0.0049932 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
[GC [DefNew
Desired Survivor size 524288 bytes, new threshold 15 (max 15)
- age   2:     414520 bytes,     414520 total
: 4500K-&gt;404K(9216K), 0.0008091 secs] 8596K-&gt;4500K(19456K), 0.0008305 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
Heap
    def new generation   total 9216K, used 4582K [0x029d0000, 0x033d0000, 0x033d0000)
        eden space 8192K,  51% used [0x029d0000, 0x02de4828, 0x031d0000)
        from space 1024K,  39% used [0x031d0000, 0x03235338, 0x032d0000)
        to   space 1024K,   0% used [0x032d0000, 0x032d0000, 0x033d0000)
    tenured generation   total 10240K, used 4096K [0x033d0000, 0x03dd0000, 0x03dd0000)
            the space 10240K,  40% used [0x033d0000, 0x037d0010, 0x037d0200, 0x03dd0000)
    compacting perm gen  total 12288K, used 2114K [0x03dd0000, 0x049d0000, 0x07dd0000)
            the space 12288K,  17% used [0x03dd0000, 0x03fe0998, 0x03fe0a00, 0x049d0000)
No shared spaces configured.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-8-4-\u52A8\u6001\u5BF9\u8C61\u5E74\u9F84\u5224\u5B9A" tabindex="-1"><a class="header-anchor" href="#_3-8-4-\u52A8\u6001\u5BF9\u8C61\u5E74\u9F84\u5224\u5B9A" aria-hidden="true">#</a> 3.8.4 \u52A8\u6001\u5BF9\u8C61\u5E74\u9F84\u5224\u5B9A</h3><p>\u4E3A\u4E86\u80FD\u66F4\u597D\u5730\u9002\u5E94\u4E0D\u540C\u7A0B\u5E8F\u7684\u5185\u5B58\u72B6\u51B5\uFF0CHotSpot \u865A\u62DF\u673A\u5E76\u4E0D\u662F\u6C38\u8FDC\u8981\u6C42\u5BF9\u8C61\u7684\u5E74\u9F84\u5FC5\u987B\u8FBE\u5230 -XX:MaxTenuringThreshold \u624D\u80FD\u664B\u5347\u8001\u5E74\u4EE3\uFF0C\u5982\u679C\u5728 Survivor \u7A7A\u95F4\u4E2D\u76F8\u540C\u5E74\u9F84\u6240\u6709\u5BF9\u8C61\u5927\u5C0F\u7684\u603B\u548C\u5927\u4E8E Survivor \u7A7A\u95F4\u7684\u4E00\u534A\uFF0C\u5E74\u9F84\u5927\u4E8E\u6216\u7B49\u4E8E\u8BE5\u5E74\u9F84\u7684\u5BF9\u8C61\u5C31\u53EF\u4EE5\u76F4\u63A5\u8FDB\u5165\u8001\u5E74\u4EE3\uFF0C\u65E0\u987B\u7B49\u5230 -XX:MaxTenuringThreshold \u4E2D\u8981\u6C42\u7684\u5E74\u9F84\u3002</p><p>\u6267\u884C\u4EE3\u7801\u6E05\u53553-10 \u4E2D\u7684 testTenuringThreshold2() \u65B9\u6CD5\uFF0C\u5E76\u5C06\u8BBE\u7F6E -XX:MaxTenuringThreshold=15\uFF0C\u53D1\u73B0\u8FD0\u884C\u7ED3\u679C\u4E2D Survivor \u5360\u7528\u4ECD\u7136\u4E3A 0%\uFF0C\u800C\u8001\u5E74\u4EE3\u6BD4\u9884\u671F\u589E\u52A0\u4E86 6%\uFF0C\u4E5F\u5C31\u662F\u8BF4 allocation1\u3001allocation2 \u5BF9\u8C61\u90FD\u76F4\u63A5\u8FDB\u5165\u4E86\u8001\u5E74\u4EE3\uFF0C\u5E76\u6CA1\u6709\u7B49\u5230 15 \u5C81\u7684\u4E34\u754C\u5E74\u9F84\u3002\u56E0\u4E3A\u8FD9\u4E24\u4E2A\u5BF9\u8C61\u52A0\u8D77\u6765\u5DF2\u7ECF\u5230\u8FBE\u4E86 512KB\uFF0C\u5E76\u4E14\u5B83\u4EEC\u662F\u540C\u5E74\u9F84\u7684\uFF0C\u6EE1\u8DB3\u540C\u5E74\u5BF9\u8C61\u8FBE\u5230 Survivor \u7A7A\u95F4\u4E00\u534A\u7684\u89C4\u5219\u3002\u6211\u4EEC\u53EA\u8981\u6CE8\u91CA\u6389\u5176\u4E2D\u4E00\u4E2A\u5BF9\u8C61\u7684 new \u64CD\u4F5C\uFF0C\u5C31\u4F1A\u53D1\u73B0\u53E6\u5916\u4E00\u4E2A\u5C31\u4E0D\u4F1A\u664B\u5347\u5230\u8001\u5E74\u4EE3\u4E86\u3002</p><p>\u4EE3\u7801\u6E05\u53553-10 \u52A8\u6001\u5BF9\u8C61\u5E74\u9F84\u5224\u5B9A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> _1MB <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * VM\u53C2\u6570\uFF1A-verbose:gc -Xms20M -Xmx20M -Xmn10M -XX:+PrintGCDetails -XX:SurvivorRatio=8
 * -XX:MaxTenuringThreshold=15
 * -XX:+PrintTenuringDistribution
 */</span>
<span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unused&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testTenuringThreshold2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> allocation1<span class="token punctuation">,</span> allocation2<span class="token punctuation">,</span> allocation3<span class="token punctuation">,</span> allocation4<span class="token punctuation">;</span>
    allocation1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span>_1MB <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// allocation1 + allocation2 \u5927\u4E8E survivo \u7A7A\u95F4\u4E00\u534A</span>
    allocation2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span>_1MB <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    allocation3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">4</span> <span class="token operator">*</span> _1MB<span class="token punctuation">]</span><span class="token punctuation">;</span>
    allocation4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">4</span> <span class="token operator">*</span> _1MB<span class="token punctuation">]</span><span class="token punctuation">;</span>
    allocation4 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    allocation4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">4</span> <span class="token operator">*</span> _1MB<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[GC [DefNew
Desired Survivor size 524288 bytes, new threshold 1 (max 15)
- age   1:     676824 bytes,     676824 total
: 5115K-&gt;660K(9216K), 0.0050136 secs] 5115K-&gt;4756K(19456K), 0.0050443 secs] [Times: user=0.00 sys=0.01, real=0.01 secs]
[GC [DefNew
Desired Survivor size 524288 bytes, new threshold 15 (max 15)
: 4756K-&gt;0K(9216K), 0.0010571 secs] 8852K-&gt;4756K(19456K), 0.0011009 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
Heap
    def new generation   total 9216K, used 4178K [0x029d0000, 0x033d0000, 0x033d0000)
        eden space 8192K,  51% used [0x029d0000, 0x02de4828, 0x031d0000)
        from space 1024K,   0% used [0x031d0000, 0x031d0000, 0x032d0000)
        to   space 1024K,   0% used [0x032d0000, 0x032d0000, 0x033d0000)
    tenured generation   total 10240K, used 4756K [0x033d0000, 0x03dd0000, 0x03dd0000)
            the space 10240K,  46% used [0x033d0000, 0x038753e8, 0x03875400, 0x03dd0000)
    compacting perm gen  total 12288K, used 2114K [0x03dd0000, 0x049d0000, 0x07dd0000)
        the space 12288K,  17% used [0x03dd0000, 0x03fe09a0, 0x03fe0a00, 0x049d0000)
No shared spaces configured.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-8-5-\u7A7A\u95F4\u5206\u914D\u62C5\u4FDD" tabindex="-1"><a class="header-anchor" href="#_3-8-5-\u7A7A\u95F4\u5206\u914D\u62C5\u4FDD" aria-hidden="true">#</a> 3.8.5 \u7A7A\u95F4\u5206\u914D\u62C5\u4FDD</h3><p>\u5728\u53D1\u751F Minor GC \u4E4B\u524D\uFF0C\u865A\u62DF\u673A\u5FC5\u987B\u5148\u68C0\u67E5\u8001\u5E74\u4EE3\u6700\u5927\u53EF\u7528\u7684\u8FDE\u7EED\u7A7A\u95F4\u662F\u5426\u5927\u4E8E\u65B0\u751F\u4EE3\u6240\u6709\u5BF9\u8C61\u603B\u7A7A\u95F4\uFF0C\u5982\u679C\u8FD9\u4E2A\u6761\u4EF6\u6210\u7ACB\uFF0C\u90A3\u8FD9\u4E00\u6B21 Minor GC \u53EF\u4EE5\u786E\u4FDD\u662F\u5B89\u5168\u7684\u3002\u5982\u679C\u4E0D\u6210\u7ACB\uFF0C\u5219\u865A\u62DF\u673A\u4F1A\u5148\u67E5\u770B -XX:HandlePromotionFailure \u53C2\u6570\u7684\u8BBE\u7F6E\u503C\u662F\u5426\u5141\u8BB8\u62C5\u4FDD\u5931\u8D25\uFF08Handle Promotion Failure\uFF09\uFF1B\u5982\u679C\u5141\u8BB8\uFF0C\u90A3\u4F1A\u7EE7\u7EED\u68C0\u67E5\u8001\u5E74\u4EE3\u6700\u5927\u53EF\u7528\u7684\u8FDE\u7EED\u7A7A\u95F4\u662F\u5426\u5927\u4E8E\u5386\u6B21\u664B\u5347\u5230\u8001\u5E74\u4EE3\u5BF9\u8C61\u7684\u5E73\u5747\u5927\u5C0F\uFF0C\u5982\u679C\u5927\u4E8E\uFF0C\u5C06\u5C1D\u8BD5\u8FDB\u884C\u4E00\u6B21 Minor GC\uFF0C\u5C3D\u7BA1\u8FD9\u6B21 Minor GC \u662F\u6709\u98CE\u9669\u7684\uFF1B\u5982\u679C\u5C0F\u4E8E\uFF0C\u6216\u8005 -XX:HandlePromotionFailure \u8BBE\u7F6E\u4E0D\u5141\u8BB8\u5192\u9669\uFF0C\u90A3\u8FD9\u65F6\u5C31\u8981\u6539\u4E3A\u8FDB\u884C\u4E00\u6B21 Full GC\u3002</p><p>\u89E3\u91CA\u4E00\u4E0B \u201C\u5192\u9669\u201D \u662F\u5192\u4E86\u4EC0\u4E48\u98CE\u9669\uFF1A\u524D\u9762\u63D0\u5230\u8FC7\uFF0C\u65B0\u751F\u4EE3\u4F7F\u7528\u590D\u5236\u6536\u96C6\u7B97\u6CD5\uFF0C\u4F46\u4E3A\u4E86\u5185\u5B58\u5229\u7528\u7387\uFF0C\u53EA\u4F7F\u7528\u5176\u4E2D\u4E00\u4E2A Survivor \u7A7A\u95F4\u6765\u4F5C\u4E3A\u8F6E\u6362\u5907\u4EFD\uFF0C\u56E0\u6B64\u5F53\u51FA\u73B0\u5927\u91CF\u5BF9\u8C61\u5728 Minor GC \u540E\u4ECD\u7136\u5B58\u6D3B\u7684\u60C5\u51B5\u2014\u2014\u6700\u6781\u7AEF\u7684\u60C5\u51B5\u5C31\u662F\u5185\u5B58\u56DE\u6536\u540E\u65B0\u751F\u4EE3\u4E2D\u6240\u6709\u5BF9\u8C61\u90FD\u5B58\u6D3B\uFF0C\u9700\u8981\u8001\u5E74\u4EE3\u8FDB\u884C\u5206\u914D\u62C5\u4FDD\uFF0C\u628A Survivor \u65E0\u6CD5\u5BB9\u7EB3\u7684\u5BF9\u8C61\u76F4\u63A5\u9001\u5165\u8001\u5E74\u4EE3\uFF0C\u8FD9\u4E0E\u751F\u6D3B\u4E2D\u8D37\u6B3E\u62C5\u4FDD\u7C7B\u4F3C\u3002\u8001\u5E74\u4EE3\u8981\u8FDB\u884C\u8FD9\u6837\u7684\u62C5\u4FDD\uFF0C\u524D\u63D0\u662F\u8001\u5E74\u4EE3\u672C\u8EAB\u8FD8\u6709\u5BB9\u7EB3\u8FD9\u4E9B\u5BF9\u8C61\u7684\u5269\u4F59\u7A7A\u95F4\uFF0C\u4F46\u4E00\u5171\u6709\u591A\u5C11\u5BF9\u8C61\u4F1A\u5728\u8FD9\u6B21\u56DE\u6536\u4E2D\u6D3B\u4E0B\u6765\u5728\u5B9E\u9645\u5B8C\u6210\u5185\u5B58\u56DE\u6536\u4E4B\u524D\u662F\u65E0\u6CD5\u660E\u786E\u77E5\u9053\u7684\uFF0C\u6240\u4EE5\u53EA\u80FD\u53D6\u4E4B\u524D\u6BCF\u4E00\u6B21\u56DE\u6536\u664B\u5347\u5230\u8001\u5E74\u4EE3\u5BF9\u8C61\u5BB9\u91CF\u7684\u5E73\u5747\u5927\u5C0F\u4F5C\u4E3A\u7ECF\u9A8C\u503C\uFF0C\u4E0E\u8001\u5E74\u4EE3\u7684\u5269\u4F59\u7A7A\u95F4\u8FDB\u884C\u6BD4\u8F83\uFF0C\u51B3\u5B9A\u662F\u5426\u8FDB\u884C Full GC \u6765\u8BA9\u8001\u5E74\u4EE3\u817E\u51FA\u66F4\u591A\u7A7A\u95F4\u3002</p><p>\u53D6\u5386\u53F2\u5E73\u5747\u503C\u6765\u6BD4\u8F83\u5176\u5B9E\u4ECD\u7136\u662F\u4E00\u79CD\u8D4C\u6982\u7387\u7684\u89E3\u51B3\u529E\u6CD5\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5047\u5982\u67D0\u6B21 Minor GC \u5B58\u6D3B\u540E\u7684\u5BF9\u8C61\u7A81\u589E\uFF0C\u8FDC\u8FDC\u9AD8\u4E8E\u5386\u53F2\u5E73\u5747\u503C\u7684\u8BDD\uFF0C\u4F9D\u7136\u4F1A\u5BFC\u81F4\u62C5\u4FDD\u5931\u8D25\u3002\u5982\u679C\u51FA\u73B0\u4E86\u62C5\u4FDD\u5931\u8D25\uFF0C\u90A3\u5C31\u53EA\u597D\u8001\u8001\u5B9E\u5B9E\u5730\u91CD\u65B0\u53D1\u8D77\u4E00\u6B21 Full GC\uFF0C\u8FD9\u6837\u505C\u987F\u65F6\u95F4\u5C31\u5F88\u957F\u4E86\u3002\u867D\u7136\u62C5\u4FDD\u5931\u8D25\u65F6\u7ED5\u7684\u5708\u5B50\u662F\u6700\u5927\u7684\uFF0C\u4F46\u901A\u5E38\u60C5\u51B5\u4E0B\u90FD\u8FD8\u662F\u4F1A\u5C06 -XX:HandlePromotionFailure \u5F00\u5173\u6253\u5F00\uFF0C\u907F\u514D Full GC \u8FC7\u4E8E\u9891\u7E41\u3002\u53C2\u89C1\u4EE3\u7801\u6E05\u53553-11\uFF0C\u8BF7\u8BFB\u8005\u5148\u4EE5 JDK 6 Update 24 \u4E4B\u524D\u7684 HotSpot \u8FD0\u884C\u6D4B\u8BD5\u4EE3\u7801\u3002</p><p>\u4EE3\u7801\u6E05\u53553-11 \u7A7A\u95F4\u5206\u914D\u62C5\u4FDD</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> _1MB <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * VM\u53C2\u6570\uFF1A-Xms20M -Xmx20M -Xmn10M -XX:+PrintGCDetails -XX:SurvivorRatio=8 
 * -XX:-HandlePromotionFailure
 */</span>
<span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unused&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testHandlePromotion</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> allocation1<span class="token punctuation">,</span> allocation2<span class="token punctuation">,</span> allocation3<span class="token punctuation">,</span> allocation4<span class="token punctuation">,</span> allocation5<span class="token punctuation">,</span> allocation6<span class="token punctuation">,</span> allocation7<span class="token punctuation">;</span>
    allocation1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> _1MB<span class="token punctuation">]</span><span class="token punctuation">;</span>
    allocation2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> _1MB<span class="token punctuation">]</span><span class="token punctuation">;</span>
    allocation3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> _1MB<span class="token punctuation">]</span><span class="token punctuation">;</span>
    allocation1 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    allocation4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> _1MB<span class="token punctuation">]</span><span class="token punctuation">;</span>
    allocation5 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> _1MB<span class="token punctuation">]</span><span class="token punctuation">;</span>
    allocation6 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> _1MB<span class="token punctuation">]</span><span class="token punctuation">;</span>
    allocation4 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    allocation5 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    allocation6 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    allocation7 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> _1MB<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE5 -XX:HandlePromotionFailure=false \u53C2\u6570\u6765\u8FD0\u884C\u7684\u7ED3\u679C\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[GC [DefNew: 6651K-&gt;148K(9216K), 0.0078936 secs] 6651K-&gt;4244K(19456K), 0.0079192 secs] [Times: user=0.00 sys=0.02, real=0.02 secs]
[GC [DefNew: 6378K-&gt;6378K(9216K), 0.0000206 secs][Tenured: 4096K-&gt;4244K(10240K), 0.0042901 secs] 10474K-&gt;4244K(19456K), [Perm : 2104K-&gt;2104K(12288K)], 0.0043613 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE5 -XX:HandlePromotionFailure=true \u53C2\u6570\u6765\u8FD0\u884C\u7684\u7ED3\u679C\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[GC [DefNew: 6651K-&gt;148K(9216K), 0.0054913 secs] 6651K-&gt;4244K(19456K), 0.0055327 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
[GC [DefNew: 6378K-&gt;148K(9216K), 0.0006584 secs] 10474K-&gt;4244K(19456K), 0.0006857 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728 JDK 6 Update 24 \u4E4B\u540E\uFF0C\u8FD9\u4E2A\u6D4B\u8BD5\u7ED3\u679C\u5C31\u6709\u4E86\u5DEE\u5F02\uFF0C-XX:HandlePromotionFailure \u53C2\u6570\u4E0D\u4F1A\u518D\u5F71\u54CD\u5230\u865A\u62DF\u673A\u7684\u7A7A\u95F4\u5206\u914D\u62C5\u4FDD\u7B56\u7565\uFF0C\u89C2\u5BDF OpenJDK \u4E2D\u7684\u6E90\u7801\u53D8\u5316\uFF08\u89C1\u4EE3\u7801\u6E05\u53553-12\uFF09\uFF0C\u867D\u7136\u6E90\u7801\u4E2D\u8FD8\u5B9A\u4E49\u4E86 -XX:HandlePromotionFailure \u53C2\u6570\uFF0C\u4F46\u662F\u5728\u5B9E\u9645\u865A\u62DF\u673A\u4E2D\u5DF2\u7ECF\u4E0D\u4F1A\u518D\u4F7F\u7528\u5B83\u3002JDK 6 Update 24 \u4E4B\u540E\u7684\u89C4\u5219\u53D8\u4E3A\u53EA\u8981\u8001\u5E74\u4EE3\u7684\u8FDE\u7EED\u7A7A\u95F4\u5927\u4E8E\u65B0\u751F\u4EE3\u5BF9\u8C61\u603B\u5927\u5C0F\u6216\u8005\u5386\u6B21\u664B\u5347\u7684\u5E73\u5747\u5927\u5C0F\uFF0C\u5C31\u4F1A\u8FDB\u884C Minor GC\uFF0C\u5426\u5219\u5C06\u8FDB\u884C Full GC\u3002</p><p>\u4EE3\u7801\u6E05\u53553-12 HotSpot\u4E2D\u7A7A\u95F4\u5206\u914D\u68C0\u67E5\u7684\u4EE3\u7801\u7247\u6BB5</p><div class="language-c++ ext-c++ line-numbers-mode"><pre class="language-c++"><code>bool TenuredGeneration::promotion_attempt_is_safe(size_t max_promotion_in_bytes) const {
    // \u8001\u5E74\u4EE3\u6700\u5927\u53EF\u7528\u7684\u8FDE\u7EED\u7A7A\u95F4
    size_t available = max_contiguous_available();
    // \u6BCF\u6B21\u664B\u5347\u5230\u8001\u5E74\u4EE3\u7684\u5E73\u5747\u5927\u5C0F
    size_t av_promo  = (size_t)gc_stats()-&gt;avg_promoted()-&gt;padded_average();
    // \u8001\u5E74\u4EE3\u53EF\u7528\u7A7A\u95F4\u662F\u5426\u5927\u4E8E\u5E73\u5747\u664B\u5347\u5927\u5C0F\uFF0C\u6216\u8005\u8001\u5E74\u4EE3\u53EF\u7528\u7A7A\u95F4\u662F\u5426\u5927\u4E8E\u5F53\u6B64GC\u65F6\u65B0\u751F\u4EE3\u6240\u6709\u5BF9\u8C61\u5BB9\u91CF
    bool res = (available &gt;= av_promo) || (available &gt;= max_promotion_in_bytes);
    return res;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-9-\u672C\u7AE0\u5C0F\u7ED3" tabindex="-1"><a class="header-anchor" href="#_3-9-\u672C\u7AE0\u5C0F\u7ED3" aria-hidden="true">#</a> 3.9 \u672C\u7AE0\u5C0F\u7ED3</h2><p>\u672C\u7AE0\u4ECB\u7ECD\u4E86\u5783\u573E\u6536\u96C6\u7684\u7B97\u6CD5\u3001\u82E5\u5E72\u6B3E HotSpot \u865A\u62DF\u673A\u4E2D\u63D0\u4F9B\u7684\u5783\u573E\u6536\u96C6\u5668\u7684\u7279\u70B9\u4EE5\u53CA\u8FD0\u4F5C\u539F\u7406\u3002\u901A\u8FC7\u4EE3\u7801\u5B9E\u4F8B\u9A8C\u8BC1\u4E86 Java \u865A\u62DF\u673A\u4E2D\u81EA\u52A8\u5185\u5B58\u5206\u914D\u53CA\u56DE\u6536\u7684\u4E3B\u8981\u89C4\u5219\u3002</p><p>\u5783\u573E\u6536\u96C6\u5668\u5728\u8BB8\u591A\u573A\u666F\u4E2D\u90FD\u662F\u5F71\u54CD\u7CFB\u7EDF\u505C\u987F\u65F6\u95F4\u548C\u541E\u5410\u80FD\u529B\u7684\u91CD\u8981\u56E0\u7D20\u4E4B\u4E00\uFF0C\u865A\u62DF\u673A\u4E4B\u6240\u4EE5\u63D0\u4F9B\u591A\u79CD\u4E0D\u540C\u7684\u6536\u96C6\u5668\u4EE5\u53CA\u5927\u91CF\u7684\u8C03\u8282\u53C2\u6570\uFF0C\u5C31\u662F\u56E0\u4E3A\u53EA\u6709\u6839\u636E\u5B9E\u9645\u5E94\u7528\u9700\u6C42\u3001\u5B9E\u73B0\u65B9\u5F0F\u9009\u62E9\u6700\u4F18\u7684\u6536\u96C6\u65B9\u5F0F\u624D\u80FD\u83B7\u53D6\u6700\u597D\u7684\u6027\u80FD\u3002\u6CA1\u6709\u56FA\u5B9A\u6536\u96C6\u5668\u3001\u53C2\u6570\u7EC4\u5408\uFF0C\u6CA1\u6709\u6700\u4F18\u7684\u8C03\u4F18\u65B9\u6CD5\uFF0C\u865A\u62DF\u673A\u4E5F\u5C31\u6CA1\u6709\u4EC0\u4E48\u5FC5\u7136\u7684\u5185\u5B58\u56DE\u6536\u884C\u4E3A\u3002\u56E0\u6B64\u5B66\u4E60\u865A\u62DF\u673A\u5185\u5B58\u77E5\u8BC6\uFF0C\u5982\u679C\u8981\u5230\u5B9E\u8DF5\u8C03\u4F18\u9636\u6BB5\uFF0C\u5FC5\u987B\u4E86\u89E3\u6BCF\u4E2A\u5177\u4F53\u6536\u96C6\u5668\u7684\u884C\u4E3A\u3001\u4F18\u52BF\u52A3\u52BF\u3001\u8C03\u8282\u53C2\u6570\u3002\u5728\u63A5\u4E0B\u6765\u7684\u4E24\u7AE0\u4E2D\uFF0C\u4F5C\u8005\u5C06\u4F1A\u4ECB\u7ECD\u5185\u5B58\u5206\u6790\u7684\u5DE5\u5177\u548C\u4E00\u4E9B\u5177\u4F53\u8C03\u4F18\u7684\u6848\u4F8B\u3002</p><hr class="footnotes-sep">`,396),Z={class:"footnotes"},j={class:"footnotes-list"},q=o('<li id="footnote1" class="footnote-item"><p>\u5982 OpenJDK \u4E2D\u7684 G1\u3001Shenandoah\u3001ZGC \u4EE5\u53CA Azul \u7684 PGC\u3001C4 \u8FD9\u4E9B\u6536\u96C6\u5668\u3002 <a href="#footnote-ref1" class="footnote-backref">\u21A9\uFE0E</a></p></li><li id="footnote2" class="footnote-item"><p>Product \u7248\u3001FastDebug \u7248 HotSpot \u865A\u62DF\u673A\u7684\u5DEE\u522B\u53EF\u53C2\u89C1\u524D\u6587 1.6 \u8282\u3002 <a href="#footnote-ref2" class="footnote-backref">\u21A9\uFE0E</a></p></li><li id="footnote3" class="footnote-item"><p>\u539F\u8457\u540D\u4E3A\u300AThe Garbage Collection Handbook\u300B\uFF0C2011 \u5E74\u51FA\u7248\uFF0C\u4E2D\u6587\u7248\u5728 2016 \u5E74\u7531\u673A\u68B0\u5DE5\u4E1A\u51FA\u7248\u793E\u7FFB\u8BD1\u5F15\u8FDB\u56FD\u5185\u3002 <a href="#footnote-ref3" class="footnote-backref">\u21A9\uFE0E</a></p></li><li id="footnote4" class="footnote-item"><p>\u503C\u5F97\u6CE8\u610F\u7684\u662F\uFF0C\u5206\u4EE3\u6536\u96C6\u7406\u8BBA\u4E5F\u6709\u5176\u7F3A\u9677\uFF0C\u6700\u65B0\u51FA\u73B0\uFF08\u6216\u5728\u5B9E\u9A8C\u4E2D\uFF09\u7684\u51E0\u6B3E\u5783\u573E\u6536\u96C6\u5668\u90FD\u5C55\u73B0\u51FA\u4E86\u9762\u5411\u5168\u533A\u57DF\u6536\u96C6\u8BBE\u8BA1\u7684\u601D\u60F3\uFF0C\u6216\u8005\u53EF\u4EE5\u652F\u6301\u5168\u533A\u57DF\u4E0D\u5206\u4EE3\u7684\u6536\u96C6\u7684\u5DE5\u4F5C\u6A21\u5F0F\u3002 <a href="#footnote-ref4" class="footnote-backref">\u21A9\uFE0E</a></p></li><li id="footnote5" class="footnote-item"><p>\u65B0\u751F\u4EE3\uFF08Young\uFF09\u3001\u8001\u5E74\u4EE3\uFF08Old\uFF09\u662F HotSpot \u865A\u62DF\u673A\uFF0C\u4E5F\u662F\u73B0\u5728\u4E1A\u754C\u4E3B\u6D41\u7684\u547D\u540D\u65B9\u5F0F\u3002\u5728 IBM J9 \u865A\u62DF\u673A\u4E2D\u5BF9\u5E94\u79F0\u4E3A\u5A74\u513F\u533A\uFF08Nursery\uFF09\u548C\u957F\u5B58\u533A\uFF08Tenured\uFF09\uFF0C\u540D\u5B57\u4E0D\u540C\u4F46\u5176\u542B\u4E49\u662F\u4E00\u6837\u7684\u3002 <a href="#footnote-ref5" class="footnote-backref">\u21A9\uFE0E</a></p></li><li id="footnote6" class="footnote-item"><p>\u901A\u5E38\u80FD\u5355\u72EC\u53D1\u751F\u6536\u96C6\u884C\u4E3A\u7684\u53EA\u662F\u65B0\u751F\u4EE3\uFF0C\u6240\u4EE5\u8FD9\u91CC \u201C\u53CD\u8FC7\u6765\u201D \u7684\u60C5\u51B5\u53EA\u662F\u7406\u8BBA\u4E0A\u5141\u8BB8\uFF0C\u5B9E\u9645\u4E0A\u9664\u4E86 CMS \u6536\u96C6\u5668\uFF0C\u5176\u4ED6\u90FD\u4E0D\u5B58\u5728\u53EA\u9488\u5BF9\u8001\u5E74\u4EE3\u7684\u6536\u96C6\u3002 <a href="#footnote-ref6" class="footnote-backref">\u21A9\uFE0E</a></p></li><li id="footnote7" class="footnote-item"><p>\u8FD9\u91CC\u9700\u8981\u8BF4\u660E\u4E00\u4E0B\uFF0CHotSpot \u4E2D\u7684\u8FD9\u79CD\u5206\u4EE3\u65B9\u5F0F\u4ECE\u6700\u521D\u5C31\u662F\u8FD9\u79CD\u5E03\u5C40\uFF0C\u548C IBM \u7684\u7814\u7A76\u5E76\u6CA1\u6709\u4EC0\u4E48\u5B9E\u9645\u5173\u7CFB\u3002\u8FD9\u91CC\u7B14\u8005\u5217\u4E3E IBM \u7684\u7814\u7A76\u53EA\u662F\u4E3A\u4E86\u8BF4\u660E\u8FD9\u79CD\u5206\u4EE3\u5E03\u5C40\u7684\u610F\u4E49\u6240\u5728\u3002 <a href="#footnote-ref7" class="footnote-backref">\u21A9\uFE0E</a></p></li><li id="footnote8" class="footnote-item"><p>\u6700\u65B0\u7684 ZGC \u548C Shenandoah \u6536\u96C6\u5668\u4F7F\u7528\u8BFB\u5C4F\u969C\uFF08Read Barrier\uFF09\u6280\u672F\u5B9E\u73B0\u4E86\u6574\u7406\u8FC7\u7A0B\u4E0E\u7528\u6237\u7EBF\u7A0B\u7684\u5E76\u53D1\u6267\u884C\uFF0C\u7A0D\u540E\u5C06\u4F1A\u4ECB\u7ECD\u8FD9\u79CD\u6536\u96C6\u5668\u7684\u5DE5\u4F5C\u539F\u7406\u3002 <a href="#footnote-ref8" class="footnote-backref">\u21A9\uFE0E</a></p></li><li id="footnote9" class="footnote-item"><p>\u901A\u5E38\u6807\u8BB0-\u6E05\u9664\u7B97\u6CD5\u4E5F\u662F\u9700\u8981\u505C\u987F\u7528\u6237\u7EBF\u7A0B\u6765\u6807\u8BB0\u3001\u6E05\u7406\u53EF\u56DE\u6536\u5BF9\u8C61\u7684\uFF0C\u53EA\u662F\u505C\u987F\u65F6\u95F4\u76F8\u5BF9\u800C\u8A00\u8981\u6765\u7684\u77ED\u800C\u5DF2\u3002 <a href="#footnote-ref9" class="footnote-backref">\u21A9\uFE0E</a></p></li><li id="footnote10" class="footnote-item"><p>\u7531 Antony Hosking \u5728 1993 \u5E74\u53D1\u8868\u7684\u8BBA\u6587\u300ARemembered sets can also play cards\u300B\u4E2D\u63D0\u51FA\u3002 <a href="#footnote-ref10" class="footnote-backref">\u21A9\uFE0E</a></p></li>',10),F={id:"footnote11",class:"footnote-item"},N=e("\u4E4B\u6240\u4EE5\u4F7F\u7528 byte \u6570\u7EC4\u800C\u4E0D\u662F bit \u6570\u7EC4\u4E3B\u8981\u662F\u901F\u5EA6\u4E0A\u7684\u8003\u91CF\uFF0C\u73B0\u4EE3\u8BA1\u7B97\u673A\u786C\u4EF6\u90FD\u662F\u6700\u5C0F\u6309\u5B57\u8282\u5BFB\u5740\u7684\uFF0C\u6CA1\u6709\u76F4\u63A5\u5B58\u50A8\u4E00\u4E2A bit \u7684\u6307\u4EE4\uFF0C\u6240\u4EE5\u8981\u7528 bit \u7684\u8BDD\u5C31\u4E0D\u5F97\u4E0D\u591A\u6D88\u8017\u51E0\u6761 shift + mask \u6307\u4EE4\u3002\u5177\u4F53\u53EF\u89C1 HotSpot \u5E94\u7528\u5199\u5C4F\u969C\u5B9E\u73B0\u8BB0\u5FC6\u96C6\u7684\u539F\u59CB\u8BBA\u6587\u300AA Fast Write Barrier for Generational Garbage Collectors\u300B\uFF08"),L={href:"http://www.hoelzle.org/publications/write-barrier.pdf%EF%BC%89%E3%80%82",target:"_blank",rel:"noopener noreferrer"},I=e("http://www.hoelzle.org/publications/write-barrier.pdf\uFF09\u3002"),U=e(),V=n("a",{href:"#footnote-ref11",class:"footnote-backref"},"\u21A9\uFE0E",-1),W={id:"footnote12",class:"footnote-item"},Y=e("\u5F15\u7528\u6765\u6E90\u4E3A "),$={href:"http://psy-lob-saw.blogspot.com/2014/10/the-jvm-write-barrier-card-marking.html%E3%80%82",target:"_blank",rel:"noopener noreferrer"},Q=e("http://psy-lob-saw.blogspot.com/2014/10/the-jvm-write-barrier-card-marking.html\u3002"),nn=e(),en=n("a",{href:"#footnote-ref12",class:"footnote-backref"},"\u21A9\uFE0E",-1),an=o('<li id="footnote13" class="footnote-item"><p>\u5341\u516D\u8FDB\u5236\u6570 200\u3001400 \u5206\u522B\u4E3A\u5341\u8FDB\u5236\u7684 512\u30011024\uFF0C\u8FD9 3 \u4E2A\u5185\u5B58\u5757\u4E3A\u4ECE 0 \u5F00\u59CB\u3001512 \u5B57\u8282\u5BB9\u91CF\u7684\u76F8\u90BB\u533A\u57DF\u3002 <a href="#footnote-ref13" class="footnote-backref">\u21A9\uFE0E</a></p></li><li id="footnote14" class="footnote-item"><p>\u8FD9\u4E2A\u8BED\u5883\u4E0A\u7684\u5185\u5B58\u5C4F\u969C\uFF08Memory Barrier\uFF09\u7684\u76EE\u7684\u662F\u4E3A\u4E86\u6307\u4EE4\u4E0D\u56E0\u7F16\u8BD1\u4F18\u5316\u3001CPU \u6267\u884C\u4F18\u5316\u7B49\u539F\u56E0\u800C\u5BFC\u81F4\u4E71\u5E8F\u6267\u884C\uFF0C\u5B83\u4E5F\u662F\u53EF\u4EE5\u7EC6\u5206\u4E3A\u4EC5\u786E\u4FDD\u8BFB\u64CD\u4F5C\u987A\u5E8F\u6B63\u786E\u6027\u548C\u4EC5\u786E\u4FDD\u5199\u64CD\u4F5C\u987A\u5E8F\u6B63\u786E\u6027\u7684\u5185\u5B58\u5C4F\u969C\u7684\u3002\u5173\u4E8E\u5E76\u53D1\u95EE\u9898\u4E2D\u5185\u5B58\u5C4F\u969C\u7684\u4ECB\u7ECD\uFF0C\u53EF\u4EE5\u53C2\u8003\u672C\u4E66\u7B2C 12 \u7AE0\u4E2D\u5173\u4E8E volatile \u578B\u53D8\u91CF\u7684\u8BB2\u89E3\u3002 <a href="#footnote-ref14" class="footnote-backref">\u21A9\uFE0E</a></p></li><li id="footnote15" class="footnote-item"><p>AOP \u4E3A Aspect Oriented Programming \u7684\u7F29\u5199\uFF0C\u610F\u4E3A\u9762\u5411\u5207\u9762\u7F16\u7A0B\uFF0C\u901A\u8FC7\u9884\u7F16\u8BD1\u65B9\u5F0F\u548C\u8FD0\u884C\u671F\u52A8\u6001\u4EE3\u7406\u5B9E\u73B0\u7A0B\u5E8F\u529F\u80FD\u7684\u7EDF\u4E00\u7EF4\u62A4\u7684\u4E00\u79CD\u6280\u672F\u3002\u540E\u9762\u63D0\u5230\u7684 \u201C\u73AF\u5F62\u901A\u77E5\u201D \u4E5F\u662F AOP \u4E2D\u7684\u6982\u5FF5\uFF0C\u4F7F\u7528\u8FC7 Spring \u7684\u8BFB\u8005\u5E94\u8BE5\u90FD\u4E86\u89E3\u8FD9\u4E9B\u57FA\u7840\u6982\u5FF5\u3002 <a href="#footnote-ref15" class="footnote-backref">\u21A9\uFE0E</a></p></li>',3),sn={id:"footnote16",class:"footnote-item"},on=e("\u4E09\u8272\u6807\u8BB0\u7684\u4ECB\u7ECD\u53EF\u53C2\u89C1 "),tn={href:"https://en.wikipedia.org/wiki/Tracing_garbage_collection#Tri-color_marking%E3%80%82",target:"_blank",rel:"noopener noreferrer"},ln=e("https://en.wikipedia.org/wiki/Tracing_garbage_collection#Tri-color_marking\u3002"),pn=e(),rn=n("a",{href:"#footnote-ref16",class:"footnote-backref"},"\u21A9\uFE0E",-1),cn=n("li",{id:"footnote17",class:"footnote-item"},[n("p",null,[e("\u6B64\u4F8B\u5B50\u4E2D\u7684\u56FE\u7247\u5F15\u7528\u4E86 Aleksey Shipilev \u5728 DEVOXX 2017 \u4E0A\u7684\u4E3B\u9898\u6F14\u8BB2\uFF1A\u300AShenandoah GC Part I: The Garbage Collector That Could\u300B\u3002 "),n("a",{href:"#footnote-ref17",class:"footnote-backref"},"\u21A9\uFE0E")])],-1),dn=n("li",{id:"footnote18",class:"footnote-item"},[n("p",null,[e("\u8FD9\u91CC\u4E13\u95E8\u5F3A\u8C03\u4E86 OracleJDK \u662F\u56E0\u4E3A\u8981\u628A OpenJDK\uFF0C\u5C24\u5176\u662F OpenJDK-Shenandoah-JDK8 \u8FD9\u79CD Backports \u9879\u76EE\u6392\u9664\u5728\u5916\uFF0C\u5728\u672C\u4E66\u6545\u4E8B\u7684\u65F6\u95F4\u7EBF\u91CC\uFF0CShenandoah \u8981\u5230 OpenJDK 12 \u624D\u4F1A\u767B\u573A\uFF0C\u8BF7\u8BFB\u8005\u8010\u5FC3\u7B49\u5F85\u3002 "),n("a",{href:"#footnote-ref18",class:"footnote-backref"},"\u21A9\uFE0E")])],-1),un={id:"footnote19",class:"footnote-item"},vn=e("\u56FE\u7247\u6765\u6E90\uFF1A"),fn={href:"https://blogs.oracle.com/jonthecollector/our_collectors%E3%80%82",target:"_blank",rel:"noopener noreferrer"},hn=e("https://blogs.oracle.com/jonthecollector/our_collectors\u3002"),mn=e(),gn=n("a",{href:"#footnote-ref19",class:"footnote-backref"},"\u21A9\uFE0E",-1),kn=n("li",{id:"footnote20",class:"footnote-item"},[n("p",null,[e("\u8FD9\u4E2A\u5173\u7CFB\u4E0D\u662F\u4E00\u6210\u4E0D\u53D8\u7684\uFF0C\u7531\u4E8E\u7EF4\u62A4\u548C\u517C\u5BB9\u6027\u6D4B\u8BD5\u7684\u6210\u672C\uFF0C\u5728 JDK 8 \u65F6\u5C06 Serial + CMS\u3001ParNew + Serial Old \u8FD9\u4E24\u4E2A\u7EC4\u5408\u58F0\u660E\u4E3A\u5E9F\u5F03\uFF08JEP 173\uFF09\uFF0C\u5E76\u5728 JDK 9 \u4E2D\u5B8C\u5168\u53D6\u6D88\u4E86\u8FD9\u4E9B\u7EC4\u5408\u7684\u652F\u6301\uFF08JEP 214\uFF09\u3002 "),n("a",{href:"#footnote-ref20",class:"footnote-backref"},"\u21A9\uFE0E")])],-1),bn=n("li",{id:"footnote21",class:"footnote-item"},[n("p",null,[e("Memory Footprint\uFF1A\u5185\u5B58\u5360\u7528\uFF0C\u6B64\u8BED\u5883\u4E2D\u6307\u4E3A\u4FDD\u8BC1\u5783\u573E\u6536\u96C6\u80FD\u591F\u987A\u5229\u9AD8\u6548\u5730\u8FDB\u884C\u800C\u5B58\u50A8\u7684\u989D\u5916\u4FE1\u606F\u3002 "),n("a",{href:"#footnote-ref21",class:"footnote-backref"},"\u21A9\uFE0E")])],-1),Cn={id:"footnote22",class:"footnote-item"},_n=e("\u9664\u4E86\u4E00\u4E2A\u9762\u5411\u4F4E\u5EF6\u8FDF\u4E00\u4E2A\u9762\u5411\u9AD8\u541E\u5410\u91CF\u7684\u76EE\u6807\u4E0D\u4E00\u81F4\u5916\uFF0C\u6280\u672F\u4E0A\u7684\u539F\u56E0\u662F Parallel Scavenge \u6536\u96C6\u5668\u53CA\u540E\u9762\u63D0\u5230\u7684 G1 \u6536\u96C6\u5668\u7B49\u90FD\u6CA1\u6709\u4F7F\u7528 HotSpot \u4E2D\u539F\u672C\u8BBE\u8BA1\u7684\u5783\u573E\u6536\u96C6\u5668\u7684\u5206\u4EE3\u6846\u67B6\uFF0C\u800C\u9009\u62E9\u53E6\u5916\u72EC\u7ACB\u5B9E\u73B0\u3002Serial\u3001ParNew \u6536\u96C6\u5668\u5219\u5171\u7528\u4E86\u8FD9\u90E8\u5206\u7684\u6846\u67B6\u4EE3\u7801\uFF0C\u8BE6\u7EC6\u53EF\u53C2\u8003\uFF1A"),Sn={href:"https://blogs.oracle.com/jonthecollector/our_collectors%E3%80%82",target:"_blank",rel:"noopener noreferrer"},Gn=e("https://blogs.oracle.com/jonthecollector/our_collectors\u3002"),xn=e(),Mn=n("a",{href:"#footnote-ref22",class:"footnote-backref"},"\u21A9\uFE0E",-1),wn={id:"footnote23",class:"footnote-item"},Kn=e("\u5B98\u65B9\u4ECB\u7ECD\uFF1A"),yn={href:"http://download.oracle.com/javase/1.5.0/docs/guide/vm/gc-ergonomics.html%E3%80%82",target:"_blank",rel:"noopener noreferrer"},Pn=e("http://download.oracle.com/javase/1.5.0/docs/guide/vm/gc-ergonomics.html\u3002"),Rn=e(),Jn=n("a",{href:"#footnote-ref23",class:"footnote-backref"},"\u21A9\uFE0E",-1),Xn=o('<li id="footnote24" class="footnote-item"><p>\u9700\u8981\u8BF4\u660E\u4E00\u4E0B\uFF0CParallel Scavenge \u6536\u96C6\u5668\u67B6\u6784\u4E2D\u672C\u8EAB\u6709 PS MarkSweep \u6536\u96C6\u5668\u6765\u8FDB\u884C\u8001\u5E74\u4EE3\u6536\u96C6\uFF0C\u5E76\u975E\u76F4\u63A5\u8C03\u7528 Serial Old \u6536\u96C6\u5668\uFF0C\u4F46\u662F\u8FD9\u4E2A PS MarkSweep \u6536\u96C6\u5668\u4E0E Serial Old \u7684\u5B9E\u73B0\u51E0\u4E4E\u662F\u4E00\u6837\u7684\uFF0C\u6240\u4EE5\u5728\u5B98\u65B9\u7684\u8BB8\u591A\u8D44\u6599\u4E2D\u90FD\u662F\u76F4\u63A5\u4EE5 Serial Old \u4EE3\u66FF PS MarkSweep \u8FDB\u884C\u8BB2\u89E3\uFF0C\u8FD9\u91CC\u7B14\u8005\u4E5F\u91C7\u7528\u8FD9\u79CD\u65B9\u5F0F\u3002 <a href="#footnote-ref24" class="footnote-backref">\u21A9\uFE0E</a></p></li><li id="footnote25" class="footnote-item"><p>JEP 291\uFF1ADeprecate the Concurrent Mark Sweep(CMS)Garbage Collector\u3002 <a href="#footnote-ref25" class="footnote-backref">\u21A9\uFE0E</a></p></li><li id="footnote26" class="footnote-item"><p>JEP 304\uFF1AGarbage Collector Interface\u3002 <a href="#footnote-ref26" class="footnote-backref">\u21A9\uFE0E</a></p></li>',3),Bn={id:"footnote27",class:"footnote-item"},En=e("\u56FE\u7247\u6765\u6E90\uFF1A"),Dn={href:"https://www.infoq.com/articles/G1-One-Garbage-Collector-To-Rule-Them-All%E3%80%82",target:"_blank",rel:"noopener noreferrer"},Tn=e("https://www.infoq.com/articles/G1-One-Garbage-Collector-To-Rule-Them-All\u3002"),On=e(),An=n("a",{href:"#footnote-ref27",class:"footnote-backref"},"\u21A9\uFE0E",-1),Hn=n("li",{id:"footnote28",class:"footnote-item"},[n("p",null,[e("\u539F\u6587\u662F\uFF1AIt meets garbage collection pause time goals with a high probability, while achieving high throughput. "),n("a",{href:"#footnote-ref28",class:"footnote-backref"},"\u21A9\uFE0E")])],-1),zn={id:"footnote29",class:"footnote-item"},Zn=e("\u8D44\u6599\u6765\u6E90\uFF1A"),jn={href:"https://docs.oracle.com/en/java/javase/11/gctuning/available-collectors.html%E3%80%82",target:"_blank",rel:"noopener noreferrer"},qn=e("https://docs.oracle.com/en/java/javase/11/gctuning/available-collectors.html\u3002"),Fn=e(),Nn=n("a",{href:"#footnote-ref29",class:"footnote-backref"},"\u21A9\uFE0E",-1),Ln=n("li",{id:"footnote30",class:"footnote-item"},[n("p",null,[e("\u4EE3\u4EF7\u5C31\u662F\u5F53 CMS \u53D1\u751F Old GC \u65F6\uFF08\u6240\u6709\u6536\u96C6\u5668\u4E2D\u53EA\u6709 CMS \u6709\u9488\u5BF9\u8001\u5E74\u4EE3\u7684 Old GC\uFF09\uFF0C\u8981\u628A\u6574\u4E2A\u65B0\u751F\u4EE3\u4F5C\u4E3A GC Roots \u6765\u8FDB\u884C\u626B\u63CF\u3002 "),n("a",{href:"#footnote-ref30",class:"footnote-backref"},"\u21A9\uFE0E")])],-1),In={id:"footnote31",class:"footnote-item"},Un=e("\u4E0D\u53EF\u80FD\u4E09\u89D2\uFF1A"),Vn={href:"https://zh.wikipedia.org/wiki/%E4%B8%89%E5%85%83%E6%82%96%E8%AE%BA%E3%80%82",target:"_blank",rel:"noopener noreferrer"},Wn=e("https://zh.wikipedia.org/wiki/\u4E09\u5143\u6096\u8BBA\u3002"),Yn=e(),$n=n("a",{href:"#footnote-ref31",class:"footnote-backref"},"\u21A9\uFE0E",-1),Qn={id:"footnote32",class:"footnote-item"},ne=e("\u8FD9\u90E8\u5206\u5185\u5BB9\u7684\u64B0\u5199\u65F6\u95F4\u662F 2019 \u5E74 5 \u6708\uFF0C\u4EE5\u540E\u7684\u7248\u672C\u4E2D\u53CC\u65B9\u535A\u5F08\u53EF\u80FD\u5B58\u5728\u53D8\u6570\u3002\u76F8\u5173\u5185\u5BB9\u53EF\u53C2\u89C1\uFF1A"),ee={href:"https://bugs.openjdk.java.net/browse/JDK-8215030%E3%80%82",target:"_blank",rel:"noopener noreferrer"},ae=e("https://bugs.openjdk.java.net/browse/JDK-8215030\u3002"),se=e(),oe=n("a",{href:"#footnote-ref32",class:"footnote-backref"},"\u21A9\uFE0E",-1),te=n("li",{id:"footnote33",class:"footnote-item"},[n("p",null,[e("\u8FD9\u91CC\u4E3B\u8981\u662F\u8C03\u4F83\uFF0COpenJDK \u548C OracleJDK \u4E4B\u95F4\u7684\u5173\u7CFB\u5E76\u4E0D\u4EC5\u4EC5\u662F\u6536\u8D39\u548C\u514D\u8D39\u7684\u95EE\u9898\uFF0C\u8BE6\u60C5\u53EF\u53C2\u89C1\u672C\u4E66\u7B2C 1 \u7AE0\u3002 "),n("a",{href:"#footnote-ref33",class:"footnote-backref"},"\u21A9\uFE0E")])],-1),ie=n("li",{id:"footnote34",class:"footnote-item"},[n("p",null,[e("JEP 307\uFF1AParallel Full GC for G1\u3002 "),n("a",{href:"#footnote-ref34",class:"footnote-backref"},"\u21A9\uFE0E")])],-1),le={id:"footnote35",class:"footnote-item"},pe=e("\u8BBA\u6587\u5730\u5740\uFF1A"),re={href:"https://www.researchgate.net/publication/306112816_Shenandoah_An_open-source_concurrent_compacting_garbage_collector_for_OpenJDK%E3%80%82",target:"_blank",rel:"noopener noreferrer"},ce=e("https://www.researchgate.net/publication/306112816_Shenandoah_An_open-source_concurrent_compacting_garbage_collector_for_OpenJDK\u3002"),de=e(),ue=n("a",{href:"#footnote-ref35",class:"footnote-backref"},"\u21A9\uFE0E",-1),ve={id:"footnote36",class:"footnote-item"},fe=e("\u6B64\u4F8B\u5B50\u4E2D\u7684\u56FE\u7247\u5F15\u7528\u4E86 Aleksey Shipilev \u5728 DEVOXX 2017 \u4E0A\u7684\u4E3B\u9898\u6F14\u8BB2\uFF1A\u300AShenandoah GC Part I:The Garbage Collector That Could\u300B\uFF0C\u5730\u5740\u4E3A "),he={href:"https://shipilev.net/talks/devoxx-Nov2017-shenandoah.pdf%E3%80%82%E5%9B%A0%E6%9C%AC%E4%B9%A6%E6%98%AF%E9%BB%91%E7%99%BD%E5%8D%B0%E5%88%B7%EF%BC%8C%E9%A2%9C%E8%89%B2%E5%8F%AF%E8%83%BD%E9%9A%BE%E4%BB%A5%E5%88%86%E8%BE%A8%EF%BC%8C%E8%AF%BB%E8%80%85%E5%8F%AF%E4%BB%A5%E4%B8%8B%E8%BD%BD%E5%8E%9F%E6%96%87%E6%9F%A5%E7%9C%8B%E3%80%82",target:"_blank",rel:"noopener noreferrer"},me=e("https://shipilev.net/talks/devoxx-Nov2017-shenandoah.pdf\u3002\u56E0\u672C\u4E66\u662F\u9ED1\u767D\u5370\u5237\uFF0C\u989C\u8272\u53EF\u80FD\u96BE\u4EE5\u5206\u8FA8\uFF0C\u8BFB\u8005\u53EF\u4EE5\u4E0B\u8F7D\u539F\u6587\u67E5\u770B\u3002"),ge=e(),ke=n("a",{href:"#footnote-ref36",class:"footnote-backref"},"\u21A9\uFE0E",-1),be={id:"footnote37",class:"footnote-item"},Ce=e("\u7528\u6237\u6001\u3001\u6838\u5FC3\u6001\u662F\u4E00\u79CD\u64CD\u4F5C\u7CFB\u7EDF\u5185\u6838\u6A21\u5F0F\uFF0C\u5177\u4F53\u89C1\uFF1A"),_e={href:"https://zh.wikipedia.org/wiki/%E6%A0%B8%E5%BF%83%E6%80%81%E3%80%82",target:"_blank",rel:"noopener noreferrer"},Se=e("https://zh.wikipedia.org/wiki/\u6838\u5FC3\u6001\u3002"),Ge=e(),xe=n("a",{href:"#footnote-ref37",class:"footnote-backref"},"\u21A9\uFE0E",-1),Me=o('<li id="footnote38" class="footnote-item"><p>\u4F46\u5982\u679C\u80FD\u6709\u6765\u81EA\u64CD\u4F5C\u7CFB\u7EDF\u5185\u6838\u7684\u652F\u6301\u7684\u8BDD\uFF0C\u5C31\u4E0D\u662F\u6CA1\u6709\u529E\u6CD5\u89E3\u51B3\uFF0C\u4E1A\u754C\u516C\u8BA4\u6700\u4F18\u79C0\u7684 Azul C4 \u6536\u96C6\u5668\u5C31\u4F7F\u7528\u4E86\u8FD9\u79CD\u65B9\u6848\u3002 <a href="#footnote-ref38" class="footnote-backref">\u21A9\uFE0E</a></p></li><li id="footnote39" class="footnote-item"><p>\u5173\u4E8E\u4E34\u754C\u533A\u3001\u9501\u3001CAS \u7B49\u6982\u5FF5\uFF0C\u662F\u8BA1\u7B97\u673A\u4F53\u7CFB\u7684\u57FA\u7840\u77E5\u8BC6\uFF0C\u5982\u679C\u8BFB\u8005\u5BF9\u6B64\u4E0D\u4E86\u89E3\u7684\u8BDD\uFF0C\u53EF\u4EE5\u53C2\u8003\u7B2C 13 \u7AE0\u4E2D\u7684\u76F8\u5173\u4ECB\u7ECD\u3002 <a href="#footnote-ref39" class="footnote-backref">\u21A9\uFE0E</a></p></li><li id="footnote40" class="footnote-item"><p>Roman Kennke\uFF08JEP 189 \u7684 Owner\uFF09\uFF1AIt resolves one major point of criticism against Shenandoah, that is their expensive primitive read-barriers. <a href="#footnote-ref40" class="footnote-backref">\u21A9\uFE0E</a></p></li>',3),we={id:"footnote41",class:"footnote-item"},Ke=e("\u8D44\u6599\u6765\u6E90\uFF1A"),ye={href:"https://rkennke.wordpress.com/2019/05/15/shenandoah-gc-in-jdk13-part-i-load-reference-barriers/%E3%80%82",target:"_blank",rel:"noopener noreferrer"},Pe=e("https://rkennke.wordpress.com/2019/05/15/shenandoah-gc-in-jdk13-part-i-load-reference-barriers/\u3002"),Re=e(),Je=n("a",{href:"#footnote-ref41",class:"footnote-backref"},"\u21A9\uFE0E",-1),Xe=o('<li id="footnote42" class="footnote-item"><p>\u8BE5\u8BBA\u6587\u662F\u4EE5 2014 ~ 2015 \u5E74\u95F4\u6700\u521D\u7248\u672C\u7684 Shenandoah \u4E3A\u6D4B\u8BD5\u5BF9\u8C61\uFF0C\u5728 2017 \u5E74\uFF0CChristine Flood \u5728 JavaOne \u7684\u6F14\u8BB2\u4E2D\uFF0C\u8FDB\u884C\u4E86\u76F8\u540C\u6D4B\u8BD5\uFF0CShenandoah \u7684\u8FD0\u884C\u65F6\u95F4\u5DF2\u7ECF\u4F18\u5316\u5230 335 \u79D2\u3002\u76F8\u4FE1\u5728\u8BFB\u8005\u9605\u8BFB\u5230\u8FD9\u6BB5\u6587\u5B57\u65F6\uFF0CShenandoah \u7684\u5B9E\u9645\u8868\u73B0\u5728\u591A\u6570\u5E94\u7528\u4E2D\u5747\u4F1A\u4F18\u4E8E\u7ED3\u679C\u4E2D\u53CD\u6620\u7684\u6C34\u5E73\u3002 <a href="#footnote-ref42" class="footnote-backref">\u21A9\uFE0E</a></p></li><li id="footnote43" class="footnote-item"><p>\u8FD9\u91CC\u7684 \u201C\u5B9E\u9A8C\u6027\u8D28\u201D \u7279\u6307 ZGC \u76EE\u524D\u5C1A\u672A\u5177\u5907\u5168\u90E8\u5546\u7528\u6536\u96C6\u5668\u5E94\u6709\u7684\u7279\u5F81\uFF0C\u5982\u6682\u4E0D\u63D0\u4F9B\u5168\u5E73\u53F0\u7684\u652F\u6301\uFF08\u76EE\u524D\u4EC5\u652F\u6301 Linux / x86-64\uFF09\uFF0C\u6682\u4E0D\u652F\u6301\u7C7B\u5378\u8F7D\uFF08JDK 11 \u65F6\u4E0D\u652F\u6301\uFF0CJDK 12 \u7684 ZGC \u5DF2\u7ECF\u652F\u6301\uFF09\uFF0C\u6682\u4E0D\u652F\u6301\u65B0\u7684 Graal \u7F16\u8BD1\u5668\u914D\u5408\u5DE5\u4F5C\u7B49\uFF0C\u4F46\u8FD9\u4E9B\u5C40\u9650\u4E3B\u8981\u662F\u4EBA\u529B\u8D44\u6E90\u4E0E\u5DE5\u4F5C\u91CF\u4E0A\u7684\u9650\u5236\uFF0C\u53EF\u80FD\u8BFB\u8005\u5728\u9605\u8BFB\u5230\u8FD9\u90E8\u5206\u5185\u5BB9\u7684\u65F6\u5019\u5DF2\u7ECF\u6709\u4E86\u65B0\u7684\u53D8\u5316\u3002 <a href="#footnote-ref43" class="footnote-backref">\u21A9\uFE0E</a></p></li><li id="footnote44" class="footnote-item"><p>\u5728 JEP 333 \u4E2D\u628A ZGC \u7684 \u201C\u541E\u5410\u91CF\u4E0B\u964D\u4E0D\u5927\u201D \u660E\u786E\u91CF\u5316\u4E3A\u76F8\u6BD4\u8D77\u4F7F\u7528 G1 \u6536\u96C6\u5668\uFF0C\u541E\u5410\u91CF\u4E0B\u964D\u4E0D\u8D85\u8FC7 15%\u3002\u4E0D\u8FC7\u6839\u636E Oracle \u516C\u5F00\u7684\u73B0\u9636\u6BB5 SPECjbb 2015 \u6D4B\u8BD5\u7ED3\u679C\u6765\u770B\uFF0CZGC \u5728\u8FD9\u65B9\u9762\u8981\u6BD4 Shenandoah \u4F18\u79C0\u5F97\u591A\uFF0C\u6D4B\u5F97\u7684\u541E\u5410\u91CF\u5C45\u7136\u6BD4 G1 \u8FD8\u9AD8\uFF0C\u751A\u81F3\u5DF2\u7ECF\u63A5\u8FD1\u4E86 Parallel Scavenge \u7684\u6210\u7EE9\u3002 <a href="#footnote-ref44" class="footnote-backref">\u21A9\uFE0E</a></p></li><li id="footnote45" class="footnote-item"><p>1EB = 1024PB\uFF0C1PB = 1024TB\u3002 <a href="#footnote-ref45" class="footnote-backref">\u21A9\uFE0E</a></p></li><li id="footnote46" class="footnote-item"><p>AMD64 \u8FD9\u4E2A\u540D\u5B57\u7684\u610F\u601D\u4E0D\u662F\u6307\u53EA\u6709 AMD \u7684\u5904\u7406\u5668\u4F7F\u7528\uFF0C\u5B83\u5C31\u662F\u73B0\u5728\u4E3B\u6D41\u7684 x86-64 \u67B6\u6784\uFF0C\u7531\u4E8E Intel Itanium \u7684\u5931\u8D25\uFF0C\u73B0\u884C\u7684 64 \u4F4D\u6807\u51C6\u662F\u7531 AMD \u516C\u53F8\u7387\u5148\u5236\u5B9A\u7684\uFF0CIntel \u901A\u8FC7\u4EA4\u53C9\u6388\u6743\u83B7\u5F97\u8BE5\u6807\u51C6\u7684\u6388\u6743\uFF0C\u6240\u4EE5\u53EB\u4F5C AMD64\u3002 <a href="#footnote-ref46" class="footnote-backref">\u21A9\uFE0E</a></p></li><li id="footnote47" class="footnote-item"><p>JDK 13 \u8BA1\u5212\u662F\u8981\u6269\u5C55\u5230\u6700\u5927\u652F\u6301 16TB \u7684\uFF0C\u672C\u7AE0\u64B0\u5199\u65F6 JDK 13 \u5C1A\u672A\u6B63\u5F0F\u53D1\u5E03\uFF0C\u8FD8\u6CA1\u6709\u660E\u786E\u53EF\u9760\u7684\u4FE1\u606F\uFF0C\u6240\u4EE5\u8FD9\u91CC\u6309\u7167 ZGC \u76EE\u524D\u7684\u72B6\u6001\u6765\u4ECB\u7ECD\u3002 <a href="#footnote-ref47" class="footnote-backref">\u21A9\uFE0E</a></p></li><li id="footnote48" class="footnote-item"><p>\u6B64\u56FE\u7247\u4EE5\u53CA\u540E\u7EED\u5173\u4E8E ZGC \u6267\u884C\u9636\u6BB5\u7684\u51E0\u5F20\u56FE\u7247\uFF0C\u5747\u6765\u81EA Per Liden \u5728 Jfokus VM 2018 \u5927\u4F1A\u4E0A\u7684\u6F14\u8BB2\uFF1A\u300AThe Z Garbage Collector:Low Latency GC for OpenJDK\u300B\u3002 <a href="#footnote-ref48" class="footnote-backref">\u21A9\uFE0E</a></p></li>',7),Be={id:"footnote49",class:"footnote-item"},Ee=e("\u9875\u9762\u5730\u5740\uFF1A"),De={href:"https://openjdk.java.net/jeps/333%E3%80%82",target:"_blank",rel:"noopener noreferrer"},Te=e("https://openjdk.java.net/jeps/333\u3002"),Oe=e(),Ae=n("a",{href:"#footnote-ref49",class:"footnote-backref"},"\u21A9\uFE0E",-1),He=o('<li id="footnote50" class="footnote-item"><p>\u5B9E\u9645\u4E0A\u73B0\u4EE3\u7684 x86 \u64CD\u4F5C\u7CFB\u7EDF\u4E2D\u7684\u865A\u62DF\u5730\u5740\u662F\u64CD\u4F5C\u7CFB\u7EDF\u52A0\u786C\u4EF6\u4E24\u7EA7\u7FFB\u8BD1\u7684\uFF0C\u5728\u8FDB\u7A0B\u4E2D\u8BBF\u95EE\u7684\u903B\u8F91\u5730\u5740\u8981\u901A\u8FC7 MMU \u4E2D\u7684\u5206\u6BB5\u5355\u5143\u7FFB\u8BD1\u4E3A\u7EBF\u6027\u5730\u5740\uFF0C\u7136\u540E\u518D\u901A\u8FC7\u5206\u9875\u5355\u5143\u7FFB\u8BD1\u6210\u7269\u7406\u5730\u5740\u3002\u8FD9\u90E8\u5206\u5E76\u975E\u672C\u4E66\u6240\u5173\u6CE8\u7684\u8BDD\u9898\uFF0C\u8BFB\u8005\u7B80\u5355\u4E86\u89E3\u5373\u53EF\u3002 <a href="#footnote-ref50" class="footnote-backref">\u21A9\uFE0E</a></p></li><li id="footnote51" class="footnote-item"><p>\u5982\u679C\u4E0D\u662F\u7531\u4E8E\u4E24\u4E2A\u9636\u6BB5\u5408\u5E76\u8003\u8651\uFF0C\u5176\u5B9E\u505A\u91CD\u6620\u5C04\u4E0D\u9700\u8981\u6309\u7167\u5BF9\u8C61\u56FE\u7684\u987A\u5E8F\u53BB\u505A\uFF0C\u53EA\u9700\u7EBF\u6027\u5730\u626B\u63CF\u6574\u4E2A\u5806\u6765\u6E05\u7406\u65E7\u5F15\u7528\u5373\u53EF\u3002 <a href="#footnote-ref51" class="footnote-backref">\u21A9\uFE0E</a></p></li><li id="footnote52" class="footnote-item"><p>\u7B14\u8005\u5FC3\u4E2D\u7684\u8BCD\u8BED\u5176\u5B9E\u662F \u201C\u4E00\u6A21\u4E00\u6837\u201D\uFF0C\u53EA\u662F\u8FD9\u600E\u4E48\u542C\u8D77\u6765\u4F3C\u4E4E\u50CF\u662F\u5BF9 Oracle \u7684\u5632\u8BBD\uFF1FOracle \u516C\u53F8\u4E5F\u5E76\u672A\u5728\u4EFB\u4F55\u516C\u5F00\u8D44\u6599\u4E2D\u627F\u8BA4\u53C2\u8003\u8FC7 Azul System \u7684\u8BBA\u6587\u6216\u8005\u5B9E\u73B0\u3002 <a href="#footnote-ref52" class="footnote-backref">\u21A9\uFE0E</a></p></li>',3),ze={id:"footnote53",class:"footnote-item"},Ze=e("\u6839\u636E Per Liden \u7684\u89E3\u91CA\uFF0C\u76EE\u524D ZGC \u4E0D\u5206\u4EE3\u5B8C\u5168\u662F\u4ECE\u8282\u7701\u5DE5\u4F5C\u91CF\u89D2\u5EA6\u6240\u505A\u51FA\u7684\u9009\u62E9\uFF0C\u5E76\u975E\u5355\u7EAF\u6280\u672F\u4E0A\u7684\u6743\u8861\u3002\u6765\u6E90\uFF1A"),je={href:"https://www.zhihu.com/question/287945354/answer/458761494%E3%80%82",target:"_blank",rel:"noopener noreferrer"},qe=e("https://www.zhihu.com/question/287945354/answer/458761494\u3002"),Fe=e(),Ne=n("a",{href:"#footnote-ref53",class:"footnote-backref"},"\u21A9\uFE0E",-1),Le={id:"footnote54",class:"footnote-item"},Ie=e("\u88F8\u6676\u8FD9\u4E2A\u540D\u5B57\u7528\u7684\u8F83\u5C11\uFF0C\u901A\u5E38\u90FD\u76F4\u63A5\u79F0\u547C\u4E3A DIE\uFF1A"),Ue={href:"https://en.wikipedia.org/wiki/Die_(integrated_circuit)%E3%80%82",target:"_blank",rel:"noopener noreferrer"},Ve=e("https://en.wikipedia.org/wiki/Die_(integrated_circuit)\u3002"),We=e(),Ye=n("a",{href:"#footnote-ref54",class:"footnote-backref"},"\u21A9\uFE0E",-1),$e=n("li",{id:"footnote55",class:"footnote-item"},[n("p",null,[e('\u5F53 "JEP 345\uFF1ANUMA-Aware Memory Allocation for G1" \u88AB\u7EB3\u5165\u67D0\u4E2A\u7248\u672C\u7684 JDK \u53D1\u5E03\u8303\u56F4\u540E\uFF0CG1 \u4E5F\u4F1A\u652F\u6301 NUMA \u5206\u914D\u3002 '),n("a",{href:"#footnote-ref55",class:"footnote-backref"},"\u21A9\uFE0E")])],-1),Qe=n("li",{id:"footnote56",class:"footnote-item"},[n("p",null,[e("\u6570\u636E\u6765\u81EA Jfokus VM 2018 \u4E2D Per liden \u7684\u6F14\u8BB2\u300AThe Z Garbage Collector: Low Latency GC for OpenJDK\u300B\u3002 "),n("a",{href:"#footnote-ref56",class:"footnote-backref"},"\u21A9\uFE0E")])],-1),na={id:"footnote57",class:"footnote-item"},ea={href:"http://spec.org/jbb2015/%E3%80%82",target:"_blank",rel:"noopener noreferrer"},aa=e("http://spec.org/jbb2015/\u3002"),sa=e(),oa=n("a",{href:"#footnote-ref57",class:"footnote-backref"},"\u21A9\uFE0E",-1),ta=n("li",{id:"footnote58",class:"footnote-item"},[n("p",null,[e("Critical Throughput \u5C31\u662F\u8981\u6C42\u6700\u5927\u5EF6\u8FDF\u4E0D\u8D85\u8FC7\u67D0\u4E2A\u8BBE\u7F6E\u503C\uFF0810 \u6BEB\u79D2\u5230 100 \u6BEB\u79D2\uFF09\u4E0B\u6D4B\u5F97\u7684\u541E\u5410\u91CF\u3002 "),n("a",{href:"#footnote-ref58",class:"footnote-backref"},"\u21A9\uFE0E")])],-1),ia=n("li",{id:"footnote59",class:"footnote-item"},[n("p",null,[e("\u5373\u65F6\u7F16\u8BD1\u5668\u7684\u6808\u4E0A\u5206\u914D\u4F18\u5316\u53EF\u53C2\u89C1\u7B2C 11 \u7AE0\u3002 "),n("a",{href:"#footnote-ref59",class:"footnote-backref"},"\u21A9\uFE0E")])],-1);function la(pa,ra){const a=i("ExternalLinkIcon");return l(),p("div",null,[z,n("section",Z,[n("ol",j,[q,n("li",F,[n("p",null,[N,n("a",L,[I,s(a)]),U,V])]),n("li",W,[n("p",null,[Y,n("a",$,[Q,s(a)]),nn,en])]),an,n("li",sn,[n("p",null,[on,n("a",tn,[ln,s(a)]),pn,rn])]),cn,dn,n("li",un,[n("p",null,[vn,n("a",fn,[hn,s(a)]),mn,gn])]),kn,bn,n("li",Cn,[n("p",null,[_n,n("a",Sn,[Gn,s(a)]),xn,Mn])]),n("li",wn,[n("p",null,[Kn,n("a",yn,[Pn,s(a)]),Rn,Jn])]),Xn,n("li",Bn,[n("p",null,[En,n("a",Dn,[Tn,s(a)]),On,An])]),Hn,n("li",zn,[n("p",null,[Zn,n("a",jn,[qn,s(a)]),Fn,Nn])]),Ln,n("li",In,[n("p",null,[Un,n("a",Vn,[Wn,s(a)]),Yn,$n])]),n("li",Qn,[n("p",null,[ne,n("a",ee,[ae,s(a)]),se,oe])]),te,ie,n("li",le,[n("p",null,[pe,n("a",re,[ce,s(a)]),de,ue])]),n("li",ve,[n("p",null,[fe,n("a",he,[me,s(a)]),ge,ke])]),n("li",be,[n("p",null,[Ce,n("a",_e,[Se,s(a)]),Ge,xe])]),Me,n("li",we,[n("p",null,[Ke,n("a",ye,[Pe,s(a)]),Re,Je])]),Xe,n("li",Be,[n("p",null,[Ee,n("a",De,[Te,s(a)]),Oe,Ae])]),He,n("li",ze,[n("p",null,[Ze,n("a",je,[qe,s(a)]),Fe,Ne])]),n("li",Le,[n("p",null,[Ie,n("a",Ue,[Ve,s(a)]),We,Ye])]),$e,Qe,n("li",na,[n("p",null,[n("a",ea,[aa,s(a)]),sa,oa])]),ta,ia])])])}var ua=t(H,[["render",la],["__file","\u7B2C3\u7AE0\u5783\u573E\u6536\u96C6\u5668\u4E0E\u5185\u5B58\u5206\u914D\u7B56\u7565.html.vue"]]);export{ua as default};
