import{_ as n}from"./plugin-vue_export-helper.21dcd24c.js";import{o as s,c as a,e}from"./app.0d56c066.js";var t="/assets/\u56FE11-1.4889a4f1.png",p="/assets/\u886811-1.88c111dc.png",c="/assets/\u56FE11-2.9096067d.png";const i={},o=e(`<h1 id="\u7B2C-11-\u7AE0-java-\u5E76\u53D1\u7F16\u7A0B\u5B9E\u8DF5" tabindex="-1"><a class="header-anchor" href="#\u7B2C-11-\u7AE0-java-\u5E76\u53D1\u7F16\u7A0B\u5B9E\u8DF5" aria-hidden="true">#</a> \u7B2C 11 \u7AE0 Java \u5E76\u53D1\u7F16\u7A0B\u5B9E\u8DF5</h1><p>\u5F53\u4F60\u5728\u8FDB\u884C\u5E76\u53D1\u7F16\u7A0B\u65F6\uFF0C\u770B\u7740\u7A0B\u5E8F\u7684\u6267\u884C\u901F\u5EA6\u5728\u81EA\u5DF1\u7684\u4F18\u5316\u4E0B\u8FD0\u884C\u5F97\u8D8A\u6765\u8D8A\u5FEB\uFF0C\u4F60\u4F1A\u89C9\u5F97\u8D8A\u6765\u8D8A\u6709\u6210\u5C31\u611F\uFF0C\u8FD9\u5C31\u662F\u5E76\u53D1\u7F16\u7A0B\u7684\u9B45\u529B\u3002\u4F46\u4E0E\u6B64\u540C\u65F6\uFF0C\u5E76\u53D1\u7F16\u7A0B\u4EA7\u751F\u7684\u95EE\u9898\u548C\u98CE\u9669\u53EF\u80FD\u4E5F\u4F1A\u968F\u4E4B\u800C\u6765\u3002\u672C\u7AE0\u5148\u4ECB\u7ECD\u51E0\u4E2A\u5E76\u53D1\u7F16\u7A0B\u7684\u5B9E\u6218\u6848\u4F8B\uFF0C\u7136\u540E\u518D\u4ECB\u7ECD\u5982\u4F55\u6392\u67E5\u5E76\u53D1\u7F16\u7A0B\u9020\u6210\u7684\u95EE\u9898\u3002</p><h2 id="_11-1-\u751F\u4EA7\u8005\u548C\u6D88\u8D39\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_11-1-\u751F\u4EA7\u8005\u548C\u6D88\u8D39\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 11.1 \u751F\u4EA7\u8005\u548C\u6D88\u8D39\u8005\u6A21\u5F0F</h2><p>\u5728\u5E76\u53D1\u7F16\u7A0B\u4E2D\u4F7F\u7528\u751F\u4EA7\u8005\u548C\u6D88\u8D39\u8005\u6A21\u5F0F\u80FD\u591F\u89E3\u51B3\u7EDD\u5927\u591A\u6570\u5E76\u53D1\u95EE\u9898\u3002\u8BE5\u6A21\u5F0F\u901A\u8FC7\u5E73\u8861\u751F\u4EA7\u7EBF\u7A0B\u548C\u6D88\u8D39\u7EBF\u7A0B\u7684\u5DE5\u4F5C\u80FD\u529B\u6765\u63D0\u9AD8\u7A0B\u5E8F\u6574\u4F53\u5904\u7406\u6570\u636E\u7684\u901F\u5EA6\u3002</p><p>\u5728\u7EBF\u7A0B\u4E16\u754C\u91CC\uFF0C\u751F\u4EA7\u8005\u5C31\u662F\u751F\u4EA7\u6570\u636E\u7684\u7EBF\u7A0B\uFF0C\u6D88\u8D39\u8005\u5C31\u662F\u6D88\u8D39\u6570\u636E\u7684\u7EBF\u7A0B\u3002\u5728\u591A\u7EBF\u7A0B\u5F00\u53D1\u4E2D\uFF0C\u5982\u679C\u751F\u4EA7\u8005\u5904\u7406\u901F\u5EA6\u5F88\u5FEB\uFF0C\u800C\u6D88\u8D39\u8005\u5904\u7406\u901F\u5EA6\u5F88\u6162\uFF0C\u90A3\u4E48\u751F\u4EA7\u8005\u5C31\u5FC5\u987B\u7B49\u5F85\u6D88\u8D39\u8005\u5904\u7406\u5B8C\uFF0C\u624D\u80FD\u7EE7\u7EED\u751F\u4EA7\u6570\u636E\u3002\u540C\u6837\u7684\u9053\u7406\uFF0C\u5982\u679C\u6D88\u8D39\u8005\u7684\u5904\u7406\u80FD\u529B\u5927\u4E8E\u751F\u4EA7\u8005\uFF0C\u90A3\u4E48\u6D88\u8D39\u8005\u5C31\u5FC5\u987B\u7B49\u5F85\u751F\u4EA7\u8005\u3002\u4E3A\u4E86\u89E3\u51B3\u8FD9\u79CD\u751F\u4EA7\u6D88\u8D39\u80FD\u529B\u4E0D\u5747\u8861\u7684\u95EE\u9898\uFF0C\u4FBF\u6709\u4E86\u751F\u4EA7\u8005\u548C\u6D88\u8D39\u8005\u6A21\u5F0F\u3002</p><p><strong>\u4EC0\u4E48\u662F\u751F\u4EA7\u8005\u548C\u6D88\u8D39\u8005\u6A21\u5F0F</strong></p><p>\u751F\u4EA7\u8005\u548C\u6D88\u8D39\u8005\u6A21\u5F0F\u662F\u901A\u8FC7\u4E00\u4E2A\u5BB9\u5668\u6765\u89E3\u51B3\u751F\u4EA7\u8005\u548C\u6D88\u8D39\u8005\u7684\u5F3A\u8026\u5408\u95EE\u9898\u3002\u751F\u4EA7\u8005\u548C\u6D88\u8D39\u8005\u5F7C\u6B64\u4E4B\u95F4\u4E0D\u76F4\u63A5\u901A\u4FE1\uFF0C\u800C\u662F\u901A\u8FC7\u963B\u585E\u961F\u5217\u6765\u8FDB\u884C\u901A\u4FE1\uFF0C\u6240\u4EE5\u751F\u4EA7\u8005\u751F\u4EA7\u5B8C\u6570\u636E\u4E4B\u540E\u4E0D\u7528\u7B49\u5F85\u6D88\u8D39\u8005\u5904\u7406\uFF0C\u76F4\u63A5\u6254\u7ED9\u963B\u585E\u961F\u5217\uFF0C\u6D88\u8D39\u8005\u4E0D\u627E\u751F\u4EA7\u8005\u8981\u6570\u636E\uFF0C\u800C\u662F\u76F4\u63A5\u4ECE\u963B\u585E\u961F\u5217\u91CC\u53D6\uFF0C\u963B\u585E\u961F\u5217\u5C31\u76F8\u5F53\u4E8E\u4E00\u4E2A\u7F13\u51B2\u533A\uFF0C\u5E73\u8861\u4E86\u751F\u4EA7\u8005\u548C\u6D88\u8D39\u8005\u7684\u5904\u7406\u80FD\u529B\u3002</p><p>\u8FD9\u4E2A\u963B\u585E\u961F\u5217\u5C31\u662F\u7528\u6765\u7ED9\u751F\u4EA7\u8005\u548C\u6D88\u8D39\u8005\u89E3\u8026\u7684\u3002\u7EB5\u89C2\u5927\u591A\u6570\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u90FD\u4F1A\u627E\u4E00\u4E2A\u7B2C\u4E09\u8005\u51FA\u6765\u8FDB\u884C\u89E3\u8026\uFF0C\u5982\u5DE5\u5382\u6A21\u5F0F\u7684\u7B2C\u4E09\u8005\u662F\u5DE5\u5382\u7C7B\uFF0C\u6A21\u677F\u6A21\u5F0F\u7684\u7B2C\u4E09\u8005\u662F\u6A21\u677F\u7C7B\u3002\u5728\u5B66\u4E60\u4E00\u4E9B\u8BBE\u8BA1\u6A21\u5F0F\u7684\u8FC7\u7A0B\u4E2D\uFF0C\u5148\u627E\u5230\u8FD9\u4E2A\u6A21\u5F0F\u7684\u7B2C\u4E09\u8005\uFF0C\u80FD\u5E2E\u52A9\u6211\u4EEC\u5FEB\u901F\u719F\u6089\u4E00\u4E2A\u8BBE\u8BA1\u6A21\u5F0F\u3002</p><h3 id="_11-1-1-\u751F\u4EA7\u8005\u6D88\u8D39\u8005\u6A21\u5F0F\u5B9E\u6218" tabindex="-1"><a class="header-anchor" href="#_11-1-1-\u751F\u4EA7\u8005\u6D88\u8D39\u8005\u6A21\u5F0F\u5B9E\u6218" aria-hidden="true">#</a> 11.1.1 \u751F\u4EA7\u8005\u6D88\u8D39\u8005\u6A21\u5F0F\u5B9E\u6218</h3><p>\u6211\u548C\u540C\u4E8B\u4E00\u8D77\u5229\u7528\u4E1A\u4F59\u65F6\u95F4\u5F00\u53D1\u7684 Yuna \u5DE5\u5177\u4E2D\u4F7F\u7528\u4E86\u751F\u4EA7\u8005\u548C\u6D88\u8D39\u8005\u6A21\u5F0F\u3002\u6211\u5148\u4ECB\u7ECD\u4E0B Yuna<sup class="footnote-ref"><a href="#footnote1">[1]</a><a class="footnote-anchor" id="footnote-ref1"></a></sup>\u5DE5\u5177\uFF0C\u5728\u963F\u91CC\u5DF4\u5DF4\u5F88\u591A\u540C\u4E8B\u90FD\u559C\u6B22\u901A\u8FC7\u90AE\u4EF6\u5206\u4EAB\u6280\u672F\u6587\u7AE0\uFF0C\u56E0\u4E3A\u901A\u8FC7\u90AE\u4EF6\u5206\u4EAB\u5F88\u65B9\u4FBF\uFF0C\u5927\u5BB6\u5728\u7F51\u4E0A\u770B\u5230\u597D\u7684\u6280\u672F\u6587\u7AE0\uFF0C\u6267\u884C\u590D\u5236 -&gt; \u7C98\u8D34 -&gt; \u53D1\u9001\u5C31\u5B8C\u6210\u4E86\u4E00\u6B21\u5206\u4EAB\uFF0C\u4F46\u662F\u6211\u53D1\u73B0\u6280\u672F\u6587\u7AE0\u4E0D\u80FD\u6C89\u6DC0\u4E0B\u6765\uFF0C\u65B0\u6765\u7684\u540C\u4E8B\u770B\u4E0D\u5230\u4EE5\u524D\u5206\u4EAB\u7684\u6280\u672F\u6587\u7AE0\uFF0C\u5927\u5BB6\u4E5F\u5F88\u96BE\u627E\u5230\u4EE5\u524D\u5206\u4EAB\u8FC7\u7684\u6280\u672F\u6587\u7AE0\u3002\u4E3A\u4E86\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\uFF0C\u6211\u4EEC\u5F00\u53D1\u4E86\u4E00\u4E2A Yuna \u5DE5\u5177\u3002</p><p>\u6211\u4EEC\u7533\u8BF7\u4E86\u4E00\u4E2A\u4E13\u95E8\u7528\u6765\u6536\u96C6\u5206\u4EAB\u90AE\u4EF6\u7684\u90AE\u7BB1\uFF0C\u6BD4\u5982 <a href="mailto:share@alibaba.com">share@alibaba.com</a>\uFF0C\u5927\u5BB6\u5C06\u5206\u4EAB\u7684\u6587\u7AE0\u53D1\u9001\u5230\u8FD9\u4E2A\u90AE\u7BB1\uFF0C\u8BA9\u5927\u5BB6\u6BCF\u6B21\u90FD\u6284\u9001\u5230\u8FD9\u4E2A\u90AE\u7BB1\u80AF\u5B9A\u5F88\u9EBB\u70E6\uFF0C\u6240\u4EE5\u6211\u4EEC\u7684\u505A\u6CD5\u662F\u5C06\u8FD9\u4E2A\u90AE\u7BB1\u5730\u5740\u653E\u5728\u90E8\u95E8\u90AE\u4EF6\u5217\u8868\u91CC\uFF0C\u6240\u4EE5\u5206\u4EAB\u7684\u540C\u4E8B\u53EA\u9700\u8981\u548C\u4EE5\u524D\u4E00\u6837\u5411\u6574\u4E2A\u90E8\u95E8\u5206\u4EAB\u6587\u7AE0\u5C31\u884C\u3002Yuna \u5DE5\u5177\u901A\u8FC7\u8BFB\u53D6\u90AE\u4EF6\u670D\u52A1\u5668\u91CC\u8BE5\u90AE\u7BB1\u7684\u90AE\u4EF6\uFF0C\u628A\u6240\u6709\u5206\u4EAB\u7684\u90AE\u4EF6\u4E0B\u8F7D\u4E0B\u6765\uFF0C\u5305\u62EC\u90AE\u4EF6\u7684\u9644\u4EF6\u3001\u56FE\u7247\u548C\u90AE\u4EF6\u56DE\u590D\u3002\u56E0\u4E3A\u6211\u4EEC\u53EF\u80FD\u4F1A\u4ECE\u8FD9\u4E2A\u90AE\u7BB1\u91CC\u4E0B\u8F7D\u5230\u4E00\u4E9B\u975E\u5206\u4EAB\u7684\u6587\u7AE0\uFF0C\u6240\u4EE5\u6211\u4EEC\u8981\u6C42\u5206\u4EAB\u7684\u90AE\u4EF6\u6807\u9898\u5FC5\u987B\u5E26\u6709\u4E00\u4E2A\u5173\u952E\u5B57\uFF0C\u6BD4\u5982 \u201C\u5185\u8D38\u6280\u672F\u5206\u4EAB\u201D\u3002\u4E0B\u8F7D\u5B8C\u90AE\u4EF6\u4E4B\u540E\uFF0C\u901A\u8FC7 confluence \u7684 Web Service \u63A5\u53E3\uFF0C\u628A\u6587\u7AE0\u63D2\u5165\u5230 confluence \u91CC\uFF0C\u8FD9\u6837\u65B0\u540C\u4E8B\u5C31\u53EF\u4EE5\u5728 confluence \u91CC\u770B\u4EE5\u524D\u5206\u4EAB\u8FC7\u7684\u6587\u7AE0\u4E86\uFF0C\u5E76\u4E14 Yuna \u5DE5\u5177\u8FD8\u53EF\u4EE5\u81EA\u52A8\u628A\u6587\u7AE0\u8FDB\u884C\u5206\u7C7B\u548C\u5F52\u6863\u3002</p><p>\u4E3A\u4E86\u5FEB\u901F\u4E0A\u7EBF\u8BE5\u529F\u80FD\uFF0C\u5F53\u65F6\u6211\u4EEC\u82B1\u4E86 3 \u5929\u4E1A\u4F59\u65F6\u95F4\u5FEB\u901F\u5F00\u53D1\u4E86 Yuna 1.0 \u7248\u672C\u3002\u5728 1.0 \u7248\u672C\u4E2D\u5E76\u6CA1\u6709\u4F7F\u7528\u751F\u4EA7\u8005\u6D88\u8D39\u6A21\u5F0F\uFF0C\u800C\u662F\u4F7F\u7528\u5355\u7EBF\u7A0B\u6765\u5904\u7406\uFF0C\u56E0\u4E3A\u5F53\u65F6\u53EA\u9700\u8981\u5904\u7406\u6211\u4EEC\u4E00\u4E2A\u90E8\u95E8\u7684\u90AE\u4EF6\uFF0C\u6240\u4EE5\u5355\u7EBF\u7A0B\u660E\u663E\u591F\u7528\uFF0C\u6574\u4E2A\u8FC7\u7A0B\u662F\u4E32\u884C\u6267\u884C\u7684\u3002\u5728\u4E00\u4E2A\u7EBF\u7A0B\u91CC\uFF0C\u7A0B\u5E8F\u5148\u62BD\u53D6\u5168\u90E8\u7684\u90AE\u4EF6\uFF0C\u8F6C\u5316\u4E3A\u6587\u7AE0\u5BF9\u8C61\uFF0C\u7136\u540E\u6DFB\u52A0\u5168\u90E8\u7684\u6587\u7AE0\uFF0C\u6700\u540E\u5220\u9664\u62BD\u53D6\u8FC7\u7684\u90AE\u4EF6\u3002\u4EE3\u7801\u5982\u4E0B\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">extract</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F00\u59CB&quot;</span> <span class="token operator">+</span> <span class="token function">getExtractorName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u3002\u3002&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u62BD\u53D6\u90AE\u4EF6</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Article</span><span class="token punctuation">&gt;</span></span> articles <span class="token operator">=</span> <span class="token function">extractEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u6DFB\u52A0\u6587\u7AE0</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Article</span> article <span class="token operator">:</span> articles<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token function">addArticleOrComment</span><span class="token punctuation">(</span>article<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// \u6E05\u7A7A\u90AE\u4EF6</span>
    <span class="token function">cleanEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u5B8C\u6210&quot;</span> <span class="token operator">+</span> <span class="token function">getExtractorName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u3002\u3002&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Yuna \u5DE5\u5177\u5728\u63A8\u5E7F\u540E\uFF0C\u8D8A\u6765\u8D8A\u591A\u7684\u90E8\u95E8\u4F7F\u7528\u8FD9\u4E2A\u5DE5\u5177\uFF0C\u5904\u7406\u7684\u65F6\u95F4\u8D8A\u6765\u8D8A\u6162\uFF0CYuna \u662F\u6BCF\u9694 5 \u5206\u949F\u8FDB\u884C\u4E00\u6B21\u62BD\u53D6\u7684\uFF0C\u800C\u5F53\u90AE\u4EF6\u591A\u7684\u65F6\u5019\u4E00\u6B21\u5904\u7406\u53EF\u80FD\u5C31\u82B1\u4E86\u51E0\u5206\u949F\uFF0C\u4E8E\u662F\u6211\u5728 Yuna 2.0 \u7248\u672C\u91CC\u4F7F\u7528\u4E86\u751F\u4EA7\u8005\u6D88\u8D39\u8005\u6A21\u5F0F\u6765\u5904\u7406\u90AE\u4EF6\uFF0C\u9996\u5148\u751F\u4EA7\u8005\u7EBF\u7A0B\u6309\u4E00\u5B9A\u7684\u89C4\u5219\u53BB\u90AE\u4EF6\u7CFB\u7EDF\u91CC\u62BD\u53D6\u90AE\u4EF6\uFF0C\u7136\u540E\u5B58\u653E\u5728\u963B\u585E\u961F\u5217\u91CC\uFF0C\u6D88\u8D39\u8005\u4ECE\u963B\u585E\u961F\u5217\u91CC\u53D6\u51FA\u6587\u7AE0\u540E\u63D2\u5165\u5230 confluence \u91CC\u3002\u4EE3\u7801\u5982\u4E0B\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QuickEmailToWikiExtractor</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExtractor</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">ThreadPoolExecutor</span> threadsPool<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">ArticleBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ExchangeEmailShallowDTO</span><span class="token punctuation">&gt;</span></span> emailQueue<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">QuickEmailToWikiExtractor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        emailQueue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArticleBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ExchangeEmailShallowDTO</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> corePoolSize <span class="token operator">=</span> <span class="token class-name">Runtime</span><span class="token punctuation">.</span><span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">availableProcessors</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
        threadsPool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span>corePoolSize<span class="token punctuation">,</span> corePoolSize<span class="token punctuation">,</span> <span class="token number">10l</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">LinkedBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Runnable</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">extract</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F00\u59CB&quot;</span> <span class="token operator">+</span> <span class="token function">getExtractorName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u3002\u3002&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u62BD\u53D6\u6240\u6709\u90AE\u4EF6\u653E\u5230\u961F\u5217\u91CC</span>
        <span class="token keyword">new</span> <span class="token class-name">ExtractEmailTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u628A\u961F\u5217\u91CC\u7684\u6587\u7AE0\u63D2\u5165\u5230 Wiki </span>
        <span class="token function">insertToWiki</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> cost <span class="token operator">=</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u5B8C\u6210&quot;</span> <span class="token operator">+</span> <span class="token function">getExtractorName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\uFF0C\u82B1\u8D39\u65F6\u95F4\uFF1A&quot;</span> <span class="token operator">+</span> cost <span class="token operator">+</span> <span class="token string">&quot;\u79D2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * \u628A\u961F\u5217\u91CC\u7684\u6587\u7AE0\u63D2\u5165\u5230 Wiki
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">insertToWiki</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u767B\u5F55 Wiki\uFF0C\u6BCF\u95F4\u9694\u4E00\u6BB5\u65F6\u95F4\u9700\u8981\u767B\u5F55\u4E00\u6B21</span>
        confluenceService<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">RuleFactory</span><span class="token punctuation">.</span>USER_NAME<span class="token punctuation">,</span> <span class="token class-name">RuleFactory</span><span class="token punctuation">.</span>PASSWORD<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 2 \u79D2\u5185\u53D6\u4E0D\u5230\u5C31\u9000\u51FA</span>
            <span class="token class-name">ExchangeEmailShallowDTO</span> email <span class="token operator">=</span> emailQueue<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>email <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            threadsPool<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">insertToWikiTask</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Article</span><span class="token punctuation">&gt;</span></span> <span class="token function">extractEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ExchangeEmailShallowDTO</span><span class="token punctuation">&gt;</span></span> allEmails <span class="token operator">=</span> <span class="token function">getEmailService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">queryAllEmails</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>allEmails <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ExchangeEmailShallowDTO</span> exchangeEmailShallowDTO <span class="token operator">:</span> allEmails<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            emailQueue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>exchangeEmailShallowDTO<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * \u62BD\u53D6\u90AE\u4EF6\u4EFB\u52A1
     *
     * <span class="token keyword">@author</span> tengfei.fangtf
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExtractEmailTask</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">extractEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE3\u7801\u7684\u6267\u884C\u903B\u8F91\u662F\uFF0C\u751F\u4EA7\u8005\u542F\u52A8\u4E00\u4E2A\u7EBF\u7A0B\u628A\u6240\u6709\u90AE\u4EF6\u5168\u90E8\u62BD\u53D6\u5230\u961F\u5217\u4E2D\uFF0C\u6D88\u8D39\u8005\u542F\u52A8 CPU * 2 \u4E2A\u7EBF\u7A0B\u6570\u5904\u7406\u90AE\u4EF6\uFF0C\u4ECE\u4E4B\u524D\u7684\u5355\u7EBF\u7A0B\u5904\u7406\u90AE\u4EF6\u53D8\u6210\u4E86\u73B0\u5728\u7684\u591A\u7EBF\u7A0B\u5904\u7406\uFF0C\u5E76\u4E14\u62BD\u53D6\u90AE\u4EF6\u7684\u7EBF\u7A0B\u4E0D\u9700\u8981\u7B49\u5904\u7406\u90AE\u4EF6\u7684\u7EBF\u7A0B\u5904\u7406\u5B8C\u518D\u62BD\u53D6\u65B0\u90AE\u4EF6\uFF0C\u6240\u4EE5\u4F7F\u7528\u4E86\u751F\u4EA7\u8005\u548C\u6D88\u8D39\u8005\u6A21\u5F0F\u540E\uFF0C\u90AE\u4EF6\u7684\u6574\u4F53\u5904\u7406\u901F\u5EA6\u6BD4\u4EE5\u524D\u8981\u5FEB\u4E86\u51E0\u500D\u3002</p><h3 id="_11-1-2-\u591A\u751F\u4EA7\u8005\u548C\u591A\u6D88\u8D39\u8005\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_11-1-2-\u591A\u751F\u4EA7\u8005\u548C\u591A\u6D88\u8D39\u8005\u573A\u666F" aria-hidden="true">#</a> 11.1.2 \u591A\u751F\u4EA7\u8005\u548C\u591A\u6D88\u8D39\u8005\u573A\u666F</h3><p>\u5728\u591A\u6838\u65F6\u4EE3\uFF0C\u591A\u7EBF\u7A0B\u5E76\u53D1\u5904\u7406\u901F\u5EA6\u6BD4\u5355\u7EBF\u7A0B\u5904\u7406\u901F\u5EA6\u66F4\u5FEB\uFF0C\u6240\u4EE5\u53EF\u4EE5\u4F7F\u7528\u591A\u4E2A\u7EBF\u7A0B\u6765\u751F\u4EA7\u6570\u636E\uFF0C\u540C\u6837\u53EF\u4EE5\u4F7F\u7528\u591A\u4E2A\u6D88\u8D39\u7EBF\u7A0B\u6765\u6D88\u8D39\u6570\u636E\u3002\u800C\u66F4\u590D\u6742\u7684\u60C5\u51B5\u662F\uFF0C\u6D88\u8D39\u8005\u6D88\u8D39\u7684\u6570\u636E\uFF0C\u6709\u53EF\u80FD\u9700\u8981\u7EE7\u7EED\u5904\u7406\uFF0C\u4E8E\u662F\u6D88\u8D39\u8005\u5904\u7406\u5B8C\u6570\u636E\u4E4B\u540E\uFF0C\u5B83\u53C8\u8981\u4F5C\u4E3A\u751F\u4EA7\u8005\u628A\u6570\u636E\u653E\u5728\u65B0\u7684\u961F\u5217\u91CC\uFF0C\u4EA4\u7ED9\u5176\u4ED6\u6D88\u8D39\u8005\u7EE7\u7EED\u5904\u7406\uFF0C\u5982\u56FE11-1 \u6240\u793A\u3002</p><p><img src="`+t+`" alt="\u56FE11-1" loading="lazy"></p><p>\u56FE11-1 \u591A\u751F\u4EA7\u8005\u6D88\u8D39\u8005\u6A21\u5F0F</p><p>\u6211\u4EEC\u5728\u4E00\u4E2A\u957F\u8FDE\u63A5\u670D\u52A1\u5668\u4E2D\u4F7F\u7528\u4E86\u8FD9\u79CD\u6A21\u5F0F\uFF0C\u751F\u4EA7\u8005 1 \u8D1F\u8D23\u5C06\u6240\u6709\u5BA2\u6237\u7AEF\u53D1\u9001\u7684\u6D88\u606F\u5B58\u653E\u5728\u963B\u585E\u961F\u5217 1 \u91CC\uFF0C\u6D88\u8D39\u8005 1 \u4ECE\u961F\u5217\u91CC\u8BFB\u6D88\u606F\uFF0C\u7136\u540E\u901A\u8FC7\u6D88\u606F ID \u8FDB\u884C\u6563\u5217\u5F97\u5230 N \u4E2A\u961F\u5217\u4E2D\u7684\u4E00\u4E2A\uFF0C\u7136\u540E\u6839\u636E\u7F16\u53F7\u5C06\u6D88\u606F\u5B58\u653E\u5728\u5230\u4E0D\u540C\u7684\u961F\u5217\u91CC\uFF0C\u6BCF\u4E2A\u963B\u585E\u961F\u5217\u4F1A\u5206\u914D\u4E00\u4E2A\u7EBF\u7A0B\u6765\u6D88\u8D39\u963B\u585E\u961F\u5217\u91CC\u7684\u6570\u636E\u3002\u5982\u679C\u6D88\u8D39\u8005 2 \u65E0\u6CD5\u6D88\u8D39\u6D88\u606F\uFF0C\u5C31\u5C06\u6D88\u606F\u518D\u629B\u56DE\u5230\u963B\u585E\u961F\u5217 1 \u4E2D\uFF0C\u4EA4\u7ED9\u5176\u4ED6\u6D88\u8D39\u8005\u5904\u7406\u3002</p><p>\u4EE5\u4E0B\u662F\u6D88\u606F\u603B\u961F\u5217\u7684\u4EE3\u7801\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u603B\u6D88\u606F\u961F\u5217\u7BA1\u7406
 *
 * <span class="token keyword">@author</span> tengfei.fangtf
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MsgQueueManager</span> <span class="token keyword">implements</span> <span class="token class-name">IMsgQueue</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> LOGGER <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">MsgQueueManager</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
     * \u6D88\u606F\u603B\u961F\u5217
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">BlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Message</span><span class="token punctuation">&gt;</span></span> messageQueue<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">MsgQueueManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        messageQueue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedTransferQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Message</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Message</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            messageQueue<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Message</span> <span class="token function">take</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> messageQueue<span class="token punctuation">.</span><span class="token function">take</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u542F\u52A8\u4E00\u4E2A\u6D88\u606F\u5206\u53D1\u7EBF\u7A0B\u3002\u5728\u8FD9\u4E2A\u7EBF\u7A0B\u91CC\u5B50\u961F\u5217\u81EA\u52A8\u53BB\u603B\u961F\u5217\u91CC\u83B7\u53D6\u6D88\u606F\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u5206\u53D1\u6D88\u606F\uFF0C\u8D1F\u8D23\u628A\u6D88\u606F\u4ECE\u5927\u961F\u5217\u585E\u5230\u5C0F\u961F\u5217\u91CC
 *
 * <span class="token keyword">@author</span> tengfei.fangtf
 */</span>
<span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">DispatchMessageTask</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">BlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Message</span><span class="token punctuation">&gt;</span></span> subQueue<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> <span class="token punctuation">;</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// \u5982\u679C\u6CA1\u6709\u6570\u636E\uFF0C\u5219\u963B\u585E\u5728\u8FD9\u91CC</span>
            <span class="token class-name">Message</span> msg <span class="token operator">=</span> <span class="token class-name">MsgQueueFactory</span><span class="token punctuation">.</span><span class="token function">getMessageQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">take</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// \u5982\u679C\u4E3A\u7A7A\uFF0C\u5219\u8868\u793A\u6CA1\u6709 Session \u673A\u5668\u8FDE\u63A5\u4E0A\u6765\uFF0C</span>
            <span class="token comment">// \u9700\u8981\u7B49\u5F85\uFF0C\u76F4\u5230\u6709 Session \u673A\u5668\u8FDE\u63A5\u4E0A\u6765</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>subQueue <span class="token operator">=</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSubQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// \u628A\u6D88\u606F\u653E\u5230\u5C0F\u961F\u5217\u91CC</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                subQueue<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528\u6563\u5217\uFF08hash\uFF09\u7B97\u6CD5\u83B7\u53D6\u4E00\u4E2A\u5B50\u961F\u5217\uFF0C\u4EE3\u7801\u5982\u4E0B\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u5747\u8861\u83B7\u53D6\u4E00\u4E2A\u5B50\u961F\u5217\u3002
 *
 * <span class="token keyword">@return</span>
 */</span>
<span class="token keyword">public</span> <span class="token class-name">BlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Message</span><span class="token punctuation">&gt;</span></span> <span class="token function">getSubQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> errorCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> <span class="token punctuation">;</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>subMsgQueues<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> subMsgQueues<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> subMsgQueues<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// \u51FA\u73B0\u9519\u8BEF\u8868\u793A\uFF0C\u5728\u83B7\u53D6\u961F\u5217\u5927\u5C0F\u4E4B\u540E\uFF0C\u961F\u5217\u8FDB\u884C\u4E86\u4E00\u6B21\u5220\u9664\u64CD\u4F5C</span>
            LOGGER<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;\u83B7\u53D6\u5B50\u961F\u5217\u51FA\u73B0\u9519\u8BEF&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">++</span>errorCount<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528\u7684\u65F6\u5019\uFF0C\u53EA\u9700\u8981\u5F80\u603B\u961F\u5217\u91CC\u53D1\u6D88\u606F\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">IMsgQueue</span> messageQueue <span class="token operator">=</span> <span class="token class-name">MsgQueueFactory</span><span class="token punctuation">.</span><span class="token function">getMessageQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token class-name">Packet</span> msg <span class="token operator">=</span> <span class="token class-name">Packet</span><span class="token punctuation">.</span><span class="token function">createPacket</span><span class="token punctuation">(</span><span class="token class-name">Packet64FrameType</span><span class="token punctuation">.</span>TYPE_DATA<span class="token punctuation">,</span> <span class="token string">&quot;{}&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
messageQueue<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11-1-3-\u7EBF\u7A0B\u6C60\u4E0E\u751F\u4EA7\u6D88\u8D39\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_11-1-3-\u7EBF\u7A0B\u6C60\u4E0E\u751F\u4EA7\u6D88\u8D39\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 11.1.3 \u7EBF\u7A0B\u6C60\u4E0E\u751F\u4EA7\u6D88\u8D39\u8005\u6A21\u5F0F</h3><p>Java \u4E2D\u7684\u7EBF\u7A0B\u6C60\u7C7B\u5176\u5B9E\u5C31\u662F\u4E00\u79CD\u751F\u4EA7\u8005\u548C\u6D88\u8D39\u8005\u6A21\u5F0F\u7684\u5B9E\u73B0\u65B9\u5F0F\uFF0C\u4F46\u662F\u6211\u89C9\u5F97\u5176\u5B9E\u73B0\u65B9\u5F0F\u66F4\u52A0\u9AD8\u660E\u3002\u751F\u4EA7\u8005\u628A\u4EFB\u52A1\u4E22\u7ED9\u7EBF\u7A0B\u6C60\uFF0C\u7EBF\u7A0B\u6C60\u521B\u5EFA\u7EBF\u7A0B\u5E76\u5904\u7406\u4EFB\u52A1\uFF0C\u5982\u679C\u5C06\u8981\u8FD0\u884C\u7684\u4EFB\u52A1\u6570\u5927\u4E8E\u7EBF\u7A0B\u6C60\u7684\u57FA\u672C\u7EBF\u7A0B\u6570\u5C31\u628A\u4EFB\u52A1\u6254\u5230\u963B\u585E\u961F\u5217\u91CC\uFF0C\u8FD9\u79CD\u505A\u6CD5\u6BD4\u53EA\u4F7F\u7528\u4E00\u4E2A\u963B\u585E\u961F\u5217\u6765\u5B9E\u73B0\u751F\u4EA7\u8005\u548C\u6D88\u8D39\u8005\u6A21\u5F0F\u663E\u7136\u8981\u9AD8\u660E\u5F88\u591A\uFF0C\u56E0\u4E3A\u6D88\u8D39\u8005\u80FD\u591F\u5904\u7406\u76F4\u63A5\u5C31\u5904\u7406\u6389\u4E86\uFF0C\u8FD9\u6837\u901F\u5EA6\u66F4\u5FEB\uFF0C\u800C\u751F\u4EA7\u8005\u5148\u5B58\uFF0C\u6D88\u8D39\u8005\u518D\u53D6\u8FD9\u79CD\u65B9\u5F0F\u663E\u7136\u6162\u4E00\u4E9B\u3002</p><p>\u6211\u4EEC\u7684\u7CFB\u7EDF\u4E5F\u53EF\u4EE5\u4F7F\u7528\u7EBF\u7A0B\u6C60\u6765\u5B9E\u73B0\u591A\u751F\u4EA7\u8005\u548C\u6D88\u8D39\u8005\u6A21\u5F0F\u3002\u4F8B\u5982\uFF0C\u521B\u5EFA N \u4E2A\u4E0D\u540C\u89C4\u6A21\u7684 Java \u7EBF\u7A0B\u6C60\u6765\u5904\u7406\u4E0D\u540C\u6027\u8D28\u7684\u4EFB\u52A1\uFF0C\u6BD4\u5982\u7EBF\u7A0B\u6C60 1 \u5C06\u6570\u636E\u8BFB\u5230\u5185\u5B58\u4E4B\u540E\uFF0C\u4EA4\u7ED9\u7EBF\u7A0B\u6C60 2 \u91CC\u7684\u7EBF\u7A0B\u7EE7\u7EED\u5904\u7406\u538B\u7F29\u6570\u636E\u3002\u7EBF\u7A0B\u6C60 1 \u4E3B\u8981\u5904\u7406 I/O \u5BC6\u96C6\u578B\u4EFB\u52A1\uFF0C\u7EBF\u7A0B\u6C60 2 \u4E3B\u8981\u5904\u7406 CPU \u5BC6\u96C6\u578B\u4EFB\u52A1\u3002</p><p>\u672C\u8282\u8BB2\u89E3\u4E86\u751F\u4EA7\u8005\u548C\u6D88\u8D39\u8005\u6A21\u5F0F\uFF0C\u5E76\u7ED9\u51FA\u4E86\u5B9E\u4F8B\u3002\u8BFB\u8005\u53EF\u4EE5\u5728\u5E73\u65F6\u7684\u5DE5\u4F5C\u4E2D\u601D\u8003\u4E00\u4E0B\u54EA\u4E9B\u573A\u666F\u53EF\u4EE5\u4F7F\u7528\u751F\u4EA7\u8005\u6D88\u8D39\u8005\u6A21\u5F0F\uFF0C\u6211\u76F8\u4FE1\u8FD9\u79CD\u573A\u666F\u5E94\u8BE5\u975E\u5E38\u591A\uFF0C\u7279\u522B\u662F\u9700\u8981\u5904\u7406\u4EFB\u52A1\u65F6\u95F4\u6BD4\u8F83\u957F\u7684\u573A\u666F\uFF0C\u6BD4\u5982\u4E0A\u4F20\u9644\u4EF6\u5E76\u5904\u7406\uFF0C\u7528\u6237\u628A\u6587\u4EF6\u4E0A\u4F20\u5230\u7CFB\u7EDF\u540E\uFF0C\u7CFB\u7EDF\u628A\u6587\u4EF6\u4E22\u5230\u961F\u5217\u91CC\uFF0C\u7136\u540E\u7ACB\u523B\u8FD4\u56DE\u544A\u8BC9\u7528\u6237\u4E0A\u4F20\u6210\u529F\uFF0C\u6700\u540E\u6D88\u8D39\u8005\u518D\u53BB\u961F\u5217\u91CC\u53D6\u51FA\u6587\u4EF6\u5904\u7406\u3002\u518D\u5982\uFF0C\u8C03\u7528\u4E00\u4E2A\u8FDC\u7A0B\u63A5\u53E3\u67E5\u8BE2\u6570\u636E\uFF0C\u5982\u679C\u8FDC\u7A0B\u670D\u52A1\u63A5\u53E3\u67E5\u8BE2\u65F6\u9700\u8981\u51E0\u5341\u79D2\u7684\u65F6\u95F4\uFF0C\u90A3\u4E48\u5B83\u53EF\u4EE5\u63D0\u4F9B\u4E00\u4E2A\u7533\u8BF7\u67E5\u8BE2\u7684\u63A5\u53E3\uFF0C\u8FD9\u4E2A\u63A5\u53E3\u628A\u8981\u7533\u8BF7\u67E5\u8BE2\u4EFB\u52A1\u653E\u6570\u636E\u5E93\u4E2D\uFF0C\u7136\u540E\u8BE5\u63A5\u53E3\u7ACB\u523B\u8FD4\u56DE\u3002\u7136\u540E\u670D\u52A1\u5668\u7AEF\u7528\u7EBF\u7A0B\u8F6E\u8BE2\u5E76\u83B7\u53D6\u7533\u8BF7\u4EFB\u52A1\u8FDB\u884C\u5904\u7406\uFF0C\u5904\u7406\u5B8C\u4E4B\u540E\u53D1\u6D88\u606F\u7ED9\u8C03\u7528\u65B9\uFF0C\u8BA9\u8C03\u7528\u65B9\u518D\u6765\u8C03\u7528\u53E6\u5916\u4E00\u4E2A\u63A5\u53E3\u53D6\u6570\u636E\u3002</p><h2 id="_11-2-\u7EBF\u4E0A\u95EE\u9898\u5B9A\u4F4D" tabindex="-1"><a class="header-anchor" href="#_11-2-\u7EBF\u4E0A\u95EE\u9898\u5B9A\u4F4D" aria-hidden="true">#</a> 11.2 \u7EBF\u4E0A\u95EE\u9898\u5B9A\u4F4D</h2><p>\u6709\u65F6\u5019\uFF0C\u6709\u5F88\u591A\u95EE\u9898\u53EA\u6709\u5728\u7EBF\u4E0A\u6216\u8005\u9884\u53D1\u73AF\u5883\u624D\u80FD\u53D1\u73B0\uFF0C\u800C\u7EBF\u4E0A\u53C8\u4E0D\u80FD\u8C03\u8BD5\u4EE3\u7801\uFF0C\u6240\u4EE5\u7EBF\u4E0A\u95EE\u9898\u5B9A\u4F4D\u5C31\u53EA\u80FD\u770B\u65E5\u5FD7\u3001\u7CFB\u7EDF\u72B6\u6001\u548C dump \u7EBF\u7A0B\uFF0C\u672C\u8282\u53EA\u662F\u7B80\u5355\u5730\u4ECB\u7ECD\u4E00\u4E9B\u5E38\u7528\u7684\u5DE5\u5177\uFF0C\u4EE5\u5E2E\u52A9\u5927\u5BB6\u5B9A\u4F4D\u7EBF\u4E0A\u95EE\u9898\u3002</p><ol><li><p>\u5728 Linux \u547D\u4EE4\u884C\u4E0B\u4F7F\u7528 top \u547D\u4EE4\u67E5\u770B\u6BCF\u4E2A\u8FDB\u7A0B\u7684\u60C5\u51B5\uFF0C\u663E\u793A\u5982\u4E0B\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>top - 22:27:25 up 463 days, 12:46, 1 user, load average: 11.80, 12.19, 11.79
 Tasks: 113 total, 5 running, 108 sleeping, 0 stopped, 0 zombie
 Cpu(s): 62.0%us, 2.8%sy, 0.0%ni, 34.3%id, 0.0%wa, 0.0%hi, 0.7%si, 0.2%st
 Mem: 7680000k total, 7665504k used, 14496k free, 97268k buffers 
 Swap: 2096472k total, 14904k used, 2081568k free, 3033060k cached
PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND
 31177 admin 18 0 5351m 4.0g 49m S 301.4 54.0 935:02.08 java
 31738 admin 15 0 36432 12m 1052 S 8.7 0.2 11:21.05 nginx-proxy
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u7684\u7A0B\u5E8F\u662F Java \u5E94\u7528\uFF0C\u6240\u4EE5\u53EA\u9700\u8981\u5173\u6CE8 COMMAND \u662F Java \u7684\u6027\u80FD\u6570\u636E\uFF0CCOMMAND \u8868\u793A\u542F\u52A8\u5F53\u524D\u8FDB\u7A0B\u7684\u547D\u4EE4\uFF0C\u5728 Java \u8FDB\u7A0B\u8FD9\u4E00\u884C\u91CC\u53EF\u4EE5\u770B\u5230 CPU \u5229\u7528\u7387\u662F 300%\uFF0C\u4E0D\u7528\u62C5\u5FC3\uFF0C\u8FD9\u4E2A\u662F\u5F53\u524D\u673A\u5668\u6240\u6709\u6838\u52A0\u5728\u4E00\u8D77\u7684 CPU \u5229\u7528\u7387\u3002</p></li><li><p>\u518D\u4F7F\u7528 top \u7684\u4EA4\u4E92\u547D\u4EE4\u6570\u5B57 1 \u67E5\u770B\u6BCF\u4E2A CPU \u7684\u6027\u80FD\u6570\u636E\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>top - 22:24:50 up 463 days, 12:43, 1 user, load average: 12.55, 12.27, 11.73
 Tasks: 110 total, 3 running, 107 sleeping, 0 stopped, 0 zombie
 Cpu0 : 72.4%us, 3.6%sy, 0.0%ni, 22.7%id, 0.0%wa, 0.0%hi, 0.7%si, 0.7%st 
 Cpu1 : 58.7%us, 4.3%sy, 0.0%ni, 34.3%id, 0.0%wa, 0.0%hi, 2.3%si, 0.3%st 
 Cpu2 : 53.3%us, 2.6%sy, 0.0%ni, 34.1%id, 0.0%wa, 0.0%hi, 9.6%si, 0.3%st 
 Cpu3 : 52.7%us, 2.7%sy, 0.0%ni, 25.2%id, 0.0%wa, 0.0%hi, 19.5%si, 0.0%st 
 Cpu4 : 59.5%us, 2.7%sy, 0.0%ni, 31.2%id, 0.0%wa, 0.0%hi, 6.6%si, 0.0%st
 Mem: 7680000k total, 7663152k used, 16848k free, 98068k buffers 
 Swap: 2096472k total, 14904k used, 2081568k free, 3032636k cached
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u547D\u4EE4\u884C\u663E\u793A\u4E86 CPU4\uFF0C\u8BF4\u660E\u8FD9\u662F\u4E00\u4E2A 5 \u6838\u7684\u865A\u62DF\u673A\uFF0C\u5E73\u5747\u6BCF\u4E2A CPU \u5229\u7528\u7387\u5728 60% \u4EE5\u4E0A\u3002\u5982\u679C\u8FD9\u91CC\u663E\u793A CPU \u5229\u7528\u7387 100%\uFF0C\u5219\u5F88\u6709\u53EF\u80FD\u7A0B\u5E8F\u91CC\u5199\u4E86\u4E00\u4E2A\u6B7B\u5FAA\u73AF\u3002\u8FD9\u4E9B\u53C2\u6570\u7684\u542B\u4E49\uFF0C\u53EF\u4EE5\u5BF9\u6BD4\u886811-1 \u6765\u67E5\u770B\u3002</p><p>\u886811-1 CPU \u53C2\u6570\u542B\u4E49</p><p><img src="`+p+`" alt="\u886811-1" loading="lazy"></p></li><li><p>\u4F7F\u7528 top \u7684\u4EA4\u4E92\u547D\u4EE4 H \u67E5\u770B\u6BCF\u4E2A\u7EBF\u7A0B\u7684\u6027\u80FD\u4FE1\u606F\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>   PID  USER   PR	NI	   VIRT	  RES	SHR   S     %CPU  %MEM	  TIME+	 COMMAND
 31558  admin  15    0     5351m  4.0g  49m   S     12.2  54.0  10:08.31  java 
 31561  admin  15    0     5351m  4.0g  49m   R     12.2  54.0  9:45.43   java 
 31626  admin  15    0     5351m  4.0g  49m   S     11.9  54.0  13:50.21  java 
 31559  admin  15    0     5351m  4.0g  49m   S     10.9  54.0  5:34.67   java 
 31612  admin  15    0     5351m  4.0g  49m   S     10.6  54.0  8:42.77   java 
 31555  admin  15    0     5351m  4.0g  49m   S     10.3  54.0  13:00.55  java 
 31630  admin  15    0     5351m  4.0g  49m   R     10.3  54.0  4:00.75   java 
 31646  admin  15    0     5351m  4.0g  49m   S     10.3  54.0  3:19.92   java 
 31653  admin  15    0     5351m  4.0g  49m   S     10.3  54.0  8:52.90   java 
 31607  admin  15    0     5351m  4.0g  49m   S     9.9   54.0  14:37.82  java 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u8FD9\u91CC\u53EF\u80FD\u4F1A\u51FA\u73B0 3 \u79CD\u60C5\u51B5\u3002</p><ul><li>\u7B2C\u4E00\u79CD\u60C5\u51B5\uFF0C\u67D0\u4E2A\u7EBF\u7A0B CPU \u5229\u7528\u7387\u4E00\u76F4 100%\uFF0C\u5219\u8BF4\u660E\u662F\u8FD9\u4E2A\u7EBF\u7A0B\u6709\u53EF\u80FD\u6709\u6B7B\u5FAA\u73AF\uFF0C\u90A3\u4E48\u8BF7\u8BB0\u4F4F\u8FD9\u4E2A PID\u3002</li><li>\u7B2C\u4E8C\u79CD\u60C5\u51B5\uFF0C\u67D0\u4E2A\u7EBF\u7A0B\u4E00\u76F4\u5728 TOP 10 \u7684\u4F4D\u7F6E\uFF0C\u8FD9\u8BF4\u660E\u8FD9\u4E2A\u7EBF\u7A0B\u53EF\u80FD\u6709\u6027\u80FD\u95EE\u9898\u3002</li><li>\u7B2C\u4E09\u79CD\u60C5\u51B5\uFF0CCPU \u5229\u7528\u7387\u9AD8\u7684\u51E0\u4E2A\u7EBF\u7A0B\u5728\u4E0D\u505C\u53D8\u5316\uFF0C\u8BF4\u660E\u5E76\u4E0D\u662F\u7531\u67D0\u4E00\u4E2A\u7EBF\u7A0B\u5BFC\u81F4 CPU \u504F\u9AD8\u3002</li></ul><p>\u5982\u679C\u662F\u7B2C\u4E00\u79CD\u60C5\u51B5\uFF0C\u4E5F\u6709\u53EF\u80FD\u662F GC \u9020\u6210\uFF0C\u53EF\u4EE5\u7528 jstat \u547D\u4EE4\u770B\u4E00\u4E0B GC \u60C5\u51B5\uFF0C\u770B\u770B\u662F\u4E0D\u662F\u56E0\u4E3A\u6301\u4E45\u4EE3\u6216\u5E74\u8001\u4EE3\u6EE1\u4E86\uFF0C\u4EA7\u751F Full GC\uFF0C\u5BFC\u81F4 CPU \u5229\u7528\u7387\u6301\u7EED\u98D9\u9AD8\uFF0C\u547D\u4EE4\u548C\u56DE\u663E\u5982\u4E0B\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>sudo /opt/java/bin/jstat -gcutil 31177 1000 5 
   S0    S1     E      O      P     YGC    YGCT  FGC      FGCT     GCT
 0.00  1.27  61.30  55.57  59.98  16040  143.775  30    77.692  221.467 
 0.00  1.27  95.77  55.57  59.98  16040  143.775  30    77.692  221.467 
 1.37  0.00  33.21  55.57  59.98  16041  143.781  30    77.692  221.474 
 1.37  0.00  74.96  55.57  59.98  16041  143.781  30    77.692  221.474 
 0.00  1.59  22.14  55.57  59.98  16042  143.789  30    77.692  221.481 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD8\u53EF\u4EE5\u628A\u7EBF\u7A0B dump \u4E0B\u6765\uFF0C\u770B\u770B\u7A76\u7ADF\u662F\u54EA\u4E2A\u7EBF\u7A0B\u3001\u6267\u884C\u4EC0\u4E48\u4EE3\u7801\u9020\u6210\u7684 CPU \u5229\u7528\u7387\u9AD8\u3002\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\uFF0C\u628A\u7EBF\u7A0B dump \u5230\u6587\u4EF6 dump17 \u91CC\u3002\u6267\u884C\u5982\u4E0B\u547D\u4EE4\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>sudo -u admin /opt/taobao/java/bin/jstack 31177 &gt; /home/tengfei.fangtf/dump17
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>dump \u51FA\u6765\u5185\u5BB9\u7684\u7C7B\u4F3C\u4E0B\u9762\u5185\u5BB9\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&quot;http-0.0.0.0-7001-97&quot; daemon prio=10 tid=0x000000004f6a8000 nid=0x555e in Object.wait()[0x0000000052423000]
	java.lang.Thread.State: WAITING (on object monitor) 
        at java.lang.Object.wait(Native Method)
        - waiting on (a org.apache.tomcat.util.net.AprEndpoint$Worker) 
        at java.lang.Object.wait(Object.java:485)
        at org.apache.tomcat.util.net.AprEndpoint$Worker.await(AprEndpoint.java:1464)
        - locked (a org.apache.tomcat.util.net.AprEndpoint$Worker)
        at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1489) 
        at java.lang.Thread.run(Thread.java:662)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>dump \u51FA\u6765\u7684\u7EBF\u7A0B ID\uFF08nid\uFF09\u662F\u5341\u516D\u8FDB\u5236\u7684\uFF0C\u800C\u6211\u4EEC\u7528 top \u547D\u4EE4\u770B\u5230\u7684\u7EBF\u7A0B ID \u662F\u5341\u8FDB\u5236\u7684\uFF0C\u6240\u4EE5\u8981\u7528 printf \u547D\u4EE4\u8F6C\u6362\u4E00\u4E0B\u8FDB\u5236\u3002\u7136\u540E\u7528\u5341\u516D\u8FDB\u5236\u7684 ID \u53BB dump \u91CC\u627E\u5230\u5BF9\u5E94\u7684\u7EBF\u7A0B\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>printf &quot;%x\\n&quot; 31558 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8F93\u51FA\uFF1A7b46\u3002</p></li></ol><h2 id="_11-3-\u6027\u80FD\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_11-3-\u6027\u80FD\u6D4B\u8BD5" aria-hidden="true">#</a> 11.3 \u6027\u80FD\u6D4B\u8BD5</h2><p>\u56E0\u4E3A\u8981\u652F\u6301\u67D0\u4E2A\u4E1A\u52A1\uFF0C\u6709\u540C\u4E8B\u5411\u6211\u4EEC\u63D0\u51FA\u9700\u6C42\uFF0C\u5E0C\u671B\u7CFB\u7EDF\u7684\u67D0\u4E2A\u63A5\u53E3\u80FD\u591F\u652F\u6301 2 \u4E07\u7684 QPS\uFF0C\u56E0\u4E3A\u6211\u4EEC\u7684\u5E94\u7528\u90E8\u7F72\u5728\u591A\u53F0\u673A\u5668\u4E0A\uFF0C\u8981\u652F\u6301\u4E24\u4E07\u7684 QPS\uFF0C\u6211\u4EEC\u5FC5\u987B\u5148\u8981\u77E5\u9053\u8BE5\u63A5\u53E3\u5728\u5355\u673A\u4E0A\u80FD\u652F\u6301\u591A\u5C11 QPS\uFF0C\u5982\u679C\u5355\u673A\u80FD\u652F\u6301 1 \u5343 QPS\uFF0C\u6211\u4EEC\u9700\u8981 20 \u53F0\u673A\u5668\u624D\u80FD\u652F\u6301 2 \u4E07\u7684 QPS\u3002\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u8981\u652F\u6301\u7684 2 \u4E07\u7684 QPS \u5FC5\u987B\u662F\u5CF0\u503C\uFF0C\u800C\u4E0D\u80FD\u662F\u5E73\u5747\u503C\uFF0C\u6BD4\u5982\u4E00\u5929\u5F53\u4E2D\u6709 23 \u4E2A\u5C0F\u65F6 QPS \u4E0D\u8DB3 1 \u4E07\uFF0C\u53EA\u6709\u4E00\u4E2A\u5C0F\u65F6\u7684 QPS \u8FBE\u5230\u4E86 2 \u4E07\uFF0C\u6211\u4EEC\u7684\u7CFB\u7EDF\u4E5F\u8981\u652F\u6301 2 \u4E07\u7684 QPS\u3002</p><p>\u6211\u4EEC\u5148\u8FDB\u884C\u6027\u80FD\u6D4B\u8BD5\u3002\u6211\u4EEC\u4F7F\u7528\u516C\u53F8\u540C\u4E8B\u5F00\u53D1\u7684\u6027\u80FD\u6D4B\u8BD5\u5DE5\u5177\u8FDB\u884C\u6D4B\u8BD5\uFF0C\u8BE5\u5DE5\u5177\u7684\u539F\u7406\u662F\uFF0C\u7528\u6237\u5199\u4E00\u4E2A Java \u7A0B\u5E8F\u5411\u670D\u52A1\u5668\u7AEF\u53D1\u8D77\u8BF7\u6C42\uFF0C\u8FD9\u4E2A\u5DE5\u5177\u4F1A\u542F\u52A8\u4E00\u4E2A\u7EBF\u7A0B\u6C60\u6765\u8C03\u5EA6\u8FD9\u4E9B\u4EFB\u52A1\uFF0C\u53EF\u4EE5\u914D\u7F6E\u540C\u65F6\u542F\u52A8\u591A\u5C11\u4E2A\u7EBF\u7A0B\u3001\u53D1\u8D77\u8BF7\u6C42\u6B21\u6570\u548C\u4EFB\u52A1\u95F4\u9694\u65F6\u957F\u3002\u5C06\u8FD9\u4E2A\u7A0B\u5E8F\u90E8\u7F72\u5728\u591A\u53F0\u673A\u5668\u4E0A\u6267\u884C\uFF0C\u7EDF\u8BA1\u51FA QPS \u548C\u54CD\u5E94\u65F6\u957F\u3002\u6211\u4EEC\u5728 10 \u53F0\u673A\u5668\u4E0A\u90E8\u7F72\u4E86\u8FD9\u4E2A\u6D4B\u8BD5\u7A0B\u5E8F\uFF0C\u6BCF\u53F0\u673A\u5668\u542F\u52A8\u4E86 100 \u4E2A\u7EBF\u7A0B\u8FDB\u884C\u6D4B\u8BD5\uFF0C\u538B\u6D4B\u65F6\u957F\u4E3A\u534A\u5C0F\u65F6\u3002\u6CE8\u610F\u4E0D\u80FD\u538B\u6D4B\u7EBF\u4E0A\u673A\u5668\uFF0C\u6211\u4EEC\u538B\u6D4B\u7684\u662F\u5F00\u53D1\u670D\u52A1\u5668\u3002</p><p>\u6D4B\u8BD5\u5F00\u59CB\u540E\uFF0C\u9996\u5148\u767B\u5F55\u5230\u670D\u52A1\u5668\u91CC\u67E5\u770B\u5F53\u524D\u6709\u591A\u5C11\u53F0\u673A\u5668\u5728\u538B\u6D4B\u670D\u52A1\u5668\uFF0C\u56E0\u4E3A\u7A0B\u5E8F\u7684\u7AEF\u53E3\u662F 12200\uFF0C\u6240\u4EE5\u4F7F\u7528 netstat \u547D\u4EE4\u67E5\u8BE2\u6709\u591A\u5C11\u53F0\u673A\u5668\u8FDE\u63A5\u5230\u8FD9\u4E2A\u7AEF\u53E3\u4E0A\u3002\u547D\u4EE4\u5982\u4E0B\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ netstat -nat | grep 12200 \u2013c 
10
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u901A\u8FC7\u8FD9\u4E2A\u547D\u4EE4\u53EF\u4EE5\u77E5\u9053\u5DF2\u7ECF\u6709 10 \u53F0\u673A\u5668\u5728\u538B\u6D4B\u670D\u52A1\u5668\u3002QPS \u8FBE\u5230\u4E86 1400\uFF0C\u7A0B\u5E8F\u5F00\u59CB\u62A5\u9519\u83B7\u53D6\u4E0D\u5230\u6570\u636E\u5E93\u8FDE\u63A5\uFF0C\u56E0\u4E3A\u6211\u4EEC\u7684\u6570\u636E\u5E93\u7AEF\u53E3\u662F 3306\uFF0C\u7528 netstat \u547D\u4EE4\u67E5\u770B\u5DF2\u7ECF\u4F7F\u7528\u4E86\u591A\u5C11\u4E2A\u6570\u636E\u5E93\u8FDE\u63A5\u3002\u547D\u4EE4\u5982\u4E0B\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ netstat -nat | grep 3306 \u2013c 
12
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u589E\u52A0\u6570\u636E\u5E93\u8FDE\u63A5\u5230 20\uFF0CQPS \u6CA1\u4E0A\u53BB\uFF0C\u4F46\u662F\u54CD\u5E94\u65F6\u957F\u4ECE\u5E73\u5747 1000 \u6BEB\u79D2\u4E0B\u964D\u5230 700 \u6BEB\u79D2\uFF0C\u4F7F\u7528 TOP \u547D\u4EE4\u89C2\u5BDF CPU \u5229\u7528\u7387\uFF0C\u53D1\u73B0\u5DF2\u7ECF 90% \u591A\u4E86\uFF0C\u4E8E\u662F\u5347\u7EA7 CPU\uFF0C\u5C06 2 \u6838\u5347\u7EA7\u6210 4 \u6838\uFF0C\u548C\u7EBF\u4E0A\u7684\u673A\u5668\u4FDD\u6301\u4E00\u81F4\u3002\u518D\u8FDB\u884C\u538B\u6D4B\uFF0CCPU \u5229\u7528\u7387\u4E0B\u53BB\u4E86\u8FBE\u5230\u4E86 75%\uFF0CQPS \u4E0A\u5347\u5230\u4E86 1800\u3002\u6267\u884C\u4E00\u6BB5\u65F6\u95F4\u540E\u54CD\u5E94\u65F6\u957F\u7A33\u5B9A\u5728 200 \u6BEB\u79D2\u3002</p><p>\u589E\u52A0\u5E94\u7528\u670D\u52A1\u5668\u91CC\u7EBF\u7A0B\u6C60\u7684\u6838\u5FC3\u7EBF\u7A0B\u6570\u548C\u6700\u5927\u7EBF\u7A0B\u6570\u5230 1024\uFF0C\u901A\u8FC7 ps \u547D\u4EE4\u67E5\u770B\u4E0B\u7EBF\u7A0B\u6570\u662F\u5426\u589E\u957F\u4E86\uFF0C\u6267\u884C\u7684\u547D\u4EE4\u5982\u4E0B\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ ps -eLf | grep java -c 
1520
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u518D\u6B21\u538B\u6D4B\uFF0CQPS \u5E76\u6CA1\u6709\u660E\u663E\u7684\u589E\u957F\uFF0C\u5355\u673A QPS \u7A33\u5B9A\u5728 1800 \u5DE6\u53F3\uFF0C\u54CD\u5E94\u65F6\u957F\u7A33\u5B9A\u5728 200 \u6BEB\u79D2\u3002\u6211\u5728\u6027\u80FD\u6D4B\u8BD5\u4E4B\u524D\u5148\u4F18\u5316\u4E86\u7A0B\u5E8F\u7684 SQL \u8BED\u53E5\u3002\u4F7F\u7528\u4E86\u5982\u4E0B\u547D\u4EE4\u7EDF\u8BA1\u6267\u884C\u6700\u6162\u7684 SQL\uFF0C\u5DE6\u8FB9\u7684\u662F\u6267\u884C\u65F6\u957F\uFF0C\u5355\u4F4D\u662F\u6BEB\u79D2\uFF0C\u53F3\u8FB9\u7684\u662F\u6267\u884C\u7684\u8BED\u53E5\uFF0C\u53EF\u4EE5\u770B\u5230\u7CFB\u7EDF\u6267\u884C\u6700\u6162\u7684 SQL \u662F queryNews \u548C queryNewIds\uFF0C\u4F18\u5316\u5230\u51E0\u5341\u6BEB\u79D2\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ grep Y /home/admin/logs/xxx/monitor/dal-rw-monitor.log |awk -F &#39;,&#39; &#39;{print $7$5}&#39; | sort -nr | head -20
1811 queryNews
1764 queryNews
1740 queryNews
1697 queryNews
679 queryNewIds
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6027\u80FD\u6D4B\u8BD5\u4E2D\u4F7F\u7528\u7684\u5176\u4ED6\u547D\u4EE4</strong></p><ol><li><p>\u67E5\u770B\u7F51\u7EDC\u6D41\u91CF\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ cat /proc/net/dev
Inter-| Receive | Transmit face | bytes packets errs drop fifo frame compressed multicast | bytes packets errs drop fifo colls carrier compressed
lo:242953548208 231437133 0 0 0 0 0 0 242953548208 231437133 0 0 0 0 0 0
eth0:153060432504 446365779 0 0 0 0 0 0 108596061848 479947142 0 0 0 0 0 0
bond0:153060432504 446365779 0 0 0 0 0 0 108596061848 479947142 0 0 0 0 0 0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u67E5\u770B\u7CFB\u7EDF\u5E73\u5747\u8D1F\u8F7D\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ cat /proc/loadavg
0.00 0.04 0.85 1/1266 22459
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u67E5\u770B\u7CFB\u7EDF\u5185\u5B58\u60C5\u51B5\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ cat /proc/meminfo 
MemTotal: 4106756 kB
MemFree: 71196 kB
Buffers: 12832 kB
Cached: 2603332 kB
SwapCached: 4016 kB
Active: 2303768 kB
Inactive: 1507324 kB
Active(anon): 996100 kB
\u90E8\u5206\u7701\u7565
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u67E5\u770B CPU \u7684\u5229\u7528\u7387\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>cat /proc/stat
 cpu	167301886  6156  331902067  17552830039 8645275 13082 1044952 33931469 0       
 cpu0	 45406479  1992  75489851 4410199442 7321828 12872 688837 5115394 0 
 cpu1	 39821071  1247  132648851 4319596686 379255 67 132447 11365141 0   
 cpu2	 40912727  1705  57947971 4418978718 389539 78 110994 8342835 0     
 cpu3	 41161608  1211  65815393 4404055191 554651 63 112672 9108097 0 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="_11-4-\u5F02\u6B65\u4EFB\u52A1\u6C60" tabindex="-1"><a class="header-anchor" href="#_11-4-\u5F02\u6B65\u4EFB\u52A1\u6C60" aria-hidden="true">#</a> 11.4 \u5F02\u6B65\u4EFB\u52A1\u6C60</h2><p>Java \u4E2D\u7684\u7EBF\u7A0B\u6C60\u8BBE\u8BA1\u5F97\u975E\u5E38\u5DE7\u5999\uFF0C\u53EF\u4EE5\u9AD8\u6548\u5E76\u53D1\u6267\u884C\u591A\u4E2A\u4EFB\u52A1\uFF0C\u4F46\u662F\u5728\u67D0\u4E9B\u573A\u666F\u4E0B\u9700\u8981\u5BF9\u7EBF\u7A0B\u6C60\u8FDB\u884C\u6269\u5C55\u624D\u80FD\u66F4\u597D\u5730\u670D\u52A1\u4E8E\u7CFB\u7EDF\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u4E00\u4E2A\u4EFB\u52A1\u4ECD\u8FDB\u7EBF\u7A0B\u6C60\u4E4B\u540E\uFF0C\u8FD0\u884C\u7EBF\u7A0B\u6C60\u7684\u7A0B\u5E8F\u91CD\u542F\u4E86\uFF0C\u90A3\u4E48\u7EBF\u7A0B\u6C60\u91CC\u7684\u4EFB\u52A1\u5C31\u4F1A\u4E22\u5931\u3002\u53E6\u5916\uFF0C\u7EBF\u7A0B\u6C60\u53EA\u80FD\u5904\u7406\u672C\u673A\u7684\u4EFB\u52A1\uFF0C\u5728\u96C6\u7FA4\u73AF\u5883\u4E0B\u4E0D\u80FD\u6709\u6548\u5730\u8C03\u5EA6\u6240\u6709\u673A\u5668\u7684\u4EFB\u52A1\u3002\u6240\u4EE5\uFF0C\u9700\u8981\u7ED3\u5408\u7EBF\u7A0B\u6C60\u5F00\u53D1\u4E00\u4E2A\u5F02\u6B65\u4EFB\u52A1\u5904\u7406\u6C60\u3002\u56FE11-2 \u4E3A\u5F02\u6B65\u4EFB\u52A1\u6C60\u8BBE\u8BA1\u56FE\u3002</p><p><img src="`+c+'" alt="\u56FE11-2" loading="lazy"></p><p>\u56FE11-2 \u5F02\u6B65\u4EFB\u52A1\u6C60\u8BBE\u8BA1\u56FE</p><p>\u4EFB\u52A1\u6C60\u7684\u4E3B\u8981\u5904\u7406\u6D41\u7A0B\u662F\uFF0C\u6BCF\u53F0\u673A\u5668\u4F1A\u542F\u52A8\u4E00\u4E2A\u4EFB\u52A1\u6C60\uFF0C\u6BCF\u4E2A\u4EFB\u52A1\u6C60\u91CC\u6709\u591A\u4E2A\u7EBF\u7A0B\u6C60\uFF0C\u5F53\u67D0\u53F0\u673A\u5668\u5C06\u4E00\u4E2A\u4EFB\u52A1\u4EA4\u7ED9\u4EFB\u52A1\u6C60\u540E\uFF0C\u4EFB\u52A1\u6C60\u4F1A\u5148\u5C06\u8FD9\u4E2A\u4EFB\u52A1\u4FDD\u5B58\u5230\u6570\u636E\u4E2D\uFF0C\u7136\u540E\u67D0\u53F0\u673A\u5668\u4E0A\u7684\u4EFB\u52A1\u6C60\u4F1A\u4ECE\u6570\u636E\u5E93\u4E2D\u83B7\u53D6\u5F85\u6267\u884C\u7684\u4EFB\u52A1\uFF0C\u518D\u6267\u884C\u8FD9\u4E2A\u4EFB\u52A1\u3002</p><p>\u6BCF\u4E2A\u4EFB\u52A1\u6709\u51E0\u79CD\u72B6\u6001\uFF0C\u5206\u522B\u662F\u521B\u5EFA\uFF08NEW\uFF09\u3001\u6267\u884C\u4E2D\uFF08EXECUTING\uFF09\u3001RETRY\uFF08\u91CD\u8BD5\uFF09\u3001\u6302\u8D77\uFF08SUSPEND\uFF09\u3001\u4E2D\u6B62\uFF08TEMINER\uFF09\u548C\u6267\u884C\u5B8C\u6210\uFF08FINISH\uFF09\u3002</p><ul><li><p>\u521B\u5EFA\uFF1A\u63D0\u4EA4\u7ED9\u4EFB\u52A1\u6C60\u4E4B\u540E\u7684\u72B6\u6001\u3002</p></li><li><p>\u6267\u884C\u4E2D\uFF1A\u4EFB\u52A1\u6C60\u4ECE\u6570\u636E\u5E93\u4E2D\u62FF\u5230\u4EFB\u52A1\u6267\u884C\u65F6\u7684\u72B6\u6001\u3002</p></li><li><p>\u91CD\u8BD5\uFF1A\u5F53\u6267\u884C\u4EFB\u52A1\u65F6\u51FA\u73B0\u9519\u8BEF\uFF0C\u7A0B\u5E8F\u663E\u5F0F\u5730\u544A\u8BC9\u4EFB\u52A1\u6C60\u8FD9\u4E2A\u4EFB\u52A1\u9700\u8981\u91CD\u8BD5\uFF0C\u5E76\u8BBE\u7F6E\u4E0B\u4E00\u6B21\u6267\u884C\u65F6\u95F4\u3002</p></li><li><p>\u6302\u8D77\uFF1A\u5F53\u4E00\u4E2A\u4EFB\u52A1\u7684\u6267\u884C\u4F9D\u8D56\u4E8E\u5176\u4ED6\u4EFB\u52A1\u5B8C\u6210\u65F6\uFF0C\u53EF\u4EE5\u5C06\u8FD9\u4E2A\u4EFB\u52A1\u6302\u8D77\uFF0C\u5F53\u6536\u5230\u6D88\u606F\u540E\uFF0C\u518D\u5F00\u59CB\u6267\u884C\u3002</p></li><li><p>\u4E2D\u6B62\uFF1A\u4EFB\u52A1\u6267\u884C\u5931\u8D25\uFF0C\u8BA9\u4EFB\u52A1\u6C60\u505C\u6B62\u6267\u884C\u8FD9\u4E2A\u4EFB\u52A1\uFF0C\u5E76\u8BBE\u7F6E\u9519\u8BEF\u6D88\u606F\u544A\u8BC9\u8C03\u7528\u7AEF\u3002</p></li><li><p>\u6267\u884C\u5B8C\u6210\uFF1A\u4EFB\u52A1\u6267\u884C\u7ED3\u675F\u3002</p></li></ul><p>\u4EFB\u52A1\u6C60\u7684\u4EFB\u52A1\u9694\u79BB\u3002\u5F02\u6B65\u4EFB\u52A1\u6709\u5F88\u591A\u79CD\u7C7B\u578B\uFF0C\u6BD4\u5982\u6293\u53D6\u7F51\u9875\u4EFB\u52A1\u3001\u540C\u6B65\u6570\u636E\u4EFB\u52A1\u7B49\uFF0C\u4E0D\u540C\u7C7B\u578B\u7684\u4EFB\u52A1\u4F18\u5148\u7EA7\u4E0D\u4E00\u6837\uFF0C\u4F46\u662F\u7CFB\u7EDF\u8D44\u6E90\u662F\u6709\u9650\u7684\uFF0C\u5982\u679C\u4F4E\u4F18\u5148\u7EA7\u7684\u4EFB\u52A1\u975E\u5E38\u591A\uFF0C\u9AD8\u4F18\u5148\u7EA7\u7684\u4EFB\u52A1\u5C31\u53EF\u80FD\u5F97\u4E0D\u5230\u6267\u884C\uFF0C\u6240\u4EE5\u5FC5\u987B\u5BF9\u4EFB\u52A1\u8FDB\u884C\u9694\u79BB\u6267\u884C\u3002\u4F7F\u7528\u4E0D\u540C\u7684\u7EBF\u7A0B\u6C60\u5904\u7406\u4E0D\u540C\u7684\u4EFB\u52A1\uFF0C\u6216\u8005\u4E0D\u540C\u7684\u7EBF\u7A0B\u6C60\u5904\u7406\u4E0D\u540C\u4F18\u5148\u7EA7\u7684\u4EFB\u52A1\uFF0C\u5982\u679C\u4EFB\u52A1\u7C7B\u578B\u975E\u5E38\u5C11\uFF0C\u5EFA\u8BAE\u7528\u4EFB\u52A1\u7C7B\u578B\u6765\u9694\u79BB\uFF0C\u5982\u679C\u4EFB\u52A1\u7C7B\u578B\u975E\u5E38\u591A\uFF0C\u6BD4\u5982\u51E0\u5341\u4E2A\uFF0C\u5EFA\u8BAE\u91C7\u7528\u4F18\u5148\u7EA7\u7684\u65B9\u5F0F\u6765\u9694\u79BB\u3002</p><p>\u4EFB\u52A1\u6C60\u7684\u91CD\u8BD5\u7B56\u7565\u3002\u6839\u636E\u4E0D\u540C\u7684\u4EFB\u52A1\u7C7B\u578B\u8BBE\u7F6E\u4E0D\u540C\u7684\u91CD\u8BD5\u7B56\u7565\uFF0C\u6709\u7684\u4EFB\u52A1\u5BF9\u5B9E\u65F6\u6027\u8981\u6C42\u9AD8\uFF0C\u90A3\u4E48\u6BCF\u6B21\u7684\u91CD\u8BD5\u95F4\u9694\u5C31\u4F1A\u975E\u5E38\u77ED\uFF0C\u5982\u679C\u5BF9\u5B9E\u65F6\u6027\u8981\u6C42\u4E0D\u9AD8\uFF0C\u53EF\u4EE5\u91C7\u7528\u9ED8\u8BA4\u7684\u91CD\u8BD5\u7B56\u7565\uFF0C\u91CD\u8BD5\u95F4\u9694\u968F\u7740\u6B21\u6570\u7684\u589E\u52A0\uFF0C\u65F6\u95F4\u4E0D\u65AD\u589E\u957F\uFF0C\u6BD4\u5982\u95F4\u9694\u51E0\u79D2\u3001\u51E0\u5206\u949F\u5230\u51E0\u5C0F\u65F6\u3002\u6BCF\u4E2A\u4EFB\u52A1\u7C7B\u578B\u53EF\u4EE5\u8BBE\u7F6E\u6267\u884C\u8BE5\u4EFB\u52A1\u7C7B\u578B\u7EBF\u7A0B\u6C60\u7684\u6700\u5C0F\u548C\u6700\u5927\u7EBF\u7A0B\u6570\u3001\u6700\u5927\u91CD\u8BD5\u6B21\u6570\u3002</p><p>\u4F7F\u7528\u4EFB\u52A1\u6C60\u7684\u6CE8\u610F\u4E8B\u9879\u3002\u4EFB\u52A1\u5FC5\u987B\u65E0\u72B6\u6001\uFF1A\u4EFB\u52A1\u4E0D\u80FD\u5728\u6267\u884C\u4EFB\u52A1\u7684\u673A\u5668\u4E2D\u4FDD\u5B58\u6570\u636E\uFF0C\u6BD4\u5982\u67D0\u4E2A\u4EFB\u52A1\u662F\u5904\u7406\u4E0A\u4F20\u7684\u6587\u4EF6\uFF0C\u4EFB\u52A1\u7684\u5C5E\u6027\u91CC\u6709\u6587\u4EF6\u7684\u4E0A\u4F20\u8DEF\u5F84\uFF0C\u5982\u679C\u6587\u4EF6\u4E0A\u4F20\u5230\u673A\u5668 1\uFF0C\u673A\u5668 2 \u83B7\u53D6\u5230\u4E86\u4EFB\u52A1\u5219\u4F1A\u5904\u7406\u5931\u8D25\uFF0C\u6240\u4EE5\u4E0A\u4F20\u7684\u6587\u4EF6\u5FC5\u987B\u5B58\u5728\u5176\u4ED6\u7684\u96C6\u7FA4\u91CC\uFF0C\u6BD4\u5982 OSS \u6216 SFTP\u3002</p><p>\u5F02\u6B65\u4EFB\u52A1\u7684\u5C5E\u6027\u3002\u5305\u62EC\u4EFB\u52A1\u540D\u79F0\u3001\u4E0B\u6B21\u6267\u884C\u65F6\u95F4\u3001\u5DF2\u6267\u884C\u6B21\u6570\u3001\u4EFB\u52A1\u7C7B\u578B\u3001\u4EFB\u52A1\u4F18\u5148\u7EA7\u548C\u6267\u884C\u65F6\u7684\u62A5\u9519\u4FE1\u606F\uFF08\u7528\u4E8E\u5FEB\u901F\u5B9A\u4F4D\u95EE\u9898\uFF09\u3002</p><h2 id="_11-5-\u672C\u7AE0\u5C0F\u7ED3" tabindex="-1"><a class="header-anchor" href="#_11-5-\u672C\u7AE0\u5C0F\u7ED3" aria-hidden="true">#</a> 11.5 \u672C\u7AE0\u5C0F\u7ED3</h2><p>\u672C\u7AE0\u4ECB\u7ECD\u4E86\u4F7F\u7528\u751F\u4EA7\u8005\u548C\u6D88\u8D39\u8005\u6A21\u5F0F\u8FDB\u884C\u5E76\u53D1\u7F16\u7A0B\u3001\u7EBF\u4E0A\u95EE\u9898\u6392\u67E5\u624B\u6BB5\u548C\u6027\u80FD\u6D4B\u8BD5\u5B9E\u6218\uFF0C\u4EE5\u53CA\u5F02\u6B65\u4EFB\u52A1\u6C60\u7684\u8BBE\u8BA1\u3002\u5E76\u53D1\u7F16\u7A0B\u7684\u5B9E\u6218\u9700\u8981\u5927\u5BB6\u5E73\u65F6\u591A\u4F7F\u7528\u548C\u6D4B\u8BD5\uFF0C\u624D\u80FD\u5728\u9879\u76EE\u4E2D\u53D1\u6325\u4F5C\u7528\u3002</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="footnote1" class="footnote-item"><p>Yuna \u53D6\u540D\u81EA\u6211\u975E\u5E38\u559C\u6B22\u7684\u4E00\u6B3E RPG \u6E38\u620F\u300A\u6700\u7EC8\u5E7B\u60F3\u300B\u4E2D\u5973\u4E3B\u89D2\u7684\u540D\u5B57\u3002 <a href="#footnote-ref1" class="footnote-backref">\u21A9\uFE0E</a></p></li></ol></section>',65),l=[o];function u(d,r){return s(),a("div",null,l)}var m=n(i,[["render",u],["__file","\u7B2C11\u7AE0Java\u5E76\u53D1\u7F16\u7A0B\u5B9E\u8DF5.html.vue"]]);export{m as default};
